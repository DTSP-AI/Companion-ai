"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livekit";
exports.ids = ["vendor-chunks/@livekit"];
exports.modules = {

/***/ "(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css":
/*!************************************************************************!*\
  !*** ./node_modules/@livekit/components-styles/dist/general/index.css ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"26bee9cff550\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1zdHlsZXMvZGlzdC9nZW5lcmFsL2luZGV4LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWNvbXBhbmlvbi8uL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXN0eWxlcy9kaXN0L2dlbmVyYWwvaW5kZXguY3NzPzkyZmUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIyNmJlZTljZmY1NTBcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-core/dist/index.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@livekit/components-core/dist/index.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataTopic: () => (/* binding */ DataTopic),\n/* harmony export */   GRID_LAYOUTS: () => (/* binding */ GRID_LAYOUTS),\n/* harmony export */   PIN_DEFAULT_STATE: () => (/* binding */ PIN_DEFAULT_STATE),\n/* harmony export */   WIDGET_DEFAULT_STATE: () => (/* binding */ WIDGET_DEFAULT_STATE),\n/* harmony export */   activeSpeakerObserver: () => (/* binding */ activeSpeakerObserver),\n/* harmony export */   addMediaTimestampToTranscription: () => (/* binding */ addMediaTimestampToTranscription),\n/* harmony export */   allParticipantEvents: () => (/* binding */ allParticipantEvents),\n/* harmony export */   allParticipantRoomEvents: () => (/* binding */ allParticipantRoomEvents),\n/* harmony export */   allRemoteParticipantEvents: () => (/* binding */ allRemoteParticipantEvents),\n/* harmony export */   allRemoteParticipantRoomEvents: () => (/* binding */ allRemoteParticipantRoomEvents),\n/* harmony export */   attachIfSubscribed: () => (/* binding */ attachIfSubscribed),\n/* harmony export */   computeMenuPosition: () => (/* binding */ computeMenuPosition),\n/* harmony export */   connectedParticipantObserver: () => (/* binding */ connectedParticipantObserver),\n/* harmony export */   connectedParticipantsObserver: () => (/* binding */ connectedParticipantsObserver),\n/* harmony export */   connectionStateObserver: () => (/* binding */ connectionStateObserver),\n/* harmony export */   createActiveDeviceObservable: () => (/* binding */ createActiveDeviceObservable),\n/* harmony export */   createConnectionQualityObserver: () => (/* binding */ createConnectionQualityObserver),\n/* harmony export */   createDataObserver: () => (/* binding */ createDataObserver),\n/* harmony export */   createDefaultGrammar: () => (/* binding */ createDefaultGrammar),\n/* harmony export */   createEmailRegExp: () => (/* binding */ createEmailRegExp),\n/* harmony export */   createInteractingObservable: () => (/* binding */ createInteractingObservable),\n/* harmony export */   createIsSpeakingObserver: () => (/* binding */ createIsSpeakingObserver),\n/* harmony export */   createMediaDeviceObserver: () => (/* binding */ createMediaDeviceObserver),\n/* harmony export */   createTrackObserver: () => (/* binding */ createTrackObserver),\n/* harmony export */   createUrlRegExp: () => (/* binding */ createUrlRegExp),\n/* harmony export */   cssPrefix: () => (/* binding */ cssPrefix),\n/* harmony export */   dedupeSegments: () => (/* binding */ dedupeSegments),\n/* harmony export */   defaultUserChoices: () => (/* binding */ defaultUserChoices),\n/* harmony export */   didActiveSegmentsChange: () => (/* binding */ didActiveSegmentsChange),\n/* harmony export */   encryptionStatusObservable: () => (/* binding */ encryptionStatusObservable),\n/* harmony export */   getActiveTranscriptionSegments: () => (/* binding */ getActiveTranscriptionSegments),\n/* harmony export */   getScrollBarWidth: () => (/* binding */ getScrollBarWidth),\n/* harmony export */   getTrackByIdentifier: () => (/* binding */ getTrackByIdentifier),\n/* harmony export */   getTrackReferenceId: () => (/* binding */ getTrackReferenceId),\n/* harmony export */   getTrackReferenceSource: () => (/* binding */ getTrackReferenceSource),\n/* harmony export */   isEqualTrackRef: () => (/* binding */ isEqualTrackRef),\n/* harmony export */   isLocal: () => (/* binding */ isLocal),\n/* harmony export */   isMobileBrowser: () => (/* binding */ isMobileBrowser),\n/* harmony export */   isParticipantTrackReferencePinned: () => (/* binding */ isParticipantTrackReferencePinned),\n/* harmony export */   isPlaceholderReplacement: () => (/* binding */ isPlaceholderReplacement),\n/* harmony export */   isRemote: () => (/* binding */ isRemote),\n/* harmony export */   isSourceWitOptions: () => (/* binding */ isSourceWitOptions),\n/* harmony export */   isSourcesWithOptions: () => (/* binding */ isSourcesWithOptions),\n/* harmony export */   isTrackReference: () => (/* binding */ isTrackReference),\n/* harmony export */   isTrackReferencePinned: () => (/* binding */ isTrackReferencePinned),\n/* harmony export */   isTrackReferencePlaceholder: () => (/* binding */ isTrackReferencePlaceholder),\n/* harmony export */   isWeb: () => (/* binding */ isWeb),\n/* harmony export */   loadUserChoices: () => (/* binding */ loadUserChoices),\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   mutedObserver: () => (/* binding */ mutedObserver),\n/* harmony export */   observeParticipantEvents: () => (/* binding */ observeParticipantEvents),\n/* harmony export */   observeParticipantMedia: () => (/* binding */ observeParticipantMedia),\n/* harmony export */   observeRoomEvents: () => (/* binding */ observeRoomEvents),\n/* harmony export */   observeTrackEvents: () => (/* binding */ observeTrackEvents),\n/* harmony export */   participantAttributesObserver: () => (/* binding */ participantAttributesObserver),\n/* harmony export */   participantByIdentifierObserver: () => (/* binding */ participantByIdentifierObserver),\n/* harmony export */   participantEventSelector: () => (/* binding */ participantEventSelector),\n/* harmony export */   participantInfoObserver: () => (/* binding */ participantInfoObserver),\n/* harmony export */   participantPermissionObserver: () => (/* binding */ participantPermissionObserver),\n/* harmony export */   participantTrackEvents: () => (/* binding */ participantTrackEvents),\n/* harmony export */   participantTracksObservable: () => (/* binding */ participantTracksObservable),\n/* harmony export */   recordingStatusObservable: () => (/* binding */ recordingStatusObservable),\n/* harmony export */   roomAudioPlaybackAllowedObservable: () => (/* binding */ roomAudioPlaybackAllowedObservable),\n/* harmony export */   roomEventSelector: () => (/* binding */ roomEventSelector),\n/* harmony export */   roomInfoObserver: () => (/* binding */ roomInfoObserver),\n/* harmony export */   roomObserver: () => (/* binding */ roomObserver),\n/* harmony export */   roomVideoPlaybackAllowedObservable: () => (/* binding */ roomVideoPlaybackAllowedObservable),\n/* harmony export */   saveUserChoices: () => (/* binding */ saveUserChoices),\n/* harmony export */   screenShareObserver: () => (/* binding */ screenShareObserver),\n/* harmony export */   selectGridLayout: () => (/* binding */ selectGridLayout),\n/* harmony export */   sendMessage: () => (/* binding */ sendMessage),\n/* harmony export */   setDifference: () => (/* binding */ setDifference),\n/* harmony export */   setLogExtension: () => (/* binding */ setLogExtension),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel),\n/* harmony export */   setupChat: () => (/* binding */ setupChat),\n/* harmony export */   setupChatToggle: () => (/* binding */ setupChatToggle),\n/* harmony export */   setupClearPinButton: () => (/* binding */ setupClearPinButton),\n/* harmony export */   setupConnectionQualityIndicator: () => (/* binding */ setupConnectionQualityIndicator),\n/* harmony export */   setupDataMessageHandler: () => (/* binding */ setupDataMessageHandler),\n/* harmony export */   setupDeviceSelector: () => (/* binding */ setupDeviceSelector),\n/* harmony export */   setupDisconnectButton: () => (/* binding */ setupDisconnectButton),\n/* harmony export */   setupFocusToggle: () => (/* binding */ setupFocusToggle),\n/* harmony export */   setupLiveKitRoom: () => (/* binding */ setupLiveKitRoom),\n/* harmony export */   setupManualToggle: () => (/* binding */ setupManualToggle),\n/* harmony export */   setupMediaToggle: () => (/* binding */ setupMediaToggle),\n/* harmony export */   setupMediaTrack: () => (/* binding */ setupMediaTrack),\n/* harmony export */   setupParticipantName: () => (/* binding */ setupParticipantName),\n/* harmony export */   setupParticipantTile: () => (/* binding */ setupParticipantTile),\n/* harmony export */   setupStartAudio: () => (/* binding */ setupStartAudio),\n/* harmony export */   setupStartVideo: () => (/* binding */ setupStartVideo),\n/* harmony export */   setupTrackMutedIndicator: () => (/* binding */ setupTrackMutedIndicator),\n/* harmony export */   sortParticipants: () => (/* binding */ sortParticipants),\n/* harmony export */   sortTrackReferences: () => (/* binding */ sortTrackReferences),\n/* harmony export */   supportsScreenSharing: () => (/* binding */ supportsScreenSharing),\n/* harmony export */   tokenize: () => (/* binding */ tokenize),\n/* harmony export */   trackEventSelector: () => (/* binding */ trackEventSelector),\n/* harmony export */   trackObservable: () => (/* binding */ trackObservable),\n/* harmony export */   trackReferencesObservable: () => (/* binding */ trackReferencesObservable),\n/* harmony export */   trackSyncTimeObserver: () => (/* binding */ trackSyncTimeObserver),\n/* harmony export */   trackTranscriptionObserver: () => (/* binding */ trackTranscriptionObserver),\n/* harmony export */   updatePages: () => (/* binding */ updatePages),\n/* harmony export */   wasClickOutside: () => (/* binding */ wasClickOutside)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @floating-ui/dom */ \"(ssr)/./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! loglevel */ \"(ssr)/./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/Subject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/finalize.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/filter.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/timeout.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/skipUntil.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/constants.ts\nvar cssPrefix = \"lk\";\n\n// src/utils.ts\n\n\n// src/track-reference/track-reference.types.ts\nfunction isTrackReference(trackReference) {\n  if (typeof trackReference === \"undefined\") {\n    return false;\n  }\n  return isTrackReferenceSubscribed(trackReference) || isTrackReferencePublished(trackReference);\n}\nfunction isTrackReferenceSubscribed(trackReference) {\n  var _a;\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"track\") && typeof ((_a = trackReference.publication) == null ? void 0 : _a.track) !== \"undefined\";\n}\nfunction isTrackReferencePublished(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"publication\") && typeof trackReference.publication !== \"undefined\";\n}\nfunction isTrackReferencePlaceholder(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && typeof trackReference.publication === \"undefined\";\n}\n\n// src/track-reference/track-reference.utils.ts\nfunction getTrackReferenceId(trackReference) {\n  if (typeof trackReference === \"string\" || typeof trackReference === \"number\") {\n    return `${trackReference}`;\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.source}_placeholder`;\n  } else if (isTrackReference(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.publication.source}_${trackReference.publication.trackSid}`;\n  } else {\n    throw new Error(`Can't generate a id for the given track reference: ${trackReference}`);\n  }\n}\nfunction getTrackReferenceSource(trackReference) {\n  if (isTrackReference(trackReference)) {\n    return trackReference.publication.source;\n  } else {\n    return trackReference.source;\n  }\n}\nfunction isEqualTrackRef(a, b) {\n  if (a === void 0 || b === void 0) {\n    return false;\n  }\n  if (isTrackReference(a) && isTrackReference(b)) {\n    return a.publication.trackSid === b.publication.trackSid;\n  } else {\n    return getTrackReferenceId(a) === getTrackReferenceId(b);\n  }\n}\nfunction isTrackReferencePinned(trackReference, pinState) {\n  if (typeof pinState === \"undefined\") {\n    return false;\n  }\n  if (isTrackReference(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReference(pinnedTrackReference) && pinnedTrackReference.publication.trackSid === trackReference.publication.trackSid\n    );\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReferencePlaceholder(pinnedTrackReference) && pinnedTrackReference.source === trackReference.source\n    );\n  } else {\n    return false;\n  }\n}\nfunction isPlaceholderReplacement(currentTrackRef, nextTrackRef) {\n  return isTrackReferencePlaceholder(currentTrackRef) && isTrackReference(nextTrackRef) && nextTrackRef.participant.identity === currentTrackRef.participant.identity && nextTrackRef.source === currentTrackRef.source;\n}\n\n// src/utils.ts\nfunction isLocal(p) {\n  return p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant;\n}\nfunction isRemote(p) {\n  return p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.RemoteParticipant;\n}\nvar attachIfSubscribed = (publication, element) => {\n  if (!publication) return;\n  const { isSubscribed, track } = publication;\n  if (element && track) {\n    if (isSubscribed) {\n      track.attach(element);\n    } else {\n      track.detach(element);\n    }\n  }\n};\nfunction isParticipantTrackReferencePinned(trackRef, pinState) {\n  if (pinState === void 0) {\n    return false;\n  }\n  return pinState.some((pinnedTrackRef) => isEqualTrackRef(pinnedTrackRef, trackRef));\n}\nfunction getScrollBarWidth() {\n  const inner = document.createElement(\"p\");\n  inner.style.width = \"100%\";\n  inner.style.height = \"200px\";\n  const outer = document.createElement(\"div\");\n  outer.style.position = \"absolute\";\n  outer.style.top = \"0px\";\n  outer.style.left = \"0px\";\n  outer.style.visibility = \"hidden\";\n  outer.style.width = \"200px\";\n  outer.style.height = \"150px\";\n  outer.style.overflow = \"hidden\";\n  outer.appendChild(inner);\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = \"scroll\";\n  let w2 = inner.offsetWidth;\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n  document.body.removeChild(outer);\n  const scrollBarWidth = w1 - w2;\n  return scrollBarWidth;\n}\n\n// src/helper/detectMobileBrowser.ts\nfunction isWeb() {\n  return typeof document !== \"undefined\";\n}\nfunction isMobileBrowser() {\n  return isWeb() ? /Mobi/i.test(window.navigator.userAgent) : false;\n}\n\n// src/helper/url-regex.ts\nfunction createUrlRegExp(options) {\n  options = __spreadValues({}, options);\n  const protocol = `(?:(?:[a-z]+:)?//)?`;\n  const auth = \"(?:\\\\S+(?::\\\\S*)?@)?\";\n  const ip = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source;\n  const host = \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\";\n  const domain = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\";\n  const tld = `(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?`;\n  const port = \"(?::\\\\d{2,5})?\";\n  const path = '(?:[/?#][^\\\\s\"]*)?';\n  const regex2 = `(?:${protocol}|www\\\\.)${auth}(?:localhost|${ip}|${host}${domain}${tld})${port}${path}`;\n  return options.exact ? new RegExp(`(?:^${regex2}$)`, \"i\") : new RegExp(regex2, \"ig\");\n}\n\n// src/helper/emailRegex.ts\nvar regex = \"[^\\\\.\\\\s@:](?:[^\\\\s@:]*[^\\\\s@:\\\\.])?@[^\\\\.\\\\s@]+(?:\\\\.[^\\\\.\\\\s@]+)*\";\nfunction createEmailRegExp({ exact } = {}) {\n  return exact ? new RegExp(`^${regex}$`) : new RegExp(regex, \"g\");\n}\n\n// src/helper/floating-menu.ts\n\nfunction computeMenuPosition(button, menu) {\n  return __async(this, null, function* () {\n    const { x, y } = yield (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.computePosition)(button, menu, {\n      placement: \"top\",\n      middleware: [(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.offset)(6), (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.flip)(), (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.shift)({ padding: 5 })]\n    });\n    return { x, y };\n  });\n}\nfunction wasClickOutside(insideElement, event) {\n  const isOutside = !insideElement.contains(event.target);\n  return isOutside;\n}\n\n// src/helper/tokenizer.ts\nvar createDefaultGrammar = () => {\n  return {\n    email: createEmailRegExp(),\n    url: createUrlRegExp({})\n  };\n};\nfunction tokenize(input, grammar) {\n  const matches = Object.entries(grammar).map(\n    ([type, rx], weight) => Array.from(input.matchAll(rx)).map(({ index, 0: content }) => ({\n      type,\n      weight,\n      content,\n      index: index != null ? index : 0\n    }))\n  ).flat().sort((a, b) => {\n    const d = a.index - b.index;\n    return d !== 0 ? d : a.weight - b.weight;\n  }).filter(({ index }, i, arr) => {\n    if (i === 0) return true;\n    const prev = arr[i - 1];\n    return prev.index + prev.content.length <= index;\n  });\n  const tokens = [];\n  let pos = 0;\n  for (const { type, content, index } of matches) {\n    if (index > pos) tokens.push(input.substring(pos, index));\n    tokens.push({ type, content });\n    pos = index + content.length;\n  }\n  if (input.length > pos) tokens.push(input.substring(pos));\n  return tokens;\n}\n\n// src/helper/eventGroups.ts\n\nvar allRemoteParticipantRoomEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantRoomEvents = [\n  ...allRemoteParticipantRoomEvents,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished\n];\nvar participantTrackEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n];\nvar allRemoteParticipantEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantEvents = [\n  ...allRemoteParticipantEvents,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n];\n\n// src/logger.ts\n\n\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_2__.getLogger(\"lk-components-js\");\nlog.setDefaultLevel(\"WARN\");\nfunction setLogLevel(level, options = {}) {\n  var _a;\n  log.setLevel(level);\n  (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel)((_a = options.liveKitClientLogLevel) != null ? _a : level);\n}\nfunction setLogExtension(extension, options = {}) {\n  var _a;\n  const originalFactory = log.methodFactory;\n  log.methodFactory = (methodName, configLevel, loggerName) => {\n    const rawMethod = originalFactory(methodName, configLevel, loggerName);\n    const logLevel = livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel[methodName];\n    const needLog = logLevel >= configLevel && logLevel < livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silent;\n    return (msg, context) => {\n      if (context) rawMethod(msg, context);\n      else rawMethod(msg);\n      if (needLog) {\n        extension(logLevel, msg, context);\n      }\n    };\n  };\n  log.setLevel(log.getLevel());\n  (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogExtension)((_a = options.liveKitClientLogExtension) != null ? _a : extension);\n}\n\n// src/helper/grid-layouts.ts\nvar GRID_LAYOUTS = [\n  {\n    columns: 1,\n    rows: 1\n  },\n  {\n    columns: 1,\n    rows: 2,\n    orientation: \"portrait\"\n  },\n  {\n    columns: 2,\n    rows: 1,\n    orientation: \"landscape\"\n  },\n  {\n    columns: 2,\n    rows: 2,\n    minWidth: 560\n  },\n  {\n    columns: 3,\n    rows: 3,\n    minWidth: 700\n  },\n  {\n    columns: 4,\n    rows: 4,\n    minWidth: 960\n  },\n  {\n    columns: 5,\n    rows: 5,\n    minWidth: 1100\n  }\n];\nfunction selectGridLayout(layoutDefinitions, participantCount, width, height) {\n  if (layoutDefinitions.length < 1) {\n    throw new Error(\"At least one grid layout definition must be provided.\");\n  }\n  const layouts = expandAndSortLayoutDefinitions(layoutDefinitions);\n  if (width <= 0 || height <= 0) {\n    return layouts[0];\n  }\n  let currentLayoutIndex = 0;\n  const containerOrientation = width / height > 1 ? \"landscape\" : \"portrait\";\n  let layout = layouts.find((layout_, index, allLayouts) => {\n    currentLayoutIndex = index;\n    const isBiggerLayoutAvailable = allLayouts.findIndex((l, i) => {\n      const fitsOrientation = !l.orientation || l.orientation === containerOrientation;\n      const layoutIsBiggerThanCurrent = i > index;\n      const layoutFitsSameAmountOfParticipants = l.maxTiles === layout_.maxTiles;\n      return layoutIsBiggerThanCurrent && layoutFitsSameAmountOfParticipants && fitsOrientation;\n    }) !== -1;\n    return layout_.maxTiles >= participantCount && !isBiggerLayoutAvailable;\n  });\n  if (layout === void 0) {\n    layout = layouts[layouts.length - 1];\n    if (layout) {\n      log.warn(\n        `No layout found for: participantCount: ${participantCount}, width/height: ${width}/${height} fallback to biggest available layout (${layout}).`\n      );\n    } else {\n      throw new Error(`No layout or fallback layout found.`);\n    }\n  }\n  if (width < layout.minWidth || height < layout.minHeight) {\n    if (currentLayoutIndex > 0) {\n      const smallerLayout = layouts[currentLayoutIndex - 1];\n      layout = selectGridLayout(\n        layouts.slice(0, currentLayoutIndex),\n        smallerLayout.maxTiles,\n        width,\n        height\n      );\n    }\n  }\n  return layout;\n}\nfunction expandAndSortLayoutDefinitions(layouts) {\n  return [...layouts].map((layout) => {\n    var _a, _b;\n    return {\n      name: `${layout.columns}x${layout.rows}`,\n      columns: layout.columns,\n      rows: layout.rows,\n      maxTiles: layout.columns * layout.rows,\n      minWidth: (_a = layout.minWidth) != null ? _a : 0,\n      minHeight: (_b = layout.minHeight) != null ? _b : 0,\n      orientation: layout.orientation\n    };\n  }).sort((a, b) => {\n    if (a.maxTiles !== b.maxTiles) {\n      return a.maxTiles - b.maxTiles;\n    } else if (a.minWidth !== 0 || b.minWidth !== 0) {\n      return a.minWidth - b.minWidth;\n    } else if (a.minHeight !== 0 || b.minHeight !== 0) {\n      return a.minHeight - b.minHeight;\n    } else {\n      return 0;\n    }\n  });\n}\n\n// src/helper/set-helper.ts\nfunction setDifference(setA, setB) {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\n\n// src/helper/featureDetection.ts\nfunction supportsScreenSharing() {\n  return typeof navigator !== \"undefined\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\n\n// src/helper/transcriptions.ts\nfunction getActiveTranscriptionSegments(segments, syncTimes, maxAge = 0) {\n  return segments.filter((segment) => {\n    var _a;\n    const hasTrackSync = !!syncTimes.rtpTimestamp;\n    const currentTrackTime = (_a = syncTimes.rtpTimestamp) != null ? _a : performance.timeOrigin + performance.now();\n    const displayStartTime = hasTrackSync ? Math.max(segment.receivedAtMediaTimestamp, segment.startTime) : segment.receivedAt;\n    const segmentDuration = maxAge + segment.endTime - segment.startTime;\n    return currentTrackTime >= displayStartTime && currentTrackTime <= displayStartTime + segmentDuration;\n  });\n}\nfunction addMediaTimestampToTranscription(segment, timestamps) {\n  var _a;\n  return __spreadProps(__spreadValues({}, segment), {\n    receivedAtMediaTimestamp: (_a = timestamps.rtpTimestamp) != null ? _a : 0,\n    receivedAt: timestamps.timestamp\n  });\n}\nfunction dedupeSegments(prevSegments, newSegments, windowSize) {\n  return [...prevSegments, ...newSegments].reduceRight((acc, segment) => {\n    if (!acc.find((val) => val.id === segment.id)) {\n      acc.unshift(segment);\n    }\n    return acc;\n  }, []).slice(0 - windowSize);\n}\nfunction didActiveSegmentsChange(prevActive, newActive) {\n  if (newActive.length !== prevActive.length) {\n    return true;\n  }\n  return !newActive.every((newSegment) => {\n    return prevActive.find(\n      (prevSegment) => prevSegment.id === newSegment.id && prevSegment.text === newSegment.text && prevSegment.final === newSegment.final && prevSegment.language === newSegment.language && prevSegment.startTime === newSegment.startTime && prevSegment.endTime === newSegment.endTime\n    );\n  });\n}\n\n// src/types.ts\nvar PIN_DEFAULT_STATE = [];\nvar WIDGET_DEFAULT_STATE = {\n  showChat: false,\n  unreadMessages: 0,\n  showSettings: false\n};\nfunction isSourceWitOptions(source) {\n  return typeof source === \"object\";\n}\nfunction isSourcesWithOptions(sources) {\n  return Array.isArray(sources) && sources.filter(isSourceWitOptions).length > 0;\n}\n\n// src/sorting/sort-track-bundles.ts\n\n\n// src/sorting/base-sort-functions.ts\n\nfunction sortParticipantsByAudioLevel(a, b) {\n  return b.audioLevel - a.audioLevel;\n}\nfunction sortParticipantsByIsSpeaking(a, b) {\n  if (a.isSpeaking === b.isSpeaking) {\n    return 0;\n  } else {\n    return a.isSpeaking ? -1 : 1;\n  }\n}\nfunction sortParticipantsByLastSpokenAT(a, b) {\n  var _a, _b, _c, _d;\n  if (a.lastSpokeAt !== void 0 || b.lastSpokeAt !== void 0) {\n    return ((_b = (_a = b.lastSpokeAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = a.lastSpokeAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n  } else {\n    return 0;\n  }\n}\nfunction sortParticipantsByJoinedAt(a, b) {\n  var _a, _b, _c, _d;\n  return ((_b = (_a = a.joinedAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = b.joinedAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n}\nfunction sortTrackReferencesByType(a, b) {\n  if (isTrackReference(a)) {\n    if (isTrackReference(b)) {\n      return 0;\n    } else {\n      return -1;\n    }\n  } else if (isTrackReference(b)) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\nfunction sortTrackRefsByIsCameraEnabled(a, b) {\n  const aVideo = a.participant.isCameraEnabled;\n  const bVideo = b.participant.isCameraEnabled;\n  if (aVideo !== bVideo) {\n    if (aVideo) {\n      return -1;\n    } else {\n      return 1;\n    }\n  } else {\n    return 0;\n  }\n}\n\n// src/sorting/sort-track-bundles.ts\nfunction sortTrackReferences(tracks) {\n  const localTracks = [];\n  const screenShareTracks = [];\n  const cameraTracks = [];\n  const undefinedTracks = [];\n  tracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal && trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera) {\n      localTracks.push(trackRef);\n    } else if (trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare) {\n      screenShareTracks.push(trackRef);\n    } else if (trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera) {\n      cameraTracks.push(trackRef);\n    } else {\n      undefinedTracks.push(trackRef);\n    }\n  });\n  const sortedScreenShareTracks = sortScreenShareTracks(screenShareTracks);\n  const sortedCameraTracks = sortCameraTracks(cameraTracks);\n  return [...localTracks, ...sortedScreenShareTracks, ...sortedCameraTracks, ...undefinedTracks];\n}\nfunction sortScreenShareTracks(screenShareTracks) {\n  const localScreenShares = [];\n  const remoteScreenShares = [];\n  screenShareTracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localScreenShares.push(trackRef);\n    } else {\n      remoteScreenShares.push(trackRef);\n    }\n  });\n  localScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  remoteScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  const sortedScreenShareTrackRefs = [...remoteScreenShares, ...localScreenShares];\n  return sortedScreenShareTrackRefs;\n}\nfunction sortCameraTracks(cameraTrackReferences) {\n  const localCameraTracks = [];\n  const remoteCameraTracks = [];\n  cameraTrackReferences.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localCameraTracks.push(trackRef);\n    } else {\n      remoteCameraTracks.push(trackRef);\n    }\n  });\n  remoteCameraTracks.sort((a, b) => {\n    if (a.participant.isSpeaking && b.participant.isSpeaking) {\n      return sortParticipantsByAudioLevel(a.participant, b.participant);\n    }\n    if (a.participant.isSpeaking !== b.participant.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a.participant, b.participant);\n    }\n    if (a.participant.lastSpokeAt !== b.participant.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a.participant, b.participant);\n    }\n    if (isTrackReference(a) !== isTrackReference(b)) {\n      return sortTrackReferencesByType(a, b);\n    }\n    if (a.participant.isCameraEnabled !== b.participant.isCameraEnabled) {\n      return sortTrackRefsByIsCameraEnabled(a, b);\n    }\n    return sortParticipantsByJoinedAt(a.participant, b.participant);\n  });\n  return [...localCameraTracks, ...remoteCameraTracks];\n}\n\n// src/sorting/sort-participants.ts\n\nfunction sortParticipants(participants) {\n  const sortedParticipants = [...participants];\n  sortedParticipants.sort((a, b) => {\n    if (a.isSpeaking && b.isSpeaking) {\n      return sortParticipantsByAudioLevel(a, b);\n    }\n    if (a.isSpeaking !== b.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a, b);\n    }\n    if (a.lastSpokeAt !== b.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a, b);\n    }\n    const aVideo = a.videoTrackPublications.size > 0;\n    const bVideo = b.videoTrackPublications.size > 0;\n    if (aVideo !== bVideo) {\n      if (aVideo) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n    return sortParticipantsByJoinedAt(a, b);\n  });\n  const localParticipant = sortedParticipants.find((p) => p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant);\n  if (localParticipant) {\n    const localIdx = sortedParticipants.indexOf(localParticipant);\n    if (localIdx >= 0) {\n      sortedParticipants.splice(localIdx, 1);\n      if (sortedParticipants.length > 0) {\n        sortedParticipants.splice(0, 0, localParticipant);\n      } else {\n        sortedParticipants.push(localParticipant);\n      }\n    }\n  }\n  return sortedParticipants;\n}\n\n// src/helper/array-helper.ts\nfunction chunk(input, size) {\n  return input.reduce(\n    (arr, item, idx) => {\n      return idx % size === 0 ? [...arr, [item]] : [...arr.slice(0, -1), [...arr.slice(-1)[0], item]];\n    },\n    []\n  );\n}\nfunction zip(a1, a2) {\n  const resultLength = Math.max(a1.length, a2.length);\n  return new Array(resultLength).fill([]).map((_val, idx) => [a1[idx], a2[idx]]);\n}\nfunction differenceBy(a1, a2, by) {\n  return a1.filter((c) => !a2.map((v) => by(v)).includes(by(c)));\n}\n\n// src/track-reference/test-utils.ts\n\nfunction flatTrackReferenceArray(list) {\n  return list.map((item) => {\n    if (typeof item === \"string\" || typeof item === \"number\") {\n      return `${item}`;\n    } else {\n      return getTrackReferenceId(item);\n    }\n  });\n}\n\n// src/sorting/tile-array-update.ts\nfunction visualPageChange(state, next) {\n  return {\n    dropped: differenceBy(state, next, getTrackReferenceId),\n    added: differenceBy(next, state, getTrackReferenceId)\n  };\n}\nfunction listNeedsUpdating(changes) {\n  return changes.added.length !== 0 || changes.dropped.length !== 0;\n}\nfunction findIndex(trackReference, trackReferences) {\n  const indexToReplace = trackReferences.findIndex(\n    (trackReference_) => getTrackReferenceId(trackReference_) === getTrackReferenceId(trackReference)\n  );\n  if (indexToReplace === -1) {\n    throw new Error(\n      `Element not part of the array: ${getTrackReferenceId(\n        trackReference\n      )} not in ${flatTrackReferenceArray(trackReferences)}`\n    );\n  }\n  return indexToReplace;\n}\nfunction swapItems(moveForward, moveBack, trackReferences) {\n  const indexToReplace = findIndex(moveForward, trackReferences);\n  const indexReplaceWith = findIndex(moveBack, trackReferences);\n  trackReferences.splice(indexToReplace, 1, moveBack);\n  trackReferences.splice(indexReplaceWith, 1, moveForward);\n  return trackReferences;\n}\nfunction dropItem(itemToDrop, list) {\n  const indexOfElementToDrop = findIndex(itemToDrop, list);\n  list.splice(indexOfElementToDrop, 1);\n  return list;\n}\nfunction addItem(itemToAdd, list) {\n  return [...list, itemToAdd];\n}\nfunction divideIntoPages(list, maxElementsOnPage) {\n  const pages = chunk(list, maxElementsOnPage);\n  return pages;\n}\nfunction updatePages(currentList, nextList, maxItemsOnPage) {\n  let updatedList = refreshList(currentList, nextList);\n  if (updatedList.length < nextList.length) {\n    const addedItems = differenceBy(nextList, updatedList, getTrackReferenceId);\n    updatedList = [...updatedList, ...addedItems];\n  }\n  const currentPages = divideIntoPages(updatedList, maxItemsOnPage);\n  const nextPages = divideIntoPages(nextList, maxItemsOnPage);\n  zip(currentPages, nextPages).forEach(([currentPage, nextPage], pageIndex) => {\n    if (currentPage && nextPage) {\n      const updatedPage = divideIntoPages(updatedList, maxItemsOnPage)[pageIndex];\n      const changes = visualPageChange(updatedPage, nextPage);\n      if (listNeedsUpdating(changes)) {\n        log.debug(\n          `Detected visual changes on page: ${pageIndex}, current: ${flatTrackReferenceArray(\n            currentPage\n          )}, next: ${flatTrackReferenceArray(nextPage)}`,\n          { changes }\n        );\n        if (changes.added.length === changes.dropped.length) {\n          zip(changes.added, changes.dropped).forEach(([added, dropped]) => {\n            if (added && dropped) {\n              updatedList = swapItems(added, dropped, updatedList);\n            } else {\n              throw new Error(\n                `For a swap action we need a addition and a removal one is missing: ${added}, ${dropped}`\n              );\n            }\n          });\n        }\n        if (changes.added.length === 0 && changes.dropped.length > 0) {\n          changes.dropped.forEach((item) => {\n            updatedList = dropItem(item, updatedList);\n          });\n        }\n        if (changes.added.length > 0 && changes.dropped.length === 0) {\n          changes.added.forEach((item) => {\n            updatedList = addItem(item, updatedList);\n          });\n        }\n      }\n    }\n  });\n  if (updatedList.length > nextList.length) {\n    const missingItems = differenceBy(updatedList, nextList, getTrackReferenceId);\n    updatedList = updatedList.filter(\n      (item) => !missingItems.map(getTrackReferenceId).includes(getTrackReferenceId(item))\n    );\n  }\n  return updatedList;\n}\nfunction refreshList(currentList, nextList) {\n  return currentList.map((currentItem) => {\n    const updateForCurrentItem = nextList.find(\n      (newItem_) => (\n        // If the IDs match or ..\n        getTrackReferenceId(currentItem) === getTrackReferenceId(newItem_) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof currentItem !== \"number\" && isTrackReferencePlaceholder(currentItem) && isTrackReference(newItem_) && isPlaceholderReplacement(currentItem, newItem_)\n      )\n    );\n    return updateForCurrentItem != null ? updateForCurrentItem : currentItem;\n  });\n}\n\n// src/components/mediaToggle.ts\n\n\n\n// src/observables/participant.ts\n\n\n\n// src/components/mediaTrack.ts\n\n\n\n// src/styles-interface/class-prefixer.ts\nfunction prefixClass(unprefixedClassName) {\n  return `${cssPrefix}-${unprefixedClassName}`;\n}\n\n// src/components/mediaTrack.ts\nfunction setupMediaTrack(trackIdentifier) {\n  const initialPub = getTrackByIdentifier(trackIdentifier);\n  const trackObserver = observeParticipantMedia(trackIdentifier.participant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => {\n      return getTrackByIdentifier(trackIdentifier);\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(initialPub)\n  );\n  const className = prefixClass(\n    trackIdentifier.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera || trackIdentifier.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  );\n  return { className, trackObserver };\n}\nfunction getTrackByIdentifier(options) {\n  if (isTrackReference(options)) {\n    return options.publication;\n  } else {\n    const { source, name, participant } = options;\n    if (source && name) {\n      return participant.getTrackPublications().find((pub) => pub.source === source && pub.trackName === name);\n    } else if (name) {\n      return participant.getTrackPublicationByName(name);\n    } else if (source) {\n      return participant.getTrackPublication(source);\n    } else {\n      throw new Error(\"At least one of source and name needs to be defined\");\n    }\n  }\n}\n\n// src/observables/room.ts\n\n\nfunction observeRoomEvents(room, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onRoomUpdate = () => {\n      subscribe.next(room);\n    };\n    events.forEach((evt) => {\n      room.on(evt, onRoomUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        room.off(evt, onRoomUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room));\n  return observable;\n}\nfunction roomEventSelector(room, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    room.on(event, update);\n    const unsubscribe = () => {\n      room.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction roomObserver(room) {\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room));\n  return observable;\n}\nfunction connectionStateObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([connectionState]) => connectionState),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.state)\n  );\n}\nfunction screenShareObserver(room) {\n  let screenShareSubscriber;\n  const observers = [];\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscriber) => {\n    screenShareSubscriber = subscriber;\n    return () => {\n      observers.forEach((observer) => {\n        observer.unsubscribe();\n      });\n    };\n  });\n  const screenShareTracks = [];\n  const handleSub = (publication, participant) => {\n    if (publication.source !== livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare && publication.source !== livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShareAudio) {\n      return;\n    }\n    let trackMap = screenShareTracks.find((tr) => tr.participant.identity === participant.identity);\n    const getScreenShareTracks = (participant2) => {\n      return participant2.getTrackPublications().filter(\n        (track) => (track.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare || track.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShareAudio) && track.track\n      );\n    };\n    if (!trackMap) {\n      trackMap = {\n        participant,\n        tracks: getScreenShareTracks(participant)\n      };\n    } else {\n      const index = screenShareTracks.indexOf(trackMap);\n      screenShareTracks.splice(index, 1);\n      trackMap.tracks = getScreenShareTracks(participant);\n    }\n    if (trackMap.tracks.length > 0) {\n      screenShareTracks.push(trackMap);\n    }\n    screenShareSubscriber.next(screenShareTracks);\n  };\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnsubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished).subscribe((args) => handleSub(...args))\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  setTimeout(() => {\n    for (const p of room.remoteParticipants.values()) {\n      p.getTrackPublications().forEach((track) => {\n        handleSub(track, p);\n      });\n    }\n  }, 1);\n  return observable;\n}\nfunction roomInfoObserver(room) {\n  const observer = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((r) => {\n      return { name: r.name, metadata: r.metadata };\n    })\n  );\n  return observer;\n}\nfunction activeSpeakerObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([speakers]) => speakers)\n  );\n}\nfunction createMediaDeviceObserver(kind, onError, requestPermissions = true) {\n  var _a;\n  const onDeviceChange = () => __async(this, null, function* () {\n    try {\n      const newDevices = yield livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(kind, requestPermissions);\n      deviceSubject.next(newDevices);\n    } catch (e) {\n      onError == null ? void 0 : onError(e);\n    }\n  });\n  const deviceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const observable = deviceSubject.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.finalize)(() => {\n      var _a2;\n      (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.removeEventListener(\"devicechange\", onDeviceChange);\n    })\n  );\n  if (typeof window !== \"undefined\") {\n    if (!window.isSecureContext) {\n      throw new Error(\n        `Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices`\n      );\n    }\n    (_a = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a.addEventListener(\"devicechange\", onDeviceChange);\n  }\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.concat)(\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(kind, requestPermissions).catch((e) => {\n      onError == null ? void 0 : onError(e);\n      return [];\n    }),\n    observable\n  );\n}\nfunction createDataObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived);\n}\nfunction roomAudioPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((room2) => {\n      return { canPlayAudio: room2.canPlaybackAudio };\n    })\n  );\n  return observable;\n}\nfunction roomVideoPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.VideoPlaybackStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((room2) => {\n      return { canPlayVideo: room2.canPlaybackVideo };\n    })\n  );\n  return observable;\n}\nfunction createActiveDeviceObservable(room, kind) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveDeviceChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.filter)(([kindOfDevice]) => kindOfDevice === kind),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([kind2, deviceId]) => {\n      log.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: kind2, deviceId });\n      return deviceId;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.getActiveDevice(kind))\n  );\n}\nfunction encryptionStatusObservable(room, participant) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantEncryptionStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.filter)(\n      ([, p]) => (participant == null ? void 0 : participant.identity) === (p == null ? void 0 : p.identity) || !p && (participant == null ? void 0 : participant.identity) === room.localParticipant.identity\n    ),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([encrypted]) => encrypted),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(\n      participant instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant ? participant.isE2EEEnabled : !!(participant == null ? void 0 : participant.isEncrypted)\n    )\n  );\n}\nfunction recordingStatusObservable(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RecordingStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([recording]) => recording),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.isRecording)\n  );\n}\n\n// src/observables/participant.ts\nfunction observeParticipantEvents(participant, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onParticipantUpdate = () => {\n      subscribe.next(participant);\n    };\n    events.forEach((evt) => {\n      participant.on(evt, onParticipantUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        participant.off(evt, onParticipantUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(participant));\n  return observable;\n}\nfunction observeParticipantMedia(participant) {\n  const participantObserver = observeParticipantEvents(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.MediaDevicesError,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((p) => {\n      const { isMicrophoneEnabled, isCameraEnabled, isScreenShareEnabled } = p;\n      const microphoneTrack = p.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone);\n      const cameraTrack = p.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera);\n      const participantMedia = {\n        isCameraEnabled,\n        isMicrophoneEnabled,\n        isScreenShareEnabled,\n        cameraTrack,\n        microphoneTrack,\n        participant: p\n      };\n      return participantMedia;\n    })\n  );\n  return participantObserver;\n}\nfunction createTrackObserver(participant, options) {\n  return observeParticipantMedia(participant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => {\n      return { publication: getTrackByIdentifier(options) };\n    })\n  );\n}\nfunction participantInfoObserver(participant) {\n  if (!participant) {\n    return void 0;\n  }\n  const observer = observeParticipantEvents(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantNameChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(({ name, identity, metadata }) => {\n      return {\n        name,\n        identity,\n        metadata\n      };\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)({\n      name: participant.name,\n      identity: participant.identity,\n      metadata: participant.metadata\n    })\n  );\n  return observer;\n}\nfunction createConnectionQualityObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([quality]) => quality),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(participant.connectionQuality)\n  );\n  return observer;\n}\nfunction participantEventSelector(participant, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    participant.on(event, update);\n    const unsubscribe = () => {\n      participant.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction mutedObserver(trackRef) {\n  var _a, _b, _c, _d;\n  return observeParticipantEvents(\n    trackRef.participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((participant) => {\n      var _a2, _b2;\n      const pub = (_a2 = trackRef.publication) != null ? _a2 : participant.getTrackPublication(trackRef.source);\n      return (_b2 = pub == null ? void 0 : pub.isMuted) != null ? _b2 : true;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(\n      (_d = (_c = (_a = trackRef.publication) == null ? void 0 : _a.isMuted) != null ? _c : (_b = trackRef.participant.getTrackPublication(trackRef.source)) == null ? void 0 : _b.isMuted) != null ? _d : true\n    )\n  );\n}\nfunction createIsSpeakingObserver(participant) {\n  return participantEventSelector(participant, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([isSpeaking]) => isSpeaking)\n  );\n}\nfunction connectedParticipantsObserver(room, options = {}) {\n  var _a;\n  let subscriber;\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((sub) => {\n    subscriber = sub;\n    return () => listener.unsubscribe();\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(Array.from(room.remoteParticipants.values())));\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const roomEvents = Array.from(\n    /* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      ...additionalRoomEvents\n    ])\n  );\n  const listener = observeRoomEvents(room, ...roomEvents).subscribe(\n    (r) => subscriber == null ? void 0 : subscriber.next(Array.from(r.remoteParticipants.values()))\n  );\n  if (room.remoteParticipants.size > 0) {\n    subscriber == null ? void 0 : subscriber.next(Array.from(room.remoteParticipants.values()));\n  }\n  return observable;\n}\nfunction connectedParticipantObserver(room, identity, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.switchMap)((r) => {\n      const participant = r.getParticipantByIdentity(identity);\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.getParticipantByIdentity(identity))\n  );\n  return observable;\n}\nfunction participantPermissionObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => participant.permissions),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(participant.permissions)\n  );\n  return observer;\n}\nfunction participantByIdentifierObserver(room, { kind, identity }, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const matchesIdentifier = (participant) => {\n    let isMatch = true;\n    if (kind) {\n      isMatch = isMatch && participant.kind === kind;\n    }\n    if (identity) {\n      isMatch = isMatch && participant.identity === identity;\n    }\n    return isMatch;\n  };\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.switchMap)((r) => {\n      const participant = Array.from(r.remoteParticipants.values()).find(\n        (p) => matchesIdentifier(p)\n      );\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(Array.from(room.remoteParticipants.values()).find((p) => matchesIdentifier(p)))\n  );\n  return observable;\n}\nfunction participantAttributesObserver(participant) {\n  if (typeof participant === \"undefined\") {\n    return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable();\n  }\n  return participantEventSelector(participant, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.AttributesChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([changedAttributes]) => {\n      return {\n        changed: changedAttributes,\n        attributes: participant.attributes\n      };\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)({ changed: participant.attributes, attributes: participant.attributes })\n  );\n}\n\n// src/components/mediaToggle.ts\nfunction setupMediaToggle(source, room, options, publishOptions, onError) {\n  const { localParticipant } = room;\n  const getSourceEnabled = (source2, localParticipant2) => {\n    let isEnabled = false;\n    switch (source2) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n        isEnabled = localParticipant2.isCameraEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n        isEnabled = localParticipant2.isMicrophoneEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n        isEnabled = localParticipant2.isScreenShareEnabled;\n        break;\n      default:\n        break;\n    }\n    return isEnabled;\n  };\n  const enabledObserver = observeParticipantMedia(localParticipant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((media) => {\n      return getSourceEnabled(source, media.participant);\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(getSourceEnabled(source, localParticipant))\n  );\n  const pendingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const toggle = (forceState, captureOptions) => __async(this, null, function* () {\n    try {\n      captureOptions != null ? captureOptions : captureOptions = options;\n      pendingSubject.next(true);\n      switch (source) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n          yield localParticipant.setCameraEnabled(\n            forceState != null ? forceState : !localParticipant.isCameraEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isCameraEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n          yield localParticipant.setMicrophoneEnabled(\n            forceState != null ? forceState : !localParticipant.isMicrophoneEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isMicrophoneEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n          yield localParticipant.setScreenShareEnabled(\n            forceState != null ? forceState : !localParticipant.isScreenShareEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isScreenShareEnabled;\n        default:\n          throw new TypeError(\"Tried to toggle unsupported source\");\n      }\n    } catch (e) {\n      if (onError && e instanceof Error) {\n        onError == null ? void 0 : onError(e);\n        return void 0;\n      } else {\n        throw e;\n      }\n    } finally {\n      pendingSubject.next(false);\n    }\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver,\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\nfunction setupManualToggle() {\n  let state = false;\n  const enabledSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const pendingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const toggle = (forceState) => __async(this, null, function* () {\n    pendingSubject.next(true);\n    state = forceState != null ? forceState : !state;\n    enabledSubject.next(state);\n    pendingSubject.next(false);\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver: enabledSubject.asObservable(),\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\n\n// src/components/mediaDeviceSelect.ts\n\n\nfunction setupDeviceSelector(kind, room, localTrack) {\n  const activeDeviceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(void 0);\n  const activeDeviceObservable = room ? createActiveDeviceObservable(room, kind) : activeDeviceSubject.asObservable();\n  const setActiveMediaDevice = (_0, ..._1) => __async(this, [_0, ..._1], function* (id, options = {}) {\n    var _a, _b, _c;\n    if (room) {\n      log.debug(`Switching active device of kind \"${kind}\" with id ${id}.`);\n      yield room.switchActiveDevice(kind, id, options.exact);\n      const actualDeviceId = (_a = room.getActiveDevice(kind)) != null ? _a : id;\n      if (actualDeviceId !== id && id !== \"default\") {\n        log.info(\n          `We tried to select the device with id (${id}), but the browser decided to select the device with id (${actualDeviceId}) instead.`\n        );\n      }\n      let targetTrack = void 0;\n      if (kind === \"audioinput\")\n        targetTrack = (_b = room.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone)) == null ? void 0 : _b.track;\n      else if (kind === \"videoinput\") {\n        targetTrack = (_c = room.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera)) == null ? void 0 : _c.track;\n      }\n      const useDefault = id === \"default\" && !targetTrack || id === \"default\" && (targetTrack == null ? void 0 : targetTrack.mediaStreamTrack.label.startsWith(\"Default\"));\n      activeDeviceSubject.next(useDefault ? id : actualDeviceId);\n    } else if (localTrack) {\n      yield localTrack.setDeviceId(options.exact ? { exact: id } : id);\n      const actualId = yield localTrack.getDeviceId();\n      activeDeviceSubject.next(\n        id === \"default\" && localTrack.mediaStreamTrack.label.startsWith(\"Default\") ? id : actualId\n      );\n    } else if (activeDeviceSubject.value !== id) {\n      log.warn(\n        \"device switch skipped, please provide either a room or a local track to switch on. \"\n      );\n      activeDeviceSubject.next(id);\n    }\n  });\n  const className = prefixClass(\"media-device-select\");\n  return {\n    className,\n    activeDeviceObservable,\n    setActiveMediaDevice\n  };\n}\n\n// src/components/disconnectButton.ts\nfunction setupDisconnectButton(room) {\n  const disconnect = (stopTracks) => {\n    room.disconnect(stopTracks);\n  };\n  const className = prefixClass(\"disconnect-button\");\n  return { className, disconnect };\n}\n\n// src/components/connectionQualityIndicator.ts\nfunction setupConnectionQualityIndicator(participant) {\n  const className = prefixClass(\"connection-quality\");\n  const connectionQualityObserver = createConnectionQualityObserver(participant);\n  return { className, connectionQualityObserver };\n}\n\n// src/components/trackMutedIndicator.ts\n\nfunction setupTrackMutedIndicator(trackRef) {\n  let classForSource = \"track-muted-indicator-camera\";\n  switch (trackRef.source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n      classForSource = \"track-muted-indicator-camera\";\n      break;\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n      classForSource = \"track-muted-indicator-microphone\";\n      break;\n    default:\n      break;\n  }\n  const className = prefixClass(classForSource);\n  const mediaMutedObserver = mutedObserver(trackRef);\n  return { className, mediaMutedObserver };\n}\n\n// src/components/participantName.ts\nfunction setupParticipantName(participant) {\n  const infoObserver = participantInfoObserver(participant);\n  return { className: \"lk-participant-name\", infoObserver };\n}\n\n// src/components/participantTile.ts\nfunction setupParticipantTile() {\n  const className = prefixClass(\"participant-tile\");\n  return {\n    className\n  };\n}\n\n// src/components/chat.ts\n\n\n\n// src/observables/dataChannel.ts\n\nvar DataTopic = {\n  CHAT: \"lk-chat-topic\",\n  CHAT_UPDATE: \"lk-chat-update-topic\"\n};\nfunction sendMessage(_0, _1) {\n  return __async(this, arguments, function* (localParticipant, payload, options = {}) {\n    const { reliable, destinationIdentities, topic } = options;\n    yield localParticipant.publishData(payload, {\n      destinationIdentities,\n      topic,\n      reliable\n    });\n  });\n}\nfunction setupDataMessageHandler(room, topic, onMessage) {\n  const topics = Array.isArray(topic) ? topic : [topic];\n  const messageObservable = createDataObserver(room).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.filter)(\n      ([, , , messageTopic]) => topic === void 0 || messageTopic !== void 0 && topics.includes(messageTopic)\n    ),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([payload, participant, , messageTopic]) => {\n      const msg = {\n        payload,\n        topic: messageTopic,\n        from: participant\n      };\n      onMessage == null ? void 0 : onMessage(msg);\n      return msg;\n    })\n  );\n  let isSendingSubscriber;\n  const isSendingObservable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscriber) => {\n    isSendingSubscriber = subscriber;\n  });\n  const send = (_0, ..._1) => __async(this, [_0, ..._1], function* (payload, options = {}) {\n    isSendingSubscriber.next(true);\n    try {\n      yield sendMessage(room.localParticipant, payload, __spreadValues({ topic: topics[0] }, options));\n    } finally {\n      isSendingSubscriber.next(false);\n    }\n  });\n  return { messageObservable, isSendingObservable, send };\n}\n\n// src/components/chat.ts\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nvar topicSubjectMap = /* @__PURE__ */ new Map();\nvar encode = (message) => encoder.encode(JSON.stringify(message));\nvar decode = (message) => JSON.parse(decoder.decode(message));\nfunction setupChat(room, options) {\n  var _a, _b;\n  const onDestroyObservable = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const { messageDecoder, messageEncoder, channelTopic, updateChannelTopic } = options != null ? options : {};\n  const topic = channelTopic != null ? channelTopic : DataTopic.CHAT;\n  const updateTopic = updateChannelTopic != null ? updateChannelTopic : DataTopic.CHAT_UPDATE;\n  let needsSetup = false;\n  if (!topicSubjectMap.has(room)) {\n    needsSetup = true;\n  }\n  const topicMap = (_a = topicSubjectMap.get(room)) != null ? _a : /* @__PURE__ */ new Map();\n  const messageSubject = (_b = topicMap.get(topic)) != null ? _b : new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  topicMap.set(topic, messageSubject);\n  topicSubjectMap.set(room, topicMap);\n  if (needsSetup) {\n    const { messageObservable } = setupDataMessageHandler(room, [topic, updateTopic]);\n    messageObservable.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_12__.takeUntil)(onDestroyObservable)).subscribe(messageSubject);\n  }\n  const finalMessageDecoder = messageDecoder != null ? messageDecoder : decode;\n  const messagesObservable = messageSubject.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((msg) => {\n      const parsedMessage = finalMessageDecoder(msg.payload);\n      const newMessage = __spreadProps(__spreadValues({}, parsedMessage), { from: msg.from });\n      return newMessage;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.scan)((acc, value) => {\n      if (\"id\" in value && acc.find((msg) => {\n        var _a2, _b2;\n        return ((_a2 = msg.from) == null ? void 0 : _a2.identity) === ((_b2 = value.from) == null ? void 0 : _b2.identity) && msg.id === value.id;\n      })) {\n        const replaceIndex = acc.findIndex((msg) => msg.id === value.id);\n        if (replaceIndex > -1) {\n          const originalMsg = acc[replaceIndex];\n          acc[replaceIndex] = __spreadProps(__spreadValues({}, value), {\n            timestamp: originalMsg.timestamp,\n            editTimestamp: value.timestamp\n          });\n        }\n        return [...acc];\n      }\n      return [...acc, value];\n    }, []),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.takeUntil)(onDestroyObservable)\n  );\n  const isSending$ = new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(false);\n  const finalMessageEncoder = messageEncoder != null ? messageEncoder : encode;\n  const send = (message) => __async(this, null, function* () {\n    const timestamp = Date.now();\n    const id = crypto.randomUUID();\n    const chatMessage = { id, message, timestamp };\n    const encodedMsg = finalMessageEncoder(chatMessage);\n    isSending$.next(true);\n    try {\n      yield sendMessage(room.localParticipant, encodedMsg, {\n        reliable: true,\n        topic\n      });\n      messageSubject.next({\n        payload: encodedMsg,\n        topic,\n        from: room.localParticipant\n      });\n      return chatMessage;\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  const update = (message, messageId) => __async(this, null, function* () {\n    const timestamp = Date.now();\n    const chatMessage = { id: messageId, message, timestamp };\n    const encodedMsg = finalMessageEncoder(chatMessage);\n    isSending$.next(true);\n    try {\n      yield sendMessage(room.localParticipant, encodedMsg, {\n        topic: updateTopic,\n        reliable: true\n      });\n      messageSubject.next({\n        payload: encodedMsg,\n        topic,\n        from: room.localParticipant\n      });\n      return chatMessage;\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  function destroy() {\n    onDestroyObservable.next();\n    onDestroyObservable.complete();\n    topicSubjectMap.delete(room);\n  }\n  room.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, destroy);\n  return { messageObservable: messagesObservable, isSendingObservable: isSending$, send, update };\n}\n\n// src/components/startAudio.ts\nfunction setupStartAudio() {\n  const handleStartAudioPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Audio for room: \", room);\n    yield room.startAudio();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomAudioPlaybackAllowedObservable, handleStartAudioPlayback };\n}\n\n// src/components/startVideo.ts\nfunction setupStartVideo() {\n  const handleStartVideoPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Video for room: \", room);\n    yield room.startVideo();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback };\n}\n\n// src/components/chatToggle.ts\nfunction setupChatToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"chat-toggle\")].join(\" \");\n  return { className };\n}\n\n// src/components/focusToggle.ts\nfunction setupFocusToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"focus-toggle-button\")].join(\" \");\n  return { className };\n}\n\n// src/components/clearPinButton.ts\nfunction setupClearPinButton() {\n  const className = \"lk-clear-pin-button lk-button\";\n  return { className };\n}\n\n// src/components/room.ts\nfunction setupLiveKitRoom() {\n  const className = \"lk-room-container\";\n  return { className };\n}\n\n// src/observables/track.ts\n\n\nfunction trackObservable(track) {\n  const trackObserver = observeTrackEvents(\n    track,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Muted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Unmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Subscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Unsubscribed\n  );\n  return trackObserver;\n}\nfunction observeTrackEvents(track, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onTrackUpdate = () => {\n      subscribe.next(track);\n    };\n    events.forEach((evt) => {\n      track.on(evt, onTrackUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        track.off(evt, onTrackUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(track));\n  return observable;\n}\nfunction getTrackReferences(room, sources, onlySubscribedTracks = true) {\n  const localParticipant = room.localParticipant;\n  const allParticipants = [localParticipant, ...Array.from(room.remoteParticipants.values())];\n  const trackReferences = [];\n  allParticipants.forEach((participant) => {\n    sources.forEach((source) => {\n      const sourceReferences = Array.from(\n        participant.trackPublications.values()\n      ).filter(\n        (track) => track.source === source && // either return all or only the ones that are subscribed\n        (!onlySubscribedTracks || track.track)\n      ).map((track) => {\n        return {\n          participant,\n          publication: track,\n          source: track.source\n        };\n      });\n      trackReferences.push(...sourceReferences);\n    });\n  });\n  return { trackReferences, participants: allParticipants };\n}\nfunction getParticipantTrackRefs(participant, identifier, onlySubscribedTracks = false) {\n  const { sources, kind, name } = identifier;\n  const sourceReferences = Array.from(participant.trackPublications.values()).filter(\n    (pub) => (!sources || sources.includes(pub.source)) && (!kind || pub.kind === kind) && (!name || pub.trackName === name) && // either return all or only the ones that are subscribed\n    (!onlySubscribedTracks || pub.track)\n  ).map((track) => {\n    return {\n      participant,\n      publication: track,\n      source: track.source\n    };\n  });\n  return sourceReferences;\n}\nfunction trackReferencesObservable(room, sources, options) {\n  var _a, _b;\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const onlySubscribedTracks = (_b = options.onlySubscribed) != null ? _b : true;\n  const roomEvents = Array.from(\n    (/* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged,\n      ...additionalRoomEvents\n    ])).values()\n  );\n  const observable = observeRoomEvents(room, ...roomEvents).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((room2) => {\n      const data = getTrackReferences(room2, sources, onlySubscribedTracks);\n      log.debug(`TrackReference[] was updated. (length ${data.trackReferences.length})`, data);\n      return data;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(getTrackReferences(room, sources, onlySubscribedTracks))\n  );\n  return observable;\n}\nfunction participantTracksObservable(participant, trackIdentifier) {\n  const observable = observeParticipantEvents(participant, ...participantTrackEvents).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((participant2) => {\n      const data = getParticipantTrackRefs(participant2, trackIdentifier);\n      log.debug(`TrackReference[] was updated. (length ${data.length})`, data);\n      return data;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(getParticipantTrackRefs(participant, trackIdentifier))\n  );\n  return observable;\n}\nfunction trackEventSelector(publication, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    publication.on(event, update);\n    const unsubscribe = () => {\n      publication.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction trackTranscriptionObserver(publication) {\n  return trackEventSelector(publication, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TranscriptionReceived);\n}\nfunction trackSyncTimeObserver(track) {\n  return trackEventSelector(track, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TimeSyncUpdate).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([timeUpdate]) => timeUpdate)\n  );\n}\n\n// src/observables/dom-event.ts\n\nfunction createInteractingObservable(htmlElement, inactiveAfter = 1e3) {\n  if (htmlElement === null) return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);\n  const move$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.fromEvent)(htmlElement, \"mousemove\", { passive: true }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => true));\n  const moveAndStop$ = move$.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.timeout)({\n      each: inactiveAfter,\n      with: () => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false), moveAndStop$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_17__.skipUntil)(move$)))\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.distinctUntilChanged)()\n  );\n  return moveAndStop$;\n}\n\n// src/persistent-storage/local-storage-helpers.ts\nfunction saveToLocalStorage(key, value) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    if (value) {\n      const nonEmptySettings = Object.entries(value).filter(([, value2]) => value2 !== \"\");\n      localStorage.setItem(key, JSON.stringify(nonEmptySettings));\n    }\n  } catch (error) {\n    log.error(`Error setting item to local storage: ${error}`);\n  }\n}\nfunction loadFromLocalStorage(key) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return void 0;\n  }\n  try {\n    const item = localStorage.getItem(key);\n    if (!item) {\n      log.warn(`Item with key ${key} does not exist in local storage.`);\n      return void 0;\n    }\n    return JSON.parse(item);\n  } catch (error) {\n    log.error(`Error getting item from local storage: ${error}`);\n    return void 0;\n  }\n}\nfunction createLocalStorageInterface(key) {\n  return {\n    load: () => loadFromLocalStorage(key),\n    save: (value) => saveToLocalStorage(key, value)\n  };\n}\n\n// src/persistent-storage/user-choices.ts\nvar USER_CHOICES_KEY = `${cssPrefix}-user-choices`;\nvar defaultUserChoices = {\n  videoEnabled: true,\n  audioEnabled: true,\n  videoDeviceId: \"\",\n  audioDeviceId: \"\",\n  username: \"\"\n};\nvar { load, save } = createLocalStorageInterface(USER_CHOICES_KEY);\nfunction saveUserChoices(userChoices, preventSave = false) {\n  if (preventSave === true) {\n    return;\n  }\n  save(userChoices);\n}\nfunction loadUserChoices(defaults, preventLoad = false) {\n  var _a, _b, _c, _d, _e;\n  const fallback = {\n    videoEnabled: (_a = defaults == null ? void 0 : defaults.videoEnabled) != null ? _a : defaultUserChoices.videoEnabled,\n    audioEnabled: (_b = defaults == null ? void 0 : defaults.audioEnabled) != null ? _b : defaultUserChoices.audioEnabled,\n    videoDeviceId: (_c = defaults == null ? void 0 : defaults.videoDeviceId) != null ? _c : defaultUserChoices.videoDeviceId,\n    audioDeviceId: (_d = defaults == null ? void 0 : defaults.audioDeviceId) != null ? _d : defaultUserChoices.audioDeviceId,\n    username: (_e = defaults == null ? void 0 : defaults.username) != null ? _e : defaultUserChoices.username\n  };\n  if (preventLoad) {\n    return fallback;\n  } else {\n    const maybeLoadedObject = load();\n    const result = __spreadValues(__spreadValues({}, fallback), maybeLoadedObject != null ? maybeLoadedObject : {});\n    return result;\n  }\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ3FFOztBQUVyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZUFBZTtBQUM3QixJQUFJO0FBQ0osY0FBYyxvQ0FBb0MsR0FBRyxzQkFBc0I7QUFDM0UsSUFBSTtBQUNKLGNBQWMsb0NBQW9DLEdBQUcsa0NBQWtDLEdBQUcsb0NBQW9DO0FBQzlILElBQUk7QUFDSiwwRUFBMEUsZUFBZTtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQSx5QkFBeUIsNENBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0RBQVU7QUFDbkQ7QUFDQTtBQUNBLG1DQUFtQyxzREFBVTtBQUM3QyxJQUFJLHlDQUFJO0FBQ1I7QUFDQTs7QUFFQTtBQUMrRztBQUMvRztBQUNBLG1DQUFtQyx5Q0FBRTtBQUNyQyxnQkFBZ0IsZ0RBQVMsNkJBQTZCLGVBQWUsT0FBTyx5Q0FBSTtBQUNoRjtBQUNBLElBQUksOENBQU87QUFDWDtBQUNBLGtCQUFrQiw0Q0FBTyxDQUFDLHlDQUFFLDJCQUEyQixnREFBUztBQUNoRSxLQUFLO0FBQ0wsSUFBSSwyREFBb0I7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osc0RBQXNELE1BQU07QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0RBQXdELE1BQU07QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCLFVBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGFBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLG1EQUFtRCwrREFBK0Q7QUFDbEg7QUFDQTtBQUNBO0FBd0dFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1jb21wYW5pb24vLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzPzgyNmUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19hc3luYyA9IChfX3RoaXMsIF9fYXJndW1lbnRzLCBnZW5lcmF0b3IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgZnVsZmlsbGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZWplY3RlZCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IudGhyb3codmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHN0ZXAgPSAoeCkgPT4geC5kb25lID8gcmVzb2x2ZSh4LnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZSh4LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseShfX3RoaXMsIF9fYXJndW1lbnRzKSkubmV4dCgpKTtcbiAgfSk7XG59O1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgY3NzUHJlZml4ID0gXCJsa1wiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmltcG9ydCB7IExvY2FsUGFydGljaXBhbnQsIFJlbW90ZVBhcnRpY2lwYW50IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5cbi8vIHNyYy90cmFjay1yZWZlcmVuY2UvdHJhY2stcmVmZXJlbmNlLnR5cGVzLnRzXG5mdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlKHRyYWNrUmVmZXJlbmNlKSB7XG4gIGlmICh0eXBlb2YgdHJhY2tSZWZlcmVuY2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzVHJhY2tSZWZlcmVuY2VTdWJzY3JpYmVkKHRyYWNrUmVmZXJlbmNlKSB8fCBpc1RyYWNrUmVmZXJlbmNlUHVibGlzaGVkKHRyYWNrUmVmZXJlbmNlKTtcbn1cbmZ1bmN0aW9uIGlzVHJhY2tSZWZlcmVuY2VTdWJzY3JpYmVkKHRyYWNrUmVmZXJlbmNlKSB7XG4gIHZhciBfYTtcbiAgaWYgKCF0cmFja1JlZmVyZW5jZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSAmJiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInRyYWNrXCIpICYmIHR5cGVvZiAoKF9hID0gdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS50cmFjaykgIT09IFwidW5kZWZpbmVkXCI7XG59XG5mdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlUHVibGlzaGVkKHRyYWNrUmVmZXJlbmNlKSB7XG4gIGlmICghdHJhY2tSZWZlcmVuY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlLmhhc093blByb3BlcnR5KFwicGFydGljaXBhbnRcIikgJiYgdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoXCJzb3VyY2VcIikgJiYgdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoXCJwdWJsaWNhdGlvblwiKSAmJiB0eXBlb2YgdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24gIT09IFwidW5kZWZpbmVkXCI7XG59XG5mdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIodHJhY2tSZWZlcmVuY2UpIHtcbiAgaWYgKCF0cmFja1JlZmVyZW5jZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSAmJiB0eXBlb2YgdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24gPT09IFwidW5kZWZpbmVkXCI7XG59XG5cbi8vIHNyYy90cmFjay1yZWZlcmVuY2UvdHJhY2stcmVmZXJlbmNlLnV0aWxzLnRzXG5mdW5jdGlvbiBnZXRUcmFja1JlZmVyZW5jZUlkKHRyYWNrUmVmZXJlbmNlKSB7XG4gIGlmICh0eXBlb2YgdHJhY2tSZWZlcmVuY2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHRyYWNrUmVmZXJlbmNlID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIGAke3RyYWNrUmVmZXJlbmNlfWA7XG4gIH0gZWxzZSBpZiAoaXNUcmFja1JlZmVyZW5jZVBsYWNlaG9sZGVyKHRyYWNrUmVmZXJlbmNlKSkge1xuICAgIHJldHVybiBgJHt0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHt0cmFja1JlZmVyZW5jZS5zb3VyY2V9X3BsYWNlaG9sZGVyYDtcbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlKHRyYWNrUmVmZXJlbmNlKSkge1xuICAgIHJldHVybiBgJHt0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHt0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi5zb3VyY2V9XyR7dHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24udHJhY2tTaWR9YDtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGdlbmVyYXRlIGEgaWQgZm9yIHRoZSBnaXZlbiB0cmFjayByZWZlcmVuY2U6ICR7dHJhY2tSZWZlcmVuY2V9YCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFRyYWNrUmVmZXJlbmNlU291cmNlKHRyYWNrUmVmZXJlbmNlKSB7XG4gIGlmIChpc1RyYWNrUmVmZXJlbmNlKHRyYWNrUmVmZXJlbmNlKSkge1xuICAgIHJldHVybiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi5zb3VyY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlLnNvdXJjZTtcbiAgfVxufVxuZnVuY3Rpb24gaXNFcXVhbFRyYWNrUmVmKGEsIGIpIHtcbiAgaWYgKGEgPT09IHZvaWQgMCB8fCBiID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGlzVHJhY2tSZWZlcmVuY2UoYSkgJiYgaXNUcmFja1JlZmVyZW5jZShiKSkge1xuICAgIHJldHVybiBhLnB1YmxpY2F0aW9uLnRyYWNrU2lkID09PSBiLnB1YmxpY2F0aW9uLnRyYWNrU2lkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRUcmFja1JlZmVyZW5jZUlkKGEpID09PSBnZXRUcmFja1JlZmVyZW5jZUlkKGIpO1xuICB9XG59XG5mdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlUGlubmVkKHRyYWNrUmVmZXJlbmNlLCBwaW5TdGF0ZSkge1xuICBpZiAodHlwZW9mIHBpblN0YXRlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChpc1RyYWNrUmVmZXJlbmNlKHRyYWNrUmVmZXJlbmNlKSkge1xuICAgIHJldHVybiBwaW5TdGF0ZS5zb21lKFxuICAgICAgKHBpbm5lZFRyYWNrUmVmZXJlbmNlKSA9PiBwaW5uZWRUcmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQuaWRlbnRpdHkgJiYgaXNUcmFja1JlZmVyZW5jZShwaW5uZWRUcmFja1JlZmVyZW5jZSkgJiYgcGlubmVkVHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24udHJhY2tTaWQgPT09IHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uLnRyYWNrU2lkXG4gICAgKTtcbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIHBpblN0YXRlLnNvbWUoXG4gICAgICAocGlubmVkVHJhY2tSZWZlcmVuY2UpID0+IHBpbm5lZFRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJiBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIocGlubmVkVHJhY2tSZWZlcmVuY2UpICYmIHBpbm5lZFRyYWNrUmVmZXJlbmNlLnNvdXJjZSA9PT0gdHJhY2tSZWZlcmVuY2Uuc291cmNlXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUGxhY2Vob2xkZXJSZXBsYWNlbWVudChjdXJyZW50VHJhY2tSZWYsIG5leHRUcmFja1JlZikge1xuICByZXR1cm4gaXNUcmFja1JlZmVyZW5jZVBsYWNlaG9sZGVyKGN1cnJlbnRUcmFja1JlZikgJiYgaXNUcmFja1JlZmVyZW5jZShuZXh0VHJhY2tSZWYpICYmIG5leHRUcmFja1JlZi5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gY3VycmVudFRyYWNrUmVmLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmIG5leHRUcmFja1JlZi5zb3VyY2UgPT09IGN1cnJlbnRUcmFja1JlZi5zb3VyY2U7XG59XG5cbi8vIHNyYy91dGlscy50c1xuZnVuY3Rpb24gaXNMb2NhbChwKSB7XG4gIHJldHVybiBwIGluc3RhbmNlb2YgTG9jYWxQYXJ0aWNpcGFudDtcbn1cbmZ1bmN0aW9uIGlzUmVtb3RlKHApIHtcbiAgcmV0dXJuIHAgaW5zdGFuY2VvZiBSZW1vdGVQYXJ0aWNpcGFudDtcbn1cbnZhciBhdHRhY2hJZlN1YnNjcmliZWQgPSAocHVibGljYXRpb24sIGVsZW1lbnQpID0+IHtcbiAgaWYgKCFwdWJsaWNhdGlvbikgcmV0dXJuO1xuICBjb25zdCB7IGlzU3Vic2NyaWJlZCwgdHJhY2sgfSA9IHB1YmxpY2F0aW9uO1xuICBpZiAoZWxlbWVudCAmJiB0cmFjaykge1xuICAgIGlmIChpc1N1YnNjcmliZWQpIHtcbiAgICAgIHRyYWNrLmF0dGFjaChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhY2suZGV0YWNoKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxufTtcbmZ1bmN0aW9uIGlzUGFydGljaXBhbnRUcmFja1JlZmVyZW5jZVBpbm5lZCh0cmFja1JlZiwgcGluU3RhdGUpIHtcbiAgaWYgKHBpblN0YXRlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHBpblN0YXRlLnNvbWUoKHBpbm5lZFRyYWNrUmVmKSA9PiBpc0VxdWFsVHJhY2tSZWYocGlubmVkVHJhY2tSZWYsIHRyYWNrUmVmKSk7XG59XG5mdW5jdGlvbiBnZXRTY3JvbGxCYXJXaWR0aCgpIHtcbiAgY29uc3QgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgaW5uZXIuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuICBjb25zdCBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG91dGVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICBvdXRlci5zdHlsZS50b3AgPSBcIjBweFwiO1xuICBvdXRlci5zdHlsZS5sZWZ0ID0gXCIwcHhcIjtcbiAgb3V0ZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gIG91dGVyLnN0eWxlLndpZHRoID0gXCIyMDBweFwiO1xuICBvdXRlci5zdHlsZS5oZWlnaHQgPSBcIjE1MHB4XCI7XG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgb3V0ZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKTtcbiAgY29uc3QgdzEgPSBpbm5lci5vZmZzZXRXaWR0aDtcbiAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSBcInNjcm9sbFwiO1xuICBsZXQgdzIgPSBpbm5lci5vZmZzZXRXaWR0aDtcbiAgaWYgKHcxID09PSB3Mikge1xuICAgIHcyID0gb3V0ZXIuY2xpZW50V2lkdGg7XG4gIH1cbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG4gIGNvbnN0IHNjcm9sbEJhcldpZHRoID0gdzEgLSB3MjtcbiAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xufVxuXG4vLyBzcmMvaGVscGVyL2RldGVjdE1vYmlsZUJyb3dzZXIudHNcbmZ1bmN0aW9uIGlzV2ViKCkge1xuICByZXR1cm4gdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gaXNNb2JpbGVCcm93c2VyKCkge1xuICByZXR1cm4gaXNXZWIoKSA/IC9Nb2JpL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgOiBmYWxzZTtcbn1cblxuLy8gc3JjL2hlbHBlci91cmwtcmVnZXgudHNcbmZ1bmN0aW9uIGNyZWF0ZVVybFJlZ0V4cChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucyk7XG4gIGNvbnN0IHByb3RvY29sID0gYCg/Oig/OlthLXpdKzopPy8vKT9gO1xuICBjb25zdCBhdXRoID0gXCIoPzpcXFxcUysoPzo6XFxcXFMqKT9AKT9cIjtcbiAgY29uc3QgaXAgPSBuZXcgUmVnRXhwKFxuICAgIFwiKD86MjVbMC01XXwyWzAtNF1cXFxcZHwxXFxcXGRcXFxcZHxbMS05XVxcXFxkfFxcXFxkKSg/OlxcXFwuKD86MjVbMC01XXwyWzAtNF1cXFxcZHwxXFxcXGRcXFxcZHxbMS05XVxcXFxkfFxcXFxkKSl7M31cIixcbiAgICBcImdcIlxuICApLnNvdXJjZTtcbiAgY29uc3QgaG9zdCA9IFwiKD86KD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldWy1fXSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspXCI7XG4gIGNvbnN0IGRvbWFpbiA9IFwiKD86XFxcXC4oPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0tKikqW2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldKykqXCI7XG4gIGNvbnN0IHRsZCA9IGAoPzpcXFxcLig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmXXsyLH0pKVxcXFwuP2A7XG4gIGNvbnN0IHBvcnQgPSBcIig/OjpcXFxcZHsyLDV9KT9cIjtcbiAgY29uc3QgcGF0aCA9ICcoPzpbLz8jXVteXFxcXHNcIl0qKT8nO1xuICBjb25zdCByZWdleDIgPSBgKD86JHtwcm90b2NvbH18d3d3XFxcXC4pJHthdXRofSg/OmxvY2FsaG9zdHwke2lwfXwke2hvc3R9JHtkb21haW59JHt0bGR9KSR7cG9ydH0ke3BhdGh9YDtcbiAgcmV0dXJuIG9wdGlvbnMuZXhhY3QgPyBuZXcgUmVnRXhwKGAoPzpeJHtyZWdleDJ9JClgLCBcImlcIikgOiBuZXcgUmVnRXhwKHJlZ2V4MiwgXCJpZ1wiKTtcbn1cblxuLy8gc3JjL2hlbHBlci9lbWFpbFJlZ2V4LnRzXG52YXIgcmVnZXggPSBcIlteXFxcXC5cXFxcc0A6XSg/OlteXFxcXHNAOl0qW15cXFxcc0A6XFxcXC5dKT9AW15cXFxcLlxcXFxzQF0rKD86XFxcXC5bXlxcXFwuXFxcXHNAXSspKlwiO1xuZnVuY3Rpb24gY3JlYXRlRW1haWxSZWdFeHAoeyBleGFjdCB9ID0ge30pIHtcbiAgcmV0dXJuIGV4YWN0ID8gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApIDogbmV3IFJlZ0V4cChyZWdleCwgXCJnXCIpO1xufVxuXG4vLyBzcmMvaGVscGVyL2Zsb2F0aW5nLW1lbnUudHNcbmltcG9ydCB7IGNvbXB1dGVQb3NpdGlvbiwgZmxpcCwgb2Zmc2V0LCBzaGlmdCB9IGZyb20gXCJAZmxvYXRpbmctdWkvZG9tXCI7XG5mdW5jdGlvbiBjb21wdXRlTWVudVBvc2l0aW9uKGJ1dHRvbiwgbWVudSkge1xuICByZXR1cm4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0geWllbGQgY29tcHV0ZVBvc2l0aW9uKGJ1dHRvbiwgbWVudSwge1xuICAgICAgcGxhY2VtZW50OiBcInRvcFwiLFxuICAgICAgbWlkZGxld2FyZTogW29mZnNldCg2KSwgZmxpcCgpLCBzaGlmdCh7IHBhZGRpbmc6IDUgfSldXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgeCwgeSB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIHdhc0NsaWNrT3V0c2lkZShpbnNpZGVFbGVtZW50LCBldmVudCkge1xuICBjb25zdCBpc091dHNpZGUgPSAhaW5zaWRlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpO1xuICByZXR1cm4gaXNPdXRzaWRlO1xufVxuXG4vLyBzcmMvaGVscGVyL3Rva2VuaXplci50c1xudmFyIGNyZWF0ZURlZmF1bHRHcmFtbWFyID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGVtYWlsOiBjcmVhdGVFbWFpbFJlZ0V4cCgpLFxuICAgIHVybDogY3JlYXRlVXJsUmVnRXhwKHt9KVxuICB9O1xufTtcbmZ1bmN0aW9uIHRva2VuaXplKGlucHV0LCBncmFtbWFyKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBPYmplY3QuZW50cmllcyhncmFtbWFyKS5tYXAoXG4gICAgKFt0eXBlLCByeF0sIHdlaWdodCkgPT4gQXJyYXkuZnJvbShpbnB1dC5tYXRjaEFsbChyeCkpLm1hcCgoeyBpbmRleCwgMDogY29udGVudCB9KSA9PiAoe1xuICAgICAgdHlwZSxcbiAgICAgIHdlaWdodCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBpbmRleDogaW5kZXggIT0gbnVsbCA/IGluZGV4IDogMFxuICAgIH0pKVxuICApLmZsYXQoKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgZCA9IGEuaW5kZXggLSBiLmluZGV4O1xuICAgIHJldHVybiBkICE9PSAwID8gZCA6IGEud2VpZ2h0IC0gYi53ZWlnaHQ7XG4gIH0pLmZpbHRlcigoeyBpbmRleCB9LCBpLCBhcnIpID0+IHtcbiAgICBpZiAoaSA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgY29uc3QgcHJldiA9IGFycltpIC0gMV07XG4gICAgcmV0dXJuIHByZXYuaW5kZXggKyBwcmV2LmNvbnRlbnQubGVuZ3RoIDw9IGluZGV4O1xuICB9KTtcbiAgY29uc3QgdG9rZW5zID0gW107XG4gIGxldCBwb3MgPSAwO1xuICBmb3IgKGNvbnN0IHsgdHlwZSwgY29udGVudCwgaW5kZXggfSBvZiBtYXRjaGVzKSB7XG4gICAgaWYgKGluZGV4ID4gcG9zKSB0b2tlbnMucHVzaChpbnB1dC5zdWJzdHJpbmcocG9zLCBpbmRleCkpO1xuICAgIHRva2Vucy5wdXNoKHsgdHlwZSwgY29udGVudCB9KTtcbiAgICBwb3MgPSBpbmRleCArIGNvbnRlbnQubGVuZ3RoO1xuICB9XG4gIGlmIChpbnB1dC5sZW5ndGggPiBwb3MpIHRva2Vucy5wdXNoKGlucHV0LnN1YnN0cmluZyhwb3MpKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLy8gc3JjL2hlbHBlci9ldmVudEdyb3Vwcy50c1xuaW1wb3J0IHsgUGFydGljaXBhbnRFdmVudCwgUm9vbUV2ZW50IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG52YXIgYWxsUmVtb3RlUGFydGljaXBhbnRSb29tRXZlbnRzID0gW1xuICBSb29tRXZlbnQuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgUm9vbUV2ZW50LlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gIFJvb21FdmVudC5BY3RpdmVTcGVha2Vyc0NoYW5nZWQsXG4gIFJvb21FdmVudC5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gIFJvb21FdmVudC5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgUm9vbUV2ZW50LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICBSb29tRXZlbnQuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWQsXG4gIFJvb21FdmVudC5QYXJ0aWNpcGFudE1ldGFkYXRhQ2hhbmdlZCxcbiAgUm9vbUV2ZW50LlRyYWNrTXV0ZWQsXG4gIFJvb21FdmVudC5UcmFja1VubXV0ZWQsXG4gIFJvb21FdmVudC5UcmFja1B1Ymxpc2hlZCxcbiAgUm9vbUV2ZW50LlRyYWNrVW5wdWJsaXNoZWQsXG4gIFJvb21FdmVudC5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgUm9vbUV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICBSb29tRXZlbnQuVHJhY2tTdWJzY3JpcHRpb25QZXJtaXNzaW9uQ2hhbmdlZCxcbiAgUm9vbUV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXTtcbnZhciBhbGxQYXJ0aWNpcGFudFJvb21FdmVudHMgPSBbXG4gIC4uLmFsbFJlbW90ZVBhcnRpY2lwYW50Um9vbUV2ZW50cyxcbiAgUm9vbUV2ZW50LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIFJvb21FdmVudC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWRcbl07XG52YXIgcGFydGljaXBhbnRUcmFja0V2ZW50cyA9IFtcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1B1Ymxpc2hlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1VucHVibGlzaGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrTXV0ZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tVbm11dGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaWJlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1Vuc3Vic2NyaWJlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dO1xudmFyIGFsbFJlbW90ZVBhcnRpY2lwYW50RXZlbnRzID0gW1xuICBQYXJ0aWNpcGFudEV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5Jc1NwZWFraW5nQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5QYXJ0aWNpcGFudE1ldGFkYXRhQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja011dGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrVW5tdXRlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1B1Ymxpc2hlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1VucHVibGlzaGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uUGVybWlzc2lvbkNoYW5nZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tTdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXG5dO1xudmFyIGFsbFBhcnRpY2lwYW50RXZlbnRzID0gW1xuICAuLi5hbGxSZW1vdGVQYXJ0aWNpcGFudEV2ZW50cyxcbiAgUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZFxuXTtcblxuLy8gc3JjL2xvZ2dlci50c1xuaW1wb3J0IHtcbiAgc2V0TG9nTGV2ZWwgYXMgc2V0Q2xpZW50U2RrTG9nTGV2ZWwsXG4gIHNldExvZ0V4dGVuc2lvbiBhcyBzZXRDbGllbnRTZGtMb2dFeHRlbnNpb24sXG4gIExvZ0xldmVsIGFzIExvZ0xldmVsRW51bVxufSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCBsb2dsZXZlbCBmcm9tIFwibG9nbGV2ZWxcIjtcbnZhciBsb2cgPSBsb2dsZXZlbC5nZXRMb2dnZXIoXCJsay1jb21wb25lbnRzLWpzXCIpO1xubG9nLnNldERlZmF1bHRMZXZlbChcIldBUk5cIik7XG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgbG9nLnNldExldmVsKGxldmVsKTtcbiAgc2V0Q2xpZW50U2RrTG9nTGV2ZWwoKF9hID0gb3B0aW9ucy5saXZlS2l0Q2xpZW50TG9nTGV2ZWwpICE9IG51bGwgPyBfYSA6IGxldmVsKTtcbn1cbmZ1bmN0aW9uIHNldExvZ0V4dGVuc2lvbihleHRlbnNpb24sIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IG9yaWdpbmFsRmFjdG9yeSA9IGxvZy5tZXRob2RGYWN0b3J5O1xuICBsb2cubWV0aG9kRmFjdG9yeSA9IChtZXRob2ROYW1lLCBjb25maWdMZXZlbCwgbG9nZ2VyTmFtZSkgPT4ge1xuICAgIGNvbnN0IHJhd01ldGhvZCA9IG9yaWdpbmFsRmFjdG9yeShtZXRob2ROYW1lLCBjb25maWdMZXZlbCwgbG9nZ2VyTmFtZSk7XG4gICAgY29uc3QgbG9nTGV2ZWwgPSBMb2dMZXZlbEVudW1bbWV0aG9kTmFtZV07XG4gICAgY29uc3QgbmVlZExvZyA9IGxvZ0xldmVsID49IGNvbmZpZ0xldmVsICYmIGxvZ0xldmVsIDwgTG9nTGV2ZWxFbnVtLnNpbGVudDtcbiAgICByZXR1cm4gKG1zZywgY29udGV4dCkgPT4ge1xuICAgICAgaWYgKGNvbnRleHQpIHJhd01ldGhvZChtc2csIGNvbnRleHQpO1xuICAgICAgZWxzZSByYXdNZXRob2QobXNnKTtcbiAgICAgIGlmIChuZWVkTG9nKSB7XG4gICAgICAgIGV4dGVuc2lvbihsb2dMZXZlbCwgbXNnLCBjb250ZXh0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICBsb2cuc2V0TGV2ZWwobG9nLmdldExldmVsKCkpO1xuICBzZXRDbGllbnRTZGtMb2dFeHRlbnNpb24oKF9hID0gb3B0aW9ucy5saXZlS2l0Q2xpZW50TG9nRXh0ZW5zaW9uKSAhPSBudWxsID8gX2EgOiBleHRlbnNpb24pO1xufVxuXG4vLyBzcmMvaGVscGVyL2dyaWQtbGF5b3V0cy50c1xudmFyIEdSSURfTEFZT1VUUyA9IFtcbiAge1xuICAgIGNvbHVtbnM6IDEsXG4gICAgcm93czogMVxuICB9LFxuICB7XG4gICAgY29sdW1uczogMSxcbiAgICByb3dzOiAyLFxuICAgIG9yaWVudGF0aW9uOiBcInBvcnRyYWl0XCJcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDIsXG4gICAgcm93czogMSxcbiAgICBvcmllbnRhdGlvbjogXCJsYW5kc2NhcGVcIlxuICB9LFxuICB7XG4gICAgY29sdW1uczogMixcbiAgICByb3dzOiAyLFxuICAgIG1pbldpZHRoOiA1NjBcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDMsXG4gICAgcm93czogMyxcbiAgICBtaW5XaWR0aDogNzAwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiA0LFxuICAgIHJvd3M6IDQsXG4gICAgbWluV2lkdGg6IDk2MFxuICB9LFxuICB7XG4gICAgY29sdW1uczogNSxcbiAgICByb3dzOiA1LFxuICAgIG1pbldpZHRoOiAxMTAwXG4gIH1cbl07XG5mdW5jdGlvbiBzZWxlY3RHcmlkTGF5b3V0KGxheW91dERlZmluaXRpb25zLCBwYXJ0aWNpcGFudENvdW50LCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGlmIChsYXlvdXREZWZpbml0aW9ucy5sZW5ndGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXQgbGVhc3Qgb25lIGdyaWQgbGF5b3V0IGRlZmluaXRpb24gbXVzdCBiZSBwcm92aWRlZC5cIik7XG4gIH1cbiAgY29uc3QgbGF5b3V0cyA9IGV4cGFuZEFuZFNvcnRMYXlvdXREZWZpbml0aW9ucyhsYXlvdXREZWZpbml0aW9ucyk7XG4gIGlmICh3aWR0aCA8PSAwIHx8IGhlaWdodCA8PSAwKSB7XG4gICAgcmV0dXJuIGxheW91dHNbMF07XG4gIH1cbiAgbGV0IGN1cnJlbnRMYXlvdXRJbmRleCA9IDA7XG4gIGNvbnN0IGNvbnRhaW5lck9yaWVudGF0aW9uID0gd2lkdGggLyBoZWlnaHQgPiAxID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgbGV0IGxheW91dCA9IGxheW91dHMuZmluZCgobGF5b3V0XywgaW5kZXgsIGFsbExheW91dHMpID0+IHtcbiAgICBjdXJyZW50TGF5b3V0SW5kZXggPSBpbmRleDtcbiAgICBjb25zdCBpc0JpZ2dlckxheW91dEF2YWlsYWJsZSA9IGFsbExheW91dHMuZmluZEluZGV4KChsLCBpKSA9PiB7XG4gICAgICBjb25zdCBmaXRzT3JpZW50YXRpb24gPSAhbC5vcmllbnRhdGlvbiB8fCBsLm9yaWVudGF0aW9uID09PSBjb250YWluZXJPcmllbnRhdGlvbjtcbiAgICAgIGNvbnN0IGxheW91dElzQmlnZ2VyVGhhbkN1cnJlbnQgPSBpID4gaW5kZXg7XG4gICAgICBjb25zdCBsYXlvdXRGaXRzU2FtZUFtb3VudE9mUGFydGljaXBhbnRzID0gbC5tYXhUaWxlcyA9PT0gbGF5b3V0Xy5tYXhUaWxlcztcbiAgICAgIHJldHVybiBsYXlvdXRJc0JpZ2dlclRoYW5DdXJyZW50ICYmIGxheW91dEZpdHNTYW1lQW1vdW50T2ZQYXJ0aWNpcGFudHMgJiYgZml0c09yaWVudGF0aW9uO1xuICAgIH0pICE9PSAtMTtcbiAgICByZXR1cm4gbGF5b3V0Xy5tYXhUaWxlcyA+PSBwYXJ0aWNpcGFudENvdW50ICYmICFpc0JpZ2dlckxheW91dEF2YWlsYWJsZTtcbiAgfSk7XG4gIGlmIChsYXlvdXQgPT09IHZvaWQgMCkge1xuICAgIGxheW91dCA9IGxheW91dHNbbGF5b3V0cy5sZW5ndGggLSAxXTtcbiAgICBpZiAobGF5b3V0KSB7XG4gICAgICBsb2cud2FybihcbiAgICAgICAgYE5vIGxheW91dCBmb3VuZCBmb3I6IHBhcnRpY2lwYW50Q291bnQ6ICR7cGFydGljaXBhbnRDb3VudH0sIHdpZHRoL2hlaWdodDogJHt3aWR0aH0vJHtoZWlnaHR9IGZhbGxiYWNrIHRvIGJpZ2dlc3QgYXZhaWxhYmxlIGxheW91dCAoJHtsYXlvdXR9KS5gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGxheW91dCBvciBmYWxsYmFjayBsYXlvdXQgZm91bmQuYCk7XG4gICAgfVxuICB9XG4gIGlmICh3aWR0aCA8IGxheW91dC5taW5XaWR0aCB8fCBoZWlnaHQgPCBsYXlvdXQubWluSGVpZ2h0KSB7XG4gICAgaWYgKGN1cnJlbnRMYXlvdXRJbmRleCA+IDApIHtcbiAgICAgIGNvbnN0IHNtYWxsZXJMYXlvdXQgPSBsYXlvdXRzW2N1cnJlbnRMYXlvdXRJbmRleCAtIDFdO1xuICAgICAgbGF5b3V0ID0gc2VsZWN0R3JpZExheW91dChcbiAgICAgICAgbGF5b3V0cy5zbGljZSgwLCBjdXJyZW50TGF5b3V0SW5kZXgpLFxuICAgICAgICBzbWFsbGVyTGF5b3V0Lm1heFRpbGVzLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGF5b3V0O1xufVxuZnVuY3Rpb24gZXhwYW5kQW5kU29ydExheW91dERlZmluaXRpb25zKGxheW91dHMpIHtcbiAgcmV0dXJuIFsuLi5sYXlvdXRzXS5tYXAoKGxheW91dCkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGAke2xheW91dC5jb2x1bW5zfXgke2xheW91dC5yb3dzfWAsXG4gICAgICBjb2x1bW5zOiBsYXlvdXQuY29sdW1ucyxcbiAgICAgIHJvd3M6IGxheW91dC5yb3dzLFxuICAgICAgbWF4VGlsZXM6IGxheW91dC5jb2x1bW5zICogbGF5b3V0LnJvd3MsXG4gICAgICBtaW5XaWR0aDogKF9hID0gbGF5b3V0Lm1pbldpZHRoKSAhPSBudWxsID8gX2EgOiAwLFxuICAgICAgbWluSGVpZ2h0OiAoX2IgPSBsYXlvdXQubWluSGVpZ2h0KSAhPSBudWxsID8gX2IgOiAwLFxuICAgICAgb3JpZW50YXRpb246IGxheW91dC5vcmllbnRhdGlvblxuICAgIH07XG4gIH0pLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5tYXhUaWxlcyAhPT0gYi5tYXhUaWxlcykge1xuICAgICAgcmV0dXJuIGEubWF4VGlsZXMgLSBiLm1heFRpbGVzO1xuICAgIH0gZWxzZSBpZiAoYS5taW5XaWR0aCAhPT0gMCB8fCBiLm1pbldpZHRoICE9PSAwKSB7XG4gICAgICByZXR1cm4gYS5taW5XaWR0aCAtIGIubWluV2lkdGg7XG4gICAgfSBlbHNlIGlmIChhLm1pbkhlaWdodCAhPT0gMCB8fCBiLm1pbkhlaWdodCAhPT0gMCkge1xuICAgICAgcmV0dXJuIGEubWluSGVpZ2h0IC0gYi5taW5IZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNyYy9oZWxwZXIvc2V0LWhlbHBlci50c1xuZnVuY3Rpb24gc2V0RGlmZmVyZW5jZShzZXRBLCBzZXRCKSB7XG4gIGNvbnN0IF9kaWZmZXJlbmNlID0gbmV3IFNldChzZXRBKTtcbiAgZm9yIChjb25zdCBlbGVtIG9mIHNldEIpIHtcbiAgICBfZGlmZmVyZW5jZS5kZWxldGUoZWxlbSk7XG4gIH1cbiAgcmV0dXJuIF9kaWZmZXJlbmNlO1xufVxuXG4vLyBzcmMvaGVscGVyL2ZlYXR1cmVEZXRlY3Rpb24udHNcbmZ1bmN0aW9uIHN1cHBvcnRzU2NyZWVuU2hhcmluZygpIHtcbiAgcmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiAhIW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhO1xufVxuXG4vLyBzcmMvaGVscGVyL3RyYW5zY3JpcHRpb25zLnRzXG5mdW5jdGlvbiBnZXRBY3RpdmVUcmFuc2NyaXB0aW9uU2VnbWVudHMoc2VnbWVudHMsIHN5bmNUaW1lcywgbWF4QWdlID0gMCkge1xuICByZXR1cm4gc2VnbWVudHMuZmlsdGVyKChzZWdtZW50KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGhhc1RyYWNrU3luYyA9ICEhc3luY1RpbWVzLnJ0cFRpbWVzdGFtcDtcbiAgICBjb25zdCBjdXJyZW50VHJhY2tUaW1lID0gKF9hID0gc3luY1RpbWVzLnJ0cFRpbWVzdGFtcCkgIT0gbnVsbCA/IF9hIDogcGVyZm9ybWFuY2UudGltZU9yaWdpbiArIHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IGRpc3BsYXlTdGFydFRpbWUgPSBoYXNUcmFja1N5bmMgPyBNYXRoLm1heChzZWdtZW50LnJlY2VpdmVkQXRNZWRpYVRpbWVzdGFtcCwgc2VnbWVudC5zdGFydFRpbWUpIDogc2VnbWVudC5yZWNlaXZlZEF0O1xuICAgIGNvbnN0IHNlZ21lbnREdXJhdGlvbiA9IG1heEFnZSArIHNlZ21lbnQuZW5kVGltZSAtIHNlZ21lbnQuc3RhcnRUaW1lO1xuICAgIHJldHVybiBjdXJyZW50VHJhY2tUaW1lID49IGRpc3BsYXlTdGFydFRpbWUgJiYgY3VycmVudFRyYWNrVGltZSA8PSBkaXNwbGF5U3RhcnRUaW1lICsgc2VnbWVudER1cmF0aW9uO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGFkZE1lZGlhVGltZXN0YW1wVG9UcmFuc2NyaXB0aW9uKHNlZ21lbnQsIHRpbWVzdGFtcHMpIHtcbiAgdmFyIF9hO1xuICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc2VnbWVudCksIHtcbiAgICByZWNlaXZlZEF0TWVkaWFUaW1lc3RhbXA6IChfYSA9IHRpbWVzdGFtcHMucnRwVGltZXN0YW1wKSAhPSBudWxsID8gX2EgOiAwLFxuICAgIHJlY2VpdmVkQXQ6IHRpbWVzdGFtcHMudGltZXN0YW1wXG4gIH0pO1xufVxuZnVuY3Rpb24gZGVkdXBlU2VnbWVudHMocHJldlNlZ21lbnRzLCBuZXdTZWdtZW50cywgd2luZG93U2l6ZSkge1xuICByZXR1cm4gWy4uLnByZXZTZWdtZW50cywgLi4ubmV3U2VnbWVudHNdLnJlZHVjZVJpZ2h0KChhY2MsIHNlZ21lbnQpID0+IHtcbiAgICBpZiAoIWFjYy5maW5kKCh2YWwpID0+IHZhbC5pZCA9PT0gc2VnbWVudC5pZCkpIHtcbiAgICAgIGFjYy51bnNoaWZ0KHNlZ21lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCBbXSkuc2xpY2UoMCAtIHdpbmRvd1NpemUpO1xufVxuZnVuY3Rpb24gZGlkQWN0aXZlU2VnbWVudHNDaGFuZ2UocHJldkFjdGl2ZSwgbmV3QWN0aXZlKSB7XG4gIGlmIChuZXdBY3RpdmUubGVuZ3RoICE9PSBwcmV2QWN0aXZlLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiAhbmV3QWN0aXZlLmV2ZXJ5KChuZXdTZWdtZW50KSA9PiB7XG4gICAgcmV0dXJuIHByZXZBY3RpdmUuZmluZChcbiAgICAgIChwcmV2U2VnbWVudCkgPT4gcHJldlNlZ21lbnQuaWQgPT09IG5ld1NlZ21lbnQuaWQgJiYgcHJldlNlZ21lbnQudGV4dCA9PT0gbmV3U2VnbWVudC50ZXh0ICYmIHByZXZTZWdtZW50LmZpbmFsID09PSBuZXdTZWdtZW50LmZpbmFsICYmIHByZXZTZWdtZW50Lmxhbmd1YWdlID09PSBuZXdTZWdtZW50Lmxhbmd1YWdlICYmIHByZXZTZWdtZW50LnN0YXJ0VGltZSA9PT0gbmV3U2VnbWVudC5zdGFydFRpbWUgJiYgcHJldlNlZ21lbnQuZW5kVGltZSA9PT0gbmV3U2VnbWVudC5lbmRUaW1lXG4gICAgKTtcbiAgfSk7XG59XG5cbi8vIHNyYy90eXBlcy50c1xudmFyIFBJTl9ERUZBVUxUX1NUQVRFID0gW107XG52YXIgV0lER0VUX0RFRkFVTFRfU1RBVEUgPSB7XG4gIHNob3dDaGF0OiBmYWxzZSxcbiAgdW5yZWFkTWVzc2FnZXM6IDAsXG4gIHNob3dTZXR0aW5nczogZmFsc2Vcbn07XG5mdW5jdGlvbiBpc1NvdXJjZVdpdE9wdGlvbnMoc291cmNlKSB7XG4gIHJldHVybiB0eXBlb2Ygc291cmNlID09PSBcIm9iamVjdFwiO1xufVxuZnVuY3Rpb24gaXNTb3VyY2VzV2l0aE9wdGlvbnMoc291cmNlcykge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShzb3VyY2VzKSAmJiBzb3VyY2VzLmZpbHRlcihpc1NvdXJjZVdpdE9wdGlvbnMpLmxlbmd0aCA+IDA7XG59XG5cbi8vIHNyYy9zb3J0aW5nL3NvcnQtdHJhY2stYnVuZGxlcy50c1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2syIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5cbi8vIHNyYy9zb3J0aW5nL2Jhc2Utc29ydC1mdW5jdGlvbnMudHNcbmltcG9ydCB7IFRyYWNrIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5mdW5jdGlvbiBzb3J0UGFydGljaXBhbnRzQnlBdWRpb0xldmVsKGEsIGIpIHtcbiAgcmV0dXJuIGIuYXVkaW9MZXZlbCAtIGEuYXVkaW9MZXZlbDtcbn1cbmZ1bmN0aW9uIHNvcnRQYXJ0aWNpcGFudHNCeUlzU3BlYWtpbmcoYSwgYikge1xuICBpZiAoYS5pc1NwZWFraW5nID09PSBiLmlzU3BlYWtpbmcpIHtcbiAgICByZXR1cm4gMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYS5pc1NwZWFraW5nID8gLTEgOiAxO1xuICB9XG59XG5mdW5jdGlvbiBzb3J0UGFydGljaXBhbnRzQnlMYXN0U3Bva2VuQVQoYSwgYikge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGlmIChhLmxhc3RTcG9rZUF0ICE9PSB2b2lkIDAgfHwgYi5sYXN0U3Bva2VBdCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuICgoX2IgPSAoX2EgPSBiLmxhc3RTcG9rZUF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZ2V0VGltZSgpKSAhPSBudWxsID8gX2IgOiAwKSAtICgoX2QgPSAoX2MgPSBhLmxhc3RTcG9rZUF0KSA9PSBudWxsID8gdm9pZCAwIDogX2MuZ2V0VGltZSgpKSAhPSBudWxsID8gX2QgOiAwKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuZnVuY3Rpb24gc29ydFBhcnRpY2lwYW50c0J5Sm9pbmVkQXQoYSwgYikge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIHJldHVybiAoKF9iID0gKF9hID0gYS5qb2luZWRBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmdldFRpbWUoKSkgIT0gbnVsbCA/IF9iIDogMCkgLSAoKF9kID0gKF9jID0gYi5qb2luZWRBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmdldFRpbWUoKSkgIT0gbnVsbCA/IF9kIDogMCk7XG59XG5mdW5jdGlvbiBzb3J0VHJhY2tSZWZlcmVuY2VzQnlUeXBlKGEsIGIpIHtcbiAgaWYgKGlzVHJhY2tSZWZlcmVuY2UoYSkpIHtcbiAgICBpZiAoaXNUcmFja1JlZmVyZW5jZShiKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNUcmFja1JlZmVyZW5jZShiKSkge1xuICAgIHJldHVybiAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5mdW5jdGlvbiBzb3J0VHJhY2tSZWZzQnlJc0NhbWVyYUVuYWJsZWQoYSwgYikge1xuICBjb25zdCBhVmlkZW8gPSBhLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZDtcbiAgY29uc3QgYlZpZGVvID0gYi5wYXJ0aWNpcGFudC5pc0NhbWVyYUVuYWJsZWQ7XG4gIGlmIChhVmlkZW8gIT09IGJWaWRlbykge1xuICAgIGlmIChhVmlkZW8pIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5cbi8vIHNyYy9zb3J0aW5nL3NvcnQtdHJhY2stYnVuZGxlcy50c1xuZnVuY3Rpb24gc29ydFRyYWNrUmVmZXJlbmNlcyh0cmFja3MpIHtcbiAgY29uc3QgbG9jYWxUcmFja3MgPSBbXTtcbiAgY29uc3Qgc2NyZWVuU2hhcmVUcmFja3MgPSBbXTtcbiAgY29uc3QgY2FtZXJhVHJhY2tzID0gW107XG4gIGNvbnN0IHVuZGVmaW5lZFRyYWNrcyA9IFtdO1xuICB0cmFja3MuZm9yRWFjaCgodHJhY2tSZWYpID0+IHtcbiAgICBpZiAodHJhY2tSZWYucGFydGljaXBhbnQuaXNMb2NhbCAmJiB0cmFja1JlZi5zb3VyY2UgPT09IFRyYWNrMi5Tb3VyY2UuQ2FtZXJhKSB7XG4gICAgICBsb2NhbFRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9IGVsc2UgaWYgKHRyYWNrUmVmLnNvdXJjZSA9PT0gVHJhY2syLlNvdXJjZS5TY3JlZW5TaGFyZSkge1xuICAgICAgc2NyZWVuU2hhcmVUcmFja3MucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIGlmICh0cmFja1JlZi5zb3VyY2UgPT09IFRyYWNrMi5Tb3VyY2UuQ2FtZXJhKSB7XG4gICAgICBjYW1lcmFUcmFja3MucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuZGVmaW5lZFRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBzb3J0ZWRTY3JlZW5TaGFyZVRyYWNrcyA9IHNvcnRTY3JlZW5TaGFyZVRyYWNrcyhzY3JlZW5TaGFyZVRyYWNrcyk7XG4gIGNvbnN0IHNvcnRlZENhbWVyYVRyYWNrcyA9IHNvcnRDYW1lcmFUcmFja3MoY2FtZXJhVHJhY2tzKTtcbiAgcmV0dXJuIFsuLi5sb2NhbFRyYWNrcywgLi4uc29ydGVkU2NyZWVuU2hhcmVUcmFja3MsIC4uLnNvcnRlZENhbWVyYVRyYWNrcywgLi4udW5kZWZpbmVkVHJhY2tzXTtcbn1cbmZ1bmN0aW9uIHNvcnRTY3JlZW5TaGFyZVRyYWNrcyhzY3JlZW5TaGFyZVRyYWNrcykge1xuICBjb25zdCBsb2NhbFNjcmVlblNoYXJlcyA9IFtdO1xuICBjb25zdCByZW1vdGVTY3JlZW5TaGFyZXMgPSBbXTtcbiAgc2NyZWVuU2hhcmVUcmFja3MuZm9yRWFjaCgodHJhY2tSZWYpID0+IHtcbiAgICBpZiAodHJhY2tSZWYucGFydGljaXBhbnQuaXNMb2NhbCkge1xuICAgICAgbG9jYWxTY3JlZW5TaGFyZXMucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW90ZVNjcmVlblNoYXJlcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9XG4gIH0pO1xuICBsb2NhbFNjcmVlblNoYXJlcy5zb3J0KChhLCBiKSA9PiBzb3J0UGFydGljaXBhbnRzQnlKb2luZWRBdChhLnBhcnRpY2lwYW50LCBiLnBhcnRpY2lwYW50KSk7XG4gIHJlbW90ZVNjcmVlblNoYXJlcy5zb3J0KChhLCBiKSA9PiBzb3J0UGFydGljaXBhbnRzQnlKb2luZWRBdChhLnBhcnRpY2lwYW50LCBiLnBhcnRpY2lwYW50KSk7XG4gIGNvbnN0IHNvcnRlZFNjcmVlblNoYXJlVHJhY2tSZWZzID0gWy4uLnJlbW90ZVNjcmVlblNoYXJlcywgLi4ubG9jYWxTY3JlZW5TaGFyZXNdO1xuICByZXR1cm4gc29ydGVkU2NyZWVuU2hhcmVUcmFja1JlZnM7XG59XG5mdW5jdGlvbiBzb3J0Q2FtZXJhVHJhY2tzKGNhbWVyYVRyYWNrUmVmZXJlbmNlcykge1xuICBjb25zdCBsb2NhbENhbWVyYVRyYWNrcyA9IFtdO1xuICBjb25zdCByZW1vdGVDYW1lcmFUcmFja3MgPSBbXTtcbiAgY2FtZXJhVHJhY2tSZWZlcmVuY2VzLmZvckVhY2goKHRyYWNrUmVmKSA9PiB7XG4gICAgaWYgKHRyYWNrUmVmLnBhcnRpY2lwYW50LmlzTG9jYWwpIHtcbiAgICAgIGxvY2FsQ2FtZXJhVHJhY2tzLnB1c2godHJhY2tSZWYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdGVDYW1lcmFUcmFja3MucHVzaCh0cmFja1JlZik7XG4gICAgfVxuICB9KTtcbiAgcmVtb3RlQ2FtZXJhVHJhY2tzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5wYXJ0aWNpcGFudC5pc1NwZWFraW5nICYmIGIucGFydGljaXBhbnQuaXNTcGVha2luZykge1xuICAgICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUF1ZGlvTGV2ZWwoYS5wYXJ0aWNpcGFudCwgYi5wYXJ0aWNpcGFudCk7XG4gICAgfVxuICAgIGlmIChhLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgIT09IGIucGFydGljaXBhbnQuaXNTcGVha2luZykge1xuICAgICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUlzU3BlYWtpbmcoYS5wYXJ0aWNpcGFudCwgYi5wYXJ0aWNpcGFudCk7XG4gICAgfVxuICAgIGlmIChhLnBhcnRpY2lwYW50Lmxhc3RTcG9rZUF0ICE9PSBiLnBhcnRpY2lwYW50Lmxhc3RTcG9rZUF0KSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5TGFzdFNwb2tlbkFUKGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpO1xuICAgIH1cbiAgICBpZiAoaXNUcmFja1JlZmVyZW5jZShhKSAhPT0gaXNUcmFja1JlZmVyZW5jZShiKSkge1xuICAgICAgcmV0dXJuIHNvcnRUcmFja1JlZmVyZW5jZXNCeVR5cGUoYSwgYik7XG4gICAgfVxuICAgIGlmIChhLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCAhPT0gYi5wYXJ0aWNpcGFudC5pc0NhbWVyYUVuYWJsZWQpIHtcbiAgICAgIHJldHVybiBzb3J0VHJhY2tSZWZzQnlJc0NhbWVyYUVuYWJsZWQoYSwgYik7XG4gICAgfVxuICAgIHJldHVybiBzb3J0UGFydGljaXBhbnRzQnlKb2luZWRBdChhLnBhcnRpY2lwYW50LCBiLnBhcnRpY2lwYW50KTtcbiAgfSk7XG4gIHJldHVybiBbLi4ubG9jYWxDYW1lcmFUcmFja3MsIC4uLnJlbW90ZUNhbWVyYVRyYWNrc107XG59XG5cbi8vIHNyYy9zb3J0aW5nL3NvcnQtcGFydGljaXBhbnRzLnRzXG5pbXBvcnQgeyBMb2NhbFBhcnRpY2lwYW50IGFzIExvY2FsUGFydGljaXBhbnQyIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5mdW5jdGlvbiBzb3J0UGFydGljaXBhbnRzKHBhcnRpY2lwYW50cykge1xuICBjb25zdCBzb3J0ZWRQYXJ0aWNpcGFudHMgPSBbLi4ucGFydGljaXBhbnRzXTtcbiAgc29ydGVkUGFydGljaXBhbnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5pc1NwZWFraW5nICYmIGIuaXNTcGVha2luZykge1xuICAgICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUF1ZGlvTGV2ZWwoYSwgYik7XG4gICAgfVxuICAgIGlmIChhLmlzU3BlYWtpbmcgIT09IGIuaXNTcGVha2luZykge1xuICAgICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUlzU3BlYWtpbmcoYSwgYik7XG4gICAgfVxuICAgIGlmIChhLmxhc3RTcG9rZUF0ICE9PSBiLmxhc3RTcG9rZUF0KSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5TGFzdFNwb2tlbkFUKGEsIGIpO1xuICAgIH1cbiAgICBjb25zdCBhVmlkZW8gPSBhLnZpZGVvVHJhY2tQdWJsaWNhdGlvbnMuc2l6ZSA+IDA7XG4gICAgY29uc3QgYlZpZGVvID0gYi52aWRlb1RyYWNrUHVibGljYXRpb25zLnNpemUgPiAwO1xuICAgIGlmIChhVmlkZW8gIT09IGJWaWRlbykge1xuICAgICAgaWYgKGFWaWRlbykge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEsIGIpO1xuICB9KTtcbiAgY29uc3QgbG9jYWxQYXJ0aWNpcGFudCA9IHNvcnRlZFBhcnRpY2lwYW50cy5maW5kKChwKSA9PiBwIGluc3RhbmNlb2YgTG9jYWxQYXJ0aWNpcGFudDIpO1xuICBpZiAobG9jYWxQYXJ0aWNpcGFudCkge1xuICAgIGNvbnN0IGxvY2FsSWR4ID0gc29ydGVkUGFydGljaXBhbnRzLmluZGV4T2YobG9jYWxQYXJ0aWNpcGFudCk7XG4gICAgaWYgKGxvY2FsSWR4ID49IDApIHtcbiAgICAgIHNvcnRlZFBhcnRpY2lwYW50cy5zcGxpY2UobG9jYWxJZHgsIDEpO1xuICAgICAgaWYgKHNvcnRlZFBhcnRpY2lwYW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNvcnRlZFBhcnRpY2lwYW50cy5zcGxpY2UoMCwgMCwgbG9jYWxQYXJ0aWNpcGFudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3J0ZWRQYXJ0aWNpcGFudHMucHVzaChsb2NhbFBhcnRpY2lwYW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNvcnRlZFBhcnRpY2lwYW50cztcbn1cblxuLy8gc3JjL2hlbHBlci9hcnJheS1oZWxwZXIudHNcbmZ1bmN0aW9uIGNodW5rKGlucHV0LCBzaXplKSB7XG4gIHJldHVybiBpbnB1dC5yZWR1Y2UoXG4gICAgKGFyciwgaXRlbSwgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gaWR4ICUgc2l6ZSA9PT0gMCA/IFsuLi5hcnIsIFtpdGVtXV0gOiBbLi4uYXJyLnNsaWNlKDAsIC0xKSwgWy4uLmFyci5zbGljZSgtMSlbMF0sIGl0ZW1dXTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG59XG5mdW5jdGlvbiB6aXAoYTEsIGEyKSB7XG4gIGNvbnN0IHJlc3VsdExlbmd0aCA9IE1hdGgubWF4KGExLmxlbmd0aCwgYTIubGVuZ3RoKTtcbiAgcmV0dXJuIG5ldyBBcnJheShyZXN1bHRMZW5ndGgpLmZpbGwoW10pLm1hcCgoX3ZhbCwgaWR4KSA9PiBbYTFbaWR4XSwgYTJbaWR4XV0pO1xufVxuZnVuY3Rpb24gZGlmZmVyZW5jZUJ5KGExLCBhMiwgYnkpIHtcbiAgcmV0dXJuIGExLmZpbHRlcigoYykgPT4gIWEyLm1hcCgodikgPT4gYnkodikpLmluY2x1ZGVzKGJ5KGMpKSk7XG59XG5cbi8vIHNyYy90cmFjay1yZWZlcmVuY2UvdGVzdC11dGlscy50c1xuaW1wb3J0IHsgUGFydGljaXBhbnQsIFRyYWNrIGFzIFRyYWNrMywgVHJhY2tQdWJsaWNhdGlvbiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gZmxhdFRyYWNrUmVmZXJlbmNlQXJyYXkobGlzdCkge1xuICByZXR1cm4gbGlzdC5tYXAoKGl0ZW0pID0+IHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGl0ZW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBgJHtpdGVtfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXRUcmFja1JlZmVyZW5jZUlkKGl0ZW0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNyYy9zb3J0aW5nL3RpbGUtYXJyYXktdXBkYXRlLnRzXG5mdW5jdGlvbiB2aXN1YWxQYWdlQ2hhbmdlKHN0YXRlLCBuZXh0KSB7XG4gIHJldHVybiB7XG4gICAgZHJvcHBlZDogZGlmZmVyZW5jZUJ5KHN0YXRlLCBuZXh0LCBnZXRUcmFja1JlZmVyZW5jZUlkKSxcbiAgICBhZGRlZDogZGlmZmVyZW5jZUJ5KG5leHQsIHN0YXRlLCBnZXRUcmFja1JlZmVyZW5jZUlkKVxuICB9O1xufVxuZnVuY3Rpb24gbGlzdE5lZWRzVXBkYXRpbmcoY2hhbmdlcykge1xuICByZXR1cm4gY2hhbmdlcy5hZGRlZC5sZW5ndGggIT09IDAgfHwgY2hhbmdlcy5kcm9wcGVkLmxlbmd0aCAhPT0gMDtcbn1cbmZ1bmN0aW9uIGZpbmRJbmRleCh0cmFja1JlZmVyZW5jZSwgdHJhY2tSZWZlcmVuY2VzKSB7XG4gIGNvbnN0IGluZGV4VG9SZXBsYWNlID0gdHJhY2tSZWZlcmVuY2VzLmZpbmRJbmRleChcbiAgICAodHJhY2tSZWZlcmVuY2VfKSA9PiBnZXRUcmFja1JlZmVyZW5jZUlkKHRyYWNrUmVmZXJlbmNlXykgPT09IGdldFRyYWNrUmVmZXJlbmNlSWQodHJhY2tSZWZlcmVuY2UpXG4gICk7XG4gIGlmIChpbmRleFRvUmVwbGFjZSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRWxlbWVudCBub3QgcGFydCBvZiB0aGUgYXJyYXk6ICR7Z2V0VHJhY2tSZWZlcmVuY2VJZChcbiAgICAgICAgdHJhY2tSZWZlcmVuY2VcbiAgICAgICl9IG5vdCBpbiAke2ZsYXRUcmFja1JlZmVyZW5jZUFycmF5KHRyYWNrUmVmZXJlbmNlcyl9YFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGluZGV4VG9SZXBsYWNlO1xufVxuZnVuY3Rpb24gc3dhcEl0ZW1zKG1vdmVGb3J3YXJkLCBtb3ZlQmFjaywgdHJhY2tSZWZlcmVuY2VzKSB7XG4gIGNvbnN0IGluZGV4VG9SZXBsYWNlID0gZmluZEluZGV4KG1vdmVGb3J3YXJkLCB0cmFja1JlZmVyZW5jZXMpO1xuICBjb25zdCBpbmRleFJlcGxhY2VXaXRoID0gZmluZEluZGV4KG1vdmVCYWNrLCB0cmFja1JlZmVyZW5jZXMpO1xuICB0cmFja1JlZmVyZW5jZXMuc3BsaWNlKGluZGV4VG9SZXBsYWNlLCAxLCBtb3ZlQmFjayk7XG4gIHRyYWNrUmVmZXJlbmNlcy5zcGxpY2UoaW5kZXhSZXBsYWNlV2l0aCwgMSwgbW92ZUZvcndhcmQpO1xuICByZXR1cm4gdHJhY2tSZWZlcmVuY2VzO1xufVxuZnVuY3Rpb24gZHJvcEl0ZW0oaXRlbVRvRHJvcCwgbGlzdCkge1xuICBjb25zdCBpbmRleE9mRWxlbWVudFRvRHJvcCA9IGZpbmRJbmRleChpdGVtVG9Ecm9wLCBsaXN0KTtcbiAgbGlzdC5zcGxpY2UoaW5kZXhPZkVsZW1lbnRUb0Ryb3AsIDEpO1xuICByZXR1cm4gbGlzdDtcbn1cbmZ1bmN0aW9uIGFkZEl0ZW0oaXRlbVRvQWRkLCBsaXN0KSB7XG4gIHJldHVybiBbLi4ubGlzdCwgaXRlbVRvQWRkXTtcbn1cbmZ1bmN0aW9uIGRpdmlkZUludG9QYWdlcyhsaXN0LCBtYXhFbGVtZW50c09uUGFnZSkge1xuICBjb25zdCBwYWdlcyA9IGNodW5rKGxpc3QsIG1heEVsZW1lbnRzT25QYWdlKTtcbiAgcmV0dXJuIHBhZ2VzO1xufVxuZnVuY3Rpb24gdXBkYXRlUGFnZXMoY3VycmVudExpc3QsIG5leHRMaXN0LCBtYXhJdGVtc09uUGFnZSkge1xuICBsZXQgdXBkYXRlZExpc3QgPSByZWZyZXNoTGlzdChjdXJyZW50TGlzdCwgbmV4dExpc3QpO1xuICBpZiAodXBkYXRlZExpc3QubGVuZ3RoIDwgbmV4dExpc3QubGVuZ3RoKSB7XG4gICAgY29uc3QgYWRkZWRJdGVtcyA9IGRpZmZlcmVuY2VCeShuZXh0TGlzdCwgdXBkYXRlZExpc3QsIGdldFRyYWNrUmVmZXJlbmNlSWQpO1xuICAgIHVwZGF0ZWRMaXN0ID0gWy4uLnVwZGF0ZWRMaXN0LCAuLi5hZGRlZEl0ZW1zXTtcbiAgfVxuICBjb25zdCBjdXJyZW50UGFnZXMgPSBkaXZpZGVJbnRvUGFnZXModXBkYXRlZExpc3QsIG1heEl0ZW1zT25QYWdlKTtcbiAgY29uc3QgbmV4dFBhZ2VzID0gZGl2aWRlSW50b1BhZ2VzKG5leHRMaXN0LCBtYXhJdGVtc09uUGFnZSk7XG4gIHppcChjdXJyZW50UGFnZXMsIG5leHRQYWdlcykuZm9yRWFjaCgoW2N1cnJlbnRQYWdlLCBuZXh0UGFnZV0sIHBhZ2VJbmRleCkgPT4ge1xuICAgIGlmIChjdXJyZW50UGFnZSAmJiBuZXh0UGFnZSkge1xuICAgICAgY29uc3QgdXBkYXRlZFBhZ2UgPSBkaXZpZGVJbnRvUGFnZXModXBkYXRlZExpc3QsIG1heEl0ZW1zT25QYWdlKVtwYWdlSW5kZXhdO1xuICAgICAgY29uc3QgY2hhbmdlcyA9IHZpc3VhbFBhZ2VDaGFuZ2UodXBkYXRlZFBhZ2UsIG5leHRQYWdlKTtcbiAgICAgIGlmIChsaXN0TmVlZHNVcGRhdGluZyhjaGFuZ2VzKSkge1xuICAgICAgICBsb2cuZGVidWcoXG4gICAgICAgICAgYERldGVjdGVkIHZpc3VhbCBjaGFuZ2VzIG9uIHBhZ2U6ICR7cGFnZUluZGV4fSwgY3VycmVudDogJHtmbGF0VHJhY2tSZWZlcmVuY2VBcnJheShcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlXG4gICAgICAgICAgKX0sIG5leHQ6ICR7ZmxhdFRyYWNrUmVmZXJlbmNlQXJyYXkobmV4dFBhZ2UpfWAsXG4gICAgICAgICAgeyBjaGFuZ2VzIH1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNoYW5nZXMuYWRkZWQubGVuZ3RoID09PSBjaGFuZ2VzLmRyb3BwZWQubGVuZ3RoKSB7XG4gICAgICAgICAgemlwKGNoYW5nZXMuYWRkZWQsIGNoYW5nZXMuZHJvcHBlZCkuZm9yRWFjaCgoW2FkZGVkLCBkcm9wcGVkXSkgPT4ge1xuICAgICAgICAgICAgaWYgKGFkZGVkICYmIGRyb3BwZWQpIHtcbiAgICAgICAgICAgICAgdXBkYXRlZExpc3QgPSBzd2FwSXRlbXMoYWRkZWQsIGRyb3BwZWQsIHVwZGF0ZWRMaXN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgRm9yIGEgc3dhcCBhY3Rpb24gd2UgbmVlZCBhIGFkZGl0aW9uIGFuZCBhIHJlbW92YWwgb25lIGlzIG1pc3Npbmc6ICR7YWRkZWR9LCAke2Ryb3BwZWR9YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VzLmFkZGVkLmxlbmd0aCA9PT0gMCAmJiBjaGFuZ2VzLmRyb3BwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNoYW5nZXMuZHJvcHBlZC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVkTGlzdCA9IGRyb3BJdGVtKGl0ZW0sIHVwZGF0ZWRMaXN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlcy5hZGRlZC5sZW5ndGggPiAwICYmIGNoYW5nZXMuZHJvcHBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBjaGFuZ2VzLmFkZGVkLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZWRMaXN0ID0gYWRkSXRlbShpdGVtLCB1cGRhdGVkTGlzdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBpZiAodXBkYXRlZExpc3QubGVuZ3RoID4gbmV4dExpc3QubGVuZ3RoKSB7XG4gICAgY29uc3QgbWlzc2luZ0l0ZW1zID0gZGlmZmVyZW5jZUJ5KHVwZGF0ZWRMaXN0LCBuZXh0TGlzdCwgZ2V0VHJhY2tSZWZlcmVuY2VJZCk7XG4gICAgdXBkYXRlZExpc3QgPSB1cGRhdGVkTGlzdC5maWx0ZXIoXG4gICAgICAoaXRlbSkgPT4gIW1pc3NpbmdJdGVtcy5tYXAoZ2V0VHJhY2tSZWZlcmVuY2VJZCkuaW5jbHVkZXMoZ2V0VHJhY2tSZWZlcmVuY2VJZChpdGVtKSlcbiAgICApO1xuICB9XG4gIHJldHVybiB1cGRhdGVkTGlzdDtcbn1cbmZ1bmN0aW9uIHJlZnJlc2hMaXN0KGN1cnJlbnRMaXN0LCBuZXh0TGlzdCkge1xuICByZXR1cm4gY3VycmVudExpc3QubWFwKChjdXJyZW50SXRlbSkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZUZvckN1cnJlbnRJdGVtID0gbmV4dExpc3QuZmluZChcbiAgICAgIChuZXdJdGVtXykgPT4gKFxuICAgICAgICAvLyBJZiB0aGUgSURzIG1hdGNoIG9yIC4uXG4gICAgICAgIGdldFRyYWNrUmVmZXJlbmNlSWQoY3VycmVudEl0ZW0pID09PSBnZXRUcmFja1JlZmVyZW5jZUlkKG5ld0l0ZW1fKSB8fCAvLyAuLi4gaWYgdGhlIGN1cnJlbnQgaXRlbSBpcyBhIHBsYWNlaG9sZGVyIGFuZCB0aGUgbmV3IGl0ZW0gaXMgdGhlIHRyYWNrIHJlZmVyZW5jZSBjYW4gcmVwbGFjZSBpdC5cbiAgICAgICAgdHlwZW9mIGN1cnJlbnRJdGVtICE9PSBcIm51bWJlclwiICYmIGlzVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlcihjdXJyZW50SXRlbSkgJiYgaXNUcmFja1JlZmVyZW5jZShuZXdJdGVtXykgJiYgaXNQbGFjZWhvbGRlclJlcGxhY2VtZW50KGN1cnJlbnRJdGVtLCBuZXdJdGVtXylcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiB1cGRhdGVGb3JDdXJyZW50SXRlbSAhPSBudWxsID8gdXBkYXRlRm9yQ3VycmVudEl0ZW0gOiBjdXJyZW50SXRlbTtcbiAgfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL21lZGlhVG9nZ2xlLnRzXG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazcgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7IFN1YmplY3QgYXMgU3ViamVjdDIsIG1hcCBhcyBtYXA0LCBzdGFydFdpdGggYXMgc3RhcnRXaXRoNCB9IGZyb20gXCJyeGpzXCI7XG5cbi8vIHNyYy9vYnNlcnZhYmxlcy9wYXJ0aWNpcGFudC50c1xuaW1wb3J0IHsgUGFydGljaXBhbnRFdmVudCBhcyBQYXJ0aWNpcGFudEV2ZW50MiwgUm9vbUV2ZW50IGFzIFJvb21FdmVudDMsIFRyYWNrIGFzIFRyYWNrNiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSBhcyBPYnNlcnZhYmxlMiwgbWFwIGFzIG1hcDMsIHN0YXJ0V2l0aCBhcyBzdGFydFdpdGgzLCBzd2l0Y2hNYXAgfSBmcm9tIFwicnhqc1wiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9tZWRpYVRyYWNrLnRzXG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazQgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7IG1hcCwgc3RhcnRXaXRoIH0gZnJvbSBcInJ4anNcIjtcblxuLy8gc3JjL3N0eWxlcy1pbnRlcmZhY2UvY2xhc3MtcHJlZml4ZXIudHNcbmZ1bmN0aW9uIHByZWZpeENsYXNzKHVucHJlZml4ZWRDbGFzc05hbWUpIHtcbiAgcmV0dXJuIGAke2Nzc1ByZWZpeH0tJHt1bnByZWZpeGVkQ2xhc3NOYW1lfWA7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL21lZGlhVHJhY2sudHNcbmZ1bmN0aW9uIHNldHVwTWVkaWFUcmFjayh0cmFja0lkZW50aWZpZXIpIHtcbiAgY29uc3QgaW5pdGlhbFB1YiA9IGdldFRyYWNrQnlJZGVudGlmaWVyKHRyYWNrSWRlbnRpZmllcik7XG4gIGNvbnN0IHRyYWNrT2JzZXJ2ZXIgPSBvYnNlcnZlUGFydGljaXBhbnRNZWRpYSh0cmFja0lkZW50aWZpZXIucGFydGljaXBhbnQpLnBpcGUoXG4gICAgbWFwKCgpID0+IHtcbiAgICAgIHJldHVybiBnZXRUcmFja0J5SWRlbnRpZmllcih0cmFja0lkZW50aWZpZXIpO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aChpbml0aWFsUHViKVxuICApO1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcbiAgICB0cmFja0lkZW50aWZpZXIuc291cmNlID09PSBUcmFjazQuU291cmNlLkNhbWVyYSB8fCB0cmFja0lkZW50aWZpZXIuc291cmNlID09PSBUcmFjazQuU291cmNlLlNjcmVlblNoYXJlID8gXCJwYXJ0aWNpcGFudC1tZWRpYS12aWRlb1wiIDogXCJwYXJ0aWNpcGFudC1tZWRpYS1hdWRpb1wiXG4gICk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgdHJhY2tPYnNlcnZlciB9O1xufVxuZnVuY3Rpb24gZ2V0VHJhY2tCeUlkZW50aWZpZXIob3B0aW9ucykge1xuICBpZiAoaXNUcmFja1JlZmVyZW5jZShvcHRpb25zKSkge1xuICAgIHJldHVybiBvcHRpb25zLnB1YmxpY2F0aW9uO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHsgc291cmNlLCBuYW1lLCBwYXJ0aWNpcGFudCB9ID0gb3B0aW9ucztcbiAgICBpZiAoc291cmNlICYmIG5hbWUpIHtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9ucygpLmZpbmQoKHB1YikgPT4gcHViLnNvdXJjZSA9PT0gc291cmNlICYmIHB1Yi50cmFja05hbWUgPT09IG5hbWUpO1xuICAgIH0gZWxzZSBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuIHBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb25CeU5hbWUobmFtZSk7XG4gICAgfSBlbHNlIGlmIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKHNvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IG9uZSBvZiBzb3VyY2UgYW5kIG5hbWUgbmVlZHMgdG8gYmUgZGVmaW5lZFwiKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL29ic2VydmFibGVzL3Jvb20udHNcbmltcG9ydCB7IFN1YmplY3QsIG1hcCBhcyBtYXAyLCBPYnNlcnZhYmxlLCBzdGFydFdpdGggYXMgc3RhcnRXaXRoMiwgZmluYWxpemUsIGZpbHRlciwgY29uY2F0IH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IExvY2FsUGFydGljaXBhbnQgYXMgTG9jYWxQYXJ0aWNpcGFudDMsIFJvb20sIFJvb21FdmVudCBhcyBSb29tRXZlbnQyLCBUcmFjayBhcyBUcmFjazUgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIG9ic2VydmVSb29tRXZlbnRzKHJvb20sIC4uLmV2ZW50cykge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IG9uUm9vbVVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHJvb20pO1xuICAgIH07XG4gICAgZXZlbnRzLmZvckVhY2goKGV2dCkgPT4ge1xuICAgICAgcm9vbS5vbihldnQsIG9uUm9vbVVwZGF0ZSk7XG4gICAgfSk7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICAgIHJvb20ub2ZmKGV2dCwgb25Sb29tVXBkYXRlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9KS5waXBlKHN0YXJ0V2l0aDIocm9vbSkpO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIGV2ZW50KSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlID0gKC4uLnBhcmFtcykgPT4ge1xuICAgICAgc3Vic2NyaWJlLm5leHQocGFyYW1zKTtcbiAgICB9O1xuICAgIHJvb20ub24oZXZlbnQsIHVwZGF0ZSk7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICByb29tLm9mZihldmVudCwgdXBkYXRlKTtcbiAgICB9O1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gcm9vbU9ic2VydmVyKHJvb20pIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmVSb29tRXZlbnRzKFxuICAgIHJvb20sXG4gICAgUm9vbUV2ZW50Mi5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgICBSb29tRXZlbnQyLlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgIFJvb21FdmVudDIuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkLFxuICAgIFJvb21FdmVudDIuVHJhY2tTdWJzY3JpYmVkLFxuICAgIFJvb21FdmVudDIuVHJhY2tVbnN1YnNjcmliZWQsXG4gICAgUm9vbUV2ZW50Mi5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIFJvb21FdmVudDIuTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICAgIFJvb21FdmVudDIuQXVkaW9QbGF5YmFja1N0YXR1c0NoYW5nZWQsXG4gICAgUm9vbUV2ZW50Mi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShzdGFydFdpdGgyKHJvb20pKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiBjb25uZWN0aW9uU3RhdGVPYnNlcnZlcihyb29tKSB7XG4gIHJldHVybiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQpLnBpcGUoXG4gICAgbWFwMigoW2Nvbm5lY3Rpb25TdGF0ZV0pID0+IGNvbm5lY3Rpb25TdGF0ZSksXG4gICAgc3RhcnRXaXRoMihyb29tLnN0YXRlKVxuICApO1xufVxuZnVuY3Rpb24gc2NyZWVuU2hhcmVPYnNlcnZlcihyb29tKSB7XG4gIGxldCBzY3JlZW5TaGFyZVN1YnNjcmliZXI7XG4gIGNvbnN0IG9ic2VydmVycyA9IFtdO1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKHN1YnNjcmliZXIpID0+IHtcbiAgICBzY3JlZW5TaGFyZVN1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBvYnNlcnZlcnMuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuICBjb25zdCBzY3JlZW5TaGFyZVRyYWNrcyA9IFtdO1xuICBjb25zdCBoYW5kbGVTdWIgPSAocHVibGljYXRpb24sIHBhcnRpY2lwYW50KSA9PiB7XG4gICAgaWYgKHB1YmxpY2F0aW9uLnNvdXJjZSAhPT0gVHJhY2s1LlNvdXJjZS5TY3JlZW5TaGFyZSAmJiBwdWJsaWNhdGlvbi5zb3VyY2UgIT09IFRyYWNrNS5Tb3VyY2UuU2NyZWVuU2hhcmVBdWRpbykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdHJhY2tNYXAgPSBzY3JlZW5TaGFyZVRyYWNrcy5maW5kKCh0cikgPT4gdHIucGFydGljaXBhbnQuaWRlbnRpdHkgPT09IHBhcnRpY2lwYW50LmlkZW50aXR5KTtcbiAgICBjb25zdCBnZXRTY3JlZW5TaGFyZVRyYWNrcyA9IChwYXJ0aWNpcGFudDIpID0+IHtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudDIuZ2V0VHJhY2tQdWJsaWNhdGlvbnMoKS5maWx0ZXIoXG4gICAgICAgICh0cmFjaykgPT4gKHRyYWNrLnNvdXJjZSA9PT0gVHJhY2s1LlNvdXJjZS5TY3JlZW5TaGFyZSB8fCB0cmFjay5zb3VyY2UgPT09IFRyYWNrNS5Tb3VyY2UuU2NyZWVuU2hhcmVBdWRpbykgJiYgdHJhY2sudHJhY2tcbiAgICAgICk7XG4gICAgfTtcbiAgICBpZiAoIXRyYWNrTWFwKSB7XG4gICAgICB0cmFja01hcCA9IHtcbiAgICAgICAgcGFydGljaXBhbnQsXG4gICAgICAgIHRyYWNrczogZ2V0U2NyZWVuU2hhcmVUcmFja3MocGFydGljaXBhbnQpXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbmRleCA9IHNjcmVlblNoYXJlVHJhY2tzLmluZGV4T2YodHJhY2tNYXApO1xuICAgICAgc2NyZWVuU2hhcmVUcmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRyYWNrTWFwLnRyYWNrcyA9IGdldFNjcmVlblNoYXJlVHJhY2tzKHBhcnRpY2lwYW50KTtcbiAgICB9XG4gICAgaWYgKHRyYWNrTWFwLnRyYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICBzY3JlZW5TaGFyZVRyYWNrcy5wdXNoKHRyYWNrTWFwKTtcbiAgICB9XG4gICAgc2NyZWVuU2hhcmVTdWJzY3JpYmVyLm5leHQoc2NyZWVuU2hhcmVUcmFja3MpO1xuICB9O1xuICBvYnNlcnZlcnMucHVzaChcbiAgICByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLlRyYWNrU3Vic2NyaWJlZCkuc3Vic2NyaWJlKFxuICAgICAgKFssIC4uLmFyZ3NdKSA9PiBoYW5kbGVTdWIoLi4uYXJncylcbiAgICApXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuVHJhY2tVbnN1YnNjcmliZWQpLnN1YnNjcmliZShcbiAgICAgIChbLCAuLi5hcmdzXSkgPT4gaGFuZGxlU3ViKC4uLmFyZ3MpXG4gICAgKVxuICApO1xuICBvYnNlcnZlcnMucHVzaChcbiAgICByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLkxvY2FsVHJhY2tQdWJsaXNoZWQpLnN1YnNjcmliZSgoYXJncykgPT4gaGFuZGxlU3ViKC4uLmFyZ3MpKVxuICApO1xuICBvYnNlcnZlcnMucHVzaChcbiAgICByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCkuc3Vic2NyaWJlKChhcmdzKSA9PiB7XG4gICAgICBoYW5kbGVTdWIoLi4uYXJncyk7XG4gICAgfSlcbiAgKTtcbiAgb2JzZXJ2ZXJzLnB1c2goXG4gICAgcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50Mi5UcmFja011dGVkKS5zdWJzY3JpYmUoKGFyZ3MpID0+IHtcbiAgICAgIGhhbmRsZVN1YiguLi5hcmdzKTtcbiAgICB9KVxuICApO1xuICBvYnNlcnZlcnMucHVzaChcbiAgICByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLlRyYWNrVW5tdXRlZCkuc3Vic2NyaWJlKChhcmdzKSA9PiB7XG4gICAgICBoYW5kbGVTdWIoLi4uYXJncyk7XG4gICAgfSlcbiAgKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgZm9yIChjb25zdCBwIG9mIHJvb20ucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKSB7XG4gICAgICBwLmdldFRyYWNrUHVibGljYXRpb25zKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgaGFuZGxlU3ViKHRyYWNrLCBwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgMSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gcm9vbUluZm9PYnNlcnZlcihyb29tKSB7XG4gIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZVJvb21FdmVudHMoXG4gICAgcm9vbSxcbiAgICBSb29tRXZlbnQyLlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gICAgUm9vbUV2ZW50Mi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBtYXAyKChyKSA9PiB7XG4gICAgICByZXR1cm4geyBuYW1lOiByLm5hbWUsIG1ldGFkYXRhOiByLm1ldGFkYXRhIH07XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmVyO1xufVxuZnVuY3Rpb24gYWN0aXZlU3BlYWtlck9ic2VydmVyKHJvb20pIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkKS5waXBlKFxuICAgIG1hcDIoKFtzcGVha2Vyc10pID0+IHNwZWFrZXJzKVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlTWVkaWFEZXZpY2VPYnNlcnZlcihraW5kLCBvbkVycm9yLCByZXF1ZXN0UGVybWlzc2lvbnMgPSB0cnVlKSB7XG4gIHZhciBfYTtcbiAgY29uc3Qgb25EZXZpY2VDaGFuZ2UgPSAoKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5ld0RldmljZXMgPSB5aWVsZCBSb29tLmdldExvY2FsRGV2aWNlcyhraW5kLCByZXF1ZXN0UGVybWlzc2lvbnMpO1xuICAgICAgZGV2aWNlU3ViamVjdC5uZXh0KG5ld0RldmljZXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRXJyb3IoZSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgZGV2aWNlU3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBkZXZpY2VTdWJqZWN0LnBpcGUoXG4gICAgZmluYWxpemUoKCkgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIChfYTIgPSBuYXZpZ2F0b3IgPT0gbnVsbCA/IHZvaWQgMCA6IG5hdmlnYXRvci5tZWRpYURldmljZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLCBvbkRldmljZUNoYW5nZSk7XG4gICAgfSlcbiAgKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBpZiAoIXdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEFjY2Vzc2luZyBtZWRpYSBkZXZpY2VzIGlzIGF2YWlsYWJsZSBvbmx5IGluIHNlY3VyZSBjb250ZXh0cyAoSFRUUFMgYW5kIGxvY2FsaG9zdCksIGluIHNvbWUgb3IgYWxsIHN1cHBvcnRpbmcgYnJvd3NlcnMuIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05hdmlnYXRvci9tZWRpYURldmljZXNgXG4gICAgICApO1xuICAgIH1cbiAgICAoX2EgPSBuYXZpZ2F0b3IgPT0gbnVsbCA/IHZvaWQgMCA6IG5hdmlnYXRvci5tZWRpYURldmljZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlY2hhbmdlXCIsIG9uRGV2aWNlQ2hhbmdlKTtcbiAgfVxuICByZXR1cm4gY29uY2F0KFxuICAgIFJvb20uZ2V0TG9jYWxEZXZpY2VzKGtpbmQsIHJlcXVlc3RQZXJtaXNzaW9ucykuY2F0Y2goKGUpID0+IHtcbiAgICAgIG9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRXJyb3IoZSk7XG4gICAgICByZXR1cm4gW107XG4gICAgfSksXG4gICAgb2JzZXJ2YWJsZVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlRGF0YU9ic2VydmVyKHJvb20pIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudDIuRGF0YVJlY2VpdmVkKTtcbn1cbmZ1bmN0aW9uIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUocm9vbSkge1xuICBjb25zdCBvYnNlcnZhYmxlID0gb2JzZXJ2ZVJvb21FdmVudHMocm9vbSwgUm9vbUV2ZW50Mi5BdWRpb1BsYXliYWNrU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBtYXAyKChyb29tMikgPT4ge1xuICAgICAgcmV0dXJuIHsgY2FuUGxheUF1ZGlvOiByb29tMi5jYW5QbGF5YmFja0F1ZGlvIH07XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlKHJvb20pIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmVSb29tRXZlbnRzKHJvb20sIFJvb21FdmVudDIuVmlkZW9QbGF5YmFja1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwMigocm9vbTIpID0+IHtcbiAgICAgIHJldHVybiB7IGNhblBsYXlWaWRlbzogcm9vbTIuY2FuUGxheWJhY2tWaWRlbyB9O1xuICAgIH0pXG4gICk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gY3JlYXRlQWN0aXZlRGV2aWNlT2JzZXJ2YWJsZShyb29tLCBraW5kKSB7XG4gIHJldHVybiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLkFjdGl2ZURldmljZUNoYW5nZWQpLnBpcGUoXG4gICAgZmlsdGVyKChba2luZE9mRGV2aWNlXSkgPT4ga2luZE9mRGV2aWNlID09PSBraW5kKSxcbiAgICBtYXAyKChba2luZDIsIGRldmljZUlkXSkgPT4ge1xuICAgICAgbG9nLmRlYnVnKFwiYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZSB8IFJvb21FdmVudC5BY3RpdmVEZXZpY2VDaGFuZ2VkXCIsIHsga2luZDoga2luZDIsIGRldmljZUlkIH0pO1xuICAgICAgcmV0dXJuIGRldmljZUlkO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDIocm9vbS5nZXRBY3RpdmVEZXZpY2Uoa2luZCkpXG4gICk7XG59XG5mdW5jdGlvbiBlbmNyeXB0aW9uU3RhdHVzT2JzZXJ2YWJsZShyb29tLCBwYXJ0aWNpcGFudCkge1xuICByZXR1cm4gcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50Mi5QYXJ0aWNpcGFudEVuY3J5cHRpb25TdGF0dXNDaGFuZ2VkKS5waXBlKFxuICAgIGZpbHRlcihcbiAgICAgIChbLCBwXSkgPT4gKHBhcnRpY2lwYW50ID09IG51bGwgPyB2b2lkIDAgOiBwYXJ0aWNpcGFudC5pZGVudGl0eSkgPT09IChwID09IG51bGwgPyB2b2lkIDAgOiBwLmlkZW50aXR5KSB8fCAhcCAmJiAocGFydGljaXBhbnQgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcnRpY2lwYW50LmlkZW50aXR5KSA9PT0gcm9vbS5sb2NhbFBhcnRpY2lwYW50LmlkZW50aXR5XG4gICAgKSxcbiAgICBtYXAyKChbZW5jcnlwdGVkXSkgPT4gZW5jcnlwdGVkKSxcbiAgICBzdGFydFdpdGgyKFxuICAgICAgcGFydGljaXBhbnQgaW5zdGFuY2VvZiBMb2NhbFBhcnRpY2lwYW50MyA/IHBhcnRpY2lwYW50LmlzRTJFRUVuYWJsZWQgOiAhIShwYXJ0aWNpcGFudCA9PSBudWxsID8gdm9pZCAwIDogcGFydGljaXBhbnQuaXNFbmNyeXB0ZWQpXG4gICAgKVxuICApO1xufVxuZnVuY3Rpb24gcmVjb3JkaW5nU3RhdHVzT2JzZXJ2YWJsZShyb29tKSB7XG4gIHJldHVybiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQyLlJlY29yZGluZ1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwMigoW3JlY29yZGluZ10pID0+IHJlY29yZGluZyksXG4gICAgc3RhcnRXaXRoMihyb29tLmlzUmVjb3JkaW5nKVxuICApO1xufVxuXG4vLyBzcmMvb2JzZXJ2YWJsZXMvcGFydGljaXBhbnQudHNcbmZ1bmN0aW9uIG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhwYXJ0aWNpcGFudCwgLi4uZXZlbnRzKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTIoKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IG9uUGFydGljaXBhbnRVcGRhdGUgPSAoKSA9PiB7XG4gICAgICBzdWJzY3JpYmUubmV4dChwYXJ0aWNpcGFudCk7XG4gICAgfTtcbiAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICBwYXJ0aWNpcGFudC5vbihldnQsIG9uUGFydGljaXBhbnRVcGRhdGUpO1xuICAgIH0pO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgZXZlbnRzLmZvckVhY2goKGV2dCkgPT4ge1xuICAgICAgICBwYXJ0aWNpcGFudC5vZmYoZXZ0LCBvblBhcnRpY2lwYW50VXBkYXRlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9KS5waXBlKHN0YXJ0V2l0aDMocGFydGljaXBhbnQpKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiBvYnNlcnZlUGFydGljaXBhbnRNZWRpYShwYXJ0aWNpcGFudCkge1xuICBjb25zdCBwYXJ0aWNpcGFudE9ic2VydmVyID0gb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlRyYWNrTXV0ZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tVbm11dGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuICAgIC8vIFBhcnRpY2lwYW50RXZlbnQuSXNTcGVha2luZ0NoYW5nZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tQdWJsaXNoZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5NZWRpYURldmljZXNFcnJvcixcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWRcbiAgICAvLyBQYXJ0aWNpcGFudEV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgKS5waXBlKFxuICAgIG1hcDMoKHApID0+IHtcbiAgICAgIGNvbnN0IHsgaXNNaWNyb3Bob25lRW5hYmxlZCwgaXNDYW1lcmFFbmFibGVkLCBpc1NjcmVlblNoYXJlRW5hYmxlZCB9ID0gcDtcbiAgICAgIGNvbnN0IG1pY3JvcGhvbmVUcmFjayA9IHAuZ2V0VHJhY2tQdWJsaWNhdGlvbihUcmFjazYuU291cmNlLk1pY3JvcGhvbmUpO1xuICAgICAgY29uc3QgY2FtZXJhVHJhY2sgPSBwLmdldFRyYWNrUHVibGljYXRpb24oVHJhY2s2LlNvdXJjZS5DYW1lcmEpO1xuICAgICAgY29uc3QgcGFydGljaXBhbnRNZWRpYSA9IHtcbiAgICAgICAgaXNDYW1lcmFFbmFibGVkLFxuICAgICAgICBpc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICBpc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICAgICAgY2FtZXJhVHJhY2ssXG4gICAgICAgIG1pY3JvcGhvbmVUcmFjayxcbiAgICAgICAgcGFydGljaXBhbnQ6IHBcbiAgICAgIH07XG4gICAgICByZXR1cm4gcGFydGljaXBhbnRNZWRpYTtcbiAgICB9KVxuICApO1xuICByZXR1cm4gcGFydGljaXBhbnRPYnNlcnZlcjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRyYWNrT2JzZXJ2ZXIocGFydGljaXBhbnQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKHBhcnRpY2lwYW50KS5waXBlKFxuICAgIG1hcDMoKCkgPT4ge1xuICAgICAgcmV0dXJuIHsgcHVibGljYXRpb246IGdldFRyYWNrQnlJZGVudGlmaWVyKG9wdGlvbnMpIH07XG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIHBhcnRpY2lwYW50SW5mb09ic2VydmVyKHBhcnRpY2lwYW50KSB7XG4gIGlmICghcGFydGljaXBhbnQpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlBhcnRpY2lwYW50TWV0YWRhdGFDaGFuZ2VkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlBhcnRpY2lwYW50TmFtZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIG1hcDMoKHsgbmFtZSwgaWRlbnRpdHksIG1ldGFkYXRhIH0pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGlkZW50aXR5LFxuICAgICAgICBtZXRhZGF0YVxuICAgICAgfTtcbiAgICB9KSxcbiAgICBzdGFydFdpdGgzKHtcbiAgICAgIG5hbWU6IHBhcnRpY2lwYW50Lm5hbWUsXG4gICAgICBpZGVudGl0eTogcGFydGljaXBhbnQuaWRlbnRpdHksXG4gICAgICBtZXRhZGF0YTogcGFydGljaXBhbnQubWV0YWRhdGFcbiAgICB9KVxuICApO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBjcmVhdGVDb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyKHBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IG9ic2VydmVyID0gcGFydGljaXBhbnRFdmVudFNlbGVjdG9yKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZFxuICApLnBpcGUoXG4gICAgbWFwMygoW3F1YWxpdHldKSA9PiBxdWFsaXR5KSxcbiAgICBzdGFydFdpdGgzKHBhcnRpY2lwYW50LmNvbm5lY3Rpb25RdWFsaXR5KVxuICApO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBwYXJ0aWNpcGFudEV2ZW50U2VsZWN0b3IocGFydGljaXBhbnQsIGV2ZW50KSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTIoKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICguLi5wYXJhbXMpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHBhcmFtcyk7XG4gICAgfTtcbiAgICBwYXJ0aWNpcGFudC5vbihldmVudCwgdXBkYXRlKTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgIHBhcnRpY2lwYW50Lm9mZihldmVudCwgdXBkYXRlKTtcbiAgICB9O1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gbXV0ZWRPYnNlcnZlcih0cmFja1JlZikge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIHJldHVybiBvYnNlcnZlUGFydGljaXBhbnRFdmVudHMoXG4gICAgdHJhY2tSZWYucGFydGljaXBhbnQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tNdXRlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50Mi5UcmFja1VubXV0ZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuVHJhY2tTdWJzY3JpYmVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlRyYWNrVW5zdWJzY3JpYmVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gICAgUGFydGljaXBhbnRFdmVudDIuTG9jYWxUcmFja1VucHVibGlzaGVkXG4gICkucGlwZShcbiAgICBtYXAzKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgdmFyIF9hMiwgX2IyO1xuICAgICAgY29uc3QgcHViID0gKF9hMiA9IHRyYWNrUmVmLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2EyIDogcGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbih0cmFja1JlZi5zb3VyY2UpO1xuICAgICAgcmV0dXJuIChfYjIgPSBwdWIgPT0gbnVsbCA/IHZvaWQgMCA6IHB1Yi5pc011dGVkKSAhPSBudWxsID8gX2IyIDogdHJ1ZTtcbiAgICB9KSxcbiAgICBzdGFydFdpdGgzKFxuICAgICAgKF9kID0gKF9jID0gKF9hID0gdHJhY2tSZWYucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS5pc011dGVkKSAhPSBudWxsID8gX2MgOiAoX2IgPSB0cmFja1JlZi5wYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKHRyYWNrUmVmLnNvdXJjZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pc011dGVkKSAhPSBudWxsID8gX2QgOiB0cnVlXG4gICAgKVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlSXNTcGVha2luZ09ic2VydmVyKHBhcnRpY2lwYW50KSB7XG4gIHJldHVybiBwYXJ0aWNpcGFudEV2ZW50U2VsZWN0b3IocGFydGljaXBhbnQsIFBhcnRpY2lwYW50RXZlbnQyLklzU3BlYWtpbmdDaGFuZ2VkKS5waXBlKFxuICAgIG1hcDMoKFtpc1NwZWFraW5nXSkgPT4gaXNTcGVha2luZylcbiAgKTtcbn1cbmZ1bmN0aW9uIGNvbm5lY3RlZFBhcnRpY2lwYW50c09ic2VydmVyKHJvb20sIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGxldCBzdWJzY3JpYmVyO1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUyKChzdWIpID0+IHtcbiAgICBzdWJzY3JpYmVyID0gc3ViO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lci51bnN1YnNjcmliZSgpO1xuICB9KS5waXBlKHN0YXJ0V2l0aDMoQXJyYXkuZnJvbShyb29tLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkpKTtcbiAgY29uc3QgYWRkaXRpb25hbFJvb21FdmVudHMgPSAoX2EgPSBvcHRpb25zLmFkZGl0aW9uYWxSb29tRXZlbnRzKSAhPSBudWxsID8gX2EgOiBhbGxQYXJ0aWNpcGFudFJvb21FdmVudHM7XG4gIGNvbnN0IHJvb21FdmVudHMgPSBBcnJheS5mcm9tKFxuICAgIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgIFJvb21FdmVudDMuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgICBSb29tRXZlbnQzLlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgICAgUm9vbUV2ZW50My5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICAgICAgLi4uYWRkaXRpb25hbFJvb21FdmVudHNcbiAgICBdKVxuICApO1xuICBjb25zdCBsaXN0ZW5lciA9IG9ic2VydmVSb29tRXZlbnRzKHJvb20sIC4uLnJvb21FdmVudHMpLnN1YnNjcmliZShcbiAgICAocikgPT4gc3Vic2NyaWJlciA9PSBudWxsID8gdm9pZCAwIDogc3Vic2NyaWJlci5uZXh0KEFycmF5LmZyb20oci5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpKVxuICApO1xuICBpZiAocm9vbS5yZW1vdGVQYXJ0aWNpcGFudHMuc2l6ZSA+IDApIHtcbiAgICBzdWJzY3JpYmVyID09IG51bGwgPyB2b2lkIDAgOiBzdWJzY3JpYmVyLm5leHQoQXJyYXkuZnJvbShyb29tLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkpO1xuICB9XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gY29ubmVjdGVkUGFydGljaXBhbnRPYnNlcnZlcihyb29tLCBpZGVudGl0eSwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgYWRkaXRpb25hbEV2ZW50cyA9IChfYSA9IG9wdGlvbnMuYWRkaXRpb25hbEV2ZW50cykgIT0gbnVsbCA/IF9hIDogYWxsUGFydGljaXBhbnRFdmVudHM7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhcbiAgICByb29tLFxuICAgIFJvb21FdmVudDMuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgUm9vbUV2ZW50My5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICBSb29tRXZlbnQzLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIHN3aXRjaE1hcCgocikgPT4ge1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSByLmdldFBhcnRpY2lwYW50QnlJZGVudGl0eShpZGVudGl0eSk7XG4gICAgICBpZiAocGFydGljaXBhbnQpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhwYXJ0aWNpcGFudCwgLi4uYWRkaXRpb25hbEV2ZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUyKChzdWJzY3JpYmUpID0+IHN1YnNjcmliZS5uZXh0KHZvaWQgMCkpO1xuICAgICAgfVxuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDMocm9vbS5nZXRQYXJ0aWNpcGFudEJ5SWRlbnRpdHkoaWRlbnRpdHkpKVxuICApO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIHBhcnRpY2lwYW50UGVybWlzc2lvbk9ic2VydmVyKHBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IG9ic2VydmVyID0gcGFydGljaXBhbnRFdmVudFNlbGVjdG9yKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQyLlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkXG4gICkucGlwZShcbiAgICBtYXAzKCgpID0+IHBhcnRpY2lwYW50LnBlcm1pc3Npb25zKSxcbiAgICBzdGFydFdpdGgzKHBhcnRpY2lwYW50LnBlcm1pc3Npb25zKVxuICApO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBwYXJ0aWNpcGFudEJ5SWRlbnRpZmllck9ic2VydmVyKHJvb20sIHsga2luZCwgaWRlbnRpdHkgfSwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgYWRkaXRpb25hbEV2ZW50cyA9IChfYSA9IG9wdGlvbnMuYWRkaXRpb25hbEV2ZW50cykgIT0gbnVsbCA/IF9hIDogYWxsUGFydGljaXBhbnRFdmVudHM7XG4gIGNvbnN0IG1hdGNoZXNJZGVudGlmaWVyID0gKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgbGV0IGlzTWF0Y2ggPSB0cnVlO1xuICAgIGlmIChraW5kKSB7XG4gICAgICBpc01hdGNoID0gaXNNYXRjaCAmJiBwYXJ0aWNpcGFudC5raW5kID09PSBraW5kO1xuICAgIH1cbiAgICBpZiAoaWRlbnRpdHkpIHtcbiAgICAgIGlzTWF0Y2ggPSBpc01hdGNoICYmIHBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBpZGVudGl0eTtcbiAgICB9XG4gICAgcmV0dXJuIGlzTWF0Y2g7XG4gIH07XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhcbiAgICByb29tLFxuICAgIFJvb21FdmVudDMuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgUm9vbUV2ZW50My5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICBSb29tRXZlbnQzLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIHN3aXRjaE1hcCgocikgPT4ge1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBBcnJheS5mcm9tKHIucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKS5maW5kKFxuICAgICAgICAocCkgPT4gbWF0Y2hlc0lkZW50aWZpZXIocClcbiAgICAgICk7XG4gICAgICBpZiAocGFydGljaXBhbnQpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhwYXJ0aWNpcGFudCwgLi4uYWRkaXRpb25hbEV2ZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUyKChzdWJzY3JpYmUpID0+IHN1YnNjcmliZS5uZXh0KHZvaWQgMCkpO1xuICAgICAgfVxuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDMoQXJyYXkuZnJvbShyb29tLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkuZmluZCgocCkgPT4gbWF0Y2hlc0lkZW50aWZpZXIocCkpKVxuICApO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIHBhcnRpY2lwYW50QXR0cmlidXRlc09ic2VydmVyKHBhcnRpY2lwYW50KSB7XG4gIGlmICh0eXBlb2YgcGFydGljaXBhbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUyKCk7XG4gIH1cbiAgcmV0dXJuIHBhcnRpY2lwYW50RXZlbnRTZWxlY3RvcihwYXJ0aWNpcGFudCwgUGFydGljaXBhbnRFdmVudDIuQXR0cmlidXRlc0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwMygoW2NoYW5nZWRBdHRyaWJ1dGVzXSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2hhbmdlZDogY2hhbmdlZEF0dHJpYnV0ZXMsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHBhcnRpY2lwYW50LmF0dHJpYnV0ZXNcbiAgICAgIH07XG4gICAgfSksXG4gICAgc3RhcnRXaXRoMyh7IGNoYW5nZWQ6IHBhcnRpY2lwYW50LmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXM6IHBhcnRpY2lwYW50LmF0dHJpYnV0ZXMgfSlcbiAgKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvbWVkaWFUb2dnbGUudHNcbmZ1bmN0aW9uIHNldHVwTWVkaWFUb2dnbGUoc291cmNlLCByb29tLCBvcHRpb25zLCBwdWJsaXNoT3B0aW9ucywgb25FcnJvcikge1xuICBjb25zdCB7IGxvY2FsUGFydGljaXBhbnQgfSA9IHJvb207XG4gIGNvbnN0IGdldFNvdXJjZUVuYWJsZWQgPSAoc291cmNlMiwgbG9jYWxQYXJ0aWNpcGFudDIpID0+IHtcbiAgICBsZXQgaXNFbmFibGVkID0gZmFsc2U7XG4gICAgc3dpdGNoIChzb3VyY2UyKSB7XG4gICAgICBjYXNlIFRyYWNrNy5Tb3VyY2UuQ2FtZXJhOlxuICAgICAgICBpc0VuYWJsZWQgPSBsb2NhbFBhcnRpY2lwYW50Mi5pc0NhbWVyYUVuYWJsZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUcmFjazcuU291cmNlLk1pY3JvcGhvbmU6XG4gICAgICAgIGlzRW5hYmxlZCA9IGxvY2FsUGFydGljaXBhbnQyLmlzTWljcm9waG9uZUVuYWJsZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUcmFjazcuU291cmNlLlNjcmVlblNoYXJlOlxuICAgICAgICBpc0VuYWJsZWQgPSBsb2NhbFBhcnRpY2lwYW50Mi5pc1NjcmVlblNoYXJlRW5hYmxlZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGlzRW5hYmxlZDtcbiAgfTtcbiAgY29uc3QgZW5hYmxlZE9ic2VydmVyID0gb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWEobG9jYWxQYXJ0aWNpcGFudCkucGlwZShcbiAgICBtYXA0KChtZWRpYSkgPT4ge1xuICAgICAgcmV0dXJuIGdldFNvdXJjZUVuYWJsZWQoc291cmNlLCBtZWRpYS5wYXJ0aWNpcGFudCk7XG4gICAgfSksXG4gICAgc3RhcnRXaXRoNChnZXRTb3VyY2VFbmFibGVkKHNvdXJjZSwgbG9jYWxQYXJ0aWNpcGFudCkpXG4gICk7XG4gIGNvbnN0IHBlbmRpbmdTdWJqZWN0ID0gbmV3IFN1YmplY3QyKCk7XG4gIGNvbnN0IHRvZ2dsZSA9IChmb3JjZVN0YXRlLCBjYXB0dXJlT3B0aW9ucykgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICBjYXB0dXJlT3B0aW9ucyAhPSBudWxsID8gY2FwdHVyZU9wdGlvbnMgOiBjYXB0dXJlT3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICBwZW5kaW5nU3ViamVjdC5uZXh0KHRydWUpO1xuICAgICAgc3dpdGNoIChzb3VyY2UpIHtcbiAgICAgICAgY2FzZSBUcmFjazcuU291cmNlLkNhbWVyYTpcbiAgICAgICAgICB5aWVsZCBsb2NhbFBhcnRpY2lwYW50LnNldENhbWVyYUVuYWJsZWQoXG4gICAgICAgICAgICBmb3JjZVN0YXRlICE9IG51bGwgPyBmb3JjZVN0YXRlIDogIWxvY2FsUGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkLFxuICAgICAgICAgICAgY2FwdHVyZU9wdGlvbnMsXG4gICAgICAgICAgICBwdWJsaXNoT3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsUGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkO1xuICAgICAgICBjYXNlIFRyYWNrNy5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgICAgICB5aWVsZCBsb2NhbFBhcnRpY2lwYW50LnNldE1pY3JvcGhvbmVFbmFibGVkKFxuICAgICAgICAgICAgZm9yY2VTdGF0ZSAhPSBudWxsID8gZm9yY2VTdGF0ZSA6ICFsb2NhbFBhcnRpY2lwYW50LmlzTWljcm9waG9uZUVuYWJsZWQsXG4gICAgICAgICAgICBjYXB0dXJlT3B0aW9ucyxcbiAgICAgICAgICAgIHB1Ymxpc2hPcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gbG9jYWxQYXJ0aWNpcGFudC5pc01pY3JvcGhvbmVFbmFibGVkO1xuICAgICAgICBjYXNlIFRyYWNrNy5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgICAgeWllbGQgbG9jYWxQYXJ0aWNpcGFudC5zZXRTY3JlZW5TaGFyZUVuYWJsZWQoXG4gICAgICAgICAgICBmb3JjZVN0YXRlICE9IG51bGwgPyBmb3JjZVN0YXRlIDogIWxvY2FsUGFydGljaXBhbnQuaXNTY3JlZW5TaGFyZUVuYWJsZWQsXG4gICAgICAgICAgICBjYXB0dXJlT3B0aW9ucyxcbiAgICAgICAgICAgIHB1Ymxpc2hPcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gbG9jYWxQYXJ0aWNpcGFudC5pc1NjcmVlblNoYXJlRW5hYmxlZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVHJpZWQgdG8gdG9nZ2xlIHVuc3VwcG9ydGVkIHNvdXJjZVwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAob25FcnJvciAmJiBlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgb25FcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25FcnJvcihlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHBlbmRpbmdTdWJqZWN0Lm5leHQoZmFsc2UpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHByZWZpeENsYXNzKFwiYnV0dG9uXCIpO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZSxcbiAgICB0b2dnbGUsXG4gICAgZW5hYmxlZE9ic2VydmVyLFxuICAgIHBlbmRpbmdPYnNlcnZlcjogcGVuZGluZ1N1YmplY3QuYXNPYnNlcnZhYmxlKClcbiAgfTtcbn1cbmZ1bmN0aW9uIHNldHVwTWFudWFsVG9nZ2xlKCkge1xuICBsZXQgc3RhdGUgPSBmYWxzZTtcbiAgY29uc3QgZW5hYmxlZFN1YmplY3QgPSBuZXcgU3ViamVjdDIoKTtcbiAgY29uc3QgcGVuZGluZ1N1YmplY3QgPSBuZXcgU3ViamVjdDIoKTtcbiAgY29uc3QgdG9nZ2xlID0gKGZvcmNlU3RhdGUpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBwZW5kaW5nU3ViamVjdC5uZXh0KHRydWUpO1xuICAgIHN0YXRlID0gZm9yY2VTdGF0ZSAhPSBudWxsID8gZm9yY2VTdGF0ZSA6ICFzdGF0ZTtcbiAgICBlbmFibGVkU3ViamVjdC5uZXh0KHN0YXRlKTtcbiAgICBwZW5kaW5nU3ViamVjdC5uZXh0KGZhbHNlKTtcbiAgfSk7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHByZWZpeENsYXNzKFwiYnV0dG9uXCIpO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZSxcbiAgICB0b2dnbGUsXG4gICAgZW5hYmxlZE9ic2VydmVyOiBlbmFibGVkU3ViamVjdC5hc09ic2VydmFibGUoKSxcbiAgICBwZW5kaW5nT2JzZXJ2ZXI6IHBlbmRpbmdTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXG4gIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL21lZGlhRGV2aWNlU2VsZWN0LnRzXG5pbXBvcnQge1xuICBUcmFjayBhcyBUcmFjazhcbn0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuZnVuY3Rpb24gc2V0dXBEZXZpY2VTZWxlY3RvcihraW5kLCByb29tLCBsb2NhbFRyYWNrKSB7XG4gIGNvbnN0IGFjdGl2ZURldmljZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHZvaWQgMCk7XG4gIGNvbnN0IGFjdGl2ZURldmljZU9ic2VydmFibGUgPSByb29tID8gY3JlYXRlQWN0aXZlRGV2aWNlT2JzZXJ2YWJsZShyb29tLCBraW5kKSA6IGFjdGl2ZURldmljZVN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gIGNvbnN0IHNldEFjdGl2ZU1lZGlhRGV2aWNlID0gKF8wLCAuLi5fMSkgPT4gX19hc3luYyh0aGlzLCBbXzAsIC4uLl8xXSwgZnVuY3Rpb24qIChpZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgaWYgKHJvb20pIHtcbiAgICAgIGxvZy5kZWJ1ZyhgU3dpdGNoaW5nIGFjdGl2ZSBkZXZpY2Ugb2Yga2luZCBcIiR7a2luZH1cIiB3aXRoIGlkICR7aWR9LmApO1xuICAgICAgeWllbGQgcm9vbS5zd2l0Y2hBY3RpdmVEZXZpY2Uoa2luZCwgaWQsIG9wdGlvbnMuZXhhY3QpO1xuICAgICAgY29uc3QgYWN0dWFsRGV2aWNlSWQgPSAoX2EgPSByb29tLmdldEFjdGl2ZURldmljZShraW5kKSkgIT0gbnVsbCA/IF9hIDogaWQ7XG4gICAgICBpZiAoYWN0dWFsRGV2aWNlSWQgIT09IGlkICYmIGlkICE9PSBcImRlZmF1bHRcIikge1xuICAgICAgICBsb2cuaW5mbyhcbiAgICAgICAgICBgV2UgdHJpZWQgdG8gc2VsZWN0IHRoZSBkZXZpY2Ugd2l0aCBpZCAoJHtpZH0pLCBidXQgdGhlIGJyb3dzZXIgZGVjaWRlZCB0byBzZWxlY3QgdGhlIGRldmljZSB3aXRoIGlkICgke2FjdHVhbERldmljZUlkfSkgaW5zdGVhZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBsZXQgdGFyZ2V0VHJhY2sgPSB2b2lkIDA7XG4gICAgICBpZiAoa2luZCA9PT0gXCJhdWRpb2lucHV0XCIpXG4gICAgICAgIHRhcmdldFRyYWNrID0gKF9iID0gcm9vbS5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oVHJhY2s4LlNvdXJjZS5NaWNyb3Bob25lKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRyYWNrO1xuICAgICAgZWxzZSBpZiAoa2luZCA9PT0gXCJ2aWRlb2lucHV0XCIpIHtcbiAgICAgICAgdGFyZ2V0VHJhY2sgPSAoX2MgPSByb29tLmxvY2FsUGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbihUcmFjazguU291cmNlLkNhbWVyYSkpID09IG51bGwgPyB2b2lkIDAgOiBfYy50cmFjaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZURlZmF1bHQgPSBpZCA9PT0gXCJkZWZhdWx0XCIgJiYgIXRhcmdldFRyYWNrIHx8IGlkID09PSBcImRlZmF1bHRcIiAmJiAodGFyZ2V0VHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRhcmdldFRyYWNrLm1lZGlhU3RyZWFtVHJhY2subGFiZWwuc3RhcnRzV2l0aChcIkRlZmF1bHRcIikpO1xuICAgICAgYWN0aXZlRGV2aWNlU3ViamVjdC5uZXh0KHVzZURlZmF1bHQgPyBpZCA6IGFjdHVhbERldmljZUlkKTtcbiAgICB9IGVsc2UgaWYgKGxvY2FsVHJhY2spIHtcbiAgICAgIHlpZWxkIGxvY2FsVHJhY2suc2V0RGV2aWNlSWQob3B0aW9ucy5leGFjdCA/IHsgZXhhY3Q6IGlkIH0gOiBpZCk7XG4gICAgICBjb25zdCBhY3R1YWxJZCA9IHlpZWxkIGxvY2FsVHJhY2suZ2V0RGV2aWNlSWQoKTtcbiAgICAgIGFjdGl2ZURldmljZVN1YmplY3QubmV4dChcbiAgICAgICAgaWQgPT09IFwiZGVmYXVsdFwiICYmIGxvY2FsVHJhY2subWVkaWFTdHJlYW1UcmFjay5sYWJlbC5zdGFydHNXaXRoKFwiRGVmYXVsdFwiKSA/IGlkIDogYWN0dWFsSWRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChhY3RpdmVEZXZpY2VTdWJqZWN0LnZhbHVlICE9PSBpZCkge1xuICAgICAgbG9nLndhcm4oXG4gICAgICAgIFwiZGV2aWNlIHN3aXRjaCBza2lwcGVkLCBwbGVhc2UgcHJvdmlkZSBlaXRoZXIgYSByb29tIG9yIGEgbG9jYWwgdHJhY2sgdG8gc3dpdGNoIG9uLiBcIlxuICAgICAgKTtcbiAgICAgIGFjdGl2ZURldmljZVN1YmplY3QubmV4dChpZCk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoXCJtZWRpYS1kZXZpY2Utc2VsZWN0XCIpO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZSxcbiAgICBhY3RpdmVEZXZpY2VPYnNlcnZhYmxlLFxuICAgIHNldEFjdGl2ZU1lZGlhRGV2aWNlXG4gIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2Rpc2Nvbm5lY3RCdXR0b24udHNcbmZ1bmN0aW9uIHNldHVwRGlzY29ubmVjdEJ1dHRvbihyb29tKSB7XG4gIGNvbnN0IGRpc2Nvbm5lY3QgPSAoc3RvcFRyYWNrcykgPT4ge1xuICAgIHJvb20uZGlzY29ubmVjdChzdG9wVHJhY2tzKTtcbiAgfTtcbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoXCJkaXNjb25uZWN0LWJ1dHRvblwiKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lLCBkaXNjb25uZWN0IH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2Nvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yLnRzXG5mdW5jdGlvbiBzZXR1cENvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yKHBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHByZWZpeENsYXNzKFwiY29ubmVjdGlvbi1xdWFsaXR5XCIpO1xuICBjb25zdCBjb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyID0gY3JlYXRlQ29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcihwYXJ0aWNpcGFudCk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlciB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy90cmFja011dGVkSW5kaWNhdG9yLnRzXG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazkgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIHNldHVwVHJhY2tNdXRlZEluZGljYXRvcih0cmFja1JlZikge1xuICBsZXQgY2xhc3NGb3JTb3VyY2UgPSBcInRyYWNrLW11dGVkLWluZGljYXRvci1jYW1lcmFcIjtcbiAgc3dpdGNoICh0cmFja1JlZi5zb3VyY2UpIHtcbiAgICBjYXNlIFRyYWNrOS5Tb3VyY2UuQ2FtZXJhOlxuICAgICAgY2xhc3NGb3JTb3VyY2UgPSBcInRyYWNrLW11dGVkLWluZGljYXRvci1jYW1lcmFcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVHJhY2s5LlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgY2xhc3NGb3JTb3VyY2UgPSBcInRyYWNrLW11dGVkLWluZGljYXRvci1taWNyb3Bob25lXCI7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoY2xhc3NGb3JTb3VyY2UpO1xuICBjb25zdCBtZWRpYU11dGVkT2JzZXJ2ZXIgPSBtdXRlZE9ic2VydmVyKHRyYWNrUmVmKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lLCBtZWRpYU11dGVkT2JzZXJ2ZXIgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvcGFydGljaXBhbnROYW1lLnRzXG5mdW5jdGlvbiBzZXR1cFBhcnRpY2lwYW50TmFtZShwYXJ0aWNpcGFudCkge1xuICBjb25zdCBpbmZvT2JzZXJ2ZXIgPSBwYXJ0aWNpcGFudEluZm9PYnNlcnZlcihwYXJ0aWNpcGFudCk7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1uYW1lXCIsIGluZm9PYnNlcnZlciB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudFRpbGUudHNcbmZ1bmN0aW9uIHNldHVwUGFydGljaXBhbnRUaWxlKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcInBhcnRpY2lwYW50LXRpbGVcIik7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lXG4gIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NoYXQudHNcbmltcG9ydCB7IFJvb21FdmVudCBhcyBSb29tRXZlbnQ0IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgYXMgQmVoYXZpb3JTdWJqZWN0MiwgU3ViamVjdCBhcyBTdWJqZWN0Mywgc2NhbiwgbWFwIGFzIG1hcDYsIHRha2VVbnRpbCB9IGZyb20gXCJyeGpzXCI7XG5cbi8vIHNyYy9vYnNlcnZhYmxlcy9kYXRhQ2hhbm5lbC50c1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSBhcyBPYnNlcnZhYmxlMywgZmlsdGVyIGFzIGZpbHRlcjIsIG1hcCBhcyBtYXA1IH0gZnJvbSBcInJ4anNcIjtcbnZhciBEYXRhVG9waWMgPSB7XG4gIENIQVQ6IFwibGstY2hhdC10b3BpY1wiLFxuICBDSEFUX1VQREFURTogXCJsay1jaGF0LXVwZGF0ZS10b3BpY1wiXG59O1xuZnVuY3Rpb24gc2VuZE1lc3NhZ2UoXzAsIF8xKSB7XG4gIHJldHVybiBfX2FzeW5jKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24qIChsb2NhbFBhcnRpY2lwYW50LCBwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IHJlbGlhYmxlLCBkZXN0aW5hdGlvbklkZW50aXRpZXMsIHRvcGljIH0gPSBvcHRpb25zO1xuICAgIHlpZWxkIGxvY2FsUGFydGljaXBhbnQucHVibGlzaERhdGEocGF5bG9hZCwge1xuICAgICAgZGVzdGluYXRpb25JZGVudGl0aWVzLFxuICAgICAgdG9waWMsXG4gICAgICByZWxpYWJsZVxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNldHVwRGF0YU1lc3NhZ2VIYW5kbGVyKHJvb20sIHRvcGljLCBvbk1lc3NhZ2UpIHtcbiAgY29uc3QgdG9waWNzID0gQXJyYXkuaXNBcnJheSh0b3BpYykgPyB0b3BpYyA6IFt0b3BpY107XG4gIGNvbnN0IG1lc3NhZ2VPYnNlcnZhYmxlID0gY3JlYXRlRGF0YU9ic2VydmVyKHJvb20pLnBpcGUoXG4gICAgZmlsdGVyMihcbiAgICAgIChbLCAsICwgbWVzc2FnZVRvcGljXSkgPT4gdG9waWMgPT09IHZvaWQgMCB8fCBtZXNzYWdlVG9waWMgIT09IHZvaWQgMCAmJiB0b3BpY3MuaW5jbHVkZXMobWVzc2FnZVRvcGljKVxuICAgICksXG4gICAgbWFwNSgoW3BheWxvYWQsIHBhcnRpY2lwYW50LCAsIG1lc3NhZ2VUb3BpY10pID0+IHtcbiAgICAgIGNvbnN0IG1zZyA9IHtcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgdG9waWM6IG1lc3NhZ2VUb3BpYyxcbiAgICAgICAgZnJvbTogcGFydGljaXBhbnRcbiAgICAgIH07XG4gICAgICBvbk1lc3NhZ2UgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTWVzc2FnZShtc2cpO1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9KVxuICApO1xuICBsZXQgaXNTZW5kaW5nU3Vic2NyaWJlcjtcbiAgY29uc3QgaXNTZW5kaW5nT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlMygoc3Vic2NyaWJlcikgPT4ge1xuICAgIGlzU2VuZGluZ1N1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICB9KTtcbiAgY29uc3Qgc2VuZCA9IChfMCwgLi4uXzEpID0+IF9fYXN5bmModGhpcywgW18wLCAuLi5fMV0sIGZ1bmN0aW9uKiAocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaXNTZW5kaW5nU3Vic2NyaWJlci5uZXh0KHRydWUpO1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCBzZW5kTWVzc2FnZShyb29tLmxvY2FsUGFydGljaXBhbnQsIHBheWxvYWQsIF9fc3ByZWFkVmFsdWVzKHsgdG9waWM6IHRvcGljc1swXSB9LCBvcHRpb25zKSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzU2VuZGluZ1N1YnNjcmliZXIubmV4dChmYWxzZSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHsgbWVzc2FnZU9ic2VydmFibGUsIGlzU2VuZGluZ09ic2VydmFibGUsIHNlbmQgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY2hhdC50c1xudmFyIGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbnZhciBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG52YXIgdG9waWNTdWJqZWN0TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBlbmNvZGUgPSAobWVzc2FnZSkgPT4gZW5jb2Rlci5lbmNvZGUoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xudmFyIGRlY29kZSA9IChtZXNzYWdlKSA9PiBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKG1lc3NhZ2UpKTtcbmZ1bmN0aW9uIHNldHVwQ2hhdChyb29tLCBvcHRpb25zKSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IG9uRGVzdHJveU9ic2VydmFibGUgPSBuZXcgU3ViamVjdDMoKTtcbiAgY29uc3QgeyBtZXNzYWdlRGVjb2RlciwgbWVzc2FnZUVuY29kZXIsIGNoYW5uZWxUb3BpYywgdXBkYXRlQ2hhbm5lbFRvcGljIH0gPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zIDoge307XG4gIGNvbnN0IHRvcGljID0gY2hhbm5lbFRvcGljICE9IG51bGwgPyBjaGFubmVsVG9waWMgOiBEYXRhVG9waWMuQ0hBVDtcbiAgY29uc3QgdXBkYXRlVG9waWMgPSB1cGRhdGVDaGFubmVsVG9waWMgIT0gbnVsbCA/IHVwZGF0ZUNoYW5uZWxUb3BpYyA6IERhdGFUb3BpYy5DSEFUX1VQREFURTtcbiAgbGV0IG5lZWRzU2V0dXAgPSBmYWxzZTtcbiAgaWYgKCF0b3BpY1N1YmplY3RNYXAuaGFzKHJvb20pKSB7XG4gICAgbmVlZHNTZXR1cCA9IHRydWU7XG4gIH1cbiAgY29uc3QgdG9waWNNYXAgPSAoX2EgPSB0b3BpY1N1YmplY3RNYXAuZ2V0KHJvb20pKSAhPSBudWxsID8gX2EgOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBtZXNzYWdlU3ViamVjdCA9IChfYiA9IHRvcGljTWFwLmdldCh0b3BpYykpICE9IG51bGwgPyBfYiA6IG5ldyBTdWJqZWN0MygpO1xuICB0b3BpY01hcC5zZXQodG9waWMsIG1lc3NhZ2VTdWJqZWN0KTtcbiAgdG9waWNTdWJqZWN0TWFwLnNldChyb29tLCB0b3BpY01hcCk7XG4gIGlmIChuZWVkc1NldHVwKSB7XG4gICAgY29uc3QgeyBtZXNzYWdlT2JzZXJ2YWJsZSB9ID0gc2V0dXBEYXRhTWVzc2FnZUhhbmRsZXIocm9vbSwgW3RvcGljLCB1cGRhdGVUb3BpY10pO1xuICAgIG1lc3NhZ2VPYnNlcnZhYmxlLnBpcGUodGFrZVVudGlsKG9uRGVzdHJveU9ic2VydmFibGUpKS5zdWJzY3JpYmUobWVzc2FnZVN1YmplY3QpO1xuICB9XG4gIGNvbnN0IGZpbmFsTWVzc2FnZURlY29kZXIgPSBtZXNzYWdlRGVjb2RlciAhPSBudWxsID8gbWVzc2FnZURlY29kZXIgOiBkZWNvZGU7XG4gIGNvbnN0IG1lc3NhZ2VzT2JzZXJ2YWJsZSA9IG1lc3NhZ2VTdWJqZWN0LnBpcGUoXG4gICAgbWFwNigobXNnKSA9PiB7XG4gICAgICBjb25zdCBwYXJzZWRNZXNzYWdlID0gZmluYWxNZXNzYWdlRGVjb2Rlcihtc2cucGF5bG9hZCk7XG4gICAgICBjb25zdCBuZXdNZXNzYWdlID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcGFyc2VkTWVzc2FnZSksIHsgZnJvbTogbXNnLmZyb20gfSk7XG4gICAgICByZXR1cm4gbmV3TWVzc2FnZTtcbiAgICB9KSxcbiAgICBzY2FuKChhY2MsIHZhbHVlKSA9PiB7XG4gICAgICBpZiAoXCJpZFwiIGluIHZhbHVlICYmIGFjYy5maW5kKChtc2cpID0+IHtcbiAgICAgICAgdmFyIF9hMiwgX2IyO1xuICAgICAgICByZXR1cm4gKChfYTIgPSBtc2cuZnJvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5pZGVudGl0eSkgPT09ICgoX2IyID0gdmFsdWUuZnJvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5pZGVudGl0eSkgJiYgbXNnLmlkID09PSB2YWx1ZS5pZDtcbiAgICAgIH0pKSB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VJbmRleCA9IGFjYy5maW5kSW5kZXgoKG1zZykgPT4gbXNnLmlkID09PSB2YWx1ZS5pZCk7XG4gICAgICAgIGlmIChyZXBsYWNlSW5kZXggPiAtMSkge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTXNnID0gYWNjW3JlcGxhY2VJbmRleF07XG4gICAgICAgICAgYWNjW3JlcGxhY2VJbmRleF0gPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCB2YWx1ZSksIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogb3JpZ2luYWxNc2cudGltZXN0YW1wLFxuICAgICAgICAgICAgZWRpdFRpbWVzdGFtcDogdmFsdWUudGltZXN0YW1wXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5hY2NdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5hY2MsIHZhbHVlXTtcbiAgICB9LCBbXSksXG4gICAgdGFrZVVudGlsKG9uRGVzdHJveU9ic2VydmFibGUpXG4gICk7XG4gIGNvbnN0IGlzU2VuZGluZyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0MihmYWxzZSk7XG4gIGNvbnN0IGZpbmFsTWVzc2FnZUVuY29kZXIgPSBtZXNzYWdlRW5jb2RlciAhPSBudWxsID8gbWVzc2FnZUVuY29kZXIgOiBlbmNvZGU7XG4gIGNvbnN0IHNlbmQgPSAobWVzc2FnZSkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgY29uc3QgaWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0geyBpZCwgbWVzc2FnZSwgdGltZXN0YW1wIH07XG4gICAgY29uc3QgZW5jb2RlZE1zZyA9IGZpbmFsTWVzc2FnZUVuY29kZXIoY2hhdE1lc3NhZ2UpO1xuICAgIGlzU2VuZGluZyQubmV4dCh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgeWllbGQgc2VuZE1lc3NhZ2Uocm9vbS5sb2NhbFBhcnRpY2lwYW50LCBlbmNvZGVkTXNnLCB7XG4gICAgICAgIHJlbGlhYmxlOiB0cnVlLFxuICAgICAgICB0b3BpY1xuICAgICAgfSk7XG4gICAgICBtZXNzYWdlU3ViamVjdC5uZXh0KHtcbiAgICAgICAgcGF5bG9hZDogZW5jb2RlZE1zZyxcbiAgICAgICAgdG9waWMsXG4gICAgICAgIGZyb206IHJvb20ubG9jYWxQYXJ0aWNpcGFudFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY2hhdE1lc3NhZ2U7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzU2VuZGluZyQubmV4dChmYWxzZSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgdXBkYXRlID0gKG1lc3NhZ2UsIG1lc3NhZ2VJZCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSB7IGlkOiBtZXNzYWdlSWQsIG1lc3NhZ2UsIHRpbWVzdGFtcCB9O1xuICAgIGNvbnN0IGVuY29kZWRNc2cgPSBmaW5hbE1lc3NhZ2VFbmNvZGVyKGNoYXRNZXNzYWdlKTtcbiAgICBpc1NlbmRpbmckLm5leHQodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIHlpZWxkIHNlbmRNZXNzYWdlKHJvb20ubG9jYWxQYXJ0aWNpcGFudCwgZW5jb2RlZE1zZywge1xuICAgICAgICB0b3BpYzogdXBkYXRlVG9waWMsXG4gICAgICAgIHJlbGlhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIG1lc3NhZ2VTdWJqZWN0Lm5leHQoe1xuICAgICAgICBwYXlsb2FkOiBlbmNvZGVkTXNnLFxuICAgICAgICB0b3BpYyxcbiAgICAgICAgZnJvbTogcm9vbS5sb2NhbFBhcnRpY2lwYW50XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjaGF0TWVzc2FnZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNTZW5kaW5nJC5uZXh0KGZhbHNlKTtcbiAgICB9XG4gIH0pO1xuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIG9uRGVzdHJveU9ic2VydmFibGUubmV4dCgpO1xuICAgIG9uRGVzdHJveU9ic2VydmFibGUuY29tcGxldGUoKTtcbiAgICB0b3BpY1N1YmplY3RNYXAuZGVsZXRlKHJvb20pO1xuICB9XG4gIHJvb20ub25jZShSb29tRXZlbnQ0LkRpc2Nvbm5lY3RlZCwgZGVzdHJveSk7XG4gIHJldHVybiB7IG1lc3NhZ2VPYnNlcnZhYmxlOiBtZXNzYWdlc09ic2VydmFibGUsIGlzU2VuZGluZ09ic2VydmFibGU6IGlzU2VuZGluZyQsIHNlbmQsIHVwZGF0ZSB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9zdGFydEF1ZGlvLnRzXG5mdW5jdGlvbiBzZXR1cFN0YXJ0QXVkaW8oKSB7XG4gIGNvbnN0IGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjayA9IChyb29tKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgbG9nLmluZm8oXCJTdGFydCBBdWRpbyBmb3Igcm9vbTogXCIsIHJvb20pO1xuICAgIHlpZWxkIHJvb20uc3RhcnRBdWRpbygpO1xuICB9KTtcbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoXCJzdGFydC1hdWRpby1idXR0b25cIik7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSwgaGFuZGxlU3RhcnRBdWRpb1BsYXliYWNrIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3N0YXJ0VmlkZW8udHNcbmZ1bmN0aW9uIHNldHVwU3RhcnRWaWRlbygpIHtcbiAgY29uc3QgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrID0gKHJvb20pID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBsb2cuaW5mbyhcIlN0YXJ0IFZpZGVvIGZvciByb29tOiBcIiwgcm9vbSk7XG4gICAgeWllbGQgcm9vbS5zdGFydFZpZGVvKCk7XG4gIH0pO1xuICBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcyhcInN0YXJ0LWF1ZGlvLWJ1dHRvblwiKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lLCByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlLCBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2sgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY2hhdFRvZ2dsZS50c1xuZnVuY3Rpb24gc2V0dXBDaGF0VG9nZ2xlKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBbcHJlZml4Q2xhc3MoXCJidXR0b25cIiksIHByZWZpeENsYXNzKFwiY2hhdC10b2dnbGVcIildLmpvaW4oXCIgXCIpO1xuICByZXR1cm4geyBjbGFzc05hbWUgfTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvZm9jdXNUb2dnbGUudHNcbmZ1bmN0aW9uIHNldHVwRm9jdXNUb2dnbGUoKSB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IFtwcmVmaXhDbGFzcyhcImJ1dHRvblwiKSwgcHJlZml4Q2xhc3MoXCJmb2N1cy10b2dnbGUtYnV0dG9uXCIpXS5qb2luKFwiIFwiKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NsZWFyUGluQnV0dG9uLnRzXG5mdW5jdGlvbiBzZXR1cENsZWFyUGluQnV0dG9uKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBcImxrLWNsZWFyLXBpbi1idXR0b24gbGstYnV0dG9uXCI7XG4gIHJldHVybiB7IGNsYXNzTmFtZSB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9yb29tLnRzXG5mdW5jdGlvbiBzZXR1cExpdmVLaXRSb29tKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSBcImxrLXJvb20tY29udGFpbmVyXCI7XG4gIHJldHVybiB7IGNsYXNzTmFtZSB9O1xufVxuXG4vLyBzcmMvb2JzZXJ2YWJsZXMvdHJhY2sudHNcbmltcG9ydCB7IFJvb21FdmVudCBhcyBSb29tRXZlbnQ1LCBUcmFja0V2ZW50IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBtYXAgYXMgbWFwNywgT2JzZXJ2YWJsZSBhcyBPYnNlcnZhYmxlNCwgc3RhcnRXaXRoIGFzIHN0YXJ0V2l0aDUgfSBmcm9tIFwicnhqc1wiO1xuZnVuY3Rpb24gdHJhY2tPYnNlcnZhYmxlKHRyYWNrKSB7XG4gIGNvbnN0IHRyYWNrT2JzZXJ2ZXIgPSBvYnNlcnZlVHJhY2tFdmVudHMoXG4gICAgdHJhY2ssXG4gICAgVHJhY2tFdmVudC5NdXRlZCxcbiAgICBUcmFja0V2ZW50LlVubXV0ZWQsXG4gICAgVHJhY2tFdmVudC5TdWJzY3JpYmVkLFxuICAgIFRyYWNrRXZlbnQuVW5zdWJzY3JpYmVkXG4gICk7XG4gIHJldHVybiB0cmFja09ic2VydmVyO1xufVxuZnVuY3Rpb24gb2JzZXJ2ZVRyYWNrRXZlbnRzKHRyYWNrLCAuLi5ldmVudHMpIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlNCgoc3Vic2NyaWJlKSA9PiB7XG4gICAgY29uc3Qgb25UcmFja1VwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHRyYWNrKTtcbiAgICB9O1xuICAgIGV2ZW50cy5mb3JFYWNoKChldnQpID0+IHtcbiAgICAgIHRyYWNrLm9uKGV2dCwgb25UcmFja1VwZGF0ZSk7XG4gICAgfSk7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICAgIHRyYWNrLm9mZihldnQsIG9uVHJhY2tVcGRhdGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pLnBpcGUoc3RhcnRXaXRoNSh0cmFjaykpO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIGdldFRyYWNrUmVmZXJlbmNlcyhyb29tLCBzb3VyY2VzLCBvbmx5U3Vic2NyaWJlZFRyYWNrcyA9IHRydWUpIHtcbiAgY29uc3QgbG9jYWxQYXJ0aWNpcGFudCA9IHJvb20ubG9jYWxQYXJ0aWNpcGFudDtcbiAgY29uc3QgYWxsUGFydGljaXBhbnRzID0gW2xvY2FsUGFydGljaXBhbnQsIC4uLkFycmF5LmZyb20ocm9vbS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpXTtcbiAgY29uc3QgdHJhY2tSZWZlcmVuY2VzID0gW107XG4gIGFsbFBhcnRpY2lwYW50cy5mb3JFYWNoKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgIHNvdXJjZXMuZm9yRWFjaCgoc291cmNlKSA9PiB7XG4gICAgICBjb25zdCBzb3VyY2VSZWZlcmVuY2VzID0gQXJyYXkuZnJvbShcbiAgICAgICAgcGFydGljaXBhbnQudHJhY2tQdWJsaWNhdGlvbnMudmFsdWVzKClcbiAgICAgICkuZmlsdGVyKFxuICAgICAgICAodHJhY2spID0+IHRyYWNrLnNvdXJjZSA9PT0gc291cmNlICYmIC8vIGVpdGhlciByZXR1cm4gYWxsIG9yIG9ubHkgdGhlIG9uZXMgdGhhdCBhcmUgc3Vic2NyaWJlZFxuICAgICAgICAoIW9ubHlTdWJzY3JpYmVkVHJhY2tzIHx8IHRyYWNrLnRyYWNrKVxuICAgICAgKS5tYXAoKHRyYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGFydGljaXBhbnQsXG4gICAgICAgICAgcHVibGljYXRpb246IHRyYWNrLFxuICAgICAgICAgIHNvdXJjZTogdHJhY2suc291cmNlXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHRyYWNrUmVmZXJlbmNlcy5wdXNoKC4uLnNvdXJjZVJlZmVyZW5jZXMpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHsgdHJhY2tSZWZlcmVuY2VzLCBwYXJ0aWNpcGFudHM6IGFsbFBhcnRpY2lwYW50cyB9O1xufVxuZnVuY3Rpb24gZ2V0UGFydGljaXBhbnRUcmFja1JlZnMocGFydGljaXBhbnQsIGlkZW50aWZpZXIsIG9ubHlTdWJzY3JpYmVkVHJhY2tzID0gZmFsc2UpIHtcbiAgY29uc3QgeyBzb3VyY2VzLCBraW5kLCBuYW1lIH0gPSBpZGVudGlmaWVyO1xuICBjb25zdCBzb3VyY2VSZWZlcmVuY2VzID0gQXJyYXkuZnJvbShwYXJ0aWNpcGFudC50cmFja1B1YmxpY2F0aW9ucy52YWx1ZXMoKSkuZmlsdGVyKFxuICAgIChwdWIpID0+ICghc291cmNlcyB8fCBzb3VyY2VzLmluY2x1ZGVzKHB1Yi5zb3VyY2UpKSAmJiAoIWtpbmQgfHwgcHViLmtpbmQgPT09IGtpbmQpICYmICghbmFtZSB8fCBwdWIudHJhY2tOYW1lID09PSBuYW1lKSAmJiAvLyBlaXRoZXIgcmV0dXJuIGFsbCBvciBvbmx5IHRoZSBvbmVzIHRoYXQgYXJlIHN1YnNjcmliZWRcbiAgICAoIW9ubHlTdWJzY3JpYmVkVHJhY2tzIHx8IHB1Yi50cmFjaylcbiAgKS5tYXAoKHRyYWNrKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcnRpY2lwYW50LFxuICAgICAgcHVibGljYXRpb246IHRyYWNrLFxuICAgICAgc291cmNlOiB0cmFjay5zb3VyY2VcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHNvdXJjZVJlZmVyZW5jZXM7XG59XG5mdW5jdGlvbiB0cmFja1JlZmVyZW5jZXNPYnNlcnZhYmxlKHJvb20sIHNvdXJjZXMsIG9wdGlvbnMpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgYWRkaXRpb25hbFJvb21FdmVudHMgPSAoX2EgPSBvcHRpb25zLmFkZGl0aW9uYWxSb29tRXZlbnRzKSAhPSBudWxsID8gX2EgOiBhbGxQYXJ0aWNpcGFudFJvb21FdmVudHM7XG4gIGNvbnN0IG9ubHlTdWJzY3JpYmVkVHJhY2tzID0gKF9iID0gb3B0aW9ucy5vbmx5U3Vic2NyaWJlZCkgIT0gbnVsbCA/IF9iIDogdHJ1ZTtcbiAgY29uc3Qgcm9vbUV2ZW50cyA9IEFycmF5LmZyb20oXG4gICAgKC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgIFJvb21FdmVudDUuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgICBSb29tRXZlbnQ1LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgICAgUm9vbUV2ZW50NS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICAgICAgUm9vbUV2ZW50NS5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgICAgUm9vbUV2ZW50NS5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICBSb29tRXZlbnQ1LlRyYWNrUHVibGlzaGVkLFxuICAgICAgUm9vbUV2ZW50NS5UcmFja1VucHVibGlzaGVkLFxuICAgICAgUm9vbUV2ZW50NS5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQsXG4gICAgICAuLi5hZGRpdGlvbmFsUm9vbUV2ZW50c1xuICAgIF0pKS52YWx1ZXMoKVxuICApO1xuICBjb25zdCBvYnNlcnZhYmxlID0gb2JzZXJ2ZVJvb21FdmVudHMocm9vbSwgLi4ucm9vbUV2ZW50cykucGlwZShcbiAgICBtYXA3KChyb29tMikgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGdldFRyYWNrUmVmZXJlbmNlcyhyb29tMiwgc291cmNlcywgb25seVN1YnNjcmliZWRUcmFja3MpO1xuICAgICAgbG9nLmRlYnVnKGBUcmFja1JlZmVyZW5jZVtdIHdhcyB1cGRhdGVkLiAobGVuZ3RoICR7ZGF0YS50cmFja1JlZmVyZW5jZXMubGVuZ3RofSlgLCBkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDUoZ2V0VHJhY2tSZWZlcmVuY2VzKHJvb20sIHNvdXJjZXMsIG9ubHlTdWJzY3JpYmVkVHJhY2tzKSlcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5mdW5jdGlvbiBwYXJ0aWNpcGFudFRyYWNrc09ic2VydmFibGUocGFydGljaXBhbnQsIHRyYWNrSWRlbnRpZmllcikge1xuICBjb25zdCBvYnNlcnZhYmxlID0gb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzKHBhcnRpY2lwYW50LCAuLi5wYXJ0aWNpcGFudFRyYWNrRXZlbnRzKS5waXBlKFxuICAgIG1hcDcoKHBhcnRpY2lwYW50MikgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGdldFBhcnRpY2lwYW50VHJhY2tSZWZzKHBhcnRpY2lwYW50MiwgdHJhY2tJZGVudGlmaWVyKTtcbiAgICAgIGxvZy5kZWJ1ZyhgVHJhY2tSZWZlcmVuY2VbXSB3YXMgdXBkYXRlZC4gKGxlbmd0aCAke2RhdGEubGVuZ3RofSlgLCBkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aDUoZ2V0UGFydGljaXBhbnRUcmFja1JlZnMocGFydGljaXBhbnQsIHRyYWNrSWRlbnRpZmllcikpXG4gICk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gdHJhY2tFdmVudFNlbGVjdG9yKHB1YmxpY2F0aW9uLCBldmVudCkge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGU0KChzdWJzY3JpYmUpID0+IHtcbiAgICBjb25zdCB1cGRhdGUgPSAoLi4ucGFyYW1zKSA9PiB7XG4gICAgICBzdWJzY3JpYmUubmV4dChwYXJhbXMpO1xuICAgIH07XG4gICAgcHVibGljYXRpb24ub24oZXZlbnQsIHVwZGF0ZSk7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBwdWJsaWNhdGlvbi5vZmYoZXZlbnQsIHVwZGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIHRyYWNrVHJhbnNjcmlwdGlvbk9ic2VydmVyKHB1YmxpY2F0aW9uKSB7XG4gIHJldHVybiB0cmFja0V2ZW50U2VsZWN0b3IocHVibGljYXRpb24sIFRyYWNrRXZlbnQuVHJhbnNjcmlwdGlvblJlY2VpdmVkKTtcbn1cbmZ1bmN0aW9uIHRyYWNrU3luY1RpbWVPYnNlcnZlcih0cmFjaykge1xuICByZXR1cm4gdHJhY2tFdmVudFNlbGVjdG9yKHRyYWNrLCBUcmFja0V2ZW50LlRpbWVTeW5jVXBkYXRlKS5waXBlKFxuICAgIG1hcDcoKFt0aW1lVXBkYXRlXSkgPT4gdGltZVVwZGF0ZSlcbiAgKTtcbn1cblxuLy8gc3JjL29ic2VydmFibGVzL2RvbS1ldmVudC50c1xuaW1wb3J0IHsgY29uY2F0IGFzIGNvbmNhdDIsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBmcm9tRXZlbnQsIG1hcCBhcyBtYXA4LCBvZiwgc2tpcFVudGlsLCB0aW1lb3V0IH0gZnJvbSBcInJ4anNcIjtcbmZ1bmN0aW9uIGNyZWF0ZUludGVyYWN0aW5nT2JzZXJ2YWJsZShodG1sRWxlbWVudCwgaW5hY3RpdmVBZnRlciA9IDFlMykge1xuICBpZiAoaHRtbEVsZW1lbnQgPT09IG51bGwpIHJldHVybiBvZihmYWxzZSk7XG4gIGNvbnN0IG1vdmUkID0gZnJvbUV2ZW50KGh0bWxFbGVtZW50LCBcIm1vdXNlbW92ZVwiLCB7IHBhc3NpdmU6IHRydWUgfSkucGlwZShtYXA4KCgpID0+IHRydWUpKTtcbiAgY29uc3QgbW92ZUFuZFN0b3AkID0gbW92ZSQucGlwZShcbiAgICB0aW1lb3V0KHtcbiAgICAgIGVhY2g6IGluYWN0aXZlQWZ0ZXIsXG4gICAgICB3aXRoOiAoKSA9PiBjb25jYXQyKG9mKGZhbHNlKSwgbW92ZUFuZFN0b3AkLnBpcGUoc2tpcFVudGlsKG1vdmUkKSkpXG4gICAgfSksXG4gICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKVxuICApO1xuICByZXR1cm4gbW92ZUFuZFN0b3AkO1xufVxuXG4vLyBzcmMvcGVyc2lzdGVudC1zdG9yYWdlL2xvY2FsLXN0b3JhZ2UtaGVscGVycy50c1xuZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlKGtleSwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBsb2cuZXJyb3IoXCJMb2NhbCBzdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUuXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICB0cnkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgY29uc3Qgbm9uRW1wdHlTZXR0aW5ncyA9IE9iamVjdC5lbnRyaWVzKHZhbHVlKS5maWx0ZXIoKFssIHZhbHVlMl0pID0+IHZhbHVlMiAhPT0gXCJcIik7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG5vbkVtcHR5U2V0dGluZ3MpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nLmVycm9yKGBFcnJvciBzZXR0aW5nIGl0ZW0gdG8gbG9jYWwgc3RvcmFnZTogJHtlcnJvcn1gKTtcbiAgfVxufVxuZnVuY3Rpb24gbG9hZEZyb21Mb2NhbFN0b3JhZ2Uoa2V5KSB7XG4gIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbG9nLmVycm9yKFwiTG9jYWwgc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlLlwiKTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICBsb2cud2FybihgSXRlbSB3aXRoIGtleSAke2tleX0gZG9lcyBub3QgZXhpc3QgaW4gbG9jYWwgc3RvcmFnZS5gKTtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGl0ZW0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZy5lcnJvcihgRXJyb3IgZ2V0dGluZyBpdGVtIGZyb20gbG9jYWwgc3RvcmFnZTogJHtlcnJvcn1gKTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVMb2NhbFN0b3JhZ2VJbnRlcmZhY2Uoa2V5KSB7XG4gIHJldHVybiB7XG4gICAgbG9hZDogKCkgPT4gbG9hZEZyb21Mb2NhbFN0b3JhZ2Uoa2V5KSxcbiAgICBzYXZlOiAodmFsdWUpID0+IHNhdmVUb0xvY2FsU3RvcmFnZShrZXksIHZhbHVlKVxuICB9O1xufVxuXG4vLyBzcmMvcGVyc2lzdGVudC1zdG9yYWdlL3VzZXItY2hvaWNlcy50c1xudmFyIFVTRVJfQ0hPSUNFU19LRVkgPSBgJHtjc3NQcmVmaXh9LXVzZXItY2hvaWNlc2A7XG52YXIgZGVmYXVsdFVzZXJDaG9pY2VzID0ge1xuICB2aWRlb0VuYWJsZWQ6IHRydWUsXG4gIGF1ZGlvRW5hYmxlZDogdHJ1ZSxcbiAgdmlkZW9EZXZpY2VJZDogXCJcIixcbiAgYXVkaW9EZXZpY2VJZDogXCJcIixcbiAgdXNlcm5hbWU6IFwiXCJcbn07XG52YXIgeyBsb2FkLCBzYXZlIH0gPSBjcmVhdGVMb2NhbFN0b3JhZ2VJbnRlcmZhY2UoVVNFUl9DSE9JQ0VTX0tFWSk7XG5mdW5jdGlvbiBzYXZlVXNlckNob2ljZXModXNlckNob2ljZXMsIHByZXZlbnRTYXZlID0gZmFsc2UpIHtcbiAgaWYgKHByZXZlbnRTYXZlID09PSB0cnVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNhdmUodXNlckNob2ljZXMpO1xufVxuZnVuY3Rpb24gbG9hZFVzZXJDaG9pY2VzKGRlZmF1bHRzLCBwcmV2ZW50TG9hZCA9IGZhbHNlKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gIGNvbnN0IGZhbGxiYWNrID0ge1xuICAgIHZpZGVvRW5hYmxlZDogKF9hID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLnZpZGVvRW5hYmxlZCkgIT0gbnVsbCA/IF9hIDogZGVmYXVsdFVzZXJDaG9pY2VzLnZpZGVvRW5hYmxlZCxcbiAgICBhdWRpb0VuYWJsZWQ6IChfYiA9IGRlZmF1bHRzID09IG51bGwgPyB2b2lkIDAgOiBkZWZhdWx0cy5hdWRpb0VuYWJsZWQpICE9IG51bGwgPyBfYiA6IGRlZmF1bHRVc2VyQ2hvaWNlcy5hdWRpb0VuYWJsZWQsXG4gICAgdmlkZW9EZXZpY2VJZDogKF9jID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLnZpZGVvRGV2aWNlSWQpICE9IG51bGwgPyBfYyA6IGRlZmF1bHRVc2VyQ2hvaWNlcy52aWRlb0RldmljZUlkLFxuICAgIGF1ZGlvRGV2aWNlSWQ6IChfZCA9IGRlZmF1bHRzID09IG51bGwgPyB2b2lkIDAgOiBkZWZhdWx0cy5hdWRpb0RldmljZUlkKSAhPSBudWxsID8gX2QgOiBkZWZhdWx0VXNlckNob2ljZXMuYXVkaW9EZXZpY2VJZCxcbiAgICB1c2VybmFtZTogKF9lID0gZGVmYXVsdHMgPT0gbnVsbCA/IHZvaWQgMCA6IGRlZmF1bHRzLnVzZXJuYW1lKSAhPSBudWxsID8gX2UgOiBkZWZhdWx0VXNlckNob2ljZXMudXNlcm5hbWVcbiAgfTtcbiAgaWYgKHByZXZlbnRMb2FkKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG1heWJlTG9hZGVkT2JqZWN0ID0gbG9hZCgpO1xuICAgIGNvbnN0IHJlc3VsdCA9IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBmYWxsYmFjayksIG1heWJlTG9hZGVkT2JqZWN0ICE9IG51bGwgPyBtYXliZUxvYWRlZE9iamVjdCA6IHt9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5leHBvcnQge1xuICBEYXRhVG9waWMsXG4gIEdSSURfTEFZT1VUUyxcbiAgUElOX0RFRkFVTFRfU1RBVEUsXG4gIFdJREdFVF9ERUZBVUxUX1NUQVRFLFxuICBhY3RpdmVTcGVha2VyT2JzZXJ2ZXIsXG4gIGFkZE1lZGlhVGltZXN0YW1wVG9UcmFuc2NyaXB0aW9uLFxuICBhbGxQYXJ0aWNpcGFudEV2ZW50cyxcbiAgYWxsUGFydGljaXBhbnRSb29tRXZlbnRzLFxuICBhbGxSZW1vdGVQYXJ0aWNpcGFudEV2ZW50cyxcbiAgYWxsUmVtb3RlUGFydGljaXBhbnRSb29tRXZlbnRzLFxuICBhdHRhY2hJZlN1YnNjcmliZWQsXG4gIGNvbXB1dGVNZW51UG9zaXRpb24sXG4gIGNvbm5lY3RlZFBhcnRpY2lwYW50T2JzZXJ2ZXIsXG4gIGNvbm5lY3RlZFBhcnRpY2lwYW50c09ic2VydmVyLFxuICBjb25uZWN0aW9uU3RhdGVPYnNlcnZlcixcbiAgY3JlYXRlQWN0aXZlRGV2aWNlT2JzZXJ2YWJsZSxcbiAgY3JlYXRlQ29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcixcbiAgY3JlYXRlRGF0YU9ic2VydmVyLFxuICBjcmVhdGVEZWZhdWx0R3JhbW1hcixcbiAgY3JlYXRlRW1haWxSZWdFeHAsXG4gIGNyZWF0ZUludGVyYWN0aW5nT2JzZXJ2YWJsZSxcbiAgY3JlYXRlSXNTcGVha2luZ09ic2VydmVyLFxuICBjcmVhdGVNZWRpYURldmljZU9ic2VydmVyLFxuICBjcmVhdGVUcmFja09ic2VydmVyLFxuICBjcmVhdGVVcmxSZWdFeHAsXG4gIGNzc1ByZWZpeCxcbiAgZGVkdXBlU2VnbWVudHMsXG4gIGRlZmF1bHRVc2VyQ2hvaWNlcyxcbiAgZGlkQWN0aXZlU2VnbWVudHNDaGFuZ2UsXG4gIGVuY3J5cHRpb25TdGF0dXNPYnNlcnZhYmxlLFxuICBnZXRBY3RpdmVUcmFuc2NyaXB0aW9uU2VnbWVudHMsXG4gIGdldFNjcm9sbEJhcldpZHRoLFxuICBnZXRUcmFja0J5SWRlbnRpZmllcixcbiAgZ2V0VHJhY2tSZWZlcmVuY2VJZCxcbiAgZ2V0VHJhY2tSZWZlcmVuY2VTb3VyY2UsXG4gIGlzRXF1YWxUcmFja1JlZixcbiAgaXNMb2NhbCxcbiAgaXNNb2JpbGVCcm93c2VyLFxuICBpc1BhcnRpY2lwYW50VHJhY2tSZWZlcmVuY2VQaW5uZWQsXG4gIGlzUGxhY2Vob2xkZXJSZXBsYWNlbWVudCxcbiAgaXNSZW1vdGUsXG4gIGlzU291cmNlV2l0T3B0aW9ucyxcbiAgaXNTb3VyY2VzV2l0aE9wdGlvbnMsXG4gIGlzVHJhY2tSZWZlcmVuY2UsXG4gIGlzVHJhY2tSZWZlcmVuY2VQaW5uZWQsXG4gIGlzVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlcixcbiAgaXNXZWIsXG4gIGxvYWRVc2VyQ2hvaWNlcyxcbiAgbG9nLFxuICBtdXRlZE9ic2VydmVyLFxuICBvYnNlcnZlUGFydGljaXBhbnRFdmVudHMsXG4gIG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhLFxuICBvYnNlcnZlUm9vbUV2ZW50cyxcbiAgb2JzZXJ2ZVRyYWNrRXZlbnRzLFxuICBwYXJ0aWNpcGFudEF0dHJpYnV0ZXNPYnNlcnZlcixcbiAgcGFydGljaXBhbnRCeUlkZW50aWZpZXJPYnNlcnZlcixcbiAgcGFydGljaXBhbnRFdmVudFNlbGVjdG9yLFxuICBwYXJ0aWNpcGFudEluZm9PYnNlcnZlcixcbiAgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIsXG4gIHBhcnRpY2lwYW50VHJhY2tFdmVudHMsXG4gIHBhcnRpY2lwYW50VHJhY2tzT2JzZXJ2YWJsZSxcbiAgcmVjb3JkaW5nU3RhdHVzT2JzZXJ2YWJsZSxcbiAgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSxcbiAgcm9vbUV2ZW50U2VsZWN0b3IsXG4gIHJvb21JbmZvT2JzZXJ2ZXIsXG4gIHJvb21PYnNlcnZlcixcbiAgcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSxcbiAgc2F2ZVVzZXJDaG9pY2VzLFxuICBzY3JlZW5TaGFyZU9ic2VydmVyLFxuICBzZWxlY3RHcmlkTGF5b3V0LFxuICBzZW5kTWVzc2FnZSxcbiAgc2V0RGlmZmVyZW5jZSxcbiAgc2V0TG9nRXh0ZW5zaW9uLFxuICBzZXRMb2dMZXZlbCxcbiAgc2V0dXBDaGF0LFxuICBzZXR1cENoYXRUb2dnbGUsXG4gIHNldHVwQ2xlYXJQaW5CdXR0b24sXG4gIHNldHVwQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IsXG4gIHNldHVwRGF0YU1lc3NhZ2VIYW5kbGVyLFxuICBzZXR1cERldmljZVNlbGVjdG9yLFxuICBzZXR1cERpc2Nvbm5lY3RCdXR0b24sXG4gIHNldHVwRm9jdXNUb2dnbGUsXG4gIHNldHVwTGl2ZUtpdFJvb20sXG4gIHNldHVwTWFudWFsVG9nZ2xlLFxuICBzZXR1cE1lZGlhVG9nZ2xlLFxuICBzZXR1cE1lZGlhVHJhY2ssXG4gIHNldHVwUGFydGljaXBhbnROYW1lLFxuICBzZXR1cFBhcnRpY2lwYW50VGlsZSxcbiAgc2V0dXBTdGFydEF1ZGlvLFxuICBzZXR1cFN0YXJ0VmlkZW8sXG4gIHNldHVwVHJhY2tNdXRlZEluZGljYXRvcixcbiAgc29ydFBhcnRpY2lwYW50cyxcbiAgc29ydFRyYWNrUmVmZXJlbmNlcyxcbiAgc3VwcG9ydHNTY3JlZW5TaGFyaW5nLFxuICB0b2tlbml6ZSxcbiAgdHJhY2tFdmVudFNlbGVjdG9yLFxuICB0cmFja09ic2VydmFibGUsXG4gIHRyYWNrUmVmZXJlbmNlc09ic2VydmFibGUsXG4gIHRyYWNrU3luY1RpbWVPYnNlcnZlcixcbiAgdHJhY2tUcmFuc2NyaXB0aW9uT2JzZXJ2ZXIsXG4gIHVwZGF0ZVBhZ2VzLFxuICB3YXNDbGlja091dHNpZGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-core/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/index.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/index.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioConference: () => (/* binding */ AudioConference),\n/* harmony export */   AudioTrack: () => (/* binding */ AudioTrack),\n/* harmony export */   AudioVisualizer: () => (/* binding */ AudioVisualizer),\n/* harmony export */   BarVisualizer: () => (/* binding */ BarVisualizer),\n/* harmony export */   CameraDisabledIcon: () => (/* binding */ CameraDisabledIcon_default),\n/* harmony export */   CameraIcon: () => (/* binding */ CameraIcon_default),\n/* harmony export */   CarouselLayout: () => (/* binding */ CarouselLayout),\n/* harmony export */   Chat: () => (/* binding */ Chat),\n/* harmony export */   ChatCloseIcon: () => (/* binding */ ChatCloseIcon_default),\n/* harmony export */   ChatEntry: () => (/* binding */ ChatEntry),\n/* harmony export */   ChatIcon: () => (/* binding */ ChatIcon_default),\n/* harmony export */   ChatToggle: () => (/* binding */ ChatToggle),\n/* harmony export */   Chevron: () => (/* binding */ Chevron_default),\n/* harmony export */   ClearPinButton: () => (/* binding */ ClearPinButton),\n/* harmony export */   ConnectionQualityIndicator: () => (/* binding */ ConnectionQualityIndicator),\n/* harmony export */   ConnectionState: () => (/* binding */ ConnectionState5),\n/* harmony export */   ConnectionStateToast: () => (/* binding */ ConnectionStateToast),\n/* harmony export */   ControlBar: () => (/* binding */ ControlBar),\n/* harmony export */   DisconnectButton: () => (/* binding */ DisconnectButton),\n/* harmony export */   FocusLayout: () => (/* binding */ FocusLayout),\n/* harmony export */   FocusLayoutContainer: () => (/* binding */ FocusLayoutContainer),\n/* harmony export */   FocusToggle: () => (/* binding */ FocusToggle),\n/* harmony export */   FocusToggleIcon: () => (/* binding */ FocusToggleIcon_default),\n/* harmony export */   GearIcon: () => (/* binding */ GearIcon_default),\n/* harmony export */   GridLayout: () => (/* binding */ GridLayout),\n/* harmony export */   LKFeatureContext: () => (/* binding */ LKFeatureContext),\n/* harmony export */   LayoutContext: () => (/* binding */ LayoutContext),\n/* harmony export */   LayoutContextProvider: () => (/* binding */ LayoutContextProvider),\n/* harmony export */   LeaveIcon: () => (/* binding */ LeaveIcon_default),\n/* harmony export */   LiveKitRoom: () => (/* binding */ LiveKitRoom),\n/* harmony export */   LockLockedIcon: () => (/* binding */ LockLockedIcon_default),\n/* harmony export */   MediaDeviceMenu: () => (/* binding */ MediaDeviceMenu),\n/* harmony export */   MediaDeviceSelect: () => (/* binding */ MediaDeviceSelect),\n/* harmony export */   MicDisabledIcon: () => (/* binding */ MicDisabledIcon_default),\n/* harmony export */   MicIcon: () => (/* binding */ MicIcon_default),\n/* harmony export */   ParticipantAudioTile: () => (/* binding */ ParticipantAudioTile),\n/* harmony export */   ParticipantContext: () => (/* binding */ ParticipantContext),\n/* harmony export */   ParticipantContextIfNeeded: () => (/* binding */ ParticipantContextIfNeeded),\n/* harmony export */   ParticipantLoop: () => (/* binding */ ParticipantLoop),\n/* harmony export */   ParticipantName: () => (/* binding */ ParticipantName),\n/* harmony export */   ParticipantPlaceholder: () => (/* binding */ ParticipantPlaceholder_default),\n/* harmony export */   ParticipantTile: () => (/* binding */ ParticipantTile),\n/* harmony export */   PreJoin: () => (/* binding */ PreJoin),\n/* harmony export */   QualityExcellentIcon: () => (/* binding */ QualityExcellentIcon_default),\n/* harmony export */   QualityGoodIcon: () => (/* binding */ QualityGoodIcon_default),\n/* harmony export */   QualityPoorIcon: () => (/* binding */ QualityPoorIcon_default),\n/* harmony export */   QualityUnknownIcon: () => (/* binding */ QualityUnknownIcon_default),\n/* harmony export */   RoomAudioRenderer: () => (/* binding */ RoomAudioRenderer),\n/* harmony export */   RoomContext: () => (/* binding */ RoomContext),\n/* harmony export */   RoomName: () => (/* binding */ RoomName),\n/* harmony export */   ScreenShareIcon: () => (/* binding */ ScreenShareIcon_default),\n/* harmony export */   ScreenShareStopIcon: () => (/* binding */ ScreenShareStopIcon_default),\n/* harmony export */   SpinnerIcon: () => (/* binding */ SpinnerIcon_default),\n/* harmony export */   StartAudio: () => (/* binding */ StartAudio),\n/* harmony export */   Toast: () => (/* binding */ Toast),\n/* harmony export */   TrackLoop: () => (/* binding */ TrackLoop),\n/* harmony export */   TrackMutedIndicator: () => (/* binding */ TrackMutedIndicator),\n/* harmony export */   TrackRefContext: () => (/* binding */ TrackRefContext),\n/* harmony export */   TrackRefContextIfNeeded: () => (/* binding */ TrackRefContextIfNeeded),\n/* harmony export */   TrackToggle: () => (/* binding */ TrackToggle),\n/* harmony export */   UnfocusToggleIcon: () => (/* binding */ UnfocusToggleIcon_default),\n/* harmony export */   VideoConference: () => (/* binding */ VideoConference),\n/* harmony export */   VideoTrack: () => (/* binding */ VideoTrack),\n/* harmony export */   VoiceAssistantContext: () => (/* binding */ VoiceAssistantContext),\n/* harmony export */   VoiceAssistantControlBar: () => (/* binding */ VoiceAssistantControlBar),\n/* harmony export */   formatChatMessageLinks: () => (/* binding */ formatChatMessageLinks),\n/* harmony export */   isTrackReference: () => (/* reexport safe */ _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference),\n/* harmony export */   setLogExtension: () => (/* reexport safe */ _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setLogExtension),\n/* harmony export */   setLogLevel: () => (/* reexport safe */ _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setLogLevel),\n/* harmony export */   useAudioPlayback: () => (/* binding */ useAudioPlayback),\n/* harmony export */   useAudioWaveform: () => (/* binding */ useAudioWaveform),\n/* harmony export */   useChat: () => (/* binding */ useChat),\n/* harmony export */   useChatToggle: () => (/* binding */ useChatToggle),\n/* harmony export */   useClearPinButton: () => (/* binding */ useClearPinButton),\n/* harmony export */   useConnectionQualityIndicator: () => (/* binding */ useConnectionQualityIndicator),\n/* harmony export */   useConnectionState: () => (/* binding */ useConnectionState),\n/* harmony export */   useCreateLayoutContext: () => (/* binding */ useCreateLayoutContext),\n/* harmony export */   useDataChannel: () => (/* binding */ useDataChannel),\n/* harmony export */   useDisconnectButton: () => (/* binding */ useDisconnectButton),\n/* harmony export */   useEnsureCreateLayoutContext: () => (/* binding */ useEnsureCreateLayoutContext),\n/* harmony export */   useEnsureLayoutContext: () => (/* binding */ useEnsureLayoutContext),\n/* harmony export */   useEnsureParticipant: () => (/* binding */ useEnsureParticipant),\n/* harmony export */   useEnsureRoom: () => (/* binding */ useEnsureRoom),\n/* harmony export */   useEnsureTrackRef: () => (/* binding */ useEnsureTrackRef),\n/* harmony export */   useFacingMode: () => (/* binding */ useFacingMode),\n/* harmony export */   useFeatureContext: () => (/* binding */ useFeatureContext),\n/* harmony export */   useFocusToggle: () => (/* binding */ useFocusToggle),\n/* harmony export */   useGridLayout: () => (/* binding */ useGridLayout),\n/* harmony export */   useIsEncrypted: () => (/* binding */ useIsEncrypted),\n/* harmony export */   useIsMuted: () => (/* binding */ useIsMuted),\n/* harmony export */   useIsRecording: () => (/* binding */ useIsRecording),\n/* harmony export */   useIsSpeaking: () => (/* binding */ useIsSpeaking),\n/* harmony export */   useLayoutContext: () => (/* binding */ useLayoutContext),\n/* harmony export */   useLiveKitRoom: () => (/* binding */ useLiveKitRoom),\n/* harmony export */   useLocalParticipant: () => (/* binding */ useLocalParticipant),\n/* harmony export */   useLocalParticipantPermissions: () => (/* binding */ useLocalParticipantPermissions),\n/* harmony export */   useMaybeLayoutContext: () => (/* binding */ useMaybeLayoutContext),\n/* harmony export */   useMaybeParticipantContext: () => (/* binding */ useMaybeParticipantContext),\n/* harmony export */   useMaybeRoomContext: () => (/* binding */ useMaybeRoomContext),\n/* harmony export */   useMaybeTrackRefContext: () => (/* binding */ useMaybeTrackRefContext),\n/* harmony export */   useMediaDeviceSelect: () => (/* binding */ useMediaDeviceSelect),\n/* harmony export */   useMediaDevices: () => (/* binding */ useMediaDevices),\n/* harmony export */   useMultibandTrackVolume: () => (/* binding */ useMultibandTrackVolume),\n/* harmony export */   usePagination: () => (/* binding */ usePagination),\n/* harmony export */   useParticipantAttribute: () => (/* binding */ useParticipantAttribute),\n/* harmony export */   useParticipantAttributes: () => (/* binding */ useParticipantAttributes),\n/* harmony export */   useParticipantContext: () => (/* binding */ useParticipantContext),\n/* harmony export */   useParticipantInfo: () => (/* binding */ useParticipantInfo),\n/* harmony export */   useParticipantPermissions: () => (/* binding */ useParticipantPermissions),\n/* harmony export */   useParticipantTile: () => (/* binding */ useParticipantTile),\n/* harmony export */   useParticipantTracks: () => (/* binding */ useParticipantTracks),\n/* harmony export */   useParticipants: () => (/* binding */ useParticipants),\n/* harmony export */   usePersistentUserChoices: () => (/* binding */ usePersistentUserChoices),\n/* harmony export */   usePinnedTracks: () => (/* binding */ usePinnedTracks),\n/* harmony export */   usePreviewDevice: () => (/* binding */ usePreviewDevice),\n/* harmony export */   usePreviewTracks: () => (/* binding */ usePreviewTracks),\n/* harmony export */   useRemoteParticipant: () => (/* binding */ useRemoteParticipant),\n/* harmony export */   useRemoteParticipants: () => (/* binding */ useRemoteParticipants),\n/* harmony export */   useRoomContext: () => (/* binding */ useRoomContext),\n/* harmony export */   useRoomInfo: () => (/* binding */ useRoomInfo),\n/* harmony export */   useSortedParticipants: () => (/* binding */ useSortedParticipants),\n/* harmony export */   useSpeakingParticipants: () => (/* binding */ useSpeakingParticipants),\n/* harmony export */   useStartAudio: () => (/* binding */ useStartAudio),\n/* harmony export */   useStartVideo: () => (/* binding */ useStartVideo),\n/* harmony export */   useSwipe: () => (/* binding */ useSwipe),\n/* harmony export */   useToken: () => (/* binding */ useToken),\n/* harmony export */   useTrackByName: () => (/* binding */ useTrackByName),\n/* harmony export */   useTrackMutedIndicator: () => (/* binding */ useTrackMutedIndicator),\n/* harmony export */   useTrackRefContext: () => (/* binding */ useTrackRefContext),\n/* harmony export */   useTrackToggle: () => (/* binding */ useTrackToggle),\n/* harmony export */   useTrackTranscription: () => (/* binding */ useTrackTranscription),\n/* harmony export */   useTrackVolume: () => (/* binding */ useTrackVolume),\n/* harmony export */   useTracks: () => (/* binding */ useTracks),\n/* harmony export */   useVisualStableUpdate: () => (/* binding */ useVisualStableUpdate),\n/* harmony export */   useVoiceAssistant: () => (/* binding */ useVoiceAssistant)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livekit/components-core */ \"(ssr)/./node_modules/@livekit/components-core/dist/index.mjs\");\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var usehooks_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! usehooks-ts */ \"(ssr)/./node_modules/usehooks-ts/dist/index.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/components/controls/ClearPinButton.tsx\n\n\n// src/hooks/useAudioPlayback.ts\n\n\n// src/hooks/internal/useResizeObserver.ts\n\nvar useLatest = (current) => {\n  const storedValue = react__WEBPACK_IMPORTED_MODULE_0__.useRef(current);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    storedValue.current = current;\n  });\n  return storedValue;\n};\nfunction useResizeObserver(target, callback) {\n  const resizeObserver = getResizeObserver();\n  const storedCallback = useLatest(callback);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    let didUnsubscribe = false;\n    const targetEl = target.current;\n    if (!targetEl) return;\n    function cb(entry, observer) {\n      if (didUnsubscribe) return;\n      storedCallback.current(entry, observer);\n    }\n    resizeObserver == null ? void 0 : resizeObserver.subscribe(targetEl, cb);\n    return () => {\n      didUnsubscribe = true;\n      resizeObserver == null ? void 0 : resizeObserver.unsubscribe(targetEl, cb);\n    };\n  }, [target.current, resizeObserver, storedCallback]);\n  return resizeObserver == null ? void 0 : resizeObserver.observer;\n}\nfunction createResizeObserver() {\n  let ticking = false;\n  let allEntries = [];\n  const callbacks = /* @__PURE__ */ new Map();\n  if (typeof window === \"undefined\") {\n    return;\n  }\n  const observer = new ResizeObserver((entries, obs) => {\n    allEntries = allEntries.concat(entries);\n    if (!ticking) {\n      window.requestAnimationFrame(() => {\n        const triggered = /* @__PURE__ */ new Set();\n        for (let i = 0; i < allEntries.length; i++) {\n          if (triggered.has(allEntries[i].target)) continue;\n          triggered.add(allEntries[i].target);\n          const cbs = callbacks.get(allEntries[i].target);\n          cbs == null ? void 0 : cbs.forEach((cb) => cb(allEntries[i], obs));\n        }\n        allEntries = [];\n        ticking = false;\n      });\n    }\n    ticking = true;\n  });\n  return {\n    observer,\n    subscribe(target, callback) {\n      var _a;\n      observer.observe(target);\n      const cbs = (_a = callbacks.get(target)) != null ? _a : [];\n      cbs.push(callback);\n      callbacks.set(target, cbs);\n    },\n    unsubscribe(target, callback) {\n      var _a;\n      const cbs = (_a = callbacks.get(target)) != null ? _a : [];\n      if (cbs.length === 1) {\n        observer.unobserve(target);\n        callbacks.delete(target);\n        return;\n      }\n      const cbIndex = cbs.indexOf(callback);\n      if (cbIndex !== -1) cbs.splice(cbIndex, 1);\n      callbacks.set(target, cbs);\n    }\n  };\n}\nvar _resizeObserver;\nvar getResizeObserver = () => !_resizeObserver ? _resizeObserver = createResizeObserver() : _resizeObserver;\nvar useSize = (target) => {\n  const [size, setSize] = react__WEBPACK_IMPORTED_MODULE_0__.useState({ width: 0, height: 0 });\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (target.current) {\n      const { width, height } = target.current.getBoundingClientRect();\n      setSize({ width, height });\n    }\n  }, [target.current]);\n  const resizeCallback = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (entry) => setSize(entry.contentRect),\n    []\n  );\n  useResizeObserver(target, resizeCallback);\n  return size;\n};\n\n// src/hooks/internal/useObservableState.ts\n\nfunction useObservableState(observable, startWith, resetWhenObservableChanges = true) {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState(startWith);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (resetWhenObservableChanges) {\n      setState(startWith);\n    }\n    if (typeof window === \"undefined\" || !observable) return;\n    const subscription = observable.subscribe(setState);\n    return () => subscription.unsubscribe();\n  }, [observable, resetWhenObservableChanges]);\n  return state;\n}\n\n// src/hooks/internal/useMediaQuery.ts\n\nfunction useMediaQuery(query) {\n  const getMatches = (query2) => {\n    if (typeof window !== \"undefined\") {\n      return window.matchMedia(query2).matches;\n    }\n    return false;\n  };\n  const [matches, setMatches] = react__WEBPACK_IMPORTED_MODULE_0__.useState(getMatches(query));\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const matchMedia = window.matchMedia(query);\n    handleChange();\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener(\"change\", handleChange);\n    }\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      }\n    };\n  }, [query]);\n  return matches;\n}\n\n// src/hooks/useAudioPlayback.ts\n\n\n// src/context/layout-context.ts\n\n\n\n// src/context/chat-context.ts\nfunction chatReducer(state, action) {\n  if (action.msg === \"show_chat\") {\n    return __spreadProps(__spreadValues({}, state), { showChat: true, unreadMessages: 0 });\n  } else if (action.msg === \"hide_chat\") {\n    return __spreadProps(__spreadValues({}, state), { showChat: false });\n  } else if (action.msg === \"toggle_chat\") {\n    const newState = __spreadProps(__spreadValues({}, state), { showChat: !state.showChat });\n    if (newState.showChat === true) {\n      newState.unreadMessages = 0;\n    }\n    return newState;\n  } else if (action.msg === \"unread_msg\") {\n    return __spreadProps(__spreadValues({}, state), { unreadMessages: action.count });\n  } else if (action.msg === \"toggle_settings\") {\n    return __spreadProps(__spreadValues({}, state), { showSettings: !state.showSettings });\n  } else {\n    return __spreadValues({}, state);\n  }\n}\n\n// src/context/pin-context.ts\nfunction pinReducer(state, action) {\n  if (action.msg === \"set_pin\") {\n    return [action.trackReference];\n  } else if (action.msg === \"clear_pin\") {\n    return [];\n  } else {\n    return __spreadValues({}, state);\n  }\n}\n\n// src/context/layout-context.ts\nvar LayoutContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useLayoutContext() {\n  const layoutContext = react__WEBPACK_IMPORTED_MODULE_0__.useContext(LayoutContext);\n  if (!layoutContext) {\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  }\n  return layoutContext;\n}\nfunction useEnsureLayoutContext(layoutContext) {\n  const layout = useMaybeLayoutContext();\n  layoutContext != null ? layoutContext : layoutContext = layout;\n  if (!layoutContext) {\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  }\n  return layoutContext;\n}\nfunction useCreateLayoutContext() {\n  const [pinState, pinDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(pinReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.PIN_DEFAULT_STATE);\n  const [widgetState, widgetDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(chatReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.WIDGET_DEFAULT_STATE);\n  return {\n    pin: { dispatch: pinDispatch, state: pinState },\n    widget: { dispatch: widgetDispatch, state: widgetState }\n  };\n}\nfunction useEnsureCreateLayoutContext(layoutContext) {\n  const [pinState, pinDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(pinReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.PIN_DEFAULT_STATE);\n  const [widgetState, widgetDispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(chatReducer, _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.WIDGET_DEFAULT_STATE);\n  return layoutContext != null ? layoutContext : {\n    pin: { dispatch: pinDispatch, state: pinState },\n    widget: { dispatch: widgetDispatch, state: widgetState }\n  };\n}\nfunction useMaybeLayoutContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(LayoutContext);\n}\n\n// src/context/participant-context.ts\n\n\n// src/context/track-reference-context.ts\n\nvar TrackRefContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(\n  void 0\n);\nfunction useTrackRefContext() {\n  const trackReference = react__WEBPACK_IMPORTED_MODULE_0__.useContext(TrackRefContext);\n  if (!trackReference) {\n    throw Error(\"tried to access track context outside of track context provider\");\n  }\n  return trackReference;\n}\nfunction useMaybeTrackRefContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(TrackRefContext);\n}\nfunction useEnsureTrackRef(trackRef) {\n  const context = useMaybeTrackRefContext();\n  const ref = trackRef != null ? trackRef : context;\n  if (!ref) {\n    throw new Error(\n      \"No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly\"\n    );\n  }\n  return ref;\n}\n\n// src/context/participant-context.ts\nvar ParticipantContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useParticipantContext() {\n  const participant = react__WEBPACK_IMPORTED_MODULE_0__.useContext(ParticipantContext);\n  if (!participant) {\n    throw Error(\"tried to access participant context outside of participant context provider\");\n  }\n  return participant;\n}\nfunction useMaybeParticipantContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ParticipantContext);\n}\nfunction useEnsureParticipant(participant) {\n  var _a;\n  const context = useMaybeParticipantContext();\n  const trackContext = useMaybeTrackRefContext();\n  const p = (_a = participant != null ? participant : context) != null ? _a : trackContext == null ? void 0 : trackContext.participant;\n  if (!p) {\n    throw new Error(\n      \"No participant provided, make sure you are inside a participant context or pass the participant explicitly\"\n    );\n  }\n  return p;\n}\n\n// src/context/room-context.ts\n\nvar RoomContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useRoomContext() {\n  const ctx = react__WEBPACK_IMPORTED_MODULE_0__.useContext(RoomContext);\n  if (!ctx) {\n    throw Error(\"tried to access room context outside of livekit room component\");\n  }\n  return ctx;\n}\nfunction useMaybeRoomContext() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(RoomContext);\n}\nfunction useEnsureRoom(room) {\n  const context = useMaybeRoomContext();\n  const r = room != null ? room : context;\n  if (!r) {\n    throw new Error(\n      \"No room provided, make sure you are inside a Room context or pass the room explicitly\"\n    );\n  }\n  return r;\n}\n\n// src/context/feature-context.ts\n\nvar LKFeatureContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\nfunction useFeatureContext(require2) {\n  const ctx = react__WEBPACK_IMPORTED_MODULE_0__.useContext(LKFeatureContext);\n  if (require2 === true) {\n    if (ctx) {\n      return ctx;\n    } else {\n      throw Error(\"tried to access feature context, but none is present\");\n    }\n  }\n  return ctx;\n}\n\n// src/context/voice-assistant-context.ts\n\nvar VoiceAssistantContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\n\n// src/hooks/useAudioPlayback.ts\nfunction useAudioPlayback(room) {\n  const roomEnsured = useEnsureRoom(room);\n  const startAudio = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => __async(this, null, function* () {\n    yield roomEnsured.startAudio();\n  }), [roomEnsured]);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.roomAudioPlaybackAllowedObservable)(roomEnsured),\n    [roomEnsured]\n  );\n  const { canPlayAudio } = useObservableState(observable, {\n    canPlayAudio: roomEnsured.canPlaybackAudio\n  });\n  return { canPlayAudio, startAudio };\n}\n\n// src/hooks/useClearPinButton.ts\n\n\n\n// src/mergeProps.ts\n\nfunction chain(...callbacks) {\n  return (...args) => {\n    for (const callback of callbacks) {\n      if (typeof callback === \"function\") {\n        try {\n          callback(...args);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  };\n}\nfunction mergeProps(...args) {\n  const result = __spreadValues({}, args[0]);\n  for (let i = 1; i < args.length; i++) {\n    const props = args[i];\n    for (const key in props) {\n      const a = result[key];\n      const b = props[key];\n      if (typeof a === \"function\" && typeof b === \"function\" && // This is a lot faster than a regex.\n      key[0] === \"o\" && key[1] === \"n\" && key.charCodeAt(2) >= /* 'A' */\n      65 && key.charCodeAt(2) <= /* 'Z' */\n      90) {\n        result[key] = chain(a, b);\n      } else if ((key === \"className\" || key === \"UNSAFE_className\") && typeof a === \"string\" && typeof b === \"string\") {\n        result[key] = (0,clsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(a, b);\n      } else {\n        result[key] = b !== void 0 ? b : a;\n      }\n    }\n  }\n  return result;\n}\n\n// src/hooks/useClearPinButton.ts\nfunction useClearPinButton(props) {\n  const { state, dispatch } = useLayoutContext().pin;\n  const buttonProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupClearPinButton)();\n    const mergedProps = mergeProps(props, {\n      className,\n      disabled: !(state == null ? void 0 : state.length),\n      onClick: () => {\n        if (dispatch) dispatch({ msg: \"clear_pin\" });\n      }\n    });\n    return mergedProps;\n  }, [props, dispatch, state]);\n  return { buttonProps };\n}\n\n// src/hooks/useConnectionQualityIndicator.ts\n\n\n\nfunction useConnectionQualityIndicator(options = {}) {\n  const p = useEnsureParticipant(options.participant);\n  const { className, connectionQualityObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupConnectionQualityIndicator)(p),\n    [p]\n  );\n  const quality = useObservableState(connectionQualityObserver, livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionQuality.Unknown);\n  return { className, quality };\n}\n\n// src/hooks/useConnectionStatus.ts\n\n\nfunction useConnectionState(room) {\n  const r = useEnsureRoom(room);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.connectionStateObserver)(r), [r]);\n  const connectionState = useObservableState(observable, r.state);\n  return connectionState;\n}\n\n// src/hooks/useDataChannel.ts\n\n\nfunction useDataChannel(topicOrCallback, callback) {\n  const onMessage = typeof topicOrCallback === \"function\" ? topicOrCallback : callback;\n  const topic = typeof topicOrCallback === \"string\" ? topicOrCallback : void 0;\n  const room = useRoomContext();\n  const { send, messageObservable, isSendingObservable } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupDataMessageHandler)(room, topic, onMessage),\n    [room, topic, onMessage]\n  );\n  const message = useObservableState(messageObservable, void 0);\n  const isSending = useObservableState(isSendingObservable, false);\n  return {\n    message,\n    send,\n    isSending\n  };\n}\n\n// src/hooks/useDisconnectButton.ts\n\n\n\nfunction useDisconnectButton(props) {\n  const room = useRoomContext();\n  const connectionState = useConnectionState(room);\n  const buttonProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className, disconnect } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupDisconnectButton)(room);\n    const mergedProps = mergeProps(props, {\n      className,\n      onClick: () => {\n        var _a;\n        return disconnect((_a = props.stopTracks) != null ? _a : true);\n      },\n      disabled: connectionState === livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Disconnected\n    });\n    return mergedProps;\n  }, [room, props, connectionState]);\n  return { buttonProps };\n}\n\n// src/hooks/useFacingMode.ts\n\nfunction useFacingMode(trackReference) {\n  if (trackReference.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.LocalTrackPublication) {\n    const localTrack = trackReference.publication.track;\n    if (localTrack) {\n      const { facingMode } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.facingModeFromLocalTrack)(localTrack);\n      return facingMode;\n    }\n  }\n  return \"undefined\";\n}\n\n// src/hooks/useFocusToggle.ts\n\n\nfunction useFocusToggle({ trackRef, props }) {\n  const trackReference = useEnsureTrackRef(trackRef);\n  const layoutContext = useMaybeLayoutContext();\n  const { className } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupFocusToggle)(), []);\n  const inFocus = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReferencePinned)(trackReference, layoutContext == null ? void 0 : layoutContext.pin.state);\n  }, [trackReference, layoutContext == null ? void 0 : layoutContext.pin.state]);\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps(props, {\n      className,\n      onClick: (event) => {\n        var _a, _b, _c, _d, _e;\n        (_a = props.onClick) == null ? void 0 : _a.call(props, event);\n        if (inFocus) {\n          (_c = layoutContext == null ? void 0 : (_b = layoutContext.pin).dispatch) == null ? void 0 : _c.call(_b, {\n            msg: \"clear_pin\"\n          });\n        } else {\n          (_e = layoutContext == null ? void 0 : (_d = layoutContext.pin).dispatch) == null ? void 0 : _e.call(_d, {\n            msg: \"set_pin\",\n            trackReference\n          });\n        }\n      }\n    }),\n    [props, className, trackReference, inFocus, layoutContext == null ? void 0 : layoutContext.pin]\n  );\n  return { mergedProps, inFocus };\n}\n\n// src/hooks/useGridLayout.ts\n\n\nfunction useGridLayout(gridElement, trackCount, options = {}) {\n  var _a;\n  const gridLayouts = (_a = options.gridLayouts) != null ? _a : _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.GRID_LAYOUTS;\n  const { width, height } = useSize(gridElement);\n  const layout = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.selectGridLayout)(gridLayouts, trackCount, width, height);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (gridElement.current && layout) {\n      gridElement.current.style.setProperty(\"--lk-col-count\", layout == null ? void 0 : layout.columns.toString());\n      gridElement.current.style.setProperty(\"--lk-row-count\", layout == null ? void 0 : layout.rows.toString());\n    }\n  }, [gridElement, layout]);\n  return {\n    layout,\n    containerWidth: width,\n    containerHeight: height\n  };\n}\n\n// src/hooks/useIsMuted.ts\n\n\nfunction useIsMuted(sourceOrTrackRef, options = {}) {\n  var _a, _b;\n  const passedParticipant = typeof sourceOrTrackRef === \"string\" ? options.participant : sourceOrTrackRef.participant;\n  const p = useEnsureParticipant(passedParticipant);\n  const ref = typeof sourceOrTrackRef === \"string\" ? { participant: p, source: sourceOrTrackRef } : sourceOrTrackRef;\n  const [isMuted, setIsMuted] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    !!(((_a = ref.publication) == null ? void 0 : _a.isMuted) || ((_b = p.getTrackPublication(ref.source)) == null ? void 0 : _b.isMuted))\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.mutedObserver)(ref).subscribe(setIsMuted);\n    return () => listener.unsubscribe();\n  }, [(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackReferenceId)(ref)]);\n  return isMuted;\n}\n\n// src/hooks/useIsSpeaking.ts\n\n\nfunction useIsSpeaking(participant) {\n  const p = useEnsureParticipant(participant);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.createIsSpeakingObserver)(p), [p]);\n  const isSpeaking = useObservableState(observable, p.isSpeaking);\n  return isSpeaking;\n}\n\n// src/hooks/useLiveKitRoom.ts\n\n\n\nvar defaultRoomProps = {\n  connect: true,\n  audio: false,\n  video: false\n};\nfunction useLiveKitRoom(props) {\n  const _a = __spreadValues(__spreadValues({}, defaultRoomProps), props), {\n    token,\n    serverUrl,\n    options,\n    room: passedRoom,\n    connectOptions,\n    connect,\n    audio,\n    video,\n    screen,\n    onConnected,\n    onDisconnected,\n    onError,\n    onMediaDeviceFailure,\n    onEncryptionError,\n    simulateParticipants\n  } = _a, rest = __objRest(_a, [\n    \"token\",\n    \"serverUrl\",\n    \"options\",\n    \"room\",\n    \"connectOptions\",\n    \"connect\",\n    \"audio\",\n    \"video\",\n    \"screen\",\n    \"onConnected\",\n    \"onDisconnected\",\n    \"onError\",\n    \"onMediaDeviceFailure\",\n    \"onEncryptionError\",\n    \"simulateParticipants\"\n  ]);\n  if (options && passedRoom) {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(\n      \"when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.\"\n    );\n  }\n  const [room, setRoom] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setRoom(passedRoom != null ? passedRoom : new livekit_client__WEBPACK_IMPORTED_MODULE_3__.Room(options));\n  }, [passedRoom]);\n  const htmlProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupLiveKitRoom)();\n    return mergeProps(rest, { className });\n  }, [rest]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room) return;\n    const onSignalConnected = () => {\n      const localP = room.localParticipant;\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"trying to publish local tracks\");\n      Promise.all([\n        localP.setMicrophoneEnabled(!!audio, typeof audio !== \"boolean\" ? audio : void 0),\n        localP.setCameraEnabled(!!video, typeof video !== \"boolean\" ? video : void 0),\n        localP.setScreenShareEnabled(!!screen, typeof screen !== \"boolean\" ? screen : void 0)\n      ]).catch((e) => {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(e);\n        onError == null ? void 0 : onError(e);\n      });\n    };\n    const handleMediaDeviceError = (e) => {\n      const mediaDeviceFailure = livekit_client__WEBPACK_IMPORTED_MODULE_3__.MediaDeviceFailure.getFailure(e);\n      onMediaDeviceFailure == null ? void 0 : onMediaDeviceFailure(mediaDeviceFailure);\n    };\n    const handleEncryptionError = (e) => {\n      onEncryptionError == null ? void 0 : onEncryptionError(e);\n    };\n    room.on(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.SignalConnected, onSignalConnected).on(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.MediaDevicesError, handleMediaDeviceError).on(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.EncryptionError, handleEncryptionError);\n    return () => {\n      room.off(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.SignalConnected, onSignalConnected).off(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.MediaDevicesError, handleMediaDeviceError).off(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.EncryptionError, handleEncryptionError);\n    };\n  }, [room, audio, video, screen, onError, onEncryptionError, onMediaDeviceFailure]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room) return;\n    if (simulateParticipants) {\n      room.simulateParticipants({\n        participants: {\n          count: simulateParticipants\n        },\n        publish: {\n          audio: true,\n          useRealTracks: true\n        }\n      });\n      return;\n    }\n    if (!token) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"no token yet\");\n      return;\n    }\n    if (!serverUrl) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(\"no livekit url provided\");\n      onError == null ? void 0 : onError(Error(\"no livekit url provided\"));\n      return;\n    }\n    if (connect) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"connecting\");\n      room.connect(serverUrl, token, connectOptions).catch((e) => {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(e);\n        onError == null ? void 0 : onError(e);\n      });\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"disconnecting because connect is false\");\n      room.disconnect();\n    }\n  }, [\n    connect,\n    token,\n    JSON.stringify(connectOptions),\n    room,\n    onError,\n    serverUrl,\n    simulateParticipants\n  ]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room) return;\n    const connectionStateChangeListener = (state) => {\n      switch (state) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Disconnected:\n          if (onDisconnected) onDisconnected();\n          break;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Connected:\n          if (onConnected) onConnected();\n          break;\n        default:\n          break;\n      }\n    };\n    room.on(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\n    return () => {\n      room.off(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\n    };\n  }, [token, onConnected, onDisconnected, room]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!room) return;\n    return () => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.info(\"disconnecting on onmount\");\n      room.disconnect();\n    };\n  }, [room]);\n  return { room, htmlProps };\n}\n\n// src/hooks/useLocalParticipant.ts\n\n\nfunction useLocalParticipant(options = {}) {\n  const room = useEnsureRoom(options.room);\n  const [localParticipant, setLocalParticipant] = react__WEBPACK_IMPORTED_MODULE_0__.useState(room.localParticipant);\n  const [isMicrophoneEnabled, setIsMicrophoneEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.isMicrophoneEnabled\n  );\n  const [isCameraEnabled, setIsCameraEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.isMicrophoneEnabled\n  );\n  const [lastMicrophoneError, setLastMicrophoneError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.lastMicrophoneError\n  );\n  const [lastCameraError, setLastCameraError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(localParticipant.lastCameraError);\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    localParticipant.isMicrophoneEnabled\n  );\n  const [microphoneTrack, setMicrophoneTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  );\n  const [cameraTrack, setCameraTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  const handleUpdate = (media) => {\n    setIsCameraEnabled(media.isCameraEnabled);\n    setIsMicrophoneEnabled(media.isMicrophoneEnabled);\n    setIsScreenShareEnabled(media.isScreenShareEnabled);\n    setCameraTrack(media.cameraTrack);\n    setMicrophoneTrack(media.microphoneTrack);\n    setLastMicrophoneError(media.participant.lastMicrophoneError);\n    setLastCameraError(media.participant.lastCameraError);\n    setLocalParticipant(media.participant);\n  };\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.observeParticipantMedia)(room.localParticipant).subscribe(handleUpdate);\n    return () => listener.unsubscribe();\n  }, [room]);\n  return {\n    isMicrophoneEnabled,\n    isScreenShareEnabled,\n    isCameraEnabled,\n    microphoneTrack,\n    cameraTrack,\n    lastMicrophoneError,\n    lastCameraError,\n    localParticipant\n  };\n}\n\n// src/hooks/useLocalParticipantPermissions.ts\n\n\nfunction useLocalParticipantPermissions() {\n  const room = useRoomContext();\n  const permissionObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantPermissionObserver)(room.localParticipant),\n    [room]\n  );\n  const permissions = useObservableState(permissionObserver, room.localParticipant.permissions);\n  return permissions;\n}\n\n// src/hooks/useMediaDeviceSelect.ts\n\n\nfunction useMediaDeviceSelect({\n  kind,\n  room,\n  track,\n  requestPermissions,\n  onError\n}) {\n  const roomContext = useMaybeRoomContext();\n  const deviceObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.createMediaDeviceObserver)(kind, onError, requestPermissions),\n    [kind, requestPermissions, onError]\n  );\n  const devices = useObservableState(deviceObserver, []);\n  const [currentDeviceId, setCurrentDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"\");\n  const { className, activeDeviceObservable, setActiveMediaDevice } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupDeviceSelector)(kind, room != null ? room : roomContext, track),\n    [kind, room, roomContext, track]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = activeDeviceObservable.subscribe((deviceId) => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.info(\"setCurrentDeviceId\", deviceId);\n      if (deviceId) setCurrentDeviceId(deviceId);\n    });\n    return () => {\n      listener == null ? void 0 : listener.unsubscribe();\n    };\n  }, [activeDeviceObservable]);\n  return { devices, className, activeDeviceId: currentDeviceId, setActiveMediaDevice };\n}\n\n// src/hooks/useMediaDevices.ts\n\n\nfunction useMediaDevices({\n  kind,\n  onError\n}) {\n  const deviceObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.createMediaDeviceObserver)(kind, onError),\n    [kind, onError]\n  );\n  const devices = useObservableState(deviceObserver, []);\n  return devices;\n}\n\n// src/hooks/usePagination.ts\n\n\n// src/hooks/useVisualStableUpdate.ts\n\n\nfunction useVisualStableUpdate(trackReferences, maxItemsOnPage, options = {}) {\n  const lastTrackRefs = react__WEBPACK_IMPORTED_MODULE_0__.useRef([]);\n  const lastMaxItemsOnPage = react__WEBPACK_IMPORTED_MODULE_0__.useRef(-1);\n  const layoutChanged = maxItemsOnPage !== lastMaxItemsOnPage.current;\n  const sortedTrackRefs = typeof options.customSortFunction === \"function\" ? options.customSortFunction(trackReferences) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.sortTrackReferences)(trackReferences);\n  let updatedTrackRefs = [...sortedTrackRefs];\n  if (layoutChanged === false) {\n    try {\n      updatedTrackRefs = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.updatePages)(lastTrackRefs.current, sortedTrackRefs, maxItemsOnPage);\n    } catch (error) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.error(\"Error while running updatePages(): \", error);\n    }\n  }\n  if (layoutChanged) {\n    lastTrackRefs.current = sortedTrackRefs;\n  } else {\n    lastTrackRefs.current = updatedTrackRefs;\n  }\n  lastMaxItemsOnPage.current = maxItemsOnPage;\n  return updatedTrackRefs;\n}\n\n// src/hooks/usePagination.ts\nfunction usePagination(itemPerPage, trackReferences) {\n  const [currentPage, setCurrentPage] = react__WEBPACK_IMPORTED_MODULE_0__.useState(1);\n  const totalPageCount = Math.max(Math.ceil(trackReferences.length / itemPerPage), 1);\n  if (currentPage > totalPageCount) {\n    setCurrentPage(totalPageCount);\n  }\n  const lastItemIndex = currentPage * itemPerPage;\n  const firstItemIndex = lastItemIndex - itemPerPage;\n  const changePage = (direction) => {\n    setCurrentPage((state) => {\n      if (direction === \"next\") {\n        if (state === totalPageCount) {\n          return state;\n        }\n        return state + 1;\n      } else {\n        if (state === 1) {\n          return state;\n        }\n        return state - 1;\n      }\n    });\n  };\n  const goToPage = (num) => {\n    if (num > totalPageCount) {\n      setCurrentPage(totalPageCount);\n    } else if (num < 1) {\n      setCurrentPage(1);\n    } else {\n      setCurrentPage(num);\n    }\n  };\n  const updatedTrackReferences = useVisualStableUpdate(trackReferences, itemPerPage);\n  const tracksOnPage = updatedTrackReferences.slice(firstItemIndex, lastItemIndex);\n  return {\n    totalPageCount,\n    nextPage: () => changePage(\"next\"),\n    prevPage: () => changePage(\"previous\"),\n    setPage: goToPage,\n    firstItemIndex,\n    lastItemIndex,\n    tracks: tracksOnPage,\n    currentPage\n  };\n}\n\n// src/hooks/useParticipantInfo.ts\n\n\nfunction useParticipantInfo(props = {}) {\n  let p = useMaybeParticipantContext();\n  if (props.participant) {\n    p = props.participant;\n  }\n  const infoObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantInfoObserver)(p), [p]);\n  const { identity, name, metadata } = useObservableState(infoObserver, {\n    name: p == null ? void 0 : p.name,\n    identity: p == null ? void 0 : p.identity,\n    metadata: p == null ? void 0 : p.metadata\n  });\n  return { identity, name, metadata };\n}\n\n// src/hooks/useParticipantPermissions.ts\n\n\nfunction useParticipantPermissions(options = {}) {\n  const p = useEnsureParticipant(options.participant);\n  const permissionObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantPermissionObserver)(p), [p]);\n  const permissions = useObservableState(permissionObserver, p.permissions);\n  return permissions;\n}\n\n// src/hooks/useParticipantTile.ts\n\n\n\nfunction useParticipantTile({\n  trackRef,\n  onParticipantClick,\n  disableSpeakingIndicator,\n  htmlProps\n}) {\n  const trackReference = useEnsureTrackRef(trackRef);\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className } = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupParticipantTile)();\n    return mergeProps(htmlProps, {\n      className,\n      onClick: (event) => {\n        var _a, _b;\n        (_a = htmlProps.onClick) == null ? void 0 : _a.call(htmlProps, event);\n        if (typeof onParticipantClick === \"function\") {\n          const track = (_b = trackReference.publication) != null ? _b : trackReference.participant.getTrackPublication(trackReference.source);\n          onParticipantClick({ participant: trackReference.participant, track });\n        }\n      }\n    });\n  }, [\n    htmlProps,\n    onParticipantClick,\n    trackReference.publication,\n    trackReference.source,\n    trackReference.participant\n  ]);\n  const micTrack = trackReference.participant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone);\n  const micRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return {\n      participant: trackReference.participant,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone,\n      publication: micTrack\n    };\n  }, [micTrack, trackReference.participant]);\n  const isVideoMuted = useIsMuted(trackReference);\n  const isAudioMuted = useIsMuted(micRef);\n  const isSpeaking = useIsSpeaking(trackReference.participant);\n  const facingMode = useFacingMode(trackReference);\n  return {\n    elementProps: __spreadValues({\n      \"data-lk-audio-muted\": isAudioMuted,\n      \"data-lk-video-muted\": isVideoMuted,\n      \"data-lk-speaking\": disableSpeakingIndicator === true ? false : isSpeaking,\n      \"data-lk-local-participant\": trackReference.participant.isLocal,\n      \"data-lk-source\": trackReference.source,\n      \"data-lk-facing-mode\": facingMode\n    }, mergedProps)\n  };\n}\n\n// src/hooks/useRemoteParticipants.ts\n\n\nfunction useRemoteParticipants(options = {}) {\n  const room = useEnsureRoom(options.room);\n  const [participants, setParticipants] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.connectedParticipantsObserver)(room, {\n      additionalRoomEvents: options.updateOnlyOn\n    }).subscribe(setParticipants);\n    return () => listener.unsubscribe();\n  }, [room, JSON.stringify(options.updateOnlyOn)]);\n  return participants;\n}\n\n// src/hooks/useParticipants.ts\n\nfunction useParticipants(options = {}) {\n  const remoteParticipants = useRemoteParticipants(options);\n  const { localParticipant } = useLocalParticipant(options);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => [localParticipant, ...remoteParticipants],\n    [localParticipant, remoteParticipants]\n  );\n}\n\n// src/hooks/usePinnedTracks.ts\n\nfunction usePinnedTracks(layoutContext) {\n  layoutContext = useEnsureLayoutContext(layoutContext);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((layoutContext == null ? void 0 : layoutContext.pin.state) !== void 0 && layoutContext.pin.state.length >= 1) {\n      return layoutContext.pin.state;\n    }\n    return [];\n  }, [layoutContext.pin.state]);\n}\n\n// src/hooks/useRemoteParticipant.ts\n\n\nfunction useRemoteParticipant(identityOrIdentifier, options = {}) {\n  const room = useRoomContext();\n  const [updateOnlyOn] = react__WEBPACK_IMPORTED_MODULE_0__.useState(options.updateOnlyOn);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (typeof identityOrIdentifier === \"string\") {\n      return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.connectedParticipantObserver)(room, identityOrIdentifier, {\n        additionalEvents: updateOnlyOn\n      });\n    } else {\n      return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantByIdentifierObserver)(room, identityOrIdentifier, {\n        additionalEvents: updateOnlyOn\n      });\n    }\n  }, [room, JSON.stringify(identityOrIdentifier), updateOnlyOn]);\n  const [participantWrapper, setParticipantWrapper] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    p: void 0\n  });\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const listener = observable.subscribe((p) => setParticipantWrapper({ p }));\n    return () => listener.unsubscribe();\n  }, [observable]);\n  return participantWrapper.p;\n}\n\n// src/hooks/useRoomInfo.ts\n\n\nfunction useRoomInfo(options = {}) {\n  const room = useEnsureRoom(options.room);\n  const infoObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.roomInfoObserver)(room), [room]);\n  const { name, metadata } = useObservableState(infoObserver, {\n    name: room.name,\n    metadata: room.metadata\n  });\n  return { name, metadata };\n}\n\n// src/hooks/useSortedParticipants.ts\n\n\n\n// src/hooks/useSpeakingParticipants.ts\n\n\nfunction useSpeakingParticipants() {\n  const room = useRoomContext();\n  const speakerObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.activeSpeakerObserver)(room), [room]);\n  const activeSpeakers = useObservableState(speakerObserver, room.activeSpeakers);\n  return activeSpeakers;\n}\n\n// src/hooks/useSortedParticipants.ts\nfunction useSortedParticipants(participants) {\n  const [sortedParticipants, setSortedParticipants] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.sortParticipants)(participants)\n  );\n  const activeSpeakers = useSpeakingParticipants();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setSortedParticipants((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.sortParticipants)(participants));\n  }, [activeSpeakers, participants]);\n  return sortedParticipants;\n}\n\n// src/hooks/useStartAudio.ts\n\n\nfunction useStartAudio({ room, props }) {\n  const roomEnsured = useEnsureRoom(room);\n  const { className, roomAudioPlaybackAllowedObservable: roomAudioPlaybackAllowedObservable2, handleStartAudioPlayback } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupStartAudio)(),\n    []\n  );\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => roomAudioPlaybackAllowedObservable2(roomEnsured),\n    [roomEnsured, roomAudioPlaybackAllowedObservable2]\n  );\n  const { canPlayAudio } = useObservableState(observable, {\n    canPlayAudio: roomEnsured.canPlaybackAudio\n  });\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps(props, {\n      className,\n      onClick: () => {\n        handleStartAudioPlayback(roomEnsured);\n      },\n      style: { display: canPlayAudio ? \"none\" : \"block\" }\n    }),\n    [props, className, canPlayAudio, handleStartAudioPlayback, roomEnsured]\n  );\n  return { mergedProps, canPlayAudio };\n}\n\n// src/hooks/useStartVideo.ts\n\n\nfunction useStartVideo({ room, props }) {\n  const roomEnsured = useEnsureRoom(room);\n  const { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupStartVideo)(),\n    []\n  );\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => roomVideoPlaybackAllowedObservable(roomEnsured),\n    [roomEnsured, roomVideoPlaybackAllowedObservable]\n  );\n  const { canPlayVideo } = useObservableState(observable, {\n    canPlayVideo: roomEnsured.canPlaybackVideo\n  });\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps(props, {\n      className,\n      onClick: () => {\n        handleStartVideoPlayback(roomEnsured);\n      },\n      style: { display: canPlayVideo ? \"none\" : \"block\" }\n    }),\n    [props, className, canPlayVideo, handleStartVideoPlayback, roomEnsured]\n  );\n  return { mergedProps, canPlayVideo };\n}\n\n// src/hooks/useSwipe.ts\n\nfunction useSwipe(element, options = {}) {\n  var _a;\n  const touchStart = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const touchEnd = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const minSwipeDistance = (_a = options.minSwipeDistance) != null ? _a : 50;\n  const onTouchStart = (event) => {\n    touchEnd.current = null;\n    touchStart.current = event.targetTouches[0].clientX;\n  };\n  const onTouchMove = (event) => {\n    touchEnd.current = event.targetTouches[0].clientX;\n  };\n  const onTouchEnd = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (!touchStart.current || !touchEnd.current) {\n      return;\n    }\n    const distance = touchStart.current - touchEnd.current;\n    const isLeftSwipe = distance > minSwipeDistance;\n    const isRightSwipe = distance < -minSwipeDistance;\n    if (isLeftSwipe && options.onLeftSwipe) options.onLeftSwipe();\n    if (isRightSwipe && options.onRightSwipe) options.onRightSwipe();\n  }, [minSwipeDistance, options]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const elementCopy = element.current;\n    if (elementCopy) {\n      elementCopy.addEventListener(\"touchstart\", onTouchStart, { passive: true });\n      elementCopy.addEventListener(\"touchmove\", onTouchMove, { passive: true });\n      elementCopy.addEventListener(\"touchend\", onTouchEnd, { passive: true });\n    }\n    return () => {\n      if (elementCopy) {\n        elementCopy.removeEventListener(\"touchstart\", onTouchStart);\n        elementCopy.removeEventListener(\"touchmove\", onTouchMove);\n        elementCopy.removeEventListener(\"touchend\", onTouchEnd);\n      }\n    };\n  }, [element, onTouchEnd]);\n}\n\n// src/hooks/useChatToggle.ts\n\n\nfunction useChatToggle({ props }) {\n  const { dispatch, state } = useLayoutContext().widget;\n  const { className } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupChatToggle)(), []);\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return mergeProps(props, {\n      className,\n      onClick: () => {\n        if (dispatch) dispatch({ msg: \"toggle_chat\" });\n      },\n      \"aria-pressed\": (state == null ? void 0 : state.showChat) ? \"true\" : \"false\",\n      \"data-lk-unread-msgs\": state ? state.unreadMessages < 10 ? state.unreadMessages.toFixed(0) : \"9+\" : \"0\"\n    });\n  }, [props, className, dispatch, state]);\n  return { mergedProps };\n}\n\n// src/hooks/useToken.ts\n\n\nfunction useToken(tokenEndpoint, roomName, options = {}) {\n  const [token, setToken] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a;\n    if (tokenEndpoint === void 0) {\n      throw Error(\"token endpoint needs to be defined\");\n    }\n    if (((_a = options.userInfo) == null ? void 0 : _a.identity) === void 0) {\n      return;\n    }\n    const tokenFetcher = () => __async(this, null, function* () {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"fetching token\");\n      const params = new URLSearchParams(__spreadProps(__spreadValues({}, options.userInfo), { roomName }));\n      const res = yield fetch(`${tokenEndpoint}?${params.toString()}`);\n      if (!res.ok) {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.error(\n          `Could not fetch token. Server responded with status ${res.status}: ${res.statusText}`\n        );\n        return;\n      }\n      const { accessToken } = yield res.json();\n      setToken(accessToken);\n    });\n    tokenFetcher();\n  }, [tokenEndpoint, roomName, JSON.stringify(options)]);\n  return token;\n}\n\n// src/hooks/useTrackMutedIndicator.ts\n\n\nfunction useTrackMutedIndicator(trackRef) {\n  var _a, _b;\n  const trackReference = useEnsureTrackRef(trackRef);\n  const { className, mediaMutedObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupTrackMutedIndicator)(trackReference),\n    [(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackReferenceId)(trackReference)]\n  );\n  const isMuted = useObservableState(\n    mediaMutedObserver,\n    !!(((_a = trackReference.publication) == null ? void 0 : _a.isMuted) || ((_b = trackReference.participant.getTrackPublication(trackReference.source)) == null ? void 0 : _b.isMuted))\n  );\n  return { isMuted, className };\n}\n\n// src/hooks/useTrackToggle.ts\n\n\nfunction useTrackToggle(_a) {\n  var _b = _a, {\n    source,\n    onChange,\n    initialState,\n    captureOptions,\n    publishOptions,\n    onDeviceError\n  } = _b, rest = __objRest(_b, [\n    \"source\",\n    \"onChange\",\n    \"initialState\",\n    \"captureOptions\",\n    \"publishOptions\",\n    \"onDeviceError\"\n  ]);\n  var _a2;\n  const room = useMaybeRoomContext();\n  const track = (_a2 = room == null ? void 0 : room.localParticipant) == null ? void 0 : _a2.getTrackPublication(source);\n  const userInteractionRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);\n  const { toggle, className, pendingObserver, enabledObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => room ? (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupMediaToggle)(source, room, captureOptions, publishOptions, onDeviceError) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupManualToggle)(),\n    [room, source, JSON.stringify(captureOptions), publishOptions]\n  );\n  const pending = useObservableState(pendingObserver, false);\n  const enabled = useObservableState(enabledObserver, initialState != null ? initialState : !!(track == null ? void 0 : track.isEnabled));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    onChange == null ? void 0 : onChange(enabled, userInteractionRef.current);\n    userInteractionRef.current = false;\n  }, [enabled, onChange]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (initialState !== void 0) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"forcing initial toggle state\", source, initialState);\n      toggle(initialState);\n    }\n  }, []);\n  const newProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => mergeProps(rest, { className }), [rest, className]);\n  const clickHandler = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (evt) => {\n      var _a3;\n      userInteractionRef.current = true;\n      toggle().catch(() => userInteractionRef.current = false);\n      (_a3 = rest.onClick) == null ? void 0 : _a3.call(rest, evt);\n    },\n    [rest, toggle]\n  );\n  return {\n    toggle,\n    enabled,\n    pending,\n    track,\n    buttonProps: __spreadProps(__spreadValues({}, newProps), {\n      \"aria-pressed\": enabled,\n      \"data-lk-source\": source,\n      \"data-lk-enabled\": enabled,\n      disabled: pending,\n      onClick: clickHandler\n    })\n  };\n}\n\n// src/hooks/useTracks.ts\n\n\n\nfunction useTracks(sources = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera,\n  livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone,\n  livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare,\n  livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShareAudio,\n  livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Unknown\n], options = {}) {\n  const room = useEnsureRoom(options.room);\n  const [trackReferences, setTrackReferences] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const [participants, setParticipants] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const sources_ = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return sources.map((s) => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isSourceWitOptions)(s) ? s.source : s);\n  }, [JSON.stringify(sources)]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const subscription = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.trackReferencesObservable)(room, sources_, {\n      additionalRoomEvents: options.updateOnlyOn,\n      onlySubscribed: options.onlySubscribed\n    }).subscribe(({ trackReferences: trackReferences2, participants: participants2 }) => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"setting track bundles\", trackReferences2, participants2);\n      setTrackReferences(trackReferences2);\n      setParticipants(participants2);\n    });\n    return () => subscription.unsubscribe();\n  }, [\n    room,\n    JSON.stringify(options.onlySubscribed),\n    JSON.stringify(options.updateOnlyOn),\n    JSON.stringify(sources)\n  ]);\n  const maybeTrackReferences = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isSourcesWithOptions)(sources)) {\n      const requirePlaceholder = requiredPlaceholders(sources, participants);\n      const trackReferencesWithPlaceholders = Array.from(trackReferences);\n      participants.forEach((participant) => {\n        var _a;\n        if (requirePlaceholder.has(participant.identity)) {\n          const sourcesToAddPlaceholder = (_a = requirePlaceholder.get(participant.identity)) != null ? _a : [];\n          sourcesToAddPlaceholder.forEach((placeholderSource) => {\n            if (trackReferences.find(\n              ({ participant: p, publication }) => participant.identity === p.identity && publication.source === placeholderSource\n            )) {\n              return;\n            }\n            _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\n              `Add ${placeholderSource} placeholder for participant ${participant.identity}.`\n            );\n            const placeholder = {\n              participant,\n              source: placeholderSource\n            };\n            trackReferencesWithPlaceholders.push(placeholder);\n          });\n        }\n      });\n      return trackReferencesWithPlaceholders;\n    } else {\n      return trackReferences;\n    }\n  }, [trackReferences, participants, sources]);\n  return maybeTrackReferences;\n}\nfunction difference(setA, setB) {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\nfunction requiredPlaceholders(sources, participants) {\n  const placeholderMap = /* @__PURE__ */ new Map();\n  if ((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isSourcesWithOptions)(sources)) {\n    const sourcesThatNeedPlaceholder = sources.filter((sourceWithOption) => sourceWithOption.withPlaceholder).map((sourceWithOption) => sourceWithOption.source);\n    participants.forEach((participant) => {\n      const sourcesOfSubscribedTracks = participant.getTrackPublications().map((pub) => {\n        var _a;\n        return (_a = pub.track) == null ? void 0 : _a.source;\n      }).filter((trackSource) => trackSource !== void 0);\n      const placeholderNeededForThisParticipant = Array.from(\n        difference(new Set(sourcesThatNeedPlaceholder), new Set(sourcesOfSubscribedTracks))\n      );\n      if (placeholderNeededForThisParticipant.length > 0) {\n        placeholderMap.set(participant.identity, placeholderNeededForThisParticipant);\n      }\n    });\n  }\n  return placeholderMap;\n}\n\n// src/hooks/useTrackRefBySourceOrName.ts\n\n\n\nfunction useTrackRefBySourceOrName(source) {\n  var _a, _b;\n  const [publication, setPublication] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackByIdentifier)(source));\n  const { trackObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupMediaTrack)(source);\n  }, [(_a = source.participant.sid) != null ? _a : source.participant.identity, source.source]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const subscription = trackObserver.subscribe((publication2) => {\n      setPublication(publication2);\n    });\n    return () => subscription == null ? void 0 : subscription.unsubscribe();\n  }, [trackObserver]);\n  return {\n    participant: source.participant,\n    source: (_b = source.source) != null ? _b : livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Unknown,\n    publication\n  };\n}\n\n// src/hooks/useTrackByName.ts\nfunction useTrackByName(name, participant) {\n  const p = useEnsureParticipant(participant);\n  return useTrackRefBySourceOrName({ name, participant: p });\n}\n\n// src/hooks/useChat.ts\n\n\n\nfunction useChat(options) {\n  const room = useRoomContext();\n  const connectionState = useConnectionState(room);\n  const isDisconnected = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => connectionState === livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Disconnected,\n    [connectionState]\n  );\n  const setup = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupChat)(room, options),\n    [room, options, isDisconnected]\n  );\n  const isSending = useObservableState(setup.isSendingObservable, false);\n  const chatMessages = useObservableState(setup.messageObservable, []);\n  return { send: setup.send, update: setup.update, chatMessages, isSending };\n}\n\n// src/hooks/usePersistentUserChoices.ts\n\n\nfunction usePersistentUserChoices(options = {}) {\n  var _a;\n  const [userChoices, setSettings] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.loadUserChoices)(options.defaults, (_a = options.preventLoad) != null ? _a : false)\n  );\n  const saveAudioInputEnabled = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((isEnabled) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { audioEnabled: isEnabled }));\n  }, []);\n  const saveVideoInputEnabled = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((isEnabled) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { videoEnabled: isEnabled }));\n  }, []);\n  const saveAudioInputDeviceId = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((deviceId) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { audioDeviceId: deviceId }));\n  }, []);\n  const saveVideoInputDeviceId = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((deviceId) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { videoDeviceId: deviceId }));\n  }, []);\n  const saveUsername = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((username) => {\n    setSettings((prev) => __spreadProps(__spreadValues({}, prev), { username }));\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2;\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.saveUserChoices)(userChoices, (_a2 = options.preventSave) != null ? _a2 : false);\n  }, [userChoices, options.preventSave]);\n  return {\n    userChoices,\n    saveAudioInputEnabled,\n    saveVideoInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputDeviceId,\n    saveUsername\n  };\n}\n\n// src/hooks/useIsEncrypted.ts\n\n\n\nfunction useIsEncrypted(participant, options = {}) {\n  const p = useEnsureParticipant(participant);\n  const room = useEnsureRoom(options.room);\n  const observer = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.encryptionStatusObservable)(room, p), [room, p]);\n  const isEncrypted = useObservableState(\n    observer,\n    p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.LocalParticipant ? p.isE2EEEnabled : !!(p == null ? void 0 : p.isEncrypted)\n  );\n  return isEncrypted;\n}\n\n// src/hooks/useTrackVolume.ts\n\n\n\nfunction useTrackVolume(trackOrTrackReference, options = { fftSize: 32, smoothingTimeConstant: 0 }) {\n  const track = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(trackOrTrackReference) ? trackOrTrackReference.publication.track : trackOrTrackReference;\n  const [volume, setVolume] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!track || !track.mediaStream) {\n      return;\n    }\n    const { cleanup, analyser } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.createAudioAnalyser)(track, options);\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    const updateVolume = () => {\n      analyser.getByteFrequencyData(dataArray);\n      let sum = 0;\n      for (let i = 0; i < dataArray.length; i++) {\n        const a = dataArray[i];\n        sum += a * a;\n      }\n      setVolume(Math.sqrt(sum / dataArray.length) / 255);\n    };\n    const interval = setInterval(updateVolume, 1e3 / 30);\n    return () => {\n      cleanup();\n      clearInterval(interval);\n    };\n  }, [track, track == null ? void 0 : track.mediaStream, JSON.stringify(options)]);\n  return volume;\n}\nvar normalizeFrequencies = (frequencies) => {\n  const normalizeDb = (value) => {\n    const minDb = -100;\n    const maxDb = -10;\n    let db = 1 - Math.max(minDb, Math.min(maxDb, value)) * -1 / 100;\n    db = Math.sqrt(db);\n    return db;\n  };\n  return frequencies.map((value) => {\n    if (value === -Infinity) {\n      return 0;\n    }\n    return normalizeDb(value);\n  });\n};\nvar multibandDefaults = {\n  bands: 5,\n  loPass: 100,\n  hiPass: 600,\n  updateInterval: 32,\n  analyserOptions: { fftSize: 2048 }\n};\nfunction useMultibandTrackVolume(trackOrTrackReference, options = {}) {\n  var _a;\n  const track = trackOrTrackReference instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track ? trackOrTrackReference : (_a = trackOrTrackReference == null ? void 0 : trackOrTrackReference.publication) == null ? void 0 : _a.track;\n  const opts = __spreadValues(__spreadValues({}, multibandDefaults), options);\n  const [frequencyBands, setFrequencyBands] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    new Array(opts.bands).fill(0)\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!track || !(track == null ? void 0 : track.mediaStream)) {\n      return;\n    }\n    const { analyser, cleanup } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.createAudioAnalyser)(track, opts.analyserOptions);\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Float32Array(bufferLength);\n    const updateVolume = () => {\n      analyser.getFloatFrequencyData(dataArray);\n      let frequencies = new Float32Array(dataArray.length);\n      for (let i = 0; i < dataArray.length; i++) {\n        frequencies[i] = dataArray[i];\n      }\n      frequencies = frequencies.slice(options.loPass, options.hiPass);\n      const normalizedFrequencies = normalizeFrequencies(frequencies);\n      const chunkSize = Math.ceil(normalizedFrequencies.length / opts.bands);\n      const chunks = [];\n      for (let i = 0; i < opts.bands; i++) {\n        const summedVolumes = normalizedFrequencies.slice(i * chunkSize, (i + 1) * chunkSize).reduce((acc, val) => acc += val, 0);\n        chunks.push(summedVolumes / chunkSize);\n      }\n      setFrequencyBands(chunks);\n    };\n    const interval = setInterval(updateVolume, opts.updateInterval);\n    return () => {\n      cleanup();\n      clearInterval(interval);\n    };\n  }, [track, track == null ? void 0 : track.mediaStream, JSON.stringify(options)]);\n  return frequencyBands;\n}\nvar waveformDefaults = {\n  barCount: 120,\n  volMultiplier: 5,\n  updateInterval: 20\n};\nfunction useAudioWaveform(trackOrTrackReference, options = {}) {\n  var _a;\n  const track = trackOrTrackReference instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track ? trackOrTrackReference : (_a = trackOrTrackReference == null ? void 0 : trackOrTrackReference.publication) == null ? void 0 : _a.track;\n  const opts = __spreadValues(__spreadValues({}, waveformDefaults), options);\n  const aggregateWave = react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Float32Array());\n  const timeRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(performance.now());\n  const updates = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n  const [bars, setBars] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const onUpdate = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((wave) => {\n    setBars(\n      Array.from(\n        filterData(wave, opts.barCount).map((v) => Math.sqrt(v) * opts.volMultiplier)\n        // wave.slice(0, opts.barCount).map((v) => sigmoid(v * opts.volMultiplier, 0.08, 0.2)),\n      )\n    );\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!track || !(track == null ? void 0 : track.mediaStream)) {\n      return;\n    }\n    const { analyser, cleanup } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.createAudioAnalyser)(track, {\n      fftSize: getFFTSizeValue(opts.barCount)\n    });\n    const bufferLength = getFFTSizeValue(opts.barCount);\n    const dataArray = new Float32Array(bufferLength);\n    const update = () => {\n      updateWaveform = requestAnimationFrame(update);\n      analyser.getFloatTimeDomainData(dataArray);\n      aggregateWave.current.map((v, i) => v + dataArray[i]);\n      updates.current += 1;\n      if (performance.now() - timeRef.current >= opts.updateInterval) {\n        const newData = dataArray.map((v) => v / updates.current);\n        onUpdate(newData);\n        timeRef.current = performance.now();\n        updates.current = 0;\n      }\n    };\n    let updateWaveform = requestAnimationFrame(update);\n    return () => {\n      cleanup();\n      cancelAnimationFrame(updateWaveform);\n    };\n  }, [track, track == null ? void 0 : track.mediaStream, JSON.stringify(options), onUpdate]);\n  return {\n    bars\n  };\n}\nfunction getFFTSizeValue(x) {\n  if (x < 32) return 32;\n  else return pow2ceil(x);\n}\nfunction pow2ceil(v) {\n  let p = 2;\n  while (v >>= 1) {\n    p <<= 1;\n  }\n  return p;\n}\nfunction filterData(audioData, numSamples) {\n  const blockSize = Math.floor(audioData.length / numSamples);\n  const filteredData = new Float32Array(numSamples);\n  for (let i = 0; i < numSamples; i++) {\n    const blockStart = blockSize * i;\n    let sum = 0;\n    for (let j = 0; j < blockSize; j++) {\n      sum = sum + Math.abs(audioData[blockStart + j]);\n    }\n    filteredData[i] = sum / blockSize;\n  }\n  return filteredData;\n}\n\n// src/hooks/useParticipantTracks.ts\n\n\nfunction useParticipantTracks(sources, participantIdentity) {\n  const room = useRoomContext();\n  const participantContext = useMaybeParticipantContext();\n  const p = participantIdentity ? room.getParticipantByIdentity(participantIdentity) : participantContext;\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => p ? (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantTracksObservable)(p, { sources }) : void 0,\n    [p == null ? void 0 : p.sid, p == null ? void 0 : p.identity, JSON.stringify(sources)]\n  );\n  const trackRefs = useObservableState(observable, []);\n  return trackRefs;\n}\n\n// src/hooks/useTrackTranscription.ts\n\n\n\n// src/hooks/useTrackSyncTime.ts\n\n\nfunction useTrackSyncTime(ref) {\n  var _a, _b, _c;\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => {\n      var _a2;\n      return ((_a2 = ref == null ? void 0 : ref.publication) == null ? void 0 : _a2.track) ? (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.trackSyncTimeObserver)(ref == null ? void 0 : ref.publication.track) : void 0;\n    },\n    [(_a = ref == null ? void 0 : ref.publication) == null ? void 0 : _a.track]\n  );\n  return useObservableState(observable, {\n    timestamp: Date.now(),\n    rtpTimestamp: (_c = (_b = ref == null ? void 0 : ref.publication) == null ? void 0 : _b.track) == null ? void 0 : _c.rtpTimestamp\n  });\n}\n\n// src/hooks/useTrackTranscription.ts\nvar TRACK_TRANSCRIPTION_DEFAULTS = {\n  bufferSize: 100\n  // maxAge: 2_000,\n};\nfunction useTrackTranscription(trackRef, options) {\n  const opts = __spreadValues(__spreadValues({}, TRACK_TRANSCRIPTION_DEFAULTS), options);\n  const [segments, setSegments] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const syncTimestamps = useTrackSyncTime(trackRef);\n  const handleSegmentMessage = (newSegments) => {\n    var _a;\n    (_a = opts.onTranscription) == null ? void 0 : _a.call(opts, newSegments);\n    setSegments(\n      (prevSegments) => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.dedupeSegments)(\n        prevSegments,\n        // when first receiving a segment, add the current media timestamp to it\n        newSegments.map((s) => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.addMediaTimestampToTranscription)(s, syncTimestamps)),\n        opts.bufferSize\n      )\n    );\n  };\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!(trackRef == null ? void 0 : trackRef.publication)) {\n      return;\n    }\n    const subscription = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.trackTranscriptionObserver)(trackRef.publication).subscribe((evt) => {\n      handleSegmentMessage(...evt);\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [trackRef && (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackReferenceId)(trackRef), handleSegmentMessage]);\n  return { segments };\n}\n\n// src/hooks/useVoiceAssistant.ts\n\n\n\n// src/hooks/useParticipantAttributes.ts\n\n\nfunction useParticipantAttributes(props = {}) {\n  var _a;\n  const participantContext = useMaybeParticipantContext();\n  const p = (_a = props.participant) != null ? _a : participantContext;\n  const attributeObserver = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    // weird typescript constraint\n    () => p ? (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantAttributesObserver)(p) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantAttributesObserver)(p),\n    [p]\n  );\n  const attributeState = useObservableState(attributeObserver, {\n    attributes: p == null ? void 0 : p.attributes\n  });\n  return attributeState;\n}\nfunction useParticipantAttribute(attributeKey, options = {}) {\n  const p = useEnsureParticipant(options.participant);\n  const [attribute, setAttribute] = react__WEBPACK_IMPORTED_MODULE_0__.useState(p.attributes[attributeKey]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!p) {\n      return;\n    }\n    const subscription = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.participantAttributesObserver)(p).subscribe((val) => {\n      if (val.changed[attributeKey] !== void 0) {\n        setAttribute(val.changed[attributeKey]);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [p, attributeKey]);\n  return attribute;\n}\n\n// src/hooks/useVoiceAssistant.ts\nvar state_attribute = \"voice_assistant.state\";\nfunction useVoiceAssistant() {\n  const agent = useRemoteParticipants().find((p) => p.kind === livekit_client__WEBPACK_IMPORTED_MODULE_3__.ParticipantKind.AGENT);\n  const audioTrack = useParticipantTracks([livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone], agent == null ? void 0 : agent.identity)[0];\n  const { segments: agentTranscriptions } = useTrackTranscription(audioTrack);\n  const connectionState = useConnectionState();\n  const { attributes } = useParticipantAttributes({ participant: agent });\n  const state = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (connectionState === livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Disconnected) {\n      return \"disconnected\";\n    } else if (connectionState === livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Connecting || !agent || !(attributes == null ? void 0 : attributes[state_attribute])) {\n      return \"connecting\";\n    } else {\n      return attributes[state_attribute];\n    }\n  }, [attributes, agent, connectionState]);\n  return {\n    agent,\n    state,\n    audioTrack,\n    agentTranscriptions,\n    agentAttributes: attributes\n  };\n}\n\n// src/hooks/useIsRecording.ts\n\n\nfunction useIsRecording(room) {\n  const r = useEnsureRoom(room);\n  const connectionState = useConnectionState(r);\n  const observable = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.recordingStatusObservable)(r), [r, connectionState]);\n  const isRecording = useObservableState(observable, r.isRecording);\n  return isRecording;\n}\n\n// src/components/controls/ClearPinButton.tsx\nvar ClearPinButton = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ClearPinButton2(props, ref) {\n    const { buttonProps } = useClearPinButton(props);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, buttonProps), props.children);\n  }\n);\n\n// src/components/ConnectionState.tsx\n\nvar ConnectionState5 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ConnectionState6(_a, ref) {\n    var _b = _a, { room } = _b, props = __objRest(_b, [\"room\"]);\n    const connectionState = useConnectionState(room);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref }, props), connectionState);\n  }\n);\n\n// src/components/controls/ChatToggle.tsx\n\nvar ChatToggle = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ChatToggle2(props, ref) {\n    const { mergedProps } = useChatToggle({ props });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, mergedProps), props.children);\n  }\n);\n\n// src/components/controls/DisconnectButton.tsx\n\nvar DisconnectButton = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function DisconnectButton2(props, ref) {\n    const { buttonProps } = useDisconnectButton(props);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, buttonProps), props.children);\n  }\n);\n\n// src/components/controls/FocusToggle.tsx\n\n\n// src/assets/icons/CameraDisabledIcon.tsx\n\nvar SvgCameraDisabledIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" }));\nvar CameraDisabledIcon_default = SvgCameraDisabledIcon;\n\n// src/assets/icons/CameraIcon.tsx\n\nvar SvgCameraIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" }));\nvar CameraIcon_default = SvgCameraIcon;\n\n// src/assets/icons/ChatCloseIcon.tsx\n\nvar SvgChatCloseIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, viewBox: \"0 0 24 24\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"#FFF\",\n    d: \"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z\"\n  }\n));\nvar ChatCloseIcon_default = SvgChatCloseIcon;\n\n// src/assets/icons/ChatIcon.tsx\n\nvar SvgChatIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 18, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar ChatIcon_default = SvgChatIcon;\n\n// src/assets/icons/Chevron.tsx\n\nvar SvgChevron = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar Chevron_default = SvgChevron;\n\n// src/assets/icons/FocusToggleIcon.tsx\n\nvar SvgFocusToggleIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" })));\nvar FocusToggleIcon_default = SvgFocusToggleIcon;\n\n// src/assets/icons/GearIcon.tsx\n\nvar SvgGearIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar GearIcon_default = SvgGearIcon;\n\n// src/assets/icons/LeaveIcon.tsx\n\nvar SvgLeaveIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar LeaveIcon_default = SvgLeaveIcon;\n\n// src/assets/icons/LockLockedIcon.tsx\n\nvar SvgLockLockedIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar LockLockedIcon_default = SvgLockLockedIcon;\n\n// src/assets/icons/MicDisabledIcon.tsx\n\nvar SvgMicDisabledIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z\" }));\nvar MicDisabledIcon_default = SvgMicDisabledIcon;\n\n// src/assets/icons/MicIcon.tsx\n\nvar SvgMicIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z\" }));\nvar MicIcon_default = SvgMicIcon;\n\n// src/assets/icons/QualityExcellentIcon.tsx\n\nvar SvgQualityExcellentIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }));\nvar QualityExcellentIcon_default = SvgQualityExcellentIcon;\n\n// src/assets/icons/QualityGoodIcon.tsx\n\nvar SvgQualityGoodIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })));\nvar QualityGoodIcon_default = SvgQualityGoodIcon;\n\n// src/assets/icons/QualityPoorIcon.tsx\n\nvar SvgQualityPoorIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })));\nvar QualityPoorIcon_default = SvgQualityPoorIcon;\n\n// src/assets/icons/QualityUnknownIcon.tsx\n\nvar SvgQualityUnknownIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" })));\nvar QualityUnknownIcon_default = SvgQualityUnknownIcon;\n\n// src/assets/icons/ScreenShareIcon.tsx\n\nvar SvgScreenShareIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\",\n    clipRule: \"evenodd\"\n  }\n));\nvar ScreenShareIcon_default = SvgScreenShareIcon;\n\n// src/assets/icons/ScreenShareStopIcon.tsx\n\nvar SvgScreenShareStopIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { fill: \"currentColor\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\",\n    clipRule: \"evenodd\"\n  }\n)));\nvar ScreenShareStopIcon_default = SvgScreenShareStopIcon;\n\n// src/assets/icons/SpinnerIcon.tsx\n\nvar SvgSpinnerIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.7\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.6\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.5\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.4\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.9\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.3\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.8\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.2\n  }\n));\nvar SpinnerIcon_default = SvgSpinnerIcon;\n\n// src/assets/icons/UnfocusToggleIcon.tsx\n\nvar SvgUnfocusToggleIcon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" })));\nvar UnfocusToggleIcon_default = SvgUnfocusToggleIcon;\n\n// src/components/controls/FocusToggle.tsx\nvar FocusToggle = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function FocusToggle2(_a, ref) {\n    var _b = _a, { trackRef } = _b, props = __objRest(_b, [\"trackRef\"]);\n    const trackRefFromContext = useMaybeTrackRefContext();\n    const { mergedProps, inFocus } = useFocusToggle({\n      trackRef: trackRef != null ? trackRef : trackRefFromContext,\n      props\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LayoutContext.Consumer, null, (layoutContext) => layoutContext !== void 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, mergedProps), props.children ? props.children : inFocus ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(UnfocusToggleIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusToggleIcon_default, null)));\n  }\n);\n\n// src/components/controls/MediaDeviceSelect.tsx\n\n\n// src/utils.ts\n\n\nfunction isProp(prop) {\n  return prop !== void 0;\n}\nfunction mergeProps2(...props) {\n  return mergeProps(...props.filter(isProp));\n}\nfunction cloneSingleChild(children, props, key) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.Children.map(children, (child) => {\n    if (react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(child) && react__WEBPACK_IMPORTED_MODULE_0__.Children.only(children)) {\n      return react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(child, __spreadProps(__spreadValues({}, props), { key }));\n    }\n    return child;\n  });\n}\nfunction warnAboutMissingStyles(el) {\n  var _a, _b;\n  if (typeof window !== \"undefined\" && typeof process !== \"undefined\" && // eslint-disable-next-line turbo/no-undeclared-env-vars\n  (((_a = process == null ? void 0 : process.env) == null ? void 0 : _a.NODE_ENV) === \"dev\" || // eslint-disable-next-line turbo/no-undeclared-env-vars\n  ((_b = process == null ? void 0 : process.env) == null ? void 0 : _b.NODE_ENV) === \"development\")) {\n    const target = el != null ? el : document.querySelector(\".lk-room-container\");\n    if (target && !getComputedStyle(target).getPropertyValue(\"--lk-has-imported-styles\")) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(\n        \"It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.\"\n      );\n    }\n  }\n}\n\n// src/components/controls/MediaDeviceSelect.tsx\n\nvar MediaDeviceSelect = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function MediaDeviceSelect2(_a, ref) {\n    var _b = _a, {\n      kind,\n      initialSelection,\n      onActiveDeviceChange,\n      onDeviceListChange,\n      onDeviceSelectError,\n      exactMatch,\n      track,\n      requestPermissions,\n      onError\n    } = _b, props = __objRest(_b, [\n      \"kind\",\n      \"initialSelection\",\n      \"onActiveDeviceChange\",\n      \"onDeviceListChange\",\n      \"onDeviceSelectError\",\n      \"exactMatch\",\n      \"track\",\n      \"requestPermissions\",\n      \"onError\"\n    ]);\n    const room = useMaybeRoomContext();\n    const handleError = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (e) => {\n        if (room) {\n          room.emit(livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.MediaDevicesError, e);\n        }\n        onError == null ? void 0 : onError(e);\n      },\n      [room, onError]\n    );\n    const { devices, activeDeviceId, setActiveMediaDevice, className } = useMediaDeviceSelect({\n      kind,\n      room,\n      track,\n      requestPermissions,\n      onError: handleError\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (initialSelection !== void 0) {\n        setActiveMediaDevice(initialSelection);\n      }\n    }, [setActiveMediaDevice]);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (typeof onDeviceListChange === \"function\") {\n        onDeviceListChange(devices);\n      }\n    }, [onDeviceListChange, devices]);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (activeDeviceId && activeDeviceId !== \"\") {\n        onActiveDeviceChange == null ? void 0 : onActiveDeviceChange(activeDeviceId);\n      }\n    }, [activeDeviceId]);\n    const handleActiveDeviceChange = (deviceId) => __async(this, null, function* () {\n      try {\n        yield setActiveMediaDevice(deviceId, { exact: exactMatch });\n      } catch (e) {\n        if (e instanceof Error) {\n          onDeviceSelectError == null ? void 0 : onDeviceSelectError(e);\n        } else {\n          throw e;\n        }\n      }\n    });\n    const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => mergeProps2(props, { className }, { className: \"lk-list\" }),\n      [className, props]\n    );\n    function isActive(deviceId, activeDeviceId2, index) {\n      return deviceId === activeDeviceId2 || index === 0 && activeDeviceId2 === \"default\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", __spreadValues({ ref }, mergedProps), devices.map((device, index) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        key: device.deviceId,\n        id: device.deviceId,\n        \"data-lk-active\": isActive(device.deviceId, activeDeviceId, index),\n        \"aria-selected\": isActive(device.deviceId, activeDeviceId, index),\n        role: \"option\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: () => handleActiveDeviceChange(device.deviceId) }, device.label)\n    )));\n  }\n);\n\n// src/components/controls/StartAudio.tsx\n\nvar StartAudio = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function StartAudio2(_a, ref) {\n    var _b = _a, { label = \"Allow Audio\" } = _b, props = __objRest(_b, [\"label\"]);\n    const room = useRoomContext();\n    const { mergedProps } = useStartAudio({ room, props });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, mergedProps), label);\n  }\n);\n\n// src/components/controls/TrackToggle.tsx\n\n\n// src/assets/icons/util.tsx\n\n\nfunction getSourceIcon(source, enabled) {\n  switch (source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone:\n      return enabled ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(MicIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(MicDisabledIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera:\n      return enabled ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CameraIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CameraDisabledIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare:\n      return enabled ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScreenShareStopIcon_default, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScreenShareIcon_default, null);\n    default:\n      return void 0;\n  }\n}\nfunction getConnectionQualityIcon(quality) {\n  switch (quality) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionQuality.Excellent:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityExcellentIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionQuality.Good:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityGoodIcon_default, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionQuality.Poor:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityPoorIcon_default, null);\n    default:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(QualityUnknownIcon_default, null);\n  }\n}\n\n// src/components/controls/TrackToggle.tsx\nvar TrackToggle = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function TrackToggle2(_a, ref) {\n  var _b = _a, { showIcon } = _b, props = __objRest(_b, [\"showIcon\"]);\n  const { buttonProps, enabled } = useTrackToggle(props);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, buttonProps), (showIcon != null ? showIcon : true) && getSourceIcon(props.source, enabled), props.children);\n});\n\n// src/components/layout/FocusLayout.tsx\n\n\n// src/components/participant/ParticipantTile.tsx\n\n\n\n\n// src/components/participant/ConnectionQualityIndicator.tsx\n\nvar ConnectionQualityIndicator = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function ConnectionQualityIndicator2(props, ref) {\n  var _a;\n  const { className, quality } = useConnectionQualityIndicator(props);\n  const elementProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return __spreadProps(__spreadValues({}, mergeProps2(props, { className })), { \"data-lk-quality\": quality });\n  }, [quality, props, className]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref }, elementProps), (_a = props.children) != null ? _a : getConnectionQualityIcon(quality));\n});\n\n// src/components/participant/ParticipantName.tsx\n\n\nvar ParticipantName = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ParticipantName2(_a, ref) {\n    var _b = _a, { participant } = _b, props = __objRest(_b, [\"participant\"]);\n    const p = useEnsureParticipant(participant);\n    const { className, infoObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n      return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupParticipantName)(p);\n    }, [p]);\n    const { identity, name } = useObservableState(infoObserver, {\n      name: p.name,\n      identity: p.identity,\n      metadata: p.metadata\n    });\n    const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n      return mergeProps2(props, { className, \"data-lk-participant-name\": name });\n    }, [props, className, name]);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({ ref }, mergedProps), name !== \"\" ? name : identity, props.children);\n  }\n);\n\n// src/components/participant/TrackMutedIndicator.tsx\n\nvar TrackMutedIndicator = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function TrackMutedIndicator2(_a, ref) {\n    var _b = _a, { trackRef, show = \"always\" } = _b, props = __objRest(_b, [\"trackRef\", \"show\"]);\n    var _a2;\n    const { className, isMuted } = useTrackMutedIndicator(trackRef);\n    const showIndicator = show === \"always\" || show === \"muted\" && isMuted || show === \"unmuted\" && !isMuted;\n    const htmlProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => mergeProps2(props, {\n        className\n      }),\n      [className, props]\n    );\n    if (!showIndicator) {\n      return null;\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadProps(__spreadValues({ ref }, htmlProps), { \"data-lk-muted\": isMuted }), (_a2 = props.children) != null ? _a2 : getSourceIcon(trackRef.source, !isMuted));\n  }\n);\n\n// src/assets/images/ParticipantPlaceholder.tsx\n\nvar SvgParticipantPlaceholder = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"svg\",\n  __spreadValues({\n    width: 320,\n    height: 320,\n    viewBox: \"0 0 320 320\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  ),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  )\n);\nvar ParticipantPlaceholder_default = SvgParticipantPlaceholder;\n\n// src/components/participant/VideoTrack.tsx\n\n\n\n// src/hooks/useMediaTrackBySourceOrName.ts\n\n\n\nfunction useMediaTrackBySourceOrName(observerOptions, options = {}) {\n  var _a;\n  const [publication, setPublication] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackByIdentifier)(observerOptions));\n  const [isMuted, setMuted] = react__WEBPACK_IMPORTED_MODULE_0__.useState(publication == null ? void 0 : publication.isMuted);\n  const [isSubscribed, setSubscribed] = react__WEBPACK_IMPORTED_MODULE_0__.useState(publication == null ? void 0 : publication.isSubscribed);\n  const [track, setTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(publication == null ? void 0 : publication.track);\n  const [orientation, setOrientation] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"landscape\");\n  const previousElement = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n  const { className, trackObserver } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.setupMediaTrack)(observerOptions);\n  }, [\n    (_a = observerOptions.participant.sid) != null ? _a : observerOptions.participant.identity,\n    observerOptions.source,\n    (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(observerOptions) && observerOptions.publication.trackSid\n  ]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const subscription = trackObserver.subscribe((publication2) => {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"update track\", publication2);\n      setPublication(publication2);\n      setMuted(publication2 == null ? void 0 : publication2.isMuted);\n      setSubscribed(publication2 == null ? void 0 : publication2.isSubscribed);\n      setTrack(publication2 == null ? void 0 : publication2.track);\n    });\n    return () => subscription == null ? void 0 : subscription.unsubscribe();\n  }, [trackObserver]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2, _b;\n    if (track) {\n      if (previousElement.current) {\n        track.detach(previousElement.current);\n      }\n      if (((_a2 = options.element) == null ? void 0 : _a2.current) && !((0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isLocal)(observerOptions.participant) && (track == null ? void 0 : track.kind) === \"audio\")) {\n        track.attach(options.element.current);\n      }\n    }\n    previousElement.current = (_b = options.element) == null ? void 0 : _b.current;\n    return () => {\n      if (previousElement.current) {\n        track == null ? void 0 : track.detach(previousElement.current);\n      }\n    };\n  }, [track, options.element]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2, _b;\n    if (typeof ((_a2 = publication == null ? void 0 : publication.dimensions) == null ? void 0 : _a2.width) === \"number\" && typeof ((_b = publication == null ? void 0 : publication.dimensions) == null ? void 0 : _b.height) === \"number\") {\n      const orientation_ = publication.dimensions.width > publication.dimensions.height ? \"landscape\" : \"portrait\";\n      setOrientation(orientation_);\n    }\n  }, [publication]);\n  return {\n    publication,\n    isMuted,\n    isSubscribed,\n    track,\n    elementProps: mergeProps2(options.props, __spreadValues({\n      className,\n      \"data-lk-local-participant\": observerOptions.participant.isLocal,\n      \"data-lk-source\": publication == null ? void 0 : publication.source\n    }, (publication == null ? void 0 : publication.kind) === \"video\" && { \"data-lk-orientation\": orientation }))\n  };\n}\n\n// src/components/participant/VideoTrack.tsx\n\nvar VideoTrack = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function VideoTrack2(_a, ref) {\n    var _b = _a, {\n      onTrackClick,\n      onClick,\n      onSubscriptionStatusChanged,\n      trackRef,\n      manageSubscription\n    } = _b, props = __objRest(_b, [\n      \"onTrackClick\",\n      \"onClick\",\n      \"onSubscriptionStatusChanged\",\n      \"trackRef\",\n      \"manageSubscription\"\n    ]);\n    const trackReference = useEnsureTrackRef(trackRef);\n    const mediaEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(ref, () => mediaEl.current);\n    const intersectionEntry = usehooks_ts__WEBPACK_IMPORTED_MODULE_4__.useIntersectionObserver({ root: mediaEl.current });\n    const [debouncedIntersectionEntry] = usehooks_ts__WEBPACK_IMPORTED_MODULE_4__.useDebounceValue(intersectionEntry, 3e3);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (manageSubscription && trackReference.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.RemoteTrackPublication && (debouncedIntersectionEntry == null ? void 0 : debouncedIntersectionEntry.isIntersecting) === false && (intersectionEntry == null ? void 0 : intersectionEntry.isIntersecting) === false) {\n        trackReference.publication.setSubscribed(false);\n      }\n    }, [debouncedIntersectionEntry, trackReference, manageSubscription]);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (manageSubscription && trackReference.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.RemoteTrackPublication && (intersectionEntry == null ? void 0 : intersectionEntry.isIntersecting) === true) {\n        trackReference.publication.setSubscribed(true);\n      }\n    }, [intersectionEntry, trackReference, manageSubscription]);\n    const {\n      elementProps,\n      publication: pub,\n      isSubscribed\n    } = useMediaTrackBySourceOrName(trackReference, {\n      element: mediaEl,\n      props\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      onSubscriptionStatusChanged == null ? void 0 : onSubscriptionStatusChanged(!!isSubscribed);\n    }, [isSubscribed, onSubscriptionStatusChanged]);\n    const clickHandler = (evt) => {\n      onClick == null ? void 0 : onClick(evt);\n      onTrackClick == null ? void 0 : onTrackClick({ participant: trackReference == null ? void 0 : trackReference.participant, track: pub });\n    };\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", __spreadProps(__spreadValues({ ref: mediaEl }, elementProps), { muted: true, onClick: clickHandler }));\n  }\n);\n\n// src/components/participant/AudioTrack.tsx\n\n\n\nvar AudioTrack = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function AudioTrack2(_a, ref) {\n    var _b = _a, { trackRef, onSubscriptionStatusChanged, volume, muted } = _b, props = __objRest(_b, [\"trackRef\", \"onSubscriptionStatusChanged\", \"volume\", \"muted\"]);\n    const trackReference = useEnsureTrackRef(trackRef);\n    const mediaEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(ref, () => mediaEl.current);\n    const {\n      elementProps,\n      isSubscribed,\n      track,\n      publication: pub\n    } = useMediaTrackBySourceOrName(trackReference, {\n      element: mediaEl,\n      props\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      onSubscriptionStatusChanged == null ? void 0 : onSubscriptionStatusChanged(!!isSubscribed);\n    }, [isSubscribed, onSubscriptionStatusChanged]);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (track === void 0 || volume === void 0) {\n        return;\n      }\n      if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.RemoteAudioTrack) {\n        track.setVolume(volume);\n      } else {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(\"Volume can only be set on remote audio tracks.\");\n      }\n    }, [volume, track]);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      if (pub === void 0 || muted === void 0) {\n        return;\n      }\n      if (pub instanceof livekit_client__WEBPACK_IMPORTED_MODULE_3__.RemoteTrackPublication) {\n        pub.setEnabled(!muted);\n      } else {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(\"Can only call setEnabled on remote track publications.\");\n      }\n    }, [muted, pub, track]);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"audio\", __spreadValues({ ref: mediaEl }, elementProps));\n  }\n);\n\n// src/components/participant/ParticipantTile.tsx\nfunction ParticipantContextIfNeeded(props) {\n  const hasContext = !!useMaybeParticipantContext();\n  return props.participant && !hasContext ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContext.Provider, { value: props.participant }, props.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, props.children);\n}\nfunction TrackRefContextIfNeeded(props) {\n  const hasContext = !!useMaybeTrackRefContext();\n  return props.trackRef && !hasContext ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackRefContext.Provider, { value: props.trackRef }, props.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, props.children);\n}\nvar ParticipantTile = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ParticipantTile2(_a, ref) {\n    var _b = _a, {\n      trackRef,\n      children,\n      onParticipantClick,\n      disableSpeakingIndicator\n    } = _b, htmlProps = __objRest(_b, [\n      \"trackRef\",\n      \"children\",\n      \"onParticipantClick\",\n      \"disableSpeakingIndicator\"\n    ]);\n    var _a2, _b2;\n    const trackReference = useEnsureTrackRef(trackRef);\n    const { elementProps } = useParticipantTile({\n      htmlProps,\n      disableSpeakingIndicator,\n      onParticipantClick,\n      trackRef: trackReference\n    });\n    const isEncrypted = useIsEncrypted(trackReference.participant);\n    const layoutContext = useMaybeLayoutContext();\n    const autoManageSubscription = (_a2 = useFeatureContext()) == null ? void 0 : _a2.autoSubscription;\n    const handleSubscribe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (subscribed) => {\n        if (trackReference.source && !subscribed && layoutContext && layoutContext.pin.dispatch && (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReferencePinned)(trackReference, layoutContext.pin.state)) {\n          layoutContext.pin.dispatch({ msg: \"clear_pin\" });\n        }\n      },\n      [trackReference, layoutContext]\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref, style: { position: \"relative\" } }, elementProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackRefContextIfNeeded, { trackRef: trackReference }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContextIfNeeded, { participant: trackReference.participant }, children != null ? children : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(trackReference) && (((_b2 = trackReference.publication) == null ? void 0 : _b2.kind) === \"video\" || trackReference.source === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera || trackReference.source === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare) ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      VideoTrack,\n      {\n        trackRef: trackReference,\n        onSubscriptionStatusChanged: handleSubscribe,\n        manageSubscription: autoManageSubscription\n      }\n    ) : (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(trackReference) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      AudioTrack,\n      {\n        trackRef: trackReference,\n        onSubscriptionStatusChanged: handleSubscribe\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-placeholder\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantPlaceholder_default, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, trackReference.source === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, isEncrypted && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LockLockedIcon_default, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      TrackMutedIndicator,\n      {\n        trackRef: {\n          participant: trackReference.participant,\n          source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone\n        },\n        show: \"muted\"\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantName, null)) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScreenShareIcon_default, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantName, null, \"'s screen\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConnectionQualityIndicator, { className: \"lk-participant-metadata-item\" }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusToggle, { trackRef: trackReference }))));\n  }\n);\n\n// src/components/layout/FocusLayout.tsx\nfunction FocusLayoutContainer(props) {\n  const elementProps = mergeProps2(props, { className: \"lk-focus-layout\" });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, elementProps), props.children);\n}\nfunction FocusLayout(_a) {\n  var _b = _a, { trackRef } = _b, htmlProps = __objRest(_b, [\"trackRef\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantTile, __spreadValues({ trackRef }, htmlProps));\n}\n\n// src/components/layout/GridLayout.tsx\n\n\n// src/components/TrackLoop.tsx\n\n\nfunction TrackLoop(_a) {\n  var _b = _a, { tracks } = _b, props = __objRest(_b, [\"tracks\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, tracks.map((trackReference) => {\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      TrackRefContext.Provider,\n      {\n        value: trackReference,\n        key: (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackReferenceId)(trackReference)\n      },\n      cloneSingleChild(props.children)\n    );\n  }));\n}\n\n// src/components/controls/PaginationControl.tsx\n\n\nfunction PaginationControl({\n  totalPageCount,\n  nextPage,\n  prevPage,\n  currentPage,\n  pagesContainer: connectedElement\n}) {\n  const [interactive, setInteractive] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let subscription;\n    if (connectedElement) {\n      subscription = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.createInteractingObservable)(connectedElement.current, 2e3).subscribe(\n        setInteractive\n      );\n    }\n    return () => {\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n    };\n  }, [connectedElement]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-pagination-control\", \"data-lk-user-interaction\": interactive }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: prevPage }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Chevron_default, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-pagination-count\" }, `${currentPage} of ${totalPageCount}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: nextPage }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Chevron_default, null)));\n}\n\n// src/components/controls/PaginationIndicator.tsx\n\nvar PaginationIndicator = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function PaginationIndicator2({ totalPageCount, currentPage }, ref) {\n    const bubbles = new Array(totalPageCount).fill(\"\").map((_, index) => {\n      if (index + 1 === currentPage) {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { \"data-lk-active\": true, key: index });\n      } else {\n        return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { key: index });\n      }\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref, className: \"lk-pagination-indicator\" }, bubbles);\n  }\n);\n\n// src/components/layout/GridLayout.tsx\nfunction GridLayout(_a) {\n  var _b = _a, { tracks } = _b, props = __objRest(_b, [\"tracks\"]);\n  const gridEl = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  const elementProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => mergeProps2(props, { className: \"lk-grid-layout\" }),\n    [props]\n  );\n  const { layout } = useGridLayout(gridEl, tracks.length);\n  const pagination = usePagination(layout.maxTiles, tracks);\n  useSwipe(gridEl, {\n    onLeftSwipe: pagination.nextPage,\n    onRightSwipe: pagination.prevPage\n  });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref: gridEl, \"data-lk-pagination\": pagination.totalPageCount > 1 }, elementProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackLoop, { tracks: pagination.tracks }, props.children), tracks.length > layout.maxTiles && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    PaginationIndicator,\n    {\n      totalPageCount: pagination.totalPageCount,\n      currentPage: pagination.currentPage\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(PaginationControl, __spreadValues({ pagesContainer: gridEl }, pagination))));\n}\n\n// src/components/layout/CarouselLayout.tsx\n\n\nvar MIN_HEIGHT = 130;\nvar MIN_WIDTH = 140;\nvar MIN_VISIBLE_TILES = 1;\nvar ASPECT_RATIO = 16 / 10;\nvar ASPECT_RATIO_INVERT = (1 - ASPECT_RATIO) * -1;\nfunction CarouselLayout(_a) {\n  var _b = _a, { tracks, orientation } = _b, props = __objRest(_b, [\"tracks\", \"orientation\"]);\n  const asideEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const [prevTiles, setPrevTiles] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  const { width, height } = useSize(asideEl);\n  const carouselOrientation = orientation ? orientation : height >= width ? \"vertical\" : \"horizontal\";\n  const tileSpan = carouselOrientation === \"vertical\" ? Math.max(width * ASPECT_RATIO_INVERT, MIN_HEIGHT) : Math.max(height * ASPECT_RATIO, MIN_WIDTH);\n  const scrollBarWidth = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getScrollBarWidth)();\n  const tilesThatFit = carouselOrientation === \"vertical\" ? Math.max((height - scrollBarWidth) / tileSpan, MIN_VISIBLE_TILES) : Math.max((width - scrollBarWidth) / tileSpan, MIN_VISIBLE_TILES);\n  let maxVisibleTiles = Math.round(tilesThatFit);\n  if (Math.abs(tilesThatFit - prevTiles) < 0.5) {\n    maxVisibleTiles = Math.round(prevTiles);\n  } else if (prevTiles !== tilesThatFit) {\n    setPrevTiles(tilesThatFit);\n  }\n  const sortedTiles = useVisualStableUpdate(tracks, maxVisibleTiles);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (asideEl.current) {\n      asideEl.current.dataset.lkOrientation = carouselOrientation;\n      asideEl.current.style.setProperty(\"--lk-max-visible-tiles\", maxVisibleTiles.toString());\n    }\n  }, [maxVisibleTiles, carouselOrientation]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"aside\", __spreadValues({ key: carouselOrientation, className: \"lk-carousel\", ref: asideEl }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackLoop, { tracks: sortedTiles }, props.children));\n}\n\n// src/components/layout/LayoutContextProvider.tsx\n\n\nfunction LayoutContextProvider({\n  value,\n  onPinChange,\n  onWidgetChange,\n  children\n}) {\n  const layoutContextValue = useEnsureCreateLayoutContext(value);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"PinState Updated\", { state: layoutContextValue.pin.state });\n    if (onPinChange && layoutContextValue.pin.state) onPinChange(layoutContextValue.pin.state);\n  }, [layoutContextValue.pin.state, onPinChange]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"Widget Updated\", { widgetState: layoutContextValue.widget.state });\n    if (onWidgetChange && layoutContextValue.widget.state) {\n      onWidgetChange(layoutContextValue.widget.state);\n    }\n  }, [onWidgetChange, layoutContextValue.widget.state]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LayoutContext.Provider, { value: layoutContextValue }, children);\n}\n\n// src/components/LiveKitRoom.tsx\n\nvar LiveKitRoom = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function LiveKitRoom2(props, ref) {\n  const { room, htmlProps } = useLiveKitRoom(props);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref }, htmlProps), room && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(RoomContext.Provider, { value: room }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LKFeatureContext.Provider, { value: props.featureFlags }, props.children)));\n});\n\n// src/components/participant/AudioVisualizer.tsx\n\nvar AudioVisualizer = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function AudioVisualizer2(_a, ref) {\n    var _b = _a, { trackRef } = _b, props = __objRest(_b, [\"trackRef\"]);\n    const svgWidth = 200;\n    const svgHeight = 90;\n    const barWidth = 6;\n    const barSpacing = 4;\n    const volMultiplier = 50;\n    const barCount = 7;\n    const trackReference = useEnsureTrackRef(trackRef);\n    const volumes = useMultibandTrackVolume(trackReference, { bands: 7, loPass: 300 });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"svg\",\n      __spreadProps(__spreadValues({\n        ref,\n        width: \"100%\",\n        height: \"100%\",\n        viewBox: `0 0 ${svgWidth} ${svgHeight}`\n      }, props), {\n        className: \"lk-audio-visualizer\"\n      }),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\" }),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"g\",\n        {\n          style: {\n            transform: `translate(${(svgWidth - barCount * (barWidth + barSpacing)) / 2}px, 0)`\n          }\n        },\n        volumes.map((vol, idx) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          \"rect\",\n          {\n            key: idx,\n            x: idx * (barWidth + barSpacing),\n            y: svgHeight / 2 - vol * volMultiplier / 2,\n            width: barWidth,\n            height: vol * volMultiplier\n          }\n        ))\n      )\n    );\n  }\n);\n\n// src/components/ParticipantLoop.tsx\n\nfunction ParticipantLoop(_a) {\n  var _b = _a, { participants } = _b, props = __objRest(_b, [\"participants\"]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, participants.map((participant) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantContext.Provider, { value: participant, key: participant.identity }, cloneSingleChild(props.children))));\n}\n\n// src/components/RoomAudioRenderer.tsx\n\n\n\nfunction RoomAudioRenderer({ volume, muted }) {\n  const tracks = useTracks(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShareAudio, livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Unknown],\n    {\n      updateOnlyOn: [],\n      onlySubscribed: true\n    }\n  ).filter((ref) => !(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isLocal)(ref.participant) && ref.publication.kind === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Kind.Audio);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"none\" } }, tracks.map((trackRef) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    AudioTrack,\n    {\n      key: (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.getTrackReferenceId)(trackRef),\n      trackRef,\n      volume,\n      muted\n    }\n  )));\n}\n\n// src/components/RoomName.tsx\n\nvar RoomName = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function RoomName2(_a, ref) {\n  var _b = _a, { childrenPosition = \"before\", children } = _b, htmlAttributes = __objRest(_b, [\"childrenPosition\", \"children\"]);\n  const { name } = useRoomInfo();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", __spreadValues({ ref }, htmlAttributes), childrenPosition === \"before\" && children, name, childrenPosition === \"after\" && children);\n});\n\n// src/components/Toast.tsx\n\nfunction Toast(props) {\n  const htmlProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => mergeProps2(props, { className: \"lk-toast\" }), [props]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, htmlProps), props.children);\n}\n\n// src/components/participant/ParticipantAudioTile.tsx\n\n\n\n// src/components/participant/BarVisualizer.tsx\n\n\n// src/components/participant/animators/useBarAnimator.ts\n\n\n// src/components/participant/animationSequences/connectingSequence.ts\nvar generateConnectingSequenceBar = (columns) => {\n  const seq = [];\n  for (let x = 0; x <= columns; x++) {\n    seq.push([x, columns - 1 - x]);\n  }\n  return seq;\n};\n\n// src/components/participant/animationSequences/listeningSequence.ts\nvar generateListeningSequenceBar = (columns) => {\n  const center = Math.floor(columns / 2);\n  const noIndex = -1;\n  return [[center], [noIndex]];\n};\n\n// src/components/participant/animators/useBarAnimator.ts\nvar useBarAnimator = (state, columns, interval) => {\n  const [index, setIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [sequence, setSequence] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([[]]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (state === \"thinking\") {\n      setSequence(generateListeningSequenceBar(columns));\n    } else if (state === \"connecting\" || state === \"initializing\") {\n      const sequence2 = [...generateConnectingSequenceBar(columns)];\n      setSequence(sequence2);\n    } else if (state === \"listening\") {\n      setSequence(generateListeningSequenceBar(columns));\n    } else if (state === void 0) {\n      setSequence([new Array(columns).fill(0).map((_, idx) => idx)]);\n    } else {\n      setSequence([[]]);\n    }\n    setIndex(0);\n  }, [state, columns]);\n  const animationFrameId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let startTime = performance.now();\n    const animate = (time) => {\n      const timeElapsed = time - startTime;\n      if (timeElapsed >= interval) {\n        setIndex((prev) => prev + 1);\n        startTime = time;\n      }\n      animationFrameId.current = requestAnimationFrame(animate);\n    };\n    animationFrameId.current = requestAnimationFrame(animate);\n    return () => {\n      if (animationFrameId.current !== null) {\n        cancelAnimationFrame(animationFrameId.current);\n      }\n    };\n  }, [interval, columns, state, sequence.length]);\n  return sequence[index % sequence.length];\n};\n\n// src/components/participant/BarVisualizer.tsx\nvar sequencerIntervals = /* @__PURE__ */ new Map([\n  [\"connecting\", 25 * 15],\n  [\"listening\", 500],\n  [\"thinking\", 150]\n]);\nvar getSequencerInterval = (state, barCount) => {\n  if (state === void 0) {\n    return 1e3;\n  }\n  let interval = sequencerIntervals.get(state);\n  if (interval) {\n    switch (state) {\n      case \"connecting\":\n        interval /= barCount;\n        break;\n      default:\n        break;\n    }\n  }\n  return interval;\n};\nvar BarVisualizer = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function BarVisualizer2(_a, ref) {\n    var _b = _a, { state, options, barCount = 15, trackRef } = _b, props = __objRest(_b, [\"state\", \"options\", \"barCount\", \"trackRef\"]);\n    var _a2, _b2, _c;\n    const elementProps = mergeProps2(props, { className: \"lk-audio-bar-visualizer\" });\n    let trackReference = useMaybeTrackRefContext();\n    if (trackRef) {\n      trackReference = trackRef;\n    }\n    const volumeBands = useMultibandTrackVolume(trackReference, {\n      bands: barCount,\n      loPass: 100,\n      hiPass: 200\n    });\n    const minHeight = (_a2 = options == null ? void 0 : options.minHeight) != null ? _a2 : 20;\n    const maxHeight = (_b2 = options == null ? void 0 : options.maxHeight) != null ? _b2 : 100;\n    const highlightedIndices = useBarAnimator(\n      state,\n      barCount,\n      (_c = getSequencerInterval(state, barCount)) != null ? _c : 100\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadProps(__spreadValues({ ref }, elementProps), { \"data-lk-va-state\": state }), volumeBands.map((volume, idx) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"span\",\n      {\n        key: idx,\n        className: `lk-audio-bar ${highlightedIndices.includes(idx) && \"lk-highlighted\"}`,\n        style: {\n          // TODO transform animations would be more performant, however the border-radius gets distorted when using scale transforms. a 9-slice approach (or 3 in this case) could work\n          // transform: `scale(1, ${Math.min(maxHeight, Math.max(minHeight, volume))}`,\n          height: `${Math.min(maxHeight, Math.max(minHeight, volume * 100 + 5))}%`\n        }\n      }\n    )));\n  }\n);\n\n// src/components/participant/ParticipantAudioTile.tsx\nvar ParticipantAudioTile = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ParticipantAudioTile2(_a, ref) {\n    var _b = _a, {\n      children,\n      disableSpeakingIndicator,\n      onParticipantClick,\n      trackRef\n    } = _b, htmlProps = __objRest(_b, [\n      \"children\",\n      \"disableSpeakingIndicator\",\n      \"onParticipantClick\",\n      \"trackRef\"\n    ]);\n    const trackReference = useEnsureTrackRef(trackRef);\n    const { elementProps } = useParticipantTile({\n      trackRef: trackReference,\n      htmlProps,\n      disableSpeakingIndicator,\n      onParticipantClick\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ ref, style: { position: \"relative\", minHeight: \"160px\" } }, elementProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackRefContext.Provider, { value: trackReference }, children != null ? children : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(trackReference) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(AudioTrack, { trackRef: trackReference }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(BarVisualizer, { barCount: 7, options: { minHeight: 8 } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackMutedIndicator, { trackRef: trackReference }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantName, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConnectionQualityIndicator, { className: \"lk-participant-metadata-item\" })))));\n  }\n);\n\n// src/components/ConnectionStateToast.tsx\n\n\nfunction ConnectionStateToast(props) {\n  const [notification, setNotification] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  const state = useConnectionState(props.room);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    switch (state) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Reconnecting:\n        setNotification(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SpinnerIcon_default, { className: \"lk-spinner\" }), \" Reconnecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Connecting:\n        setNotification(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SpinnerIcon_default, { className: \"lk-spinner\" }), \" Connecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_3__.ConnectionState.Disconnected:\n        setNotification(/* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, \"Disconnected\"));\n        break;\n      default:\n        setNotification(void 0);\n        break;\n    }\n  }, [state]);\n  return notification ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Toast, { className: \"lk-toast-connection-state\" }, notification) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n}\n\n// src/components/ChatEntry.tsx\n\n\nvar ChatEntry = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function ChatEntry2(_a, ref) {\n    var _b = _a, { entry, hideName = false, hideTimestamp = false, messageFormatter } = _b, props = __objRest(_b, [\"entry\", \"hideName\", \"hideTimestamp\", \"messageFormatter\"]);\n    var _a2, _b2, _c, _d;\n    const formattedMessage = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n      return messageFormatter ? messageFormatter(entry.message) : entry.message;\n    }, [entry.message, messageFormatter]);\n    const hasBeenEdited = !!entry.editTimestamp;\n    const time = new Date(entry.timestamp);\n    const locale = navigator ? navigator.language : \"en-US\";\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      __spreadValues({\n        ref,\n        className: \"lk-chat-entry\",\n        title: time.toLocaleTimeString(locale, { timeStyle: \"full\" }),\n        \"data-lk-message-origin\": ((_a2 = entry.from) == null ? void 0 : _a2.isLocal) ? \"local\" : \"remote\"\n      }, props),\n      (!hideTimestamp || !hideName || hasBeenEdited) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-meta-data\" }, !hideName && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"lk-participant-name\" }, (_d = (_b2 = entry.from) == null ? void 0 : _b2.name) != null ? _d : (_c = entry.from) == null ? void 0 : _c.identity), (!hideTimestamp || hasBeenEdited) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-timestamp\" }, hasBeenEdited && \"edited \", time.toLocaleTimeString(locale, { timeStyle: \"short\" }))),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-body\" }, formattedMessage)\n    );\n  }\n);\nfunction formatChatMessageLinks(message) {\n  return (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.tokenize)(message, (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.createDefaultGrammar)()).map((tok, i) => {\n    if (typeof tok === `string`) {\n      return tok;\n    } else {\n      const content = tok.content.toString();\n      const href = tok.type === `url` ? /^http(s?):\\/\\//.test(content) ? content : `https://${content}` : `mailto:${content}`;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", { className: \"lk-chat-link\", key: i, href, target: \"_blank\", rel: \"noreferrer\" }, content);\n    }\n  });\n}\n\n// src/prefabs/Chat.tsx\n\nfunction Chat(_a) {\n  var _b = _a, {\n    messageFormatter,\n    messageDecoder,\n    messageEncoder,\n    channelTopic\n  } = _b, props = __objRest(_b, [\n    \"messageFormatter\",\n    \"messageDecoder\",\n    \"messageEncoder\",\n    \"channelTopic\"\n  ]);\n  const inputRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const ulRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const chatOptions = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return { messageDecoder, messageEncoder, channelTopic };\n  }, [messageDecoder, messageEncoder, channelTopic]);\n  const { send, chatMessages, isSending } = useChat(chatOptions);\n  const layoutContext = useMaybeLayoutContext();\n  const lastReadMsgAt = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n  function handleSubmit(event) {\n    return __async(this, null, function* () {\n      event.preventDefault();\n      if (inputRef.current && inputRef.current.value.trim() !== \"\") {\n        if (send) {\n          yield send(inputRef.current.value);\n          inputRef.current.value = \"\";\n          inputRef.current.focus();\n        }\n      }\n    });\n  }\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2;\n    if (ulRef) {\n      (_a2 = ulRef.current) == null ? void 0 : _a2.scrollTo({ top: ulRef.current.scrollHeight });\n    }\n  }, [ulRef, chatMessages]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a2, _b2, _c, _d, _e;\n    if (!layoutContext || chatMessages.length === 0) {\n      return;\n    }\n    if (((_a2 = layoutContext.widget.state) == null ? void 0 : _a2.showChat) && chatMessages.length > 0 && lastReadMsgAt.current !== ((_b2 = chatMessages[chatMessages.length - 1]) == null ? void 0 : _b2.timestamp)) {\n      lastReadMsgAt.current = (_c = chatMessages[chatMessages.length - 1]) == null ? void 0 : _c.timestamp;\n      return;\n    }\n    const unreadMessageCount = chatMessages.filter(\n      (msg) => !lastReadMsgAt.current || msg.timestamp > lastReadMsgAt.current\n    ).length;\n    const { widget } = layoutContext;\n    if (unreadMessageCount > 0 && ((_d = widget.state) == null ? void 0 : _d.unreadMessages) !== unreadMessageCount) {\n      (_e = widget.dispatch) == null ? void 0 : _e.call(widget, { msg: \"unread_msg\", count: unreadMessageCount });\n    }\n  }, [chatMessages, layoutContext == null ? void 0 : layoutContext.widget]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadProps(__spreadValues({}, props), { className: \"lk-chat\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-chat-header\" }, \"Messages\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatToggle, { className: \"lk-close-button\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatCloseIcon_default, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { className: \"lk-list lk-chat-messages\", ref: ulRef }, props.children ? chatMessages.map(\n    (msg, idx) => {\n      var _a2;\n      return cloneSingleChild(props.children, {\n        entry: msg,\n        key: (_a2 = msg.id) != null ? _a2 : idx,\n        messageFormatter\n      });\n    }\n  ) : chatMessages.map((msg, idx, allMsg) => {\n    var _a2;\n    const hideName = idx >= 1 && allMsg[idx - 1].from === msg.from;\n    const hideTimestamp = idx >= 1 && msg.timestamp - allMsg[idx - 1].timestamp < 6e4;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ChatEntry,\n      {\n        key: (_a2 = msg.id) != null ? _a2 : idx,\n        hideName,\n        hideTimestamp: hideName === false ? false : hideTimestamp,\n        entry: msg,\n        messageFormatter\n      }\n    );\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", { className: \"lk-chat-form\", onSubmit: handleSubmit }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      className: \"lk-form-control lk-chat-form-input\",\n      disabled: isSending,\n      ref: inputRef,\n      type: \"text\",\n      placeholder: \"Enter a message...\",\n      onInput: (ev) => ev.stopPropagation(),\n      onKeyDown: (ev) => ev.stopPropagation(),\n      onKeyUp: (ev) => ev.stopPropagation()\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { type: \"submit\", className: \"lk-button lk-chat-form-button\", disabled: isSending }, \"Send\")));\n}\n\n// src/prefabs/PreJoin.tsx\n\n\n\n// src/prefabs/MediaDeviceMenu.tsx\n\n\n\nfunction MediaDeviceMenu(_a) {\n  var _b = _a, {\n    kind,\n    initialSelection,\n    onActiveDeviceChange,\n    tracks,\n    requestPermissions = false\n  } = _b, props = __objRest(_b, [\n    \"kind\",\n    \"initialSelection\",\n    \"onActiveDeviceChange\",\n    \"tracks\",\n    \"requestPermissions\"\n  ]);\n  const [isOpen, setIsOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [devices, setDevices] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const [updateRequired, setUpdateRequired] = react__WEBPACK_IMPORTED_MODULE_0__.useState(true);\n  const [needPermissions, setNeedPermissions] = react__WEBPACK_IMPORTED_MODULE_0__.useState(requestPermissions);\n  const handleActiveDeviceChange = (kind2, deviceId) => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"handle device change\");\n    setIsOpen(false);\n    onActiveDeviceChange == null ? void 0 : onActiveDeviceChange(kind2, deviceId);\n  };\n  const button = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const tooltip = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (isOpen) {\n      setNeedPermissions(true);\n    }\n  }, [isOpen]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (button.current && tooltip.current && (devices || updateRequired)) {\n      (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.computeMenuPosition)(button.current, tooltip.current).then(({ x, y }) => {\n        if (tooltip.current) {\n          Object.assign(tooltip.current.style, { left: `${x}px`, top: `${y}px` });\n        }\n      });\n    }\n    setUpdateRequired(false);\n  }, [button, tooltip, devices, updateRequired]);\n  const handleClickOutside = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (event) => {\n      if (!tooltip.current) {\n        return;\n      }\n      if (event.target === button.current) {\n        return;\n      }\n      if (isOpen && (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.wasClickOutside)(tooltip.current, event)) {\n        setIsOpen(false);\n      }\n    },\n    [isOpen, tooltip, button]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside);\n    window.addEventListener(\"resize\", () => setUpdateRequired(true));\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n      window.removeEventListener(\"resize\", () => setUpdateRequired(true));\n    };\n  }, [handleClickOutside, setUpdateRequired]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"button\",\n    __spreadProps(__spreadValues({\n      className: \"lk-button lk-button-menu\",\n      \"aria-pressed\": isOpen\n    }, props), {\n      onClick: () => setIsOpen(!isOpen),\n      ref: button\n    }),\n    props.children\n  ), !props.disabled && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"div\",\n    {\n      className: \"lk-device-menu\",\n      ref: tooltip,\n      style: { visibility: isOpen ? \"visible\" : \"hidden\" }\n    },\n    kind ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      MediaDeviceSelect,\n      {\n        initialSelection,\n        onActiveDeviceChange: (deviceId) => handleActiveDeviceChange(kind, deviceId),\n        onDeviceListChange: setDevices,\n        kind,\n        track: tracks == null ? void 0 : tracks[kind],\n        requestPermissions: needPermissions\n      }\n    ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-device-menu-heading\" }, \"Audio inputs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      MediaDeviceSelect,\n      {\n        kind: \"audioinput\",\n        onActiveDeviceChange: (deviceId) => handleActiveDeviceChange(\"audioinput\", deviceId),\n        onDeviceListChange: setDevices,\n        track: tracks == null ? void 0 : tracks.audioinput,\n        requestPermissions: needPermissions\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-device-menu-heading\" }, \"Video inputs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      MediaDeviceSelect,\n      {\n        kind: \"videoinput\",\n        onActiveDeviceChange: (deviceId) => handleActiveDeviceChange(\"videoinput\", deviceId),\n        onDeviceListChange: setDevices,\n        track: tracks == null ? void 0 : tracks.videoinput,\n        requestPermissions: needPermissions\n      }\n    ))\n  ));\n}\n\n// src/prefabs/PreJoin.tsx\n\n\n// src/hooks/useWarnAboutMissingStyles.ts\n\nfunction useWarnAboutMissingStyles() {\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    warnAboutMissingStyles();\n  }, []);\n}\n\n// src/prefabs/PreJoin.tsx\n\nfunction usePreviewTracks(options, onError) {\n  const [tracks, setTracks] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  const trackLock = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => new livekit_client__WEBPACK_IMPORTED_MODULE_3__.Mutex(), []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let needsCleanup = false;\n    let localTracks = [];\n    trackLock.lock().then((unlock) => __async(this, null, function* () {\n      try {\n        if (options.audio || options.video) {\n          localTracks = yield (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.createLocalTracks)(options);\n          if (needsCleanup) {\n            localTracks.forEach((tr) => tr.stop());\n          } else {\n            setTracks(localTracks);\n          }\n        }\n      } catch (e) {\n        if (onError && e instanceof Error) {\n          onError(e);\n        } else {\n          _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.error(e);\n        }\n      } finally {\n        unlock();\n      }\n    }));\n    return () => {\n      needsCleanup = true;\n      localTracks.forEach((track) => {\n        track.stop();\n      });\n    };\n  }, [JSON.stringify(options), onError, trackLock]);\n  return tracks;\n}\nfunction usePreviewDevice(enabled, deviceId, kind) {\n  const [deviceError, setDeviceError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  const [isCreatingTrack, setIsCreatingTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const devices = useMediaDevices({ kind });\n  const [selectedDevice, setSelectedDevice] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  );\n  const [localTrack, setLocalTrack] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  const [localDeviceId, setLocalDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(deviceId);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setLocalDeviceId(deviceId);\n  }, [deviceId]);\n  const createTrack = (deviceId2, kind2) => __async(this, null, function* () {\n    try {\n      const track = kind2 === \"videoinput\" ? yield (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.createLocalVideoTrack)({\n        deviceId: deviceId2,\n        resolution: livekit_client__WEBPACK_IMPORTED_MODULE_3__.VideoPresets.h720.resolution\n      }) : yield (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.createLocalAudioTrack)({ deviceId: deviceId2 });\n      const newDeviceId = yield track.getDeviceId();\n      if (newDeviceId && deviceId2 !== newDeviceId) {\n        prevDeviceId.current = newDeviceId;\n        setLocalDeviceId(newDeviceId);\n      }\n      setLocalTrack(track);\n    } catch (e) {\n      if (e instanceof Error) {\n        setDeviceError(e);\n      }\n    }\n  });\n  const switchDevice = (track, id) => __async(this, null, function* () {\n    yield track.setDeviceId(id);\n    prevDeviceId.current = id;\n  });\n  const prevDeviceId = react__WEBPACK_IMPORTED_MODULE_0__.useRef(localDeviceId);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (enabled && !localTrack && !deviceError && !isCreatingTrack) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"creating track\", kind);\n      setIsCreatingTrack(true);\n      createTrack(localDeviceId, kind).finally(() => {\n        setIsCreatingTrack(false);\n      });\n    }\n  }, [enabled, localTrack, deviceError, isCreatingTrack]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!localTrack) {\n      return;\n    }\n    if (!enabled) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(`muting ${kind} track`);\n      localTrack.mute().then(() => _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(localTrack.mediaStreamTrack));\n    } else if ((selectedDevice == null ? void 0 : selectedDevice.deviceId) && prevDeviceId.current !== (selectedDevice == null ? void 0 : selectedDevice.deviceId)) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(`switching ${kind} device from`, prevDeviceId.current, selectedDevice.deviceId);\n      switchDevice(localTrack, selectedDevice.deviceId);\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(`unmuting local ${kind} track`);\n      localTrack.unmute();\n    }\n  }, [localTrack, selectedDevice, enabled, kind]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    return () => {\n      if (localTrack) {\n        _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(`stopping local ${kind} track`);\n        localTrack.stop();\n        localTrack.mute();\n      }\n    };\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setSelectedDevice(devices == null ? void 0 : devices.find((dev) => dev.deviceId === localDeviceId));\n  }, [localDeviceId, devices]);\n  return {\n    selectedDevice,\n    localTrack,\n    deviceError\n  };\n}\nfunction PreJoin(_a) {\n  var _b = _a, {\n    defaults = {},\n    onValidate,\n    onSubmit,\n    onError,\n    debug,\n    joinLabel = \"Join Room\",\n    micLabel = \"Microphone\",\n    camLabel = \"Camera\",\n    userLabel = \"Username\",\n    persistUserChoices = true\n  } = _b, htmlProps = __objRest(_b, [\n    \"defaults\",\n    \"onValidate\",\n    \"onSubmit\",\n    \"onError\",\n    \"debug\",\n    \"joinLabel\",\n    \"micLabel\",\n    \"camLabel\",\n    \"userLabel\",\n    \"persistUserChoices\"\n  ]);\n  const [userChoices, setUserChoices] = react__WEBPACK_IMPORTED_MODULE_0__.useState(_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.defaultUserChoices);\n  const partialDefaults = __spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues({}, defaults.audioDeviceId !== void 0 && { audioDeviceId: defaults.audioDeviceId }), defaults.videoDeviceId !== void 0 && { videoDeviceId: defaults.videoDeviceId }), defaults.audioEnabled !== void 0 && { audioEnabled: defaults.audioEnabled }), defaults.videoEnabled !== void 0 && { videoEnabled: defaults.videoEnabled }), defaults.username !== void 0 && { username: defaults.username });\n  const {\n    userChoices: initialUserChoices,\n    saveAudioInputDeviceId,\n    saveAudioInputEnabled,\n    saveVideoInputDeviceId,\n    saveVideoInputEnabled,\n    saveUsername\n  } = usePersistentUserChoices({\n    defaults: partialDefaults,\n    preventSave: !persistUserChoices,\n    preventLoad: !persistUserChoices\n  });\n  const [audioEnabled, setAudioEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialUserChoices.audioEnabled);\n  const [videoEnabled, setVideoEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialUserChoices.videoEnabled);\n  const [audioDeviceId, setAudioDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    initialUserChoices.audioDeviceId\n  );\n  const [videoDeviceId, setVideoDeviceId] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    initialUserChoices.videoDeviceId\n  );\n  const [username, setUsername] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialUserChoices.username);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveAudioInputEnabled(audioEnabled);\n  }, [audioEnabled, saveAudioInputEnabled]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveVideoInputEnabled(videoEnabled);\n  }, [videoEnabled, saveVideoInputEnabled]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveAudioInputDeviceId(audioDeviceId);\n  }, [audioDeviceId, saveAudioInputDeviceId]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveVideoInputDeviceId(videoDeviceId);\n  }, [videoDeviceId, saveVideoInputDeviceId]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    saveUsername(username);\n  }, [username, saveUsername]);\n  const tracks = usePreviewTracks(\n    {\n      audio: audioEnabled ? { deviceId: initialUserChoices.audioDeviceId } : false,\n      video: videoEnabled ? { deviceId: initialUserChoices.videoDeviceId } : false\n    },\n    onError\n  );\n  const videoEl = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const videoTrack = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => tracks == null ? void 0 : tracks.filter((track) => track.kind === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Kind.Video)[0],\n    [tracks]\n  );\n  const facingMode = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (videoTrack) {\n      const { facingMode: facingMode2 } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_3__.facingModeFromLocalTrack)(videoTrack);\n      return facingMode2;\n    } else {\n      return \"undefined\";\n    }\n  }, [videoTrack]);\n  const audioTrack = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => tracks == null ? void 0 : tracks.filter((track) => track.kind === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Kind.Audio)[0],\n    [tracks]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (videoEl.current && videoTrack) {\n      videoTrack.unmute();\n      videoTrack.attach(videoEl.current);\n    }\n    return () => {\n      videoTrack == null ? void 0 : videoTrack.detach();\n    };\n  }, [videoTrack]);\n  const [isValid, setIsValid] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  const handleValidation = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (values) => {\n      if (typeof onValidate === \"function\") {\n        return onValidate(values);\n      } else {\n        return values.username !== \"\";\n      }\n    },\n    [onValidate]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const newUserChoices = {\n      username,\n      videoEnabled,\n      videoDeviceId,\n      audioEnabled,\n      audioDeviceId\n    };\n    setUserChoices(newUserChoices);\n    setIsValid(handleValidation(newUserChoices));\n  }, [username, videoEnabled, handleValidation, audioEnabled, audioDeviceId, videoDeviceId]);\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (handleValidation(userChoices)) {\n      if (typeof onSubmit === \"function\") {\n        onSubmit(userChoices);\n      }\n    } else {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.warn(\"Validation failed with: \", userChoices);\n    }\n  }\n  useWarnAboutMissingStyles();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ className: \"lk-prejoin\" }, htmlProps), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-container\" }, videoTrack && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", { ref: videoEl, width: \"1280\", height: \"720\", \"data-lk-facing-mode\": facingMode }), (!videoTrack || !videoEnabled) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-camera-off-note\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantPlaceholder_default, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-container\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group audio\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      initialState: audioEnabled,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone,\n      onChange: (enabled) => setAudioEnabled(enabled)\n    },\n    micLabel\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      initialSelection: audioDeviceId,\n      kind: \"audioinput\",\n      disabled: !audioTrack,\n      tracks: { audioinput: audioTrack },\n      onActiveDeviceChange: (_, id) => setAudioDeviceId(id)\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group video\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      initialState: videoEnabled,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera,\n      onChange: (enabled) => setVideoEnabled(enabled)\n    },\n    camLabel\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      initialSelection: videoDeviceId,\n      kind: \"videoinput\",\n      disabled: !videoTrack,\n      tracks: { videoinput: videoTrack },\n      onActiveDeviceChange: (_, id) => setVideoDeviceId(id)\n    }\n  )))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", { className: \"lk-username-container\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      className: \"lk-form-control\",\n      id: \"username\",\n      name: \"username\",\n      type: \"text\",\n      defaultValue: username,\n      placeholder: userLabel,\n      onChange: (inputEl) => setUsername(inputEl.target.value),\n      autoComplete: \"off\"\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"button\",\n    {\n      className: \"lk-button lk-join-button\",\n      type: \"submit\",\n      onClick: handleSubmit,\n      disabled: !isValid\n    },\n    joinLabel\n  )), debug && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", null, \"User Choices:\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { className: \"lk-list\", style: { overflow: \"hidden\", maxWidth: \"15rem\" } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Username: \", `${userChoices.username}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Video Enabled: \", `${userChoices.videoEnabled}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Audio Enabled: \", `${userChoices.audioEnabled}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Video Device: \", `${userChoices.videoDeviceId}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Audio Device: \", `${userChoices.audioDeviceId}`))));\n}\n\n// src/prefabs/VideoConference.tsx\n\n\n\n\n// src/prefabs/ControlBar.tsx\n\n\n\n\n// src/components/controls/StartMediaButton.tsx\n\nvar StartMediaButton = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function StartMediaButton2(_a, ref) {\n    var _b = _a, { label } = _b, props = __objRest(_b, [\"label\"]);\n    const room = useRoomContext();\n    const { mergedProps: audioProps, canPlayAudio } = useStartAudio({ room, props });\n    const { mergedProps, canPlayVideo } = useStartVideo({ room, props: audioProps });\n    const _a2 = mergedProps, { style } = _a2, restProps = __objRest(_a2, [\"style\"]);\n    style.display = canPlayAudio && canPlayVideo ? \"none\" : \"block\";\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref, style }, restProps), label != null ? label : `Start ${!canPlayAudio ? \"Audio\" : \"Video\"}`);\n  }\n);\n\n// src/components/controls/SettingsMenuToggle.tsx\n\n\n// src/hooks/useSettingsToggle.ts\n\nfunction useSettingsToggle({ props }) {\n  const { dispatch, state } = useLayoutContext().widget;\n  const className = \"lk-button lk-settings-toggle\";\n  const mergedProps = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return mergeProps(props, {\n      className,\n      onClick: () => {\n        if (dispatch) dispatch({ msg: \"toggle_settings\" });\n      },\n      \"aria-pressed\": (state == null ? void 0 : state.showSettings) ? \"true\" : \"false\"\n    });\n  }, [props, className, dispatch, state]);\n  return { mergedProps };\n}\n\n// src/components/controls/SettingsMenuToggle.tsx\nvar SettingsMenuToggle = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function SettingsMenuToggle2(props, ref) {\n    const { mergedProps } = useSettingsToggle({ props });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __spreadValues({ ref }, mergedProps), props.children);\n  }\n);\n\n// src/prefabs/ControlBar.tsx\nfunction ControlBar(_a) {\n  var _b = _a, {\n    variation,\n    controls,\n    saveUserChoices: saveUserChoices2 = true,\n    onDeviceError\n  } = _b, props = __objRest(_b, [\n    \"variation\",\n    \"controls\",\n    \"saveUserChoices\",\n    \"onDeviceError\"\n  ]);\n  var _a2, _b2, _c, _d, _e;\n  const [isChatOpen, setIsChatOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const layoutContext = useMaybeLayoutContext();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a3, _b3;\n    if (((_a3 = layoutContext == null ? void 0 : layoutContext.widget.state) == null ? void 0 : _a3.showChat) !== void 0) {\n      setIsChatOpen((_b3 = layoutContext == null ? void 0 : layoutContext.widget.state) == null ? void 0 : _b3.showChat);\n    }\n  }, [(_a2 = layoutContext == null ? void 0 : layoutContext.widget.state) == null ? void 0 : _a2.showChat]);\n  const isTooLittleSpace = useMediaQuery(`(max-width: ${isChatOpen ? 1e3 : 760}px)`);\n  const defaultVariation = isTooLittleSpace ? \"minimal\" : \"verbose\";\n  variation != null ? variation : variation = defaultVariation;\n  const visibleControls = __spreadValues({ leave: true }, controls);\n  const localPermissions = useLocalParticipantPermissions();\n  if (!localPermissions) {\n    visibleControls.camera = false;\n    visibleControls.chat = false;\n    visibleControls.microphone = false;\n    visibleControls.screenShare = false;\n  } else {\n    (_b2 = visibleControls.camera) != null ? _b2 : visibleControls.camera = localPermissions.canPublish;\n    (_c = visibleControls.microphone) != null ? _c : visibleControls.microphone = localPermissions.canPublish;\n    (_d = visibleControls.screenShare) != null ? _d : visibleControls.screenShare = localPermissions.canPublish;\n    (_e = visibleControls.chat) != null ? _e : visibleControls.chat = localPermissions.canPublishData && (controls == null ? void 0 : controls.chat);\n  }\n  const showIcon = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => variation === \"minimal\" || variation === \"verbose\",\n    [variation]\n  );\n  const showText = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => variation === \"textOnly\" || variation === \"verbose\",\n    [variation]\n  );\n  const browserSupportsScreenSharing = (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.supportsScreenSharing)();\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const onScreenShareChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled) => {\n      setIsScreenShareEnabled(enabled);\n    },\n    [setIsScreenShareEnabled]\n  );\n  const htmlProps = mergeProps2({ className: \"lk-control-bar\" }, props);\n  const {\n    saveAudioInputEnabled,\n    saveVideoInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputDeviceId\n  } = usePersistentUserChoices({ preventSave: !saveUserChoices2 });\n  const microphoneOnChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled, isUserInitiated) => isUserInitiated ? saveAudioInputEnabled(enabled) : null,\n    [saveAudioInputEnabled]\n  );\n  const cameraOnChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled, isUserInitiated) => isUserInitiated ? saveVideoInputEnabled(enabled) : null,\n    [saveVideoInputEnabled]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, htmlProps), visibleControls.microphone && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone,\n      showIcon,\n      onChange: microphoneOnChange,\n      onDeviceError: (error) => onDeviceError == null ? void 0 : onDeviceError({ source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone, error })\n    },\n    showText && \"Microphone\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      kind: \"audioinput\",\n      onActiveDeviceChange: (_kind, deviceId) => saveAudioInputDeviceId(deviceId != null ? deviceId : \"\")\n    }\n  ))), visibleControls.camera && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera,\n      showIcon,\n      onChange: cameraOnChange,\n      onDeviceError: (error) => onDeviceError == null ? void 0 : onDeviceError({ source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera, error })\n    },\n    showText && \"Camera\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      kind: \"videoinput\",\n      onActiveDeviceChange: (_kind, deviceId) => saveVideoInputDeviceId(deviceId != null ? deviceId : \"\")\n    }\n  ))), visibleControls.screenShare && browserSupportsScreenSharing && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare,\n      captureOptions: { audio: true, selfBrowserSurface: \"include\" },\n      showIcon,\n      onChange: onScreenShareChange,\n      onDeviceError: (error) => onDeviceError == null ? void 0 : onDeviceError({ source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare, error })\n    },\n    showText && (isScreenShareEnabled ? \"Stop screen share\" : \"Share screen\")\n  ), visibleControls.chat && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatToggle, null, showIcon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChatIcon_default, null), showText && \"Chat\"), visibleControls.settings && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SettingsMenuToggle, null, showIcon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GearIcon_default, null), showText && \"Settings\"), visibleControls.leave && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DisconnectButton, null, showIcon && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LeaveIcon_default, null), showText && \"Leave\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(StartMediaButton, null));\n}\n\n// src/prefabs/VideoConference.tsx\nfunction VideoConference(_a) {\n  var _b = _a, {\n    chatMessageFormatter,\n    chatMessageDecoder,\n    chatMessageEncoder,\n    SettingsComponent\n  } = _b, props = __objRest(_b, [\n    \"chatMessageFormatter\",\n    \"chatMessageDecoder\",\n    \"chatMessageEncoder\",\n    \"SettingsComponent\"\n  ]);\n  var _a2, _b2;\n  const [widgetState, setWidgetState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    showChat: false,\n    unreadMessages: 0,\n    showSettings: false\n  });\n  const lastAutoFocusedScreenShareTrack = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const tracks = useTracks(\n    [\n      { source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Camera, withPlaceholder: true },\n      { source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare, withPlaceholder: false }\n    ],\n    { updateOnlyOn: [livekit_client__WEBPACK_IMPORTED_MODULE_3__.RoomEvent.ActiveSpeakersChanged], onlySubscribed: false }\n  );\n  const widgetUpdate = (state) => {\n    _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"updating widget state\", state);\n    setWidgetState(state);\n  };\n  const layoutContext = useCreateLayoutContext();\n  const screenShareTracks = tracks.filter(_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference).filter((track) => track.publication.source === livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.ScreenShare);\n  const focusTrack = (_a2 = usePinnedTracks(layoutContext)) == null ? void 0 : _a2[0];\n  const carouselTracks = tracks.filter((track) => !(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isEqualTrackRef)(track, focusTrack));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var _a3, _b3, _c, _d, _e, _f;\n    if (screenShareTracks.some((track) => track.publication.isSubscribed) && lastAutoFocusedScreenShareTrack.current === null) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"Auto set screen share focus:\", { newScreenShareTrack: screenShareTracks[0] });\n      (_b3 = (_a3 = layoutContext.pin).dispatch) == null ? void 0 : _b3.call(_a3, { msg: \"set_pin\", trackReference: screenShareTracks[0] });\n      lastAutoFocusedScreenShareTrack.current = screenShareTracks[0];\n    } else if (lastAutoFocusedScreenShareTrack.current && !screenShareTracks.some(\n      (track) => {\n        var _a4, _b4;\n        return track.publication.trackSid === ((_b4 = (_a4 = lastAutoFocusedScreenShareTrack.current) == null ? void 0 : _a4.publication) == null ? void 0 : _b4.trackSid);\n      }\n    )) {\n      _livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.log.debug(\"Auto clearing screen share focus.\");\n      (_d = (_c = layoutContext.pin).dispatch) == null ? void 0 : _d.call(_c, { msg: \"clear_pin\" });\n      lastAutoFocusedScreenShareTrack.current = null;\n    }\n    if (focusTrack && !(0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(focusTrack)) {\n      const updatedFocusTrack = tracks.find(\n        (tr) => tr.participant.identity === focusTrack.participant.identity && tr.source === focusTrack.source\n      );\n      if (updatedFocusTrack !== focusTrack && (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isTrackReference)(updatedFocusTrack)) {\n        (_f = (_e = layoutContext.pin).dispatch) == null ? void 0 : _f.call(_e, { msg: \"set_pin\", trackReference: updatedFocusTrack });\n      }\n    }\n  }, [\n    screenShareTracks.map((ref) => `${ref.publication.trackSid}_${ref.publication.isSubscribed}`).join(),\n    (_b2 = focusTrack == null ? void 0 : focusTrack.publication) == null ? void 0 : _b2.trackSid,\n    tracks\n  ]);\n  useWarnAboutMissingStyles();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ className: \"lk-video-conference\" }, props), (0,_livekit_components_core__WEBPACK_IMPORTED_MODULE_1__.isWeb)() && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    LayoutContextProvider,\n    {\n      value: layoutContext,\n      onWidgetChange: widgetUpdate\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-conference-inner\" }, !focusTrack ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-grid-layout-wrapper\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(GridLayout, { tracks }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantTile, null))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-focus-layout-wrapper\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusLayoutContainer, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(CarouselLayout, { tracks: carouselTracks }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantTile, null)), focusTrack && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(FocusLayout, { trackRef: focusTrack }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ControlBar, { controls: { chat: true, settings: !!SettingsComponent } })),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      Chat,\n      {\n        style: { display: widgetState.showChat ? \"grid\" : \"none\" },\n        messageFormatter: chatMessageFormatter,\n        messageEncoder: chatMessageEncoder,\n        messageDecoder: chatMessageDecoder\n      }\n    ),\n    SettingsComponent && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"div\",\n      {\n        className: \"lk-settings-menu-modal\",\n        style: { display: widgetState.showSettings ? \"block\" : \"none\" }\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(SettingsComponent, null)\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(RoomAudioRenderer, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConnectionStateToast, null));\n}\n\n// src/prefabs/AudioConference.tsx\n\n\nfunction AudioConference(_a) {\n  var props = __objRest(_a, []);\n  const [widgetState, setWidgetState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    showChat: false,\n    unreadMessages: 0\n  });\n  const audioTracks = useTracks([livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone]);\n  useWarnAboutMissingStyles();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(LayoutContextProvider, { onWidgetChange: setWidgetState }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({ className: \"lk-audio-conference\" }, props), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-audio-conference-stage\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(TrackLoop, { tracks: audioTracks }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ParticipantAudioTile, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    ControlBar,\n    {\n      controls: { microphone: true, screenShare: false, camera: false, chat: true }\n    }\n  ), widgetState.showChat && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Chat, null)));\n}\n\n// src/prefabs/VoiceAssistantControlBar.tsx\n\n\nfunction VoiceAssistantControlBar(_a) {\n  var _b = _a, {\n    controls,\n    saveUserChoices: saveUserChoices2 = true,\n    onDeviceError\n  } = _b, props = __objRest(_b, [\n    \"controls\",\n    \"saveUserChoices\",\n    \"onDeviceError\"\n  ]);\n  var _a2;\n  const visibleControls = __spreadValues({ leave: true, microphone: true }, controls);\n  const localPermissions = useLocalParticipantPermissions();\n  const { microphoneTrack, localParticipant } = useLocalParticipant();\n  const micTrackRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    return {\n      participant: localParticipant,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone,\n      publication: microphoneTrack\n    };\n  }, [localParticipant, microphoneTrack]);\n  if (!localPermissions) {\n    visibleControls.microphone = false;\n  } else {\n    (_a2 = visibleControls.microphone) != null ? _a2 : visibleControls.microphone = localPermissions.canPublish;\n  }\n  const htmlProps = mergeProps2({ className: \"lk-agent-control-bar\" }, props);\n  const { saveAudioInputEnabled, saveAudioInputDeviceId } = usePersistentUserChoices({\n    preventSave: !saveUserChoices2\n  });\n  const microphoneOnChange = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (enabled, isUserInitiated) => {\n      if (isUserInitiated) {\n        saveAudioInputEnabled(enabled);\n      }\n    },\n    [saveAudioInputEnabled]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __spreadValues({}, htmlProps), visibleControls.microphone && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    TrackToggle,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone,\n      showIcon: true,\n      onChange: microphoneOnChange,\n      onDeviceError: (error) => onDeviceError == null ? void 0 : onDeviceError({ source: livekit_client__WEBPACK_IMPORTED_MODULE_3__.Track.Source.Microphone, error })\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(BarVisualizer, { trackRef: micTrackRef, barCount: 7, options: { minHeight: 5 } })\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    MediaDeviceMenu,\n    {\n      kind: \"audioinput\",\n      onActiveDeviceChange: (_kind, deviceId) => saveAudioInputDeviceId(deviceId != null ? deviceId : \"\")\n    }\n  ))), visibleControls.leave && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(DisconnectButton, null, \"Disconnect\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(StartMediaButton, null));\n}\n\n// src/index.ts\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ2lDOztBQUVqQztBQUNpQzs7QUFFakM7QUFDK0I7QUFDL0I7QUFDQSxzQkFBc0IseUNBQVk7QUFDbEMsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrREFBcUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7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QkFBMEIsZ0RBQXNCLFVBQVUsd0NBQXdDLGtCQUFrQixnREFBc0IsY0FBYyxxQkFBcUIsa0JBQWtCLGdEQUFzQixnREFBZ0QsZ0RBQXNCO0FBQ3ZlO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSw2Q0FBNkMsZ0RBQXNCO0FBQ25FOztBQUVBO0FBQ2tEO0FBQ2hCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQywrQkFBK0I7QUFDMUU7QUFDQSxVQUFVLG9DQUFvQztBQUM5QyxzQkFBc0IsMENBQWdCO0FBQ3RDO0FBQ0E7QUFDQSxjQUFjLGlEQUFPO0FBQ3JCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0Esa0NBQWtDLG1DQUFtQztBQUNyRSxVQUFVLGdEQUFnRDtBQUMxRDtBQUNBLEdBQUc7QUFDSCw2QkFBNkIsOENBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQXNCLHlCQUF5Qiw0REFBNEQsZ0RBQXNCLFVBQVUsOEJBQThCLGtCQUFrQixnREFBc0I7QUFDMU87QUFDQTtBQUNBLGNBQWMsaURBQU87QUFDckI7QUFDQTtBQUNBLGlGQUFpRixRQUFRLGlEQUFPLDJCQUEyQjtBQUMzSCxLQUFLO0FBQ0wsb0JBQW9CLGdEQUFzQixrQkFBa0IsK0NBQStDLGdCQUFnQjtBQUMzSCxxQkFBcUIsZ0RBQXNCLFVBQVUsbUNBQW1DLGtCQUFrQixnREFBc0I7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnREFBc0Isd0RBQXdELGdEQUFzQjtBQUNwSjs7QUFFQTtBQUMrRztBQXlJN0c7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWNvbXBhbmlvbi8uL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3QvaW5kZXgubWpzPzI4MWIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycztcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xudmFyIF9fc3ByZWFkUHJvcHMgPSAoYSwgYikgPT4gX19kZWZQcm9wcyhhLCBfX2dldE93blByb3BEZXNjcyhiKSk7XG52YXIgX19vYmpSZXN0ID0gKHNvdXJjZSwgZXhjbHVkZSkgPT4ge1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIGZvciAodmFyIHByb3AgaW4gc291cmNlKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChzb3VyY2UsIHByb3ApICYmIGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDApXG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIGlmIChzb3VyY2UgIT0gbnVsbCAmJiBfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhzb3VyY2UpKSB7XG4gICAgICBpZiAoZXhjbHVkZS5pbmRleE9mKHByb3ApIDwgMCAmJiBfX3Byb3BJc0VudW0uY2FsbChzb3VyY2UsIHByb3ApKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbnZhciBfX2FzeW5jID0gKF9fdGhpcywgX19hcmd1bWVudHMsIGdlbmVyYXRvcikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHZhciBmdWxmaWxsZWQgPSAodmFsdWUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlamVjdGVkID0gKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgc3RlcCA9ICh4KSA9PiB4LmRvbmUgPyByZXNvbHZlKHgudmFsdWUpIDogUHJvbWlzZS5yZXNvbHZlKHgudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KF9fdGhpcywgX19hcmd1bWVudHMpKS5uZXh0KCkpO1xuICB9KTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL0NsZWFyUGluQnV0dG9uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q1NiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2hvb2tzL3VzZUF1ZGlvUGxheWJhY2sudHNcbmltcG9ydCAqIGFzIFJlYWN0MTAgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9ob29rcy9pbnRlcm5hbC91c2VSZXNpemVPYnNlcnZlci50c1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlTGF0ZXN0ID0gKGN1cnJlbnQpID0+IHtcbiAgY29uc3Qgc3RvcmVkVmFsdWUgPSBSZWFjdC51c2VSZWYoY3VycmVudCk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3RvcmVkVmFsdWUuY3VycmVudCA9IGN1cnJlbnQ7XG4gIH0pO1xuICByZXR1cm4gc3RvcmVkVmFsdWU7XG59O1xuZnVuY3Rpb24gdXNlUmVzaXplT2JzZXJ2ZXIodGFyZ2V0LCBjYWxsYmFjaykge1xuICBjb25zdCByZXNpemVPYnNlcnZlciA9IGdldFJlc2l6ZU9ic2VydmVyKCk7XG4gIGNvbnN0IHN0b3JlZENhbGxiYWNrID0gdXNlTGF0ZXN0KGNhbGxiYWNrKTtcbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBsZXQgZGlkVW5zdWJzY3JpYmUgPSBmYWxzZTtcbiAgICBjb25zdCB0YXJnZXRFbCA9IHRhcmdldC5jdXJyZW50O1xuICAgIGlmICghdGFyZ2V0RWwpIHJldHVybjtcbiAgICBmdW5jdGlvbiBjYihlbnRyeSwgb2JzZXJ2ZXIpIHtcbiAgICAgIGlmIChkaWRVbnN1YnNjcmliZSkgcmV0dXJuO1xuICAgICAgc3RvcmVkQ2FsbGJhY2suY3VycmVudChlbnRyeSwgb2JzZXJ2ZXIpO1xuICAgIH1cbiAgICByZXNpemVPYnNlcnZlciA9PSBudWxsID8gdm9pZCAwIDogcmVzaXplT2JzZXJ2ZXIuc3Vic2NyaWJlKHRhcmdldEVsLCBjYik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRpZFVuc3Vic2NyaWJlID0gdHJ1ZTtcbiAgICAgIHJlc2l6ZU9ic2VydmVyID09IG51bGwgPyB2b2lkIDAgOiByZXNpemVPYnNlcnZlci51bnN1YnNjcmliZSh0YXJnZXRFbCwgY2IpO1xuICAgIH07XG4gIH0sIFt0YXJnZXQuY3VycmVudCwgcmVzaXplT2JzZXJ2ZXIsIHN0b3JlZENhbGxiYWNrXSk7XG4gIHJldHVybiByZXNpemVPYnNlcnZlciA9PSBudWxsID8gdm9pZCAwIDogcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBjcmVhdGVSZXNpemVPYnNlcnZlcigpIHtcbiAgbGV0IHRpY2tpbmcgPSBmYWxzZTtcbiAgbGV0IGFsbEVudHJpZXMgPSBbXTtcbiAgY29uc3QgY2FsbGJhY2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMsIG9icykgPT4ge1xuICAgIGFsbEVudHJpZXMgPSBhbGxFbnRyaWVzLmNvbmNhdChlbnRyaWVzKTtcbiAgICBpZiAoIXRpY2tpbmcpIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCB0cmlnZ2VyZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodHJpZ2dlcmVkLmhhcyhhbGxFbnRyaWVzW2ldLnRhcmdldCkpIGNvbnRpbnVlO1xuICAgICAgICAgIHRyaWdnZXJlZC5hZGQoYWxsRW50cmllc1tpXS50YXJnZXQpO1xuICAgICAgICAgIGNvbnN0IGNicyA9IGNhbGxiYWNrcy5nZXQoYWxsRW50cmllc1tpXS50YXJnZXQpO1xuICAgICAgICAgIGNicyA9PSBudWxsID8gdm9pZCAwIDogY2JzLmZvckVhY2goKGNiKSA9PiBjYihhbGxFbnRyaWVzW2ldLCBvYnMpKTtcbiAgICAgICAgfVxuICAgICAgICBhbGxFbnRyaWVzID0gW107XG4gICAgICAgIHRpY2tpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aWNraW5nID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgb2JzZXJ2ZXIsXG4gICAgc3Vic2NyaWJlKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTtcbiAgICAgIGNvbnN0IGNicyA9IChfYSA9IGNhbGxiYWNrcy5nZXQodGFyZ2V0KSkgIT0gbnVsbCA/IF9hIDogW107XG4gICAgICBjYnMucHVzaChjYWxsYmFjayk7XG4gICAgICBjYWxsYmFja3Muc2V0KHRhcmdldCwgY2JzKTtcbiAgICB9LFxuICAgIHVuc3Vic2NyaWJlKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGNicyA9IChfYSA9IGNhbGxiYWNrcy5nZXQodGFyZ2V0KSkgIT0gbnVsbCA/IF9hIDogW107XG4gICAgICBpZiAoY2JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBvYnNlcnZlci51bm9ic2VydmUodGFyZ2V0KTtcbiAgICAgICAgY2FsbGJhY2tzLmRlbGV0ZSh0YXJnZXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjYkluZGV4ID0gY2JzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgaWYgKGNiSW5kZXggIT09IC0xKSBjYnMuc3BsaWNlKGNiSW5kZXgsIDEpO1xuICAgICAgY2FsbGJhY2tzLnNldCh0YXJnZXQsIGNicyk7XG4gICAgfVxuICB9O1xufVxudmFyIF9yZXNpemVPYnNlcnZlcjtcbnZhciBnZXRSZXNpemVPYnNlcnZlciA9ICgpID0+ICFfcmVzaXplT2JzZXJ2ZXIgPyBfcmVzaXplT2JzZXJ2ZXIgPSBjcmVhdGVSZXNpemVPYnNlcnZlcigpIDogX3Jlc2l6ZU9ic2VydmVyO1xudmFyIHVzZVNpemUgPSAodGFyZ2V0KSA9PiB7XG4gIGNvbnN0IFtzaXplLCBzZXRTaXplXSA9IFJlYWN0LnVzZVN0YXRlKHsgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAodGFyZ2V0LmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGFyZ2V0LmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBzZXRTaXplKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICB9XG4gIH0sIFt0YXJnZXQuY3VycmVudF0pO1xuICBjb25zdCByZXNpemVDYWxsYmFjayA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChlbnRyeSkgPT4gc2V0U2l6ZShlbnRyeS5jb250ZW50UmVjdCksXG4gICAgW11cbiAgKTtcbiAgdXNlUmVzaXplT2JzZXJ2ZXIodGFyZ2V0LCByZXNpemVDYWxsYmFjayk7XG4gIHJldHVybiBzaXplO1xufTtcblxuLy8gc3JjL2hvb2tzL2ludGVybmFsL3VzZU9ic2VydmFibGVTdGF0ZS50c1xuaW1wb3J0ICogYXMgUmVhY3QyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlT2JzZXJ2YWJsZVN0YXRlKG9ic2VydmFibGUsIHN0YXJ0V2l0aCwgcmVzZXRXaGVuT2JzZXJ2YWJsZUNoYW5nZXMgPSB0cnVlKSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gUmVhY3QyLnVzZVN0YXRlKHN0YXJ0V2l0aCk7XG4gIFJlYWN0Mi51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZXNldFdoZW5PYnNlcnZhYmxlQ2hhbmdlcykge1xuICAgICAgc2V0U3RhdGUoc3RhcnRXaXRoKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIW9ic2VydmFibGUpIHJldHVybjtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZShzZXRTdGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9LCBbb2JzZXJ2YWJsZSwgcmVzZXRXaGVuT2JzZXJ2YWJsZUNoYW5nZXNdKTtcbiAgcmV0dXJuIHN0YXRlO1xufVxuXG4vLyBzcmMvaG9va3MvaW50ZXJuYWwvdXNlTWVkaWFRdWVyeS50c1xuaW1wb3J0ICogYXMgUmVhY3QzIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTWVkaWFRdWVyeShxdWVyeSkge1xuICBjb25zdCBnZXRNYXRjaGVzID0gKHF1ZXJ5MikgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEocXVlcnkyKS5tYXRjaGVzO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIGNvbnN0IFttYXRjaGVzLCBzZXRNYXRjaGVzXSA9IFJlYWN0My51c2VTdGF0ZShnZXRNYXRjaGVzKHF1ZXJ5KSk7XG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSgpIHtcbiAgICBzZXRNYXRjaGVzKGdldE1hdGNoZXMocXVlcnkpKTtcbiAgfVxuICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBtYXRjaE1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEocXVlcnkpO1xuICAgIGhhbmRsZUNoYW5nZSgpO1xuICAgIGlmIChtYXRjaE1lZGlhLmFkZExpc3RlbmVyKSB7XG4gICAgICBtYXRjaE1lZGlhLmFkZExpc3RlbmVyKGhhbmRsZUNoYW5nZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdGNoTWVkaWEuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVDaGFuZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKG1hdGNoTWVkaWEucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgICAgbWF0Y2hNZWRpYS5yZW1vdmVMaXN0ZW5lcihoYW5kbGVDaGFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0Y2hNZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3F1ZXJ5XSk7XG4gIHJldHVybiBtYXRjaGVzO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlQXVkaW9QbGF5YmFjay50c1xuaW1wb3J0IHsgcm9vbUF1ZGlvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcblxuLy8gc3JjL2NvbnRleHQvbGF5b3V0LWNvbnRleHQudHNcbmltcG9ydCB7IFBJTl9ERUZBVUxUX1NUQVRFLCBXSURHRVRfREVGQVVMVF9TVEFURSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NCBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2NvbnRleHQvY2hhdC1jb250ZXh0LnRzXG5mdW5jdGlvbiBjaGF0UmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24ubXNnID09PSBcInNob3dfY2hhdFwiKSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwgeyBzaG93Q2hhdDogdHJ1ZSwgdW5yZWFkTWVzc2FnZXM6IDAgfSk7XG4gIH0gZWxzZSBpZiAoYWN0aW9uLm1zZyA9PT0gXCJoaWRlX2NoYXRcIikge1xuICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSksIHsgc2hvd0NoYXQ6IGZhbHNlIH0pO1xuICB9IGVsc2UgaWYgKGFjdGlvbi5tc2cgPT09IFwidG9nZ2xlX2NoYXRcIikge1xuICAgIGNvbnN0IG5ld1N0YXRlID0gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgc3RhdGUpLCB7IHNob3dDaGF0OiAhc3RhdGUuc2hvd0NoYXQgfSk7XG4gICAgaWYgKG5ld1N0YXRlLnNob3dDaGF0ID09PSB0cnVlKSB7XG4gICAgICBuZXdTdGF0ZS51bnJlYWRNZXNzYWdlcyA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgfSBlbHNlIGlmIChhY3Rpb24ubXNnID09PSBcInVucmVhZF9tc2dcIikge1xuICAgIHJldHVybiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSksIHsgdW5yZWFkTWVzc2FnZXM6IGFjdGlvbi5jb3VudCB9KTtcbiAgfSBlbHNlIGlmIChhY3Rpb24ubXNnID09PSBcInRvZ2dsZV9zZXR0aW5nc1wiKSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKSwgeyBzaG93U2V0dGluZ3M6ICFzdGF0ZS5zaG93U2V0dGluZ3MgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkVmFsdWVzKHt9LCBzdGF0ZSk7XG4gIH1cbn1cblxuLy8gc3JjL2NvbnRleHQvcGluLWNvbnRleHQudHNcbmZ1bmN0aW9uIHBpblJlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xuICBpZiAoYWN0aW9uLm1zZyA9PT0gXCJzZXRfcGluXCIpIHtcbiAgICByZXR1cm4gW2FjdGlvbi50cmFja1JlZmVyZW5jZV07XG4gIH0gZWxzZSBpZiAoYWN0aW9uLm1zZyA9PT0gXCJjbGVhcl9waW5cIikge1xuICAgIHJldHVybiBbXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gX19zcHJlYWRWYWx1ZXMoe30sIHN0YXRlKTtcbiAgfVxufVxuXG4vLyBzcmMvY29udGV4dC9sYXlvdXQtY29udGV4dC50c1xudmFyIExheW91dENvbnRleHQgPSBSZWFjdDQuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gdXNlTGF5b3V0Q29udGV4dCgpIHtcbiAgY29uc3QgbGF5b3V0Q29udGV4dCA9IFJlYWN0NC51c2VDb250ZXh0KExheW91dENvbnRleHQpO1xuICBpZiAoIWxheW91dENvbnRleHQpIHtcbiAgICB0aHJvdyBFcnJvcihcIlRyaWVkIHRvIGFjY2VzcyBMYXlvdXRDb250ZXh0IGNvbnRleHQgb3V0c2lkZSBhIExheW91dENvbnRleHRQcm92aWRlciBwcm92aWRlci5cIik7XG4gIH1cbiAgcmV0dXJuIGxheW91dENvbnRleHQ7XG59XG5mdW5jdGlvbiB1c2VFbnN1cmVMYXlvdXRDb250ZXh0KGxheW91dENvbnRleHQpIHtcbiAgY29uc3QgbGF5b3V0ID0gdXNlTWF5YmVMYXlvdXRDb250ZXh0KCk7XG4gIGxheW91dENvbnRleHQgIT0gbnVsbCA/IGxheW91dENvbnRleHQgOiBsYXlvdXRDb250ZXh0ID0gbGF5b3V0O1xuICBpZiAoIWxheW91dENvbnRleHQpIHtcbiAgICB0aHJvdyBFcnJvcihcIlRyaWVkIHRvIGFjY2VzcyBMYXlvdXRDb250ZXh0IGNvbnRleHQgb3V0c2lkZSBhIExheW91dENvbnRleHRQcm92aWRlciBwcm92aWRlci5cIik7XG4gIH1cbiAgcmV0dXJuIGxheW91dENvbnRleHQ7XG59XG5mdW5jdGlvbiB1c2VDcmVhdGVMYXlvdXRDb250ZXh0KCkge1xuICBjb25zdCBbcGluU3RhdGUsIHBpbkRpc3BhdGNoXSA9IFJlYWN0NC51c2VSZWR1Y2VyKHBpblJlZHVjZXIsIFBJTl9ERUZBVUxUX1NUQVRFKTtcbiAgY29uc3QgW3dpZGdldFN0YXRlLCB3aWRnZXREaXNwYXRjaF0gPSBSZWFjdDQudXNlUmVkdWNlcihjaGF0UmVkdWNlciwgV0lER0VUX0RFRkFVTFRfU1RBVEUpO1xuICByZXR1cm4ge1xuICAgIHBpbjogeyBkaXNwYXRjaDogcGluRGlzcGF0Y2gsIHN0YXRlOiBwaW5TdGF0ZSB9LFxuICAgIHdpZGdldDogeyBkaXNwYXRjaDogd2lkZ2V0RGlzcGF0Y2gsIHN0YXRlOiB3aWRnZXRTdGF0ZSB9XG4gIH07XG59XG5mdW5jdGlvbiB1c2VFbnN1cmVDcmVhdGVMYXlvdXRDb250ZXh0KGxheW91dENvbnRleHQpIHtcbiAgY29uc3QgW3BpblN0YXRlLCBwaW5EaXNwYXRjaF0gPSBSZWFjdDQudXNlUmVkdWNlcihwaW5SZWR1Y2VyLCBQSU5fREVGQVVMVF9TVEFURSk7XG4gIGNvbnN0IFt3aWRnZXRTdGF0ZSwgd2lkZ2V0RGlzcGF0Y2hdID0gUmVhY3Q0LnVzZVJlZHVjZXIoY2hhdFJlZHVjZXIsIFdJREdFVF9ERUZBVUxUX1NUQVRFKTtcbiAgcmV0dXJuIGxheW91dENvbnRleHQgIT0gbnVsbCA/IGxheW91dENvbnRleHQgOiB7XG4gICAgcGluOiB7IGRpc3BhdGNoOiBwaW5EaXNwYXRjaCwgc3RhdGU6IHBpblN0YXRlIH0sXG4gICAgd2lkZ2V0OiB7IGRpc3BhdGNoOiB3aWRnZXREaXNwYXRjaCwgc3RhdGU6IHdpZGdldFN0YXRlIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHVzZU1heWJlTGF5b3V0Q29udGV4dCgpIHtcbiAgcmV0dXJuIFJlYWN0NC51c2VDb250ZXh0KExheW91dENvbnRleHQpO1xufVxuXG4vLyBzcmMvY29udGV4dC9wYXJ0aWNpcGFudC1jb250ZXh0LnRzXG5pbXBvcnQgKiBhcyBSZWFjdDYgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb250ZXh0L3RyYWNrLXJlZmVyZW5jZS1jb250ZXh0LnRzXG5pbXBvcnQgKiBhcyBSZWFjdDUgZnJvbSBcInJlYWN0XCI7XG52YXIgVHJhY2tSZWZDb250ZXh0ID0gUmVhY3Q1LmNyZWF0ZUNvbnRleHQoXG4gIHZvaWQgMFxuKTtcbmZ1bmN0aW9uIHVzZVRyYWNrUmVmQ29udGV4dCgpIHtcbiAgY29uc3QgdHJhY2tSZWZlcmVuY2UgPSBSZWFjdDUudXNlQ29udGV4dChUcmFja1JlZkNvbnRleHQpO1xuICBpZiAoIXRyYWNrUmVmZXJlbmNlKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgdHJhY2sgY29udGV4dCBvdXRzaWRlIG9mIHRyYWNrIGNvbnRleHQgcHJvdmlkZXJcIik7XG4gIH1cbiAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlO1xufVxuZnVuY3Rpb24gdXNlTWF5YmVUcmFja1JlZkNvbnRleHQoKSB7XG4gIHJldHVybiBSZWFjdDUudXNlQ29udGV4dChUcmFja1JlZkNvbnRleHQpO1xufVxuZnVuY3Rpb24gdXNlRW5zdXJlVHJhY2tSZWYodHJhY2tSZWYpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCk7XG4gIGNvbnN0IHJlZiA9IHRyYWNrUmVmICE9IG51bGwgPyB0cmFja1JlZiA6IGNvbnRleHQ7XG4gIGlmICghcmVmKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJObyBUcmFja1JlZiwgbWFrZSBzdXJlIHlvdSBhcmUgaW5zaWRlIGEgVHJhY2tSZWZDb250ZXh0IG9yIHBhc3MgdGhlIFRyYWNrUmVmIGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHJlZjtcbn1cblxuLy8gc3JjL2NvbnRleHQvcGFydGljaXBhbnQtY29udGV4dC50c1xudmFyIFBhcnRpY2lwYW50Q29udGV4dCA9IFJlYWN0Ni5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiB1c2VQYXJ0aWNpcGFudENvbnRleHQoKSB7XG4gIGNvbnN0IHBhcnRpY2lwYW50ID0gUmVhY3Q2LnVzZUNvbnRleHQoUGFydGljaXBhbnRDb250ZXh0KTtcbiAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIHBhcnRpY2lwYW50IGNvbnRleHQgb3V0c2lkZSBvZiBwYXJ0aWNpcGFudCBjb250ZXh0IHByb3ZpZGVyXCIpO1xuICB9XG4gIHJldHVybiBwYXJ0aWNpcGFudDtcbn1cbmZ1bmN0aW9uIHVzZU1heWJlUGFydGljaXBhbnRDb250ZXh0KCkge1xuICByZXR1cm4gUmVhY3Q2LnVzZUNvbnRleHQoUGFydGljaXBhbnRDb250ZXh0KTtcbn1cbmZ1bmN0aW9uIHVzZUVuc3VyZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgY29udGV4dCA9IHVzZU1heWJlUGFydGljaXBhbnRDb250ZXh0KCk7XG4gIGNvbnN0IHRyYWNrQ29udGV4dCA9IHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCk7XG4gIGNvbnN0IHAgPSAoX2EgPSBwYXJ0aWNpcGFudCAhPSBudWxsID8gcGFydGljaXBhbnQgOiBjb250ZXh0KSAhPSBudWxsID8gX2EgOiB0cmFja0NvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrQ29udGV4dC5wYXJ0aWNpcGFudDtcbiAgaWYgKCFwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJObyBwYXJ0aWNpcGFudCBwcm92aWRlZCwgbWFrZSBzdXJlIHlvdSBhcmUgaW5zaWRlIGEgcGFydGljaXBhbnQgY29udGV4dCBvciBwYXNzIHRoZSBwYXJ0aWNpcGFudCBleHBsaWNpdGx5XCJcbiAgICApO1xuICB9XG4gIHJldHVybiBwO1xufVxuXG4vLyBzcmMvY29udGV4dC9yb29tLWNvbnRleHQudHNcbmltcG9ydCAqIGFzIFJlYWN0NyBmcm9tIFwicmVhY3RcIjtcbnZhciBSb29tQ29udGV4dCA9IFJlYWN0Ny5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiB1c2VSb29tQ29udGV4dCgpIHtcbiAgY29uc3QgY3R4ID0gUmVhY3Q3LnVzZUNvbnRleHQoUm9vbUNvbnRleHQpO1xuICBpZiAoIWN0eCkge1xuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIHJvb20gY29udGV4dCBvdXRzaWRlIG9mIGxpdmVraXQgcm9vbSBjb21wb25lbnRcIik7XG4gIH1cbiAgcmV0dXJuIGN0eDtcbn1cbmZ1bmN0aW9uIHVzZU1heWJlUm9vbUNvbnRleHQoKSB7XG4gIHJldHVybiBSZWFjdDcudXNlQ29udGV4dChSb29tQ29udGV4dCk7XG59XG5mdW5jdGlvbiB1c2VFbnN1cmVSb29tKHJvb20pIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZU1heWJlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgciA9IHJvb20gIT0gbnVsbCA/IHJvb20gOiBjb250ZXh0O1xuICBpZiAoIXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIHJvb20gcHJvdmlkZWQsIG1ha2Ugc3VyZSB5b3UgYXJlIGluc2lkZSBhIFJvb20gY29udGV4dCBvciBwYXNzIHRoZSByb29tIGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHI7XG59XG5cbi8vIHNyYy9jb250ZXh0L2ZlYXR1cmUtY29udGV4dC50c1xuaW1wb3J0ICogYXMgUmVhY3Q4IGZyb20gXCJyZWFjdFwiO1xudmFyIExLRmVhdHVyZUNvbnRleHQgPSBSZWFjdDguY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gdXNlRmVhdHVyZUNvbnRleHQocmVxdWlyZTIpIHtcbiAgY29uc3QgY3R4ID0gUmVhY3Q4LnVzZUNvbnRleHQoTEtGZWF0dXJlQ29udGV4dCk7XG4gIGlmIChyZXF1aXJlMiA9PT0gdHJ1ZSkge1xuICAgIGlmIChjdHgpIHtcbiAgICAgIHJldHVybiBjdHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIGZlYXR1cmUgY29udGV4dCwgYnV0IG5vbmUgaXMgcHJlc2VudFwiKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGN0eDtcbn1cblxuLy8gc3JjL2NvbnRleHQvdm9pY2UtYXNzaXN0YW50LWNvbnRleHQudHNcbmltcG9ydCAqIGFzIFJlYWN0OSBmcm9tIFwicmVhY3RcIjtcbnZhciBWb2ljZUFzc2lzdGFudENvbnRleHQgPSBSZWFjdDkuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuXG4vLyBzcmMvaG9va3MvdXNlQXVkaW9QbGF5YmFjay50c1xuZnVuY3Rpb24gdXNlQXVkaW9QbGF5YmFjayhyb29tKSB7XG4gIGNvbnN0IHJvb21FbnN1cmVkID0gdXNlRW5zdXJlUm9vbShyb29tKTtcbiAgY29uc3Qgc3RhcnRBdWRpbyA9IFJlYWN0MTAudXNlQ2FsbGJhY2soKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHlpZWxkIHJvb21FbnN1cmVkLnN0YXJ0QXVkaW8oKTtcbiAgfSksIFtyb29tRW5zdXJlZF0pO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QxMC51c2VNZW1vKFxuICAgICgpID0+IHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUocm9vbUVuc3VyZWQpLFxuICAgIFtyb29tRW5zdXJlZF1cbiAgKTtcbiAgY29uc3QgeyBjYW5QbGF5QXVkaW8gfSA9IHVzZU9ic2VydmFibGVTdGF0ZShvYnNlcnZhYmxlLCB7XG4gICAgY2FuUGxheUF1ZGlvOiByb29tRW5zdXJlZC5jYW5QbGF5YmFja0F1ZGlvXG4gIH0pO1xuICByZXR1cm4geyBjYW5QbGF5QXVkaW8sIHN0YXJ0QXVkaW8gfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUNsZWFyUGluQnV0dG9uLnRzXG5pbXBvcnQgeyBzZXR1cENsZWFyUGluQnV0dG9uIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL21lcmdlUHJvcHMudHNcbmltcG9ydCBjbHN4IGZyb20gXCJjbHN4XCI7XG5mdW5jdGlvbiBjaGFpbiguLi5jYWxsYmFja3MpIHtcbiAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlUHJvcHMoLi4uYXJncykge1xuICBjb25zdCByZXN1bHQgPSBfX3NwcmVhZFZhbHVlcyh7fSwgYXJnc1swXSk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHByb3BzID0gYXJnc1tpXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgY29uc3QgYSA9IHJlc3VsdFtrZXldO1xuICAgICAgY29uc3QgYiA9IHByb3BzW2tleV07XG4gICAgICBpZiAodHlwZW9mIGEgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgYiA9PT0gXCJmdW5jdGlvblwiICYmIC8vIFRoaXMgaXMgYSBsb3QgZmFzdGVyIHRoYW4gYSByZWdleC5cbiAgICAgIGtleVswXSA9PT0gXCJvXCIgJiYga2V5WzFdID09PSBcIm5cIiAmJiBrZXkuY2hhckNvZGVBdCgyKSA+PSAvKiAnQScgKi9cbiAgICAgIDY1ICYmIGtleS5jaGFyQ29kZUF0KDIpIDw9IC8qICdaJyAqL1xuICAgICAgOTApIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBjaGFpbihhLCBiKTtcbiAgICAgIH0gZWxzZSBpZiAoKGtleSA9PT0gXCJjbGFzc05hbWVcIiB8fCBrZXkgPT09IFwiVU5TQUZFX2NsYXNzTmFtZVwiKSAmJiB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXN1bHRba2V5XSA9IGNsc3goYSwgYik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRba2V5XSA9IGIgIT09IHZvaWQgMCA/IGIgOiBhO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlQ2xlYXJQaW5CdXR0b24udHNcbmZ1bmN0aW9uIHVzZUNsZWFyUGluQnV0dG9uKHByb3BzKSB7XG4gIGNvbnN0IHsgc3RhdGUsIGRpc3BhdGNoIH0gPSB1c2VMYXlvdXRDb250ZXh0KCkucGluO1xuICBjb25zdCBidXR0b25Qcm9wcyA9IFJlYWN0MTEudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUgfSA9IHNldHVwQ2xlYXJQaW5CdXR0b24oKTtcbiAgICBjb25zdCBtZXJnZWRQcm9wcyA9IG1lcmdlUHJvcHMocHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGRpc2FibGVkOiAhKHN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS5sZW5ndGgpLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBpZiAoZGlzcGF0Y2gpIGRpc3BhdGNoKHsgbXNnOiBcImNsZWFyX3BpblwiIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtZXJnZWRQcm9wcztcbiAgfSwgW3Byb3BzLCBkaXNwYXRjaCwgc3RhdGVdKTtcbiAgcmV0dXJuIHsgYnV0dG9uUHJvcHMgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUNvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yLnRzXG5pbXBvcnQgeyBzZXR1cENvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0IHsgQ29ubmVjdGlvblF1YWxpdHkgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTIgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvcihvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KG9wdGlvbnMucGFydGljaXBhbnQpO1xuICBjb25zdCB7IGNsYXNzTmFtZSwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlciB9ID0gUmVhY3QxMi51c2VNZW1vKFxuICAgICgpID0+IHNldHVwQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IocCksXG4gICAgW3BdXG4gICk7XG4gIGNvbnN0IHF1YWxpdHkgPSB1c2VPYnNlcnZhYmxlU3RhdGUoY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlciwgQ29ubmVjdGlvblF1YWxpdHkuVW5rbm93bik7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgcXVhbGl0eSB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlQ29ubmVjdGlvblN0YXR1cy50c1xuaW1wb3J0IHsgY29ubmVjdGlvblN0YXRlT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEzIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlQ29ubmVjdGlvblN0YXRlKHJvb20pIHtcbiAgY29uc3QgciA9IHVzZUVuc3VyZVJvb20ocm9vbSk7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBSZWFjdDEzLnVzZU1lbW8oKCkgPT4gY29ubmVjdGlvblN0YXRlT2JzZXJ2ZXIociksIFtyXSk7XG4gIGNvbnN0IGNvbm5lY3Rpb25TdGF0ZSA9IHVzZU9ic2VydmFibGVTdGF0ZShvYnNlcnZhYmxlLCByLnN0YXRlKTtcbiAgcmV0dXJuIGNvbm5lY3Rpb25TdGF0ZTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZURhdGFDaGFubmVsLnRzXG5pbXBvcnQgeyBzZXR1cERhdGFNZXNzYWdlSGFuZGxlciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTQgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VEYXRhQ2hhbm5lbCh0b3BpY09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gIGNvbnN0IG9uTWVzc2FnZSA9IHR5cGVvZiB0b3BpY09yQ2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIiA/IHRvcGljT3JDYWxsYmFjayA6IGNhbGxiYWNrO1xuICBjb25zdCB0b3BpYyA9IHR5cGVvZiB0b3BpY09yQ2FsbGJhY2sgPT09IFwic3RyaW5nXCIgPyB0b3BpY09yQ2FsbGJhY2sgOiB2b2lkIDA7XG4gIGNvbnN0IHJvb20gPSB1c2VSb29tQ29udGV4dCgpO1xuICBjb25zdCB7IHNlbmQsIG1lc3NhZ2VPYnNlcnZhYmxlLCBpc1NlbmRpbmdPYnNlcnZhYmxlIH0gPSBSZWFjdDE0LnVzZU1lbW8oXG4gICAgKCkgPT4gc2V0dXBEYXRhTWVzc2FnZUhhbmRsZXIocm9vbSwgdG9waWMsIG9uTWVzc2FnZSksXG4gICAgW3Jvb20sIHRvcGljLCBvbk1lc3NhZ2VdXG4gICk7XG4gIGNvbnN0IG1lc3NhZ2UgPSB1c2VPYnNlcnZhYmxlU3RhdGUobWVzc2FnZU9ic2VydmFibGUsIHZvaWQgMCk7XG4gIGNvbnN0IGlzU2VuZGluZyA9IHVzZU9ic2VydmFibGVTdGF0ZShpc1NlbmRpbmdPYnNlcnZhYmxlLCBmYWxzZSk7XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZSxcbiAgICBzZW5kLFxuICAgIGlzU2VuZGluZ1xuICB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlRGlzY29ubmVjdEJ1dHRvbi50c1xuaW1wb3J0IHsgc2V0dXBEaXNjb25uZWN0QnV0dG9uIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0IHsgQ29ubmVjdGlvblN0YXRlIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDE1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlRGlzY29ubmVjdEJ1dHRvbihwcm9wcykge1xuICBjb25zdCByb29tID0gdXNlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgY29ubmVjdGlvblN0YXRlID0gdXNlQ29ubmVjdGlvblN0YXRlKHJvb20pO1xuICBjb25zdCBidXR0b25Qcm9wcyA9IFJlYWN0MTUudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIGRpc2Nvbm5lY3QgfSA9IHNldHVwRGlzY29ubmVjdEJ1dHRvbihyb29tKTtcbiAgICBjb25zdCBtZXJnZWRQcm9wcyA9IG1lcmdlUHJvcHMocHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gZGlzY29ubmVjdCgoX2EgPSBwcm9wcy5zdG9wVHJhY2tzKSAhPSBudWxsID8gX2EgOiB0cnVlKTtcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlZDogY29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkXG4gICAgfSk7XG4gICAgcmV0dXJuIG1lcmdlZFByb3BzO1xuICB9LCBbcm9vbSwgcHJvcHMsIGNvbm5lY3Rpb25TdGF0ZV0pO1xuICByZXR1cm4geyBidXR0b25Qcm9wcyB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlRmFjaW5nTW9kZS50c1xuaW1wb3J0IHsgTG9jYWxUcmFja1B1YmxpY2F0aW9uLCBmYWNpbmdNb2RlRnJvbUxvY2FsVHJhY2sgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIHVzZUZhY2luZ01vZGUodHJhY2tSZWZlcmVuY2UpIHtcbiAgaWYgKHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uIGluc3RhbmNlb2YgTG9jYWxUcmFja1B1YmxpY2F0aW9uKSB7XG4gICAgY29uc3QgbG9jYWxUcmFjayA9IHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uLnRyYWNrO1xuICAgIGlmIChsb2NhbFRyYWNrKSB7XG4gICAgICBjb25zdCB7IGZhY2luZ01vZGUgfSA9IGZhY2luZ01vZGVGcm9tTG9jYWxUcmFjayhsb2NhbFRyYWNrKTtcbiAgICAgIHJldHVybiBmYWNpbmdNb2RlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUZvY3VzVG9nZ2xlLnRzXG5pbXBvcnQgeyBzZXR1cEZvY3VzVG9nZ2xlLCBpc1RyYWNrUmVmZXJlbmNlUGlubmVkIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QxNiBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUZvY3VzVG9nZ2xlKHsgdHJhY2tSZWYsIHByb3BzIH0pIHtcbiAgY29uc3QgdHJhY2tSZWZlcmVuY2UgPSB1c2VFbnN1cmVUcmFja1JlZih0cmFja1JlZik7XG4gIGNvbnN0IGxheW91dENvbnRleHQgPSB1c2VNYXliZUxheW91dENvbnRleHQoKTtcbiAgY29uc3QgeyBjbGFzc05hbWUgfSA9IFJlYWN0MTYudXNlTWVtbygoKSA9PiBzZXR1cEZvY3VzVG9nZ2xlKCksIFtdKTtcbiAgY29uc3QgaW5Gb2N1cyA9IFJlYWN0MTYudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGlzVHJhY2tSZWZlcmVuY2VQaW5uZWQodHJhY2tSZWZlcmVuY2UsIGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQucGluLnN0YXRlKTtcbiAgfSwgW3RyYWNrUmVmZXJlbmNlLCBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXRDb250ZXh0LnBpbi5zdGF0ZV0pO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IFJlYWN0MTYudXNlTWVtbyhcbiAgICAoKSA9PiBtZXJnZVByb3BzKHByb3BzLCB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBvbkNsaWNrOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgKF9hID0gcHJvcHMub25DbGljaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwocHJvcHMsIGV2ZW50KTtcbiAgICAgICAgaWYgKGluRm9jdXMpIHtcbiAgICAgICAgICAoX2MgPSBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiAoX2IgPSBsYXlvdXRDb250ZXh0LnBpbikuZGlzcGF0Y2gpID09IG51bGwgPyB2b2lkIDAgOiBfYy5jYWxsKF9iLCB7XG4gICAgICAgICAgICBtc2c6IFwiY2xlYXJfcGluXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAoX2UgPSBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiAoX2QgPSBsYXlvdXRDb250ZXh0LnBpbikuZGlzcGF0Y2gpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jYWxsKF9kLCB7XG4gICAgICAgICAgICBtc2c6IFwic2V0X3BpblwiLFxuICAgICAgICAgICAgdHJhY2tSZWZlcmVuY2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuICAgIFtwcm9wcywgY2xhc3NOYW1lLCB0cmFja1JlZmVyZW5jZSwgaW5Gb2N1cywgbGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogbGF5b3V0Q29udGV4dC5waW5dXG4gICk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzLCBpbkZvY3VzIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VHcmlkTGF5b3V0LnRzXG5pbXBvcnQgeyBHUklEX0xBWU9VVFMsIHNlbGVjdEdyaWRMYXlvdXQgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDE3IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlR3JpZExheW91dChncmlkRWxlbWVudCwgdHJhY2tDb3VudCwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgZ3JpZExheW91dHMgPSAoX2EgPSBvcHRpb25zLmdyaWRMYXlvdXRzKSAhPSBudWxsID8gX2EgOiBHUklEX0xBWU9VVFM7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdXNlU2l6ZShncmlkRWxlbWVudCk7XG4gIGNvbnN0IGxheW91dCA9IHNlbGVjdEdyaWRMYXlvdXQoZ3JpZExheW91dHMsIHRyYWNrQ291bnQsIHdpZHRoLCBoZWlnaHQpO1xuICBSZWFjdDE3LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdyaWRFbGVtZW50LmN1cnJlbnQgJiYgbGF5b3V0KSB7XG4gICAgICBncmlkRWxlbWVudC5jdXJyZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1say1jb2wtY291bnRcIiwgbGF5b3V0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXQuY29sdW1ucy50b1N0cmluZygpKTtcbiAgICAgIGdyaWRFbGVtZW50LmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWxrLXJvdy1jb3VudFwiLCBsYXlvdXQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dC5yb3dzLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfSwgW2dyaWRFbGVtZW50LCBsYXlvdXRdKTtcbiAgcmV0dXJuIHtcbiAgICBsYXlvdXQsXG4gICAgY29udGFpbmVyV2lkdGg6IHdpZHRoLFxuICAgIGNvbnRhaW5lckhlaWdodDogaGVpZ2h0XG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VJc011dGVkLnRzXG5pbXBvcnQge1xuICBnZXRUcmFja1JlZmVyZW5jZUlkLFxuICBtdXRlZE9ic2VydmVyXG59IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTggZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VJc011dGVkKHNvdXJjZU9yVHJhY2tSZWYsIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBwYXNzZWRQYXJ0aWNpcGFudCA9IHR5cGVvZiBzb3VyY2VPclRyYWNrUmVmID09PSBcInN0cmluZ1wiID8gb3B0aW9ucy5wYXJ0aWNpcGFudCA6IHNvdXJjZU9yVHJhY2tSZWYucGFydGljaXBhbnQ7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChwYXNzZWRQYXJ0aWNpcGFudCk7XG4gIGNvbnN0IHJlZiA9IHR5cGVvZiBzb3VyY2VPclRyYWNrUmVmID09PSBcInN0cmluZ1wiID8geyBwYXJ0aWNpcGFudDogcCwgc291cmNlOiBzb3VyY2VPclRyYWNrUmVmIH0gOiBzb3VyY2VPclRyYWNrUmVmO1xuICBjb25zdCBbaXNNdXRlZCwgc2V0SXNNdXRlZF0gPSBSZWFjdDE4LnVzZVN0YXRlKFxuICAgICEhKCgoX2EgPSByZWYucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYS5pc011dGVkKSB8fCAoKF9iID0gcC5nZXRUcmFja1B1YmxpY2F0aW9uKHJlZi5zb3VyY2UpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaXNNdXRlZCkpXG4gICk7XG4gIFJlYWN0MTgudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IG11dGVkT2JzZXJ2ZXIocmVmKS5zdWJzY3JpYmUoc2V0SXNNdXRlZCk7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVyLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtnZXRUcmFja1JlZmVyZW5jZUlkKHJlZildKTtcbiAgcmV0dXJuIGlzTXV0ZWQ7XG59XG5cbi8vIHNyYy9ob29rcy91c2VJc1NwZWFraW5nLnRzXG5pbXBvcnQgeyBjcmVhdGVJc1NwZWFraW5nT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDE5IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlSXNTcGVha2luZyhwYXJ0aWNpcGFudCkge1xuICBjb25zdCBwID0gdXNlRW5zdXJlUGFydGljaXBhbnQocGFydGljaXBhbnQpO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QxOS51c2VNZW1vKCgpID0+IGNyZWF0ZUlzU3BlYWtpbmdPYnNlcnZlcihwKSwgW3BdKTtcbiAgY29uc3QgaXNTcGVha2luZyA9IHVzZU9ic2VydmFibGVTdGF0ZShvYnNlcnZhYmxlLCBwLmlzU3BlYWtpbmcpO1xuICByZXR1cm4gaXNTcGVha2luZztcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUxpdmVLaXRSb29tLnRzXG5pbXBvcnQgeyBsb2csIHNldHVwTGl2ZUtpdFJvb20gfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBSb29tLCBNZWRpYURldmljZUZhaWx1cmUsIFJvb21FdmVudCwgQ29ubmVjdGlvblN0YXRlIGFzIENvbm5lY3Rpb25TdGF0ZTIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MjAgZnJvbSBcInJlYWN0XCI7XG52YXIgZGVmYXVsdFJvb21Qcm9wcyA9IHtcbiAgY29ubmVjdDogdHJ1ZSxcbiAgYXVkaW86IGZhbHNlLFxuICB2aWRlbzogZmFsc2Vcbn07XG5mdW5jdGlvbiB1c2VMaXZlS2l0Um9vbShwcm9wcykge1xuICBjb25zdCBfYSA9IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBkZWZhdWx0Um9vbVByb3BzKSwgcHJvcHMpLCB7XG4gICAgdG9rZW4sXG4gICAgc2VydmVyVXJsLFxuICAgIG9wdGlvbnMsXG4gICAgcm9vbTogcGFzc2VkUm9vbSxcbiAgICBjb25uZWN0T3B0aW9ucyxcbiAgICBjb25uZWN0LFxuICAgIGF1ZGlvLFxuICAgIHZpZGVvLFxuICAgIHNjcmVlbixcbiAgICBvbkNvbm5lY3RlZCxcbiAgICBvbkRpc2Nvbm5lY3RlZCxcbiAgICBvbkVycm9yLFxuICAgIG9uTWVkaWFEZXZpY2VGYWlsdXJlLFxuICAgIG9uRW5jcnlwdGlvbkVycm9yLFxuICAgIHNpbXVsYXRlUGFydGljaXBhbnRzXG4gIH0gPSBfYSwgcmVzdCA9IF9fb2JqUmVzdChfYSwgW1xuICAgIFwidG9rZW5cIixcbiAgICBcInNlcnZlclVybFwiLFxuICAgIFwib3B0aW9uc1wiLFxuICAgIFwicm9vbVwiLFxuICAgIFwiY29ubmVjdE9wdGlvbnNcIixcbiAgICBcImNvbm5lY3RcIixcbiAgICBcImF1ZGlvXCIsXG4gICAgXCJ2aWRlb1wiLFxuICAgIFwic2NyZWVuXCIsXG4gICAgXCJvbkNvbm5lY3RlZFwiLFxuICAgIFwib25EaXNjb25uZWN0ZWRcIixcbiAgICBcIm9uRXJyb3JcIixcbiAgICBcIm9uTWVkaWFEZXZpY2VGYWlsdXJlXCIsXG4gICAgXCJvbkVuY3J5cHRpb25FcnJvclwiLFxuICAgIFwic2ltdWxhdGVQYXJ0aWNpcGFudHNcIlxuICBdKTtcbiAgaWYgKG9wdGlvbnMgJiYgcGFzc2VkUm9vbSkge1xuICAgIGxvZy53YXJuKFxuICAgICAgXCJ3aGVuIHVzaW5nIGEgbWFudWFsbHkgY3JlYXRlZCByb29tLCB0aGUgb3B0aW9ucyBvYmplY3Qgd2lsbCBiZSBpZ25vcmVkLiBzZXQgdGhlIGRlc2lyZWQgb3B0aW9ucyBkaXJlY3RseSB3aGVuIGNyZWF0aW5nIHRoZSByb29tIGluc3RlYWQuXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IFtyb29tLCBzZXRSb29tXSA9IFJlYWN0MjAudXNlU3RhdGUoKTtcbiAgUmVhY3QyMC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFJvb20ocGFzc2VkUm9vbSAhPSBudWxsID8gcGFzc2VkUm9vbSA6IG5ldyBSb29tKG9wdGlvbnMpKTtcbiAgfSwgW3Bhc3NlZFJvb21dKTtcbiAgY29uc3QgaHRtbFByb3BzID0gUmVhY3QyMC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSB9ID0gc2V0dXBMaXZlS2l0Um9vbSgpO1xuICAgIHJldHVybiBtZXJnZVByb3BzKHJlc3QsIHsgY2xhc3NOYW1lIH0pO1xuICB9LCBbcmVzdF0pO1xuICBSZWFjdDIwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFyb29tKSByZXR1cm47XG4gICAgY29uc3Qgb25TaWduYWxDb25uZWN0ZWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBsb2NhbFAgPSByb29tLmxvY2FsUGFydGljaXBhbnQ7XG4gICAgICBsb2cuZGVidWcoXCJ0cnlpbmcgdG8gcHVibGlzaCBsb2NhbCB0cmFja3NcIik7XG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGxvY2FsUC5zZXRNaWNyb3Bob25lRW5hYmxlZCghIWF1ZGlvLCB0eXBlb2YgYXVkaW8gIT09IFwiYm9vbGVhblwiID8gYXVkaW8gOiB2b2lkIDApLFxuICAgICAgICBsb2NhbFAuc2V0Q2FtZXJhRW5hYmxlZCghIXZpZGVvLCB0eXBlb2YgdmlkZW8gIT09IFwiYm9vbGVhblwiID8gdmlkZW8gOiB2b2lkIDApLFxuICAgICAgICBsb2NhbFAuc2V0U2NyZWVuU2hhcmVFbmFibGVkKCEhc2NyZWVuLCB0eXBlb2Ygc2NyZWVuICE9PSBcImJvb2xlYW5cIiA/IHNjcmVlbiA6IHZvaWQgMClcbiAgICAgIF0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGxvZy53YXJuKGUpO1xuICAgICAgICBvbkVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkVycm9yKGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVNZWRpYURldmljZUVycm9yID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IG1lZGlhRGV2aWNlRmFpbHVyZSA9IE1lZGlhRGV2aWNlRmFpbHVyZS5nZXRGYWlsdXJlKGUpO1xuICAgICAgb25NZWRpYURldmljZUZhaWx1cmUgPT0gbnVsbCA/IHZvaWQgMCA6IG9uTWVkaWFEZXZpY2VGYWlsdXJlKG1lZGlhRGV2aWNlRmFpbHVyZSk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVFbmNyeXB0aW9uRXJyb3IgPSAoZSkgPT4ge1xuICAgICAgb25FbmNyeXB0aW9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRW5jcnlwdGlvbkVycm9yKGUpO1xuICAgIH07XG4gICAgcm9vbS5vbihSb29tRXZlbnQuU2lnbmFsQ29ubmVjdGVkLCBvblNpZ25hbENvbm5lY3RlZCkub24oUm9vbUV2ZW50Lk1lZGlhRGV2aWNlc0Vycm9yLCBoYW5kbGVNZWRpYURldmljZUVycm9yKS5vbihSb29tRXZlbnQuRW5jcnlwdGlvbkVycm9yLCBoYW5kbGVFbmNyeXB0aW9uRXJyb3IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByb29tLm9mZihSb29tRXZlbnQuU2lnbmFsQ29ubmVjdGVkLCBvblNpZ25hbENvbm5lY3RlZCkub2ZmKFJvb21FdmVudC5NZWRpYURldmljZXNFcnJvciwgaGFuZGxlTWVkaWFEZXZpY2VFcnJvcikub2ZmKFJvb21FdmVudC5FbmNyeXB0aW9uRXJyb3IsIGhhbmRsZUVuY3J5cHRpb25FcnJvcik7XG4gICAgfTtcbiAgfSwgW3Jvb20sIGF1ZGlvLCB2aWRlbywgc2NyZWVuLCBvbkVycm9yLCBvbkVuY3J5cHRpb25FcnJvciwgb25NZWRpYURldmljZUZhaWx1cmVdKTtcbiAgUmVhY3QyMC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcm9vbSkgcmV0dXJuO1xuICAgIGlmIChzaW11bGF0ZVBhcnRpY2lwYW50cykge1xuICAgICAgcm9vbS5zaW11bGF0ZVBhcnRpY2lwYW50cyh7XG4gICAgICAgIHBhcnRpY2lwYW50czoge1xuICAgICAgICAgIGNvdW50OiBzaW11bGF0ZVBhcnRpY2lwYW50c1xuICAgICAgICB9LFxuICAgICAgICBwdWJsaXNoOiB7XG4gICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgdXNlUmVhbFRyYWNrczogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgbG9nLmRlYnVnKFwibm8gdG9rZW4geWV0XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXNlcnZlclVybCkge1xuICAgICAgbG9nLndhcm4oXCJubyBsaXZla2l0IHVybCBwcm92aWRlZFwiKTtcbiAgICAgIG9uRXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRXJyb3IoRXJyb3IoXCJubyBsaXZla2l0IHVybCBwcm92aWRlZFwiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb25uZWN0KSB7XG4gICAgICBsb2cuZGVidWcoXCJjb25uZWN0aW5nXCIpO1xuICAgICAgcm9vbS5jb25uZWN0KHNlcnZlclVybCwgdG9rZW4sIGNvbm5lY3RPcHRpb25zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBsb2cud2FybihlKTtcbiAgICAgICAgb25FcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25FcnJvcihlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2cuZGVidWcoXCJkaXNjb25uZWN0aW5nIGJlY2F1c2UgY29ubmVjdCBpcyBmYWxzZVwiKTtcbiAgICAgIHJvb20uZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgfSwgW1xuICAgIGNvbm5lY3QsXG4gICAgdG9rZW4sXG4gICAgSlNPTi5zdHJpbmdpZnkoY29ubmVjdE9wdGlvbnMpLFxuICAgIHJvb20sXG4gICAgb25FcnJvcixcbiAgICBzZXJ2ZXJVcmwsXG4gICAgc2ltdWxhdGVQYXJ0aWNpcGFudHNcbiAgXSk7XG4gIFJlYWN0MjAudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXJvb20pIHJldHVybjtcbiAgICBjb25zdCBjb25uZWN0aW9uU3RhdGVDaGFuZ2VMaXN0ZW5lciA9IChzdGF0ZSkgPT4ge1xuICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICBjYXNlIENvbm5lY3Rpb25TdGF0ZTIuRGlzY29ubmVjdGVkOlxuICAgICAgICAgIGlmIChvbkRpc2Nvbm5lY3RlZCkgb25EaXNjb25uZWN0ZWQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGUyLkNvbm5lY3RlZDpcbiAgICAgICAgICBpZiAob25Db25uZWN0ZWQpIG9uQ29ubmVjdGVkKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcbiAgICByb29tLm9uKFJvb21FdmVudC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLCBjb25uZWN0aW9uU3RhdGVDaGFuZ2VMaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJvb20ub2ZmKFJvb21FdmVudC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLCBjb25uZWN0aW9uU3RhdGVDaGFuZ2VMaXN0ZW5lcik7XG4gICAgfTtcbiAgfSwgW3Rva2VuLCBvbkNvbm5lY3RlZCwgb25EaXNjb25uZWN0ZWQsIHJvb21dKTtcbiAgUmVhY3QyMC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcm9vbSkgcmV0dXJuO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsb2cuaW5mbyhcImRpc2Nvbm5lY3Rpbmcgb24gb25tb3VudFwiKTtcbiAgICAgIHJvb20uZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtyb29tXSk7XG4gIHJldHVybiB7IHJvb20sIGh0bWxQcm9wcyB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlTG9jYWxQYXJ0aWNpcGFudC50c1xuaW1wb3J0IHsgb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWEgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDIxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTG9jYWxQYXJ0aWNpcGFudChvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgcm9vbSA9IHVzZUVuc3VyZVJvb20ob3B0aW9ucy5yb29tKTtcbiAgY29uc3QgW2xvY2FsUGFydGljaXBhbnQsIHNldExvY2FsUGFydGljaXBhbnRdID0gUmVhY3QyMS51c2VTdGF0ZShyb29tLmxvY2FsUGFydGljaXBhbnQpO1xuICBjb25zdCBbaXNNaWNyb3Bob25lRW5hYmxlZCwgc2V0SXNNaWNyb3Bob25lRW5hYmxlZF0gPSBSZWFjdDIxLnVzZVN0YXRlKFxuICAgIGxvY2FsUGFydGljaXBhbnQuaXNNaWNyb3Bob25lRW5hYmxlZFxuICApO1xuICBjb25zdCBbaXNDYW1lcmFFbmFibGVkLCBzZXRJc0NhbWVyYUVuYWJsZWRdID0gUmVhY3QyMS51c2VTdGF0ZShcbiAgICBsb2NhbFBhcnRpY2lwYW50LmlzTWljcm9waG9uZUVuYWJsZWRcbiAgKTtcbiAgY29uc3QgW2xhc3RNaWNyb3Bob25lRXJyb3IsIHNldExhc3RNaWNyb3Bob25lRXJyb3JdID0gUmVhY3QyMS51c2VTdGF0ZShcbiAgICBsb2NhbFBhcnRpY2lwYW50Lmxhc3RNaWNyb3Bob25lRXJyb3JcbiAgKTtcbiAgY29uc3QgW2xhc3RDYW1lcmFFcnJvciwgc2V0TGFzdENhbWVyYUVycm9yXSA9IFJlYWN0MjEudXNlU3RhdGUobG9jYWxQYXJ0aWNpcGFudC5sYXN0Q2FtZXJhRXJyb3IpO1xuICBjb25zdCBbaXNTY3JlZW5TaGFyZUVuYWJsZWQsIHNldElzU2NyZWVuU2hhcmVFbmFibGVkXSA9IFJlYWN0MjEudXNlU3RhdGUoXG4gICAgbG9jYWxQYXJ0aWNpcGFudC5pc01pY3JvcGhvbmVFbmFibGVkXG4gICk7XG4gIGNvbnN0IFttaWNyb3Bob25lVHJhY2ssIHNldE1pY3JvcGhvbmVUcmFja10gPSBSZWFjdDIxLnVzZVN0YXRlKFxuICAgIHZvaWQgMFxuICApO1xuICBjb25zdCBbY2FtZXJhVHJhY2ssIHNldENhbWVyYVRyYWNrXSA9IFJlYWN0MjEudXNlU3RhdGUodm9pZCAwKTtcbiAgY29uc3QgaGFuZGxlVXBkYXRlID0gKG1lZGlhKSA9PiB7XG4gICAgc2V0SXNDYW1lcmFFbmFibGVkKG1lZGlhLmlzQ2FtZXJhRW5hYmxlZCk7XG4gICAgc2V0SXNNaWNyb3Bob25lRW5hYmxlZChtZWRpYS5pc01pY3JvcGhvbmVFbmFibGVkKTtcbiAgICBzZXRJc1NjcmVlblNoYXJlRW5hYmxlZChtZWRpYS5pc1NjcmVlblNoYXJlRW5hYmxlZCk7XG4gICAgc2V0Q2FtZXJhVHJhY2sobWVkaWEuY2FtZXJhVHJhY2spO1xuICAgIHNldE1pY3JvcGhvbmVUcmFjayhtZWRpYS5taWNyb3Bob25lVHJhY2spO1xuICAgIHNldExhc3RNaWNyb3Bob25lRXJyb3IobWVkaWEucGFydGljaXBhbnQubGFzdE1pY3JvcGhvbmVFcnJvcik7XG4gICAgc2V0TGFzdENhbWVyYUVycm9yKG1lZGlhLnBhcnRpY2lwYW50Lmxhc3RDYW1lcmFFcnJvcik7XG4gICAgc2V0TG9jYWxQYXJ0aWNpcGFudChtZWRpYS5wYXJ0aWNpcGFudCk7XG4gIH07XG4gIFJlYWN0MjEudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKHJvb20ubG9jYWxQYXJ0aWNpcGFudCkuc3Vic2NyaWJlKGhhbmRsZVVwZGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVyLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtyb29tXSk7XG4gIHJldHVybiB7XG4gICAgaXNNaWNyb3Bob25lRW5hYmxlZCxcbiAgICBpc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICBpc0NhbWVyYUVuYWJsZWQsXG4gICAgbWljcm9waG9uZVRyYWNrLFxuICAgIGNhbWVyYVRyYWNrLFxuICAgIGxhc3RNaWNyb3Bob25lRXJyb3IsXG4gICAgbGFzdENhbWVyYUVycm9yLFxuICAgIGxvY2FsUGFydGljaXBhbnRcbiAgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUxvY2FsUGFydGljaXBhbnRQZXJtaXNzaW9ucy50c1xuaW1wb3J0IHsgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDIyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTG9jYWxQYXJ0aWNpcGFudFBlcm1pc3Npb25zKCkge1xuICBjb25zdCByb29tID0gdXNlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgcGVybWlzc2lvbk9ic2VydmVyID0gUmVhY3QyMi51c2VNZW1vKFxuICAgICgpID0+IHBhcnRpY2lwYW50UGVybWlzc2lvbk9ic2VydmVyKHJvb20ubG9jYWxQYXJ0aWNpcGFudCksXG4gICAgW3Jvb21dXG4gICk7XG4gIGNvbnN0IHBlcm1pc3Npb25zID0gdXNlT2JzZXJ2YWJsZVN0YXRlKHBlcm1pc3Npb25PYnNlcnZlciwgcm9vbS5sb2NhbFBhcnRpY2lwYW50LnBlcm1pc3Npb25zKTtcbiAgcmV0dXJuIHBlcm1pc3Npb25zO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlTWVkaWFEZXZpY2VTZWxlY3QudHNcbmltcG9ydCB7IGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIsIHNldHVwRGV2aWNlU2VsZWN0b3IsIGxvZyBhcyBsb2cyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QyMyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZU1lZGlhRGV2aWNlU2VsZWN0KHtcbiAga2luZCxcbiAgcm9vbSxcbiAgdHJhY2ssXG4gIHJlcXVlc3RQZXJtaXNzaW9ucyxcbiAgb25FcnJvclxufSkge1xuICBjb25zdCByb29tQ29udGV4dCA9IHVzZU1heWJlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgZGV2aWNlT2JzZXJ2ZXIgPSBSZWFjdDIzLnVzZU1lbW8oXG4gICAgKCkgPT4gY3JlYXRlTWVkaWFEZXZpY2VPYnNlcnZlcihraW5kLCBvbkVycm9yLCByZXF1ZXN0UGVybWlzc2lvbnMpLFxuICAgIFtraW5kLCByZXF1ZXN0UGVybWlzc2lvbnMsIG9uRXJyb3JdXG4gICk7XG4gIGNvbnN0IGRldmljZXMgPSB1c2VPYnNlcnZhYmxlU3RhdGUoZGV2aWNlT2JzZXJ2ZXIsIFtdKTtcbiAgY29uc3QgW2N1cnJlbnREZXZpY2VJZCwgc2V0Q3VycmVudERldmljZUlkXSA9IFJlYWN0MjMudXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCBhY3RpdmVEZXZpY2VPYnNlcnZhYmxlLCBzZXRBY3RpdmVNZWRpYURldmljZSB9ID0gUmVhY3QyMy51c2VNZW1vKFxuICAgICgpID0+IHNldHVwRGV2aWNlU2VsZWN0b3Ioa2luZCwgcm9vbSAhPSBudWxsID8gcm9vbSA6IHJvb21Db250ZXh0LCB0cmFjayksXG4gICAgW2tpbmQsIHJvb20sIHJvb21Db250ZXh0LCB0cmFja11cbiAgKTtcbiAgUmVhY3QyMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxpc3RlbmVyID0gYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZS5zdWJzY3JpYmUoKGRldmljZUlkKSA9PiB7XG4gICAgICBsb2cyLmluZm8oXCJzZXRDdXJyZW50RGV2aWNlSWRcIiwgZGV2aWNlSWQpO1xuICAgICAgaWYgKGRldmljZUlkKSBzZXRDdXJyZW50RGV2aWNlSWQoZGV2aWNlSWQpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lciA9PSBudWxsID8gdm9pZCAwIDogbGlzdGVuZXIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZV0pO1xuICByZXR1cm4geyBkZXZpY2VzLCBjbGFzc05hbWUsIGFjdGl2ZURldmljZUlkOiBjdXJyZW50RGV2aWNlSWQsIHNldEFjdGl2ZU1lZGlhRGV2aWNlIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VNZWRpYURldmljZXMudHNcbmltcG9ydCAqIGFzIFJlYWN0MjQgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVNZWRpYURldmljZU9ic2VydmVyIGFzIGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gdXNlTWVkaWFEZXZpY2VzKHtcbiAga2luZCxcbiAgb25FcnJvclxufSkge1xuICBjb25zdCBkZXZpY2VPYnNlcnZlciA9IFJlYWN0MjQudXNlTWVtbyhcbiAgICAoKSA9PiBjcmVhdGVNZWRpYURldmljZU9ic2VydmVyMihraW5kLCBvbkVycm9yKSxcbiAgICBba2luZCwgb25FcnJvcl1cbiAgKTtcbiAgY29uc3QgZGV2aWNlcyA9IHVzZU9ic2VydmFibGVTdGF0ZShkZXZpY2VPYnNlcnZlciwgW10pO1xuICByZXR1cm4gZGV2aWNlcztcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVBhZ2luYXRpb24udHNcbmltcG9ydCAqIGFzIFJlYWN0MjYgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9ob29rcy91c2VWaXN1YWxTdGFibGVVcGRhdGUudHNcbmltcG9ydCB7IGxvZyBhcyBsb2czLCBzb3J0VHJhY2tSZWZlcmVuY2VzLCB1cGRhdGVQYWdlcyB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MjUgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VWaXN1YWxTdGFibGVVcGRhdGUodHJhY2tSZWZlcmVuY2VzLCBtYXhJdGVtc09uUGFnZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGxhc3RUcmFja1JlZnMgPSBSZWFjdDI1LnVzZVJlZihbXSk7XG4gIGNvbnN0IGxhc3RNYXhJdGVtc09uUGFnZSA9IFJlYWN0MjUudXNlUmVmKC0xKTtcbiAgY29uc3QgbGF5b3V0Q2hhbmdlZCA9IG1heEl0ZW1zT25QYWdlICE9PSBsYXN0TWF4SXRlbXNPblBhZ2UuY3VycmVudDtcbiAgY29uc3Qgc29ydGVkVHJhY2tSZWZzID0gdHlwZW9mIG9wdGlvbnMuY3VzdG9tU29ydEZ1bmN0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBvcHRpb25zLmN1c3RvbVNvcnRGdW5jdGlvbih0cmFja1JlZmVyZW5jZXMpIDogc29ydFRyYWNrUmVmZXJlbmNlcyh0cmFja1JlZmVyZW5jZXMpO1xuICBsZXQgdXBkYXRlZFRyYWNrUmVmcyA9IFsuLi5zb3J0ZWRUcmFja1JlZnNdO1xuICBpZiAobGF5b3V0Q2hhbmdlZCA9PT0gZmFsc2UpIHtcbiAgICB0cnkge1xuICAgICAgdXBkYXRlZFRyYWNrUmVmcyA9IHVwZGF0ZVBhZ2VzKGxhc3RUcmFja1JlZnMuY3VycmVudCwgc29ydGVkVHJhY2tSZWZzLCBtYXhJdGVtc09uUGFnZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZzMuZXJyb3IoXCJFcnJvciB3aGlsZSBydW5uaW5nIHVwZGF0ZVBhZ2VzKCk6IFwiLCBlcnJvcik7XG4gICAgfVxuICB9XG4gIGlmIChsYXlvdXRDaGFuZ2VkKSB7XG4gICAgbGFzdFRyYWNrUmVmcy5jdXJyZW50ID0gc29ydGVkVHJhY2tSZWZzO1xuICB9IGVsc2Uge1xuICAgIGxhc3RUcmFja1JlZnMuY3VycmVudCA9IHVwZGF0ZWRUcmFja1JlZnM7XG4gIH1cbiAgbGFzdE1heEl0ZW1zT25QYWdlLmN1cnJlbnQgPSBtYXhJdGVtc09uUGFnZTtcbiAgcmV0dXJuIHVwZGF0ZWRUcmFja1JlZnM7XG59XG5cbi8vIHNyYy9ob29rcy91c2VQYWdpbmF0aW9uLnRzXG5mdW5jdGlvbiB1c2VQYWdpbmF0aW9uKGl0ZW1QZXJQYWdlLCB0cmFja1JlZmVyZW5jZXMpIHtcbiAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSBSZWFjdDI2LnVzZVN0YXRlKDEpO1xuICBjb25zdCB0b3RhbFBhZ2VDb3VudCA9IE1hdGgubWF4KE1hdGguY2VpbCh0cmFja1JlZmVyZW5jZXMubGVuZ3RoIC8gaXRlbVBlclBhZ2UpLCAxKTtcbiAgaWYgKGN1cnJlbnRQYWdlID4gdG90YWxQYWdlQ291bnQpIHtcbiAgICBzZXRDdXJyZW50UGFnZSh0b3RhbFBhZ2VDb3VudCk7XG4gIH1cbiAgY29uc3QgbGFzdEl0ZW1JbmRleCA9IGN1cnJlbnRQYWdlICogaXRlbVBlclBhZ2U7XG4gIGNvbnN0IGZpcnN0SXRlbUluZGV4ID0gbGFzdEl0ZW1JbmRleCAtIGl0ZW1QZXJQYWdlO1xuICBjb25zdCBjaGFuZ2VQYWdlID0gKGRpcmVjdGlvbikgPT4ge1xuICAgIHNldEN1cnJlbnRQYWdlKChzdGF0ZSkgPT4ge1xuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgaWYgKHN0YXRlID09PSB0b3RhbFBhZ2VDb3VudCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGUgKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXRlID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZSAtIDE7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGdvVG9QYWdlID0gKG51bSkgPT4ge1xuICAgIGlmIChudW0gPiB0b3RhbFBhZ2VDb3VudCkge1xuICAgICAgc2V0Q3VycmVudFBhZ2UodG90YWxQYWdlQ291bnQpO1xuICAgIH0gZWxzZSBpZiAobnVtIDwgMSkge1xuICAgICAgc2V0Q3VycmVudFBhZ2UoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEN1cnJlbnRQYWdlKG51bSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1cGRhdGVkVHJhY2tSZWZlcmVuY2VzID0gdXNlVmlzdWFsU3RhYmxlVXBkYXRlKHRyYWNrUmVmZXJlbmNlcywgaXRlbVBlclBhZ2UpO1xuICBjb25zdCB0cmFja3NPblBhZ2UgPSB1cGRhdGVkVHJhY2tSZWZlcmVuY2VzLnNsaWNlKGZpcnN0SXRlbUluZGV4LCBsYXN0SXRlbUluZGV4KTtcbiAgcmV0dXJuIHtcbiAgICB0b3RhbFBhZ2VDb3VudCxcbiAgICBuZXh0UGFnZTogKCkgPT4gY2hhbmdlUGFnZShcIm5leHRcIiksXG4gICAgcHJldlBhZ2U6ICgpID0+IGNoYW5nZVBhZ2UoXCJwcmV2aW91c1wiKSxcbiAgICBzZXRQYWdlOiBnb1RvUGFnZSxcbiAgICBmaXJzdEl0ZW1JbmRleCxcbiAgICBsYXN0SXRlbUluZGV4LFxuICAgIHRyYWNrczogdHJhY2tzT25QYWdlLFxuICAgIGN1cnJlbnRQYWdlXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VQYXJ0aWNpcGFudEluZm8udHNcbmltcG9ydCB7IHBhcnRpY2lwYW50SW5mb09ic2VydmVyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QyNyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50SW5mbyhwcm9wcyA9IHt9KSB7XG4gIGxldCBwID0gdXNlTWF5YmVQYXJ0aWNpcGFudENvbnRleHQoKTtcbiAgaWYgKHByb3BzLnBhcnRpY2lwYW50KSB7XG4gICAgcCA9IHByb3BzLnBhcnRpY2lwYW50O1xuICB9XG4gIGNvbnN0IGluZm9PYnNlcnZlciA9IFJlYWN0MjcudXNlTWVtbygoKSA9PiBwYXJ0aWNpcGFudEluZm9PYnNlcnZlcihwKSwgW3BdKTtcbiAgY29uc3QgeyBpZGVudGl0eSwgbmFtZSwgbWV0YWRhdGEgfSA9IHVzZU9ic2VydmFibGVTdGF0ZShpbmZvT2JzZXJ2ZXIsIHtcbiAgICBuYW1lOiBwID09IG51bGwgPyB2b2lkIDAgOiBwLm5hbWUsXG4gICAgaWRlbnRpdHk6IHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAuaWRlbnRpdHksXG4gICAgbWV0YWRhdGE6IHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAubWV0YWRhdGFcbiAgfSk7XG4gIHJldHVybiB7IGlkZW50aXR5LCBuYW1lLCBtZXRhZGF0YSB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUGFydGljaXBhbnRQZXJtaXNzaW9ucy50c1xuaW1wb3J0IHsgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIgYXMgcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QyOCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50UGVybWlzc2lvbnMob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChvcHRpb25zLnBhcnRpY2lwYW50KTtcbiAgY29uc3QgcGVybWlzc2lvbk9ic2VydmVyID0gUmVhY3QyOC51c2VNZW1vKCgpID0+IHBhcnRpY2lwYW50UGVybWlzc2lvbk9ic2VydmVyMihwKSwgW3BdKTtcbiAgY29uc3QgcGVybWlzc2lvbnMgPSB1c2VPYnNlcnZhYmxlU3RhdGUocGVybWlzc2lvbk9ic2VydmVyLCBwLnBlcm1pc3Npb25zKTtcbiAgcmV0dXJuIHBlcm1pc3Npb25zO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUGFydGljaXBhbnRUaWxlLnRzXG5pbXBvcnQgeyBzZXR1cFBhcnRpY2lwYW50VGlsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MjkgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUcmFjayB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gdXNlUGFydGljaXBhbnRUaWxlKHtcbiAgdHJhY2tSZWYsXG4gIG9uUGFydGljaXBhbnRDbGljayxcbiAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yLFxuICBodG1sUHJvcHNcbn0pIHtcbiAgY29uc3QgdHJhY2tSZWZlcmVuY2UgPSB1c2VFbnN1cmVUcmFja1JlZih0cmFja1JlZik7XG4gIGNvbnN0IG1lcmdlZFByb3BzID0gUmVhY3QyOS51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSB9ID0gc2V0dXBQYXJ0aWNpcGFudFRpbGUoKTtcbiAgICByZXR1cm4gbWVyZ2VQcm9wcyhodG1sUHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG9uQ2xpY2s6IChldmVudCkgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAoX2EgPSBodG1sUHJvcHMub25DbGljaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoaHRtbFByb3BzLCBldmVudCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb25QYXJ0aWNpcGFudENsaWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCB0cmFjayA9IChfYiA9IHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gX2IgOiB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKHRyYWNrUmVmZXJlbmNlLnNvdXJjZSk7XG4gICAgICAgICAgb25QYXJ0aWNpcGFudENsaWNrKHsgcGFydGljaXBhbnQ6IHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LCB0cmFjayB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXG4gICAgaHRtbFByb3BzLFxuICAgIG9uUGFydGljaXBhbnRDbGljayxcbiAgICB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbixcbiAgICB0cmFja1JlZmVyZW5jZS5zb3VyY2UsXG4gICAgdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnRcbiAgXSk7XG4gIGNvbnN0IG1pY1RyYWNrID0gdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbihUcmFjay5Tb3VyY2UuTWljcm9waG9uZSk7XG4gIGNvbnN0IG1pY1JlZiA9IFJlYWN0MjkudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcnRpY2lwYW50OiB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudCxcbiAgICAgIHNvdXJjZTogVHJhY2suU291cmNlLk1pY3JvcGhvbmUsXG4gICAgICBwdWJsaWNhdGlvbjogbWljVHJhY2tcbiAgICB9O1xuICB9LCBbbWljVHJhY2ssIHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50XSk7XG4gIGNvbnN0IGlzVmlkZW9NdXRlZCA9IHVzZUlzTXV0ZWQodHJhY2tSZWZlcmVuY2UpO1xuICBjb25zdCBpc0F1ZGlvTXV0ZWQgPSB1c2VJc011dGVkKG1pY1JlZik7XG4gIGNvbnN0IGlzU3BlYWtpbmcgPSB1c2VJc1NwZWFraW5nKHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50KTtcbiAgY29uc3QgZmFjaW5nTW9kZSA9IHVzZUZhY2luZ01vZGUodHJhY2tSZWZlcmVuY2UpO1xuICByZXR1cm4ge1xuICAgIGVsZW1lbnRQcm9wczogX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgXCJkYXRhLWxrLWF1ZGlvLW11dGVkXCI6IGlzQXVkaW9NdXRlZCxcbiAgICAgIFwiZGF0YS1say12aWRlby1tdXRlZFwiOiBpc1ZpZGVvTXV0ZWQsXG4gICAgICBcImRhdGEtbGstc3BlYWtpbmdcIjogZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yID09PSB0cnVlID8gZmFsc2UgOiBpc1NwZWFraW5nLFxuICAgICAgXCJkYXRhLWxrLWxvY2FsLXBhcnRpY2lwYW50XCI6IHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlzTG9jYWwsXG4gICAgICBcImRhdGEtbGstc291cmNlXCI6IHRyYWNrUmVmZXJlbmNlLnNvdXJjZSxcbiAgICAgIFwiZGF0YS1say1mYWNpbmctbW9kZVwiOiBmYWNpbmdNb2RlXG4gICAgfSwgbWVyZ2VkUHJvcHMpXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VSZW1vdGVQYXJ0aWNpcGFudHMudHNcbmltcG9ydCB7IGNvbm5lY3RlZFBhcnRpY2lwYW50c09ic2VydmVyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QzMCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVJlbW90ZVBhcnRpY2lwYW50cyhvcHRpb25zID0ge30pIHtcbiAgY29uc3Qgcm9vbSA9IHVzZUVuc3VyZVJvb20ob3B0aW9ucy5yb29tKTtcbiAgY29uc3QgW3BhcnRpY2lwYW50cywgc2V0UGFydGljaXBhbnRzXSA9IFJlYWN0MzAudXNlU3RhdGUoW10pO1xuICBSZWFjdDMwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBjb25uZWN0ZWRQYXJ0aWNpcGFudHNPYnNlcnZlcihyb29tLCB7XG4gICAgICBhZGRpdGlvbmFsUm9vbUV2ZW50czogb3B0aW9ucy51cGRhdGVPbmx5T25cbiAgICB9KS5zdWJzY3JpYmUoc2V0UGFydGljaXBhbnRzKTtcbiAgICByZXR1cm4gKCkgPT4gbGlzdGVuZXIudW5zdWJzY3JpYmUoKTtcbiAgfSwgW3Jvb20sIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMudXBkYXRlT25seU9uKV0pO1xuICByZXR1cm4gcGFydGljaXBhbnRzO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUGFydGljaXBhbnRzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDMxIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUGFydGljaXBhbnRzKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCByZW1vdGVQYXJ0aWNpcGFudHMgPSB1c2VSZW1vdGVQYXJ0aWNpcGFudHMob3B0aW9ucyk7XG4gIGNvbnN0IHsgbG9jYWxQYXJ0aWNpcGFudCB9ID0gdXNlTG9jYWxQYXJ0aWNpcGFudChvcHRpb25zKTtcbiAgcmV0dXJuIFJlYWN0MzEudXNlTWVtbyhcbiAgICAoKSA9PiBbbG9jYWxQYXJ0aWNpcGFudCwgLi4ucmVtb3RlUGFydGljaXBhbnRzXSxcbiAgICBbbG9jYWxQYXJ0aWNpcGFudCwgcmVtb3RlUGFydGljaXBhbnRzXVxuICApO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUGlubmVkVHJhY2tzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDMyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUGlubmVkVHJhY2tzKGxheW91dENvbnRleHQpIHtcbiAgbGF5b3V0Q29udGV4dCA9IHVzZUVuc3VyZUxheW91dENvbnRleHQobGF5b3V0Q29udGV4dCk7XG4gIHJldHVybiBSZWFjdDMyLnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICgobGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogbGF5b3V0Q29udGV4dC5waW4uc3RhdGUpICE9PSB2b2lkIDAgJiYgbGF5b3V0Q29udGV4dC5waW4uc3RhdGUubGVuZ3RoID49IDEpIHtcbiAgICAgIHJldHVybiBsYXlvdXRDb250ZXh0LnBpbi5zdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9LCBbbGF5b3V0Q29udGV4dC5waW4uc3RhdGVdKTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVJlbW90ZVBhcnRpY2lwYW50LnRzXG5pbXBvcnQge1xuICBjb25uZWN0ZWRQYXJ0aWNpcGFudE9ic2VydmVyLFxuICBwYXJ0aWNpcGFudEJ5SWRlbnRpZmllck9ic2VydmVyXG59IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0MzMgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VSZW1vdGVQYXJ0aWNpcGFudChpZGVudGl0eU9ySWRlbnRpZmllciwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHJvb20gPSB1c2VSb29tQ29udGV4dCgpO1xuICBjb25zdCBbdXBkYXRlT25seU9uXSA9IFJlYWN0MzMudXNlU3RhdGUob3B0aW9ucy51cGRhdGVPbmx5T24pO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QzMy51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGlkZW50aXR5T3JJZGVudGlmaWVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gY29ubmVjdGVkUGFydGljaXBhbnRPYnNlcnZlcihyb29tLCBpZGVudGl0eU9ySWRlbnRpZmllciwge1xuICAgICAgICBhZGRpdGlvbmFsRXZlbnRzOiB1cGRhdGVPbmx5T25cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFydGljaXBhbnRCeUlkZW50aWZpZXJPYnNlcnZlcihyb29tLCBpZGVudGl0eU9ySWRlbnRpZmllciwge1xuICAgICAgICBhZGRpdGlvbmFsRXZlbnRzOiB1cGRhdGVPbmx5T25cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Jvb20sIEpTT04uc3RyaW5naWZ5KGlkZW50aXR5T3JJZGVudGlmaWVyKSwgdXBkYXRlT25seU9uXSk7XG4gIGNvbnN0IFtwYXJ0aWNpcGFudFdyYXBwZXIsIHNldFBhcnRpY2lwYW50V3JhcHBlcl0gPSBSZWFjdDMzLnVzZVN0YXRlKHtcbiAgICBwOiB2b2lkIDBcbiAgfSk7XG4gIFJlYWN0MzMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IG9ic2VydmFibGUuc3Vic2NyaWJlKChwKSA9PiBzZXRQYXJ0aWNpcGFudFdyYXBwZXIoeyBwIH0pKTtcbiAgICByZXR1cm4gKCkgPT4gbGlzdGVuZXIudW5zdWJzY3JpYmUoKTtcbiAgfSwgW29ic2VydmFibGVdKTtcbiAgcmV0dXJuIHBhcnRpY2lwYW50V3JhcHBlci5wO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUm9vbUluZm8udHNcbmltcG9ydCB7IHJvb21JbmZvT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDM0IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUm9vbUluZm8ob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHJvb20gPSB1c2VFbnN1cmVSb29tKG9wdGlvbnMucm9vbSk7XG4gIGNvbnN0IGluZm9PYnNlcnZlciA9IFJlYWN0MzQudXNlTWVtbygoKSA9PiByb29tSW5mb09ic2VydmVyKHJvb20pLCBbcm9vbV0pO1xuICBjb25zdCB7IG5hbWUsIG1ldGFkYXRhIH0gPSB1c2VPYnNlcnZhYmxlU3RhdGUoaW5mb09ic2VydmVyLCB7XG4gICAgbmFtZTogcm9vbS5uYW1lLFxuICAgIG1ldGFkYXRhOiByb29tLm1ldGFkYXRhXG4gIH0pO1xuICByZXR1cm4geyBuYW1lLCBtZXRhZGF0YSB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlU29ydGVkUGFydGljaXBhbnRzLnRzXG5pbXBvcnQgeyBzb3J0UGFydGljaXBhbnRzIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QzNiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVNwZWFraW5nUGFydGljaXBhbnRzLnRzXG5pbXBvcnQgeyBhY3RpdmVTcGVha2VyT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDM1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU3BlYWtpbmdQYXJ0aWNpcGFudHMoKSB7XG4gIGNvbnN0IHJvb20gPSB1c2VSb29tQ29udGV4dCgpO1xuICBjb25zdCBzcGVha2VyT2JzZXJ2ZXIgPSBSZWFjdDM1LnVzZU1lbW8oKCkgPT4gYWN0aXZlU3BlYWtlck9ic2VydmVyKHJvb20pLCBbcm9vbV0pO1xuICBjb25zdCBhY3RpdmVTcGVha2VycyA9IHVzZU9ic2VydmFibGVTdGF0ZShzcGVha2VyT2JzZXJ2ZXIsIHJvb20uYWN0aXZlU3BlYWtlcnMpO1xuICByZXR1cm4gYWN0aXZlU3BlYWtlcnM7XG59XG5cbi8vIHNyYy9ob29rcy91c2VTb3J0ZWRQYXJ0aWNpcGFudHMudHNcbmZ1bmN0aW9uIHVzZVNvcnRlZFBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpIHtcbiAgY29uc3QgW3NvcnRlZFBhcnRpY2lwYW50cywgc2V0U29ydGVkUGFydGljaXBhbnRzXSA9IFJlYWN0MzYudXNlU3RhdGUoXG4gICAgc29ydFBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXG4gICk7XG4gIGNvbnN0IGFjdGl2ZVNwZWFrZXJzID0gdXNlU3BlYWtpbmdQYXJ0aWNpcGFudHMoKTtcbiAgUmVhY3QzNi51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFNvcnRlZFBhcnRpY2lwYW50cyhzb3J0UGFydGljaXBhbnRzKHBhcnRpY2lwYW50cykpO1xuICB9LCBbYWN0aXZlU3BlYWtlcnMsIHBhcnRpY2lwYW50c10pO1xuICByZXR1cm4gc29ydGVkUGFydGljaXBhbnRzO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlU3RhcnRBdWRpby50c1xuaW1wb3J0IHsgc2V0dXBTdGFydEF1ZGlvIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QzNyBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVN0YXJ0QXVkaW8oeyByb29tLCBwcm9wcyB9KSB7XG4gIGNvbnN0IHJvb21FbnN1cmVkID0gdXNlRW5zdXJlUm9vbShyb29tKTtcbiAgY29uc3QgeyBjbGFzc05hbWUsIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGU6IHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUyLCBoYW5kbGVTdGFydEF1ZGlvUGxheWJhY2sgfSA9IFJlYWN0MzcudXNlTWVtbyhcbiAgICAoKSA9PiBzZXR1cFN0YXJ0QXVkaW8oKSxcbiAgICBbXVxuICApO1xuICBjb25zdCBvYnNlcnZhYmxlID0gUmVhY3QzNy51c2VNZW1vKFxuICAgICgpID0+IHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUyKHJvb21FbnN1cmVkKSxcbiAgICBbcm9vbUVuc3VyZWQsIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUyXVxuICApO1xuICBjb25zdCB7IGNhblBsYXlBdWRpbyB9ID0gdXNlT2JzZXJ2YWJsZVN0YXRlKG9ic2VydmFibGUsIHtcbiAgICBjYW5QbGF5QXVkaW86IHJvb21FbnN1cmVkLmNhblBsYXliYWNrQXVkaW9cbiAgfSk7XG4gIGNvbnN0IG1lcmdlZFByb3BzID0gUmVhY3QzNy51c2VNZW1vKFxuICAgICgpID0+IG1lcmdlUHJvcHMocHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgaGFuZGxlU3RhcnRBdWRpb1BsYXliYWNrKHJvb21FbnN1cmVkKTtcbiAgICAgIH0sXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiBjYW5QbGF5QXVkaW8gPyBcIm5vbmVcIiA6IFwiYmxvY2tcIiB9XG4gICAgfSksXG4gICAgW3Byb3BzLCBjbGFzc05hbWUsIGNhblBsYXlBdWRpbywgaGFuZGxlU3RhcnRBdWRpb1BsYXliYWNrLCByb29tRW5zdXJlZF1cbiAgKTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHMsIGNhblBsYXlBdWRpbyB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlU3RhcnRWaWRlby50c1xuaW1wb3J0IHsgc2V0dXBTdGFydFZpZGVvIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QzOCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVN0YXJ0VmlkZW8oeyByb29tLCBwcm9wcyB9KSB7XG4gIGNvbnN0IHJvb21FbnN1cmVkID0gdXNlRW5zdXJlUm9vbShyb29tKTtcbiAgY29uc3QgeyBjbGFzc05hbWUsIHJvb21WaWRlb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUsIGhhbmRsZVN0YXJ0VmlkZW9QbGF5YmFjayB9ID0gUmVhY3QzOC51c2VNZW1vKFxuICAgICgpID0+IHNldHVwU3RhcnRWaWRlbygpLFxuICAgIFtdXG4gICk7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBSZWFjdDM4LnVzZU1lbW8oXG4gICAgKCkgPT4gcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZShyb29tRW5zdXJlZCksXG4gICAgW3Jvb21FbnN1cmVkLCByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlXVxuICApO1xuICBjb25zdCB7IGNhblBsYXlWaWRlbyB9ID0gdXNlT2JzZXJ2YWJsZVN0YXRlKG9ic2VydmFibGUsIHtcbiAgICBjYW5QbGF5VmlkZW86IHJvb21FbnN1cmVkLmNhblBsYXliYWNrVmlkZW9cbiAgfSk7XG4gIGNvbnN0IG1lcmdlZFByb3BzID0gUmVhY3QzOC51c2VNZW1vKFxuICAgICgpID0+IG1lcmdlUHJvcHMocHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrKHJvb21FbnN1cmVkKTtcbiAgICAgIH0sXG4gICAgICBzdHlsZTogeyBkaXNwbGF5OiBjYW5QbGF5VmlkZW8gPyBcIm5vbmVcIiA6IFwiYmxvY2tcIiB9XG4gICAgfSksXG4gICAgW3Byb3BzLCBjbGFzc05hbWUsIGNhblBsYXlWaWRlbywgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrLCByb29tRW5zdXJlZF1cbiAgKTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHMsIGNhblBsYXlWaWRlbyB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlU3dpcGUudHNcbmltcG9ydCAqIGFzIFJlYWN0MzkgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VTd2lwZShlbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hO1xuICBjb25zdCB0b3VjaFN0YXJ0ID0gUmVhY3QzOS51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHRvdWNoRW5kID0gUmVhY3QzOS51c2VSZWYobnVsbCk7XG4gIGNvbnN0IG1pblN3aXBlRGlzdGFuY2UgPSAoX2EgPSBvcHRpb25zLm1pblN3aXBlRGlzdGFuY2UpICE9IG51bGwgPyBfYSA6IDUwO1xuICBjb25zdCBvblRvdWNoU3RhcnQgPSAoZXZlbnQpID0+IHtcbiAgICB0b3VjaEVuZC5jdXJyZW50ID0gbnVsbDtcbiAgICB0b3VjaFN0YXJ0LmN1cnJlbnQgPSBldmVudC50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XG4gIH07XG4gIGNvbnN0IG9uVG91Y2hNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgdG91Y2hFbmQuY3VycmVudCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgfTtcbiAgY29uc3Qgb25Ub3VjaEVuZCA9IFJlYWN0MzkudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghdG91Y2hTdGFydC5jdXJyZW50IHx8ICF0b3VjaEVuZC5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRpc3RhbmNlID0gdG91Y2hTdGFydC5jdXJyZW50IC0gdG91Y2hFbmQuY3VycmVudDtcbiAgICBjb25zdCBpc0xlZnRTd2lwZSA9IGRpc3RhbmNlID4gbWluU3dpcGVEaXN0YW5jZTtcbiAgICBjb25zdCBpc1JpZ2h0U3dpcGUgPSBkaXN0YW5jZSA8IC1taW5Td2lwZURpc3RhbmNlO1xuICAgIGlmIChpc0xlZnRTd2lwZSAmJiBvcHRpb25zLm9uTGVmdFN3aXBlKSBvcHRpb25zLm9uTGVmdFN3aXBlKCk7XG4gICAgaWYgKGlzUmlnaHRTd2lwZSAmJiBvcHRpb25zLm9uUmlnaHRTd2lwZSkgb3B0aW9ucy5vblJpZ2h0U3dpcGUoKTtcbiAgfSwgW21pblN3aXBlRGlzdGFuY2UsIG9wdGlvbnNdKTtcbiAgUmVhY3QzOS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnRDb3B5ID0gZWxlbWVudC5jdXJyZW50O1xuICAgIGlmIChlbGVtZW50Q29weSkge1xuICAgICAgZWxlbWVudENvcHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgb25Ub3VjaFN0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICBlbGVtZW50Q29weS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG9uVG91Y2hNb3ZlLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICBlbGVtZW50Q29weS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25Ub3VjaEVuZCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnRDb3B5KSB7XG4gICAgICAgIGVsZW1lbnRDb3B5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIG9uVG91Y2hTdGFydCk7XG4gICAgICAgIGVsZW1lbnRDb3B5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgb25Ub3VjaE1vdmUpO1xuICAgICAgICBlbGVtZW50Q29weS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25Ub3VjaEVuZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2VsZW1lbnQsIG9uVG91Y2hFbmRdKTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUNoYXRUb2dnbGUudHNcbmltcG9ydCB7IHNldHVwQ2hhdFRvZ2dsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NDAgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VDaGF0VG9nZ2xlKHsgcHJvcHMgfSkge1xuICBjb25zdCB7IGRpc3BhdGNoLCBzdGF0ZSB9ID0gdXNlTGF5b3V0Q29udGV4dCgpLndpZGdldDtcbiAgY29uc3QgeyBjbGFzc05hbWUgfSA9IFJlYWN0NDAudXNlTWVtbygoKSA9PiBzZXR1cENoYXRUb2dnbGUoKSwgW10pO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IFJlYWN0NDAudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIG1lcmdlUHJvcHMocHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgaWYgKGRpc3BhdGNoKSBkaXNwYXRjaCh7IG1zZzogXCJ0b2dnbGVfY2hhdFwiIH0pO1xuICAgICAgfSxcbiAgICAgIFwiYXJpYS1wcmVzc2VkXCI6IChzdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogc3RhdGUuc2hvd0NoYXQpID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIsXG4gICAgICBcImRhdGEtbGstdW5yZWFkLW1zZ3NcIjogc3RhdGUgPyBzdGF0ZS51bnJlYWRNZXNzYWdlcyA8IDEwID8gc3RhdGUudW5yZWFkTWVzc2FnZXMudG9GaXhlZCgwKSA6IFwiOStcIiA6IFwiMFwiXG4gICAgfSk7XG4gIH0sIFtwcm9wcywgY2xhc3NOYW1lLCBkaXNwYXRjaCwgc3RhdGVdKTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHMgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVRva2VuLnRzXG5pbXBvcnQgeyBsb2cgYXMgbG9nNCB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NDEgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUb2tlbih0b2tlbkVuZHBvaW50LCByb29tTmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IFt0b2tlbiwgc2V0VG9rZW5dID0gUmVhY3Q0MS51c2VTdGF0ZSh2b2lkIDApO1xuICBSZWFjdDQxLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmICh0b2tlbkVuZHBvaW50ID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IEVycm9yKFwidG9rZW4gZW5kcG9pbnQgbmVlZHMgdG8gYmUgZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgaWYgKCgoX2EgPSBvcHRpb25zLnVzZXJJbmZvKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaWRlbnRpdHkpID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9rZW5GZXRjaGVyID0gKCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgbG9nNC5kZWJ1ZyhcImZldGNoaW5nIHRva2VuXCIpO1xuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBvcHRpb25zLnVzZXJJbmZvKSwgeyByb29tTmFtZSB9KSk7XG4gICAgICBjb25zdCByZXMgPSB5aWVsZCBmZXRjaChgJHt0b2tlbkVuZHBvaW50fT8ke3BhcmFtcy50b1N0cmluZygpfWApO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgbG9nNC5lcnJvcihcbiAgICAgICAgICBgQ291bGQgbm90IGZldGNoIHRva2VuLiBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7cmVzLnN0YXR1c306ICR7cmVzLnN0YXR1c1RleHR9YFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGFjY2Vzc1Rva2VuIH0gPSB5aWVsZCByZXMuanNvbigpO1xuICAgICAgc2V0VG9rZW4oYWNjZXNzVG9rZW4pO1xuICAgIH0pO1xuICAgIHRva2VuRmV0Y2hlcigpO1xuICB9LCBbdG9rZW5FbmRwb2ludCwgcm9vbU5hbWUsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXSk7XG4gIHJldHVybiB0b2tlbjtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVRyYWNrTXV0ZWRJbmRpY2F0b3IudHNcbmltcG9ydCB7XG4gIHNldHVwVHJhY2tNdXRlZEluZGljYXRvcixcbiAgZ2V0VHJhY2tSZWZlcmVuY2VJZCBhcyBnZXRUcmFja1JlZmVyZW5jZUlkMlxufSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDQyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlVHJhY2tNdXRlZEluZGljYXRvcih0cmFja1JlZikge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCB0cmFja1JlZmVyZW5jZSA9IHVzZUVuc3VyZVRyYWNrUmVmKHRyYWNrUmVmKTtcbiAgY29uc3QgeyBjbGFzc05hbWUsIG1lZGlhTXV0ZWRPYnNlcnZlciB9ID0gUmVhY3Q0Mi51c2VNZW1vKFxuICAgICgpID0+IHNldHVwVHJhY2tNdXRlZEluZGljYXRvcih0cmFja1JlZmVyZW5jZSksXG4gICAgW2dldFRyYWNrUmVmZXJlbmNlSWQyKHRyYWNrUmVmZXJlbmNlKV1cbiAgKTtcbiAgY29uc3QgaXNNdXRlZCA9IHVzZU9ic2VydmFibGVTdGF0ZShcbiAgICBtZWRpYU11dGVkT2JzZXJ2ZXIsXG4gICAgISEoKChfYSA9IHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaXNNdXRlZCkgfHwgKChfYiA9IHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24odHJhY2tSZWZlcmVuY2Uuc291cmNlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmlzTXV0ZWQpKVxuICApO1xuICByZXR1cm4geyBpc011dGVkLCBjbGFzc05hbWUgfTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVRyYWNrVG9nZ2xlLnRzXG5pbXBvcnQgeyBzZXR1cE1lZGlhVG9nZ2xlLCBzZXR1cE1hbnVhbFRvZ2dsZSwgbG9nIGFzIGxvZzUgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDQzIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlVHJhY2tUb2dnbGUoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBzb3VyY2UsXG4gICAgb25DaGFuZ2UsXG4gICAgaW5pdGlhbFN0YXRlLFxuICAgIGNhcHR1cmVPcHRpb25zLFxuICAgIHB1Ymxpc2hPcHRpb25zLFxuICAgIG9uRGV2aWNlRXJyb3JcbiAgfSA9IF9iLCByZXN0ID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJzb3VyY2VcIixcbiAgICBcIm9uQ2hhbmdlXCIsXG4gICAgXCJpbml0aWFsU3RhdGVcIixcbiAgICBcImNhcHR1cmVPcHRpb25zXCIsXG4gICAgXCJwdWJsaXNoT3B0aW9uc1wiLFxuICAgIFwib25EZXZpY2VFcnJvclwiXG4gIF0pO1xuICB2YXIgX2EyO1xuICBjb25zdCByb29tID0gdXNlTWF5YmVSb29tQ29udGV4dCgpO1xuICBjb25zdCB0cmFjayA9IChfYTIgPSByb29tID09IG51bGwgPyB2b2lkIDAgOiByb29tLmxvY2FsUGFydGljaXBhbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZ2V0VHJhY2tQdWJsaWNhdGlvbihzb3VyY2UpO1xuICBjb25zdCB1c2VySW50ZXJhY3Rpb25SZWYgPSBSZWFjdDQzLnVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHsgdG9nZ2xlLCBjbGFzc05hbWUsIHBlbmRpbmdPYnNlcnZlciwgZW5hYmxlZE9ic2VydmVyIH0gPSBSZWFjdDQzLnVzZU1lbW8oXG4gICAgKCkgPT4gcm9vbSA/IHNldHVwTWVkaWFUb2dnbGUoc291cmNlLCByb29tLCBjYXB0dXJlT3B0aW9ucywgcHVibGlzaE9wdGlvbnMsIG9uRGV2aWNlRXJyb3IpIDogc2V0dXBNYW51YWxUb2dnbGUoKSxcbiAgICBbcm9vbSwgc291cmNlLCBKU09OLnN0cmluZ2lmeShjYXB0dXJlT3B0aW9ucyksIHB1Ymxpc2hPcHRpb25zXVxuICApO1xuICBjb25zdCBwZW5kaW5nID0gdXNlT2JzZXJ2YWJsZVN0YXRlKHBlbmRpbmdPYnNlcnZlciwgZmFsc2UpO1xuICBjb25zdCBlbmFibGVkID0gdXNlT2JzZXJ2YWJsZVN0YXRlKGVuYWJsZWRPYnNlcnZlciwgaW5pdGlhbFN0YXRlICE9IG51bGwgPyBpbml0aWFsU3RhdGUgOiAhISh0cmFjayA9PSBudWxsID8gdm9pZCAwIDogdHJhY2suaXNFbmFibGVkKSk7XG4gIFJlYWN0NDMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBvbkNoYW5nZSA9PSBudWxsID8gdm9pZCAwIDogb25DaGFuZ2UoZW5hYmxlZCwgdXNlckludGVyYWN0aW9uUmVmLmN1cnJlbnQpO1xuICAgIHVzZXJJbnRlcmFjdGlvblJlZi5jdXJyZW50ID0gZmFsc2U7XG4gIH0sIFtlbmFibGVkLCBvbkNoYW5nZV0pO1xuICBSZWFjdDQzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGluaXRpYWxTdGF0ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBsb2c1LmRlYnVnKFwiZm9yY2luZyBpbml0aWFsIHRvZ2dsZSBzdGF0ZVwiLCBzb3VyY2UsIGluaXRpYWxTdGF0ZSk7XG4gICAgICB0b2dnbGUoaW5pdGlhbFN0YXRlKTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgY29uc3QgbmV3UHJvcHMgPSBSZWFjdDQzLnVzZU1lbW8oKCkgPT4gbWVyZ2VQcm9wcyhyZXN0LCB7IGNsYXNzTmFtZSB9KSwgW3Jlc3QsIGNsYXNzTmFtZV0pO1xuICBjb25zdCBjbGlja0hhbmRsZXIgPSBSZWFjdDQzLnVzZUNhbGxiYWNrKFxuICAgIChldnQpID0+IHtcbiAgICAgIHZhciBfYTM7XG4gICAgICB1c2VySW50ZXJhY3Rpb25SZWYuY3VycmVudCA9IHRydWU7XG4gICAgICB0b2dnbGUoKS5jYXRjaCgoKSA9PiB1c2VySW50ZXJhY3Rpb25SZWYuY3VycmVudCA9IGZhbHNlKTtcbiAgICAgIChfYTMgPSByZXN0Lm9uQ2xpY2spID09IG51bGwgPyB2b2lkIDAgOiBfYTMuY2FsbChyZXN0LCBldnQpO1xuICAgIH0sXG4gICAgW3Jlc3QsIHRvZ2dsZV1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICB0b2dnbGUsXG4gICAgZW5hYmxlZCxcbiAgICBwZW5kaW5nLFxuICAgIHRyYWNrLFxuICAgIGJ1dHRvblByb3BzOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBuZXdQcm9wcyksIHtcbiAgICAgIFwiYXJpYS1wcmVzc2VkXCI6IGVuYWJsZWQsXG4gICAgICBcImRhdGEtbGstc291cmNlXCI6IHNvdXJjZSxcbiAgICAgIFwiZGF0YS1say1lbmFibGVkXCI6IGVuYWJsZWQsXG4gICAgICBkaXNhYmxlZDogcGVuZGluZyxcbiAgICAgIG9uQ2xpY2s6IGNsaWNrSGFuZGxlclxuICAgIH0pXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VUcmFja3MudHNcbmltcG9ydCB7XG4gIGlzU291cmNlc1dpdGhPcHRpb25zLFxuICBpc1NvdXJjZVdpdE9wdGlvbnMsXG4gIGxvZyBhcyBsb2c2LFxuICB0cmFja1JlZmVyZW5jZXNPYnNlcnZhYmxlXG59IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IFRyYWNrIGFzIFRyYWNrMiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3Q0NCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVRyYWNrcyhzb3VyY2VzID0gW1xuICBUcmFjazIuU291cmNlLkNhbWVyYSxcbiAgVHJhY2syLlNvdXJjZS5NaWNyb3Bob25lLFxuICBUcmFjazIuU291cmNlLlNjcmVlblNoYXJlLFxuICBUcmFjazIuU291cmNlLlNjcmVlblNoYXJlQXVkaW8sXG4gIFRyYWNrMi5Tb3VyY2UuVW5rbm93blxuXSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHJvb20gPSB1c2VFbnN1cmVSb29tKG9wdGlvbnMucm9vbSk7XG4gIGNvbnN0IFt0cmFja1JlZmVyZW5jZXMsIHNldFRyYWNrUmVmZXJlbmNlc10gPSBSZWFjdDQ0LnVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3BhcnRpY2lwYW50cywgc2V0UGFydGljaXBhbnRzXSA9IFJlYWN0NDQudXNlU3RhdGUoW10pO1xuICBjb25zdCBzb3VyY2VzXyA9IFJlYWN0NDQudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNvdXJjZXMubWFwKChzKSA9PiBpc1NvdXJjZVdpdE9wdGlvbnMocykgPyBzLnNvdXJjZSA6IHMpO1xuICB9LCBbSlNPTi5zdHJpbmdpZnkoc291cmNlcyldKTtcbiAgUmVhY3Q0NC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRyYWNrUmVmZXJlbmNlc09ic2VydmFibGUocm9vbSwgc291cmNlc18sIHtcbiAgICAgIGFkZGl0aW9uYWxSb29tRXZlbnRzOiBvcHRpb25zLnVwZGF0ZU9ubHlPbixcbiAgICAgIG9ubHlTdWJzY3JpYmVkOiBvcHRpb25zLm9ubHlTdWJzY3JpYmVkXG4gICAgfSkuc3Vic2NyaWJlKCh7IHRyYWNrUmVmZXJlbmNlczogdHJhY2tSZWZlcmVuY2VzMiwgcGFydGljaXBhbnRzOiBwYXJ0aWNpcGFudHMyIH0pID0+IHtcbiAgICAgIGxvZzYuZGVidWcoXCJzZXR0aW5nIHRyYWNrIGJ1bmRsZXNcIiwgdHJhY2tSZWZlcmVuY2VzMiwgcGFydGljaXBhbnRzMik7XG4gICAgICBzZXRUcmFja1JlZmVyZW5jZXModHJhY2tSZWZlcmVuY2VzMik7XG4gICAgICBzZXRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzMik7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9LCBbXG4gICAgcm9vbSxcbiAgICBKU09OLnN0cmluZ2lmeShvcHRpb25zLm9ubHlTdWJzY3JpYmVkKSxcbiAgICBKU09OLnN0cmluZ2lmeShvcHRpb25zLnVwZGF0ZU9ubHlPbiksXG4gICAgSlNPTi5zdHJpbmdpZnkoc291cmNlcylcbiAgXSk7XG4gIGNvbnN0IG1heWJlVHJhY2tSZWZlcmVuY2VzID0gUmVhY3Q0NC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoaXNTb3VyY2VzV2l0aE9wdGlvbnMoc291cmNlcykpIHtcbiAgICAgIGNvbnN0IHJlcXVpcmVQbGFjZWhvbGRlciA9IHJlcXVpcmVkUGxhY2Vob2xkZXJzKHNvdXJjZXMsIHBhcnRpY2lwYW50cyk7XG4gICAgICBjb25zdCB0cmFja1JlZmVyZW5jZXNXaXRoUGxhY2Vob2xkZXJzID0gQXJyYXkuZnJvbSh0cmFja1JlZmVyZW5jZXMpO1xuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2goKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHJlcXVpcmVQbGFjZWhvbGRlci5oYXMocGFydGljaXBhbnQuaWRlbnRpdHkpKSB7XG4gICAgICAgICAgY29uc3Qgc291cmNlc1RvQWRkUGxhY2Vob2xkZXIgPSAoX2EgPSByZXF1aXJlUGxhY2Vob2xkZXIuZ2V0KHBhcnRpY2lwYW50LmlkZW50aXR5KSkgIT0gbnVsbCA/IF9hIDogW107XG4gICAgICAgICAgc291cmNlc1RvQWRkUGxhY2Vob2xkZXIuZm9yRWFjaCgocGxhY2Vob2xkZXJTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICh0cmFja1JlZmVyZW5jZXMuZmluZChcbiAgICAgICAgICAgICAgKHsgcGFydGljaXBhbnQ6IHAsIHB1YmxpY2F0aW9uIH0pID0+IHBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBwLmlkZW50aXR5ICYmIHB1YmxpY2F0aW9uLnNvdXJjZSA9PT0gcGxhY2Vob2xkZXJTb3VyY2VcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nNi5kZWJ1ZyhcbiAgICAgICAgICAgICAgYEFkZCAke3BsYWNlaG9sZGVyU291cmNlfSBwbGFjZWhvbGRlciBmb3IgcGFydGljaXBhbnQgJHtwYXJ0aWNpcGFudC5pZGVudGl0eX0uYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0ge1xuICAgICAgICAgICAgICBwYXJ0aWNpcGFudCxcbiAgICAgICAgICAgICAgc291cmNlOiBwbGFjZWhvbGRlclNvdXJjZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYWNrUmVmZXJlbmNlc1dpdGhQbGFjZWhvbGRlcnMucHVzaChwbGFjZWhvbGRlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlc1dpdGhQbGFjZWhvbGRlcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cmFja1JlZmVyZW5jZXM7XG4gICAgfVxuICB9LCBbdHJhY2tSZWZlcmVuY2VzLCBwYXJ0aWNpcGFudHMsIHNvdXJjZXNdKTtcbiAgcmV0dXJuIG1heWJlVHJhY2tSZWZlcmVuY2VzO1xufVxuZnVuY3Rpb24gZGlmZmVyZW5jZShzZXRBLCBzZXRCKSB7XG4gIGNvbnN0IF9kaWZmZXJlbmNlID0gbmV3IFNldChzZXRBKTtcbiAgZm9yIChjb25zdCBlbGVtIG9mIHNldEIpIHtcbiAgICBfZGlmZmVyZW5jZS5kZWxldGUoZWxlbSk7XG4gIH1cbiAgcmV0dXJuIF9kaWZmZXJlbmNlO1xufVxuZnVuY3Rpb24gcmVxdWlyZWRQbGFjZWhvbGRlcnMoc291cmNlcywgcGFydGljaXBhbnRzKSB7XG4gIGNvbnN0IHBsYWNlaG9sZGVyTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaWYgKGlzU291cmNlc1dpdGhPcHRpb25zKHNvdXJjZXMpKSB7XG4gICAgY29uc3Qgc291cmNlc1RoYXROZWVkUGxhY2Vob2xkZXIgPSBzb3VyY2VzLmZpbHRlcigoc291cmNlV2l0aE9wdGlvbikgPT4gc291cmNlV2l0aE9wdGlvbi53aXRoUGxhY2Vob2xkZXIpLm1hcCgoc291cmNlV2l0aE9wdGlvbikgPT4gc291cmNlV2l0aE9wdGlvbi5zb3VyY2UpO1xuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgY29uc3Qgc291cmNlc09mU3Vic2NyaWJlZFRyYWNrcyA9IHBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb25zKCkubWFwKChwdWIpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gcHViLnRyYWNrKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc291cmNlO1xuICAgICAgfSkuZmlsdGVyKCh0cmFja1NvdXJjZSkgPT4gdHJhY2tTb3VyY2UgIT09IHZvaWQgMCk7XG4gICAgICBjb25zdCBwbGFjZWhvbGRlck5lZWRlZEZvclRoaXNQYXJ0aWNpcGFudCA9IEFycmF5LmZyb20oXG4gICAgICAgIGRpZmZlcmVuY2UobmV3IFNldChzb3VyY2VzVGhhdE5lZWRQbGFjZWhvbGRlciksIG5ldyBTZXQoc291cmNlc09mU3Vic2NyaWJlZFRyYWNrcykpXG4gICAgICApO1xuICAgICAgaWYgKHBsYWNlaG9sZGVyTmVlZGVkRm9yVGhpc1BhcnRpY2lwYW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGxhY2Vob2xkZXJNYXAuc2V0KHBhcnRpY2lwYW50LmlkZW50aXR5LCBwbGFjZWhvbGRlck5lZWRlZEZvclRoaXNQYXJ0aWNpcGFudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBsYWNlaG9sZGVyTWFwO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlVHJhY2tSZWZCeVNvdXJjZU9yTmFtZS50c1xuaW1wb3J0IHsgc2V0dXBNZWRpYVRyYWNrLCBnZXRUcmFja0J5SWRlbnRpZmllciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NDUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazMgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmZ1bmN0aW9uIHVzZVRyYWNrUmVmQnlTb3VyY2VPck5hbWUoc291cmNlKSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IFtwdWJsaWNhdGlvbiwgc2V0UHVibGljYXRpb25dID0gUmVhY3Q0NS51c2VTdGF0ZShnZXRUcmFja0J5SWRlbnRpZmllcihzb3VyY2UpKTtcbiAgY29uc3QgeyB0cmFja09ic2VydmVyIH0gPSBSZWFjdDQ1LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBzZXR1cE1lZGlhVHJhY2soc291cmNlKTtcbiAgfSwgWyhfYSA9IHNvdXJjZS5wYXJ0aWNpcGFudC5zaWQpICE9IG51bGwgPyBfYSA6IHNvdXJjZS5wYXJ0aWNpcGFudC5pZGVudGl0eSwgc291cmNlLnNvdXJjZV0pO1xuICBSZWFjdDQ1LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdHJhY2tPYnNlcnZlci5zdWJzY3JpYmUoKHB1YmxpY2F0aW9uMikgPT4ge1xuICAgICAgc2V0UHVibGljYXRpb24ocHVibGljYXRpb24yKTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9uID09IG51bGwgPyB2b2lkIDAgOiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfSwgW3RyYWNrT2JzZXJ2ZXJdKTtcbiAgcmV0dXJuIHtcbiAgICBwYXJ0aWNpcGFudDogc291cmNlLnBhcnRpY2lwYW50LFxuICAgIHNvdXJjZTogKF9iID0gc291cmNlLnNvdXJjZSkgIT0gbnVsbCA/IF9iIDogVHJhY2szLlNvdXJjZS5Vbmtub3duLFxuICAgIHB1YmxpY2F0aW9uXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VUcmFja0J5TmFtZS50c1xuZnVuY3Rpb24gdXNlVHJhY2tCeU5hbWUobmFtZSwgcGFydGljaXBhbnQpIHtcbiAgY29uc3QgcCA9IHVzZUVuc3VyZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIHVzZVRyYWNrUmVmQnlTb3VyY2VPck5hbWUoeyBuYW1lLCBwYXJ0aWNpcGFudDogcCB9KTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZUNoYXQudHNcbmltcG9ydCAqIGFzIFJlYWN0NDYgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBzZXR1cENoYXQgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uU3RhdGUgYXMgQ29ubmVjdGlvblN0YXRlMyB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gdXNlQ2hhdChvcHRpb25zKSB7XG4gIGNvbnN0IHJvb20gPSB1c2VSb29tQ29udGV4dCgpO1xuICBjb25zdCBjb25uZWN0aW9uU3RhdGUgPSB1c2VDb25uZWN0aW9uU3RhdGUocm9vbSk7XG4gIGNvbnN0IGlzRGlzY29ubmVjdGVkID0gUmVhY3Q0Ni51c2VNZW1vKFxuICAgICgpID0+IGNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlMy5EaXNjb25uZWN0ZWQsXG4gICAgW2Nvbm5lY3Rpb25TdGF0ZV1cbiAgKTtcbiAgY29uc3Qgc2V0dXAgPSBSZWFjdDQ2LnVzZU1lbW8oXG4gICAgKCkgPT4gc2V0dXBDaGF0KHJvb20sIG9wdGlvbnMpLFxuICAgIFtyb29tLCBvcHRpb25zLCBpc0Rpc2Nvbm5lY3RlZF1cbiAgKTtcbiAgY29uc3QgaXNTZW5kaW5nID0gdXNlT2JzZXJ2YWJsZVN0YXRlKHNldHVwLmlzU2VuZGluZ09ic2VydmFibGUsIGZhbHNlKTtcbiAgY29uc3QgY2hhdE1lc3NhZ2VzID0gdXNlT2JzZXJ2YWJsZVN0YXRlKHNldHVwLm1lc3NhZ2VPYnNlcnZhYmxlLCBbXSk7XG4gIHJldHVybiB7IHNlbmQ6IHNldHVwLnNlbmQsIHVwZGF0ZTogc2V0dXAudXBkYXRlLCBjaGF0TWVzc2FnZXMsIGlzU2VuZGluZyB9O1xufVxuXG4vLyBzcmMvaG9va3MvdXNlUGVyc2lzdGVudFVzZXJDaG9pY2VzLnRzXG5pbXBvcnQgeyBsb2FkVXNlckNob2ljZXMsIHNhdmVVc2VyQ2hvaWNlcyB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NDcgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VQZXJzaXN0ZW50VXNlckNob2ljZXMob3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgW3VzZXJDaG9pY2VzLCBzZXRTZXR0aW5nc10gPSBSZWFjdDQ3LnVzZVN0YXRlKFxuICAgIGxvYWRVc2VyQ2hvaWNlcyhvcHRpb25zLmRlZmF1bHRzLCAoX2EgPSBvcHRpb25zLnByZXZlbnRMb2FkKSAhPSBudWxsID8gX2EgOiBmYWxzZSlcbiAgKTtcbiAgY29uc3Qgc2F2ZUF1ZGlvSW5wdXRFbmFibGVkID0gUmVhY3Q0Ny51c2VDYWxsYmFjaygoaXNFbmFibGVkKSA9PiB7XG4gICAgc2V0U2V0dGluZ3MoKHByZXYpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByZXYpLCB7IGF1ZGlvRW5hYmxlZDogaXNFbmFibGVkIH0pKTtcbiAgfSwgW10pO1xuICBjb25zdCBzYXZlVmlkZW9JbnB1dEVuYWJsZWQgPSBSZWFjdDQ3LnVzZUNhbGxiYWNrKChpc0VuYWJsZWQpID0+IHtcbiAgICBzZXRTZXR0aW5ncygocHJldikgPT4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgcHJldiksIHsgdmlkZW9FbmFibGVkOiBpc0VuYWJsZWQgfSkpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHNhdmVBdWRpb0lucHV0RGV2aWNlSWQgPSBSZWFjdDQ3LnVzZUNhbGxiYWNrKChkZXZpY2VJZCkgPT4ge1xuICAgIHNldFNldHRpbmdzKChwcmV2KSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcmV2KSwgeyBhdWRpb0RldmljZUlkOiBkZXZpY2VJZCB9KSk7XG4gIH0sIFtdKTtcbiAgY29uc3Qgc2F2ZVZpZGVvSW5wdXREZXZpY2VJZCA9IFJlYWN0NDcudXNlQ2FsbGJhY2soKGRldmljZUlkKSA9PiB7XG4gICAgc2V0U2V0dGluZ3MoKHByZXYpID0+IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByZXYpLCB7IHZpZGVvRGV2aWNlSWQ6IGRldmljZUlkIH0pKTtcbiAgfSwgW10pO1xuICBjb25zdCBzYXZlVXNlcm5hbWUgPSBSZWFjdDQ3LnVzZUNhbGxiYWNrKCh1c2VybmFtZSkgPT4ge1xuICAgIHNldFNldHRpbmdzKChwcmV2KSA9PiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBwcmV2KSwgeyB1c2VybmFtZSB9KSk7XG4gIH0sIFtdKTtcbiAgUmVhY3Q0Ny51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgc2F2ZVVzZXJDaG9pY2VzKHVzZXJDaG9pY2VzLCAoX2EyID0gb3B0aW9ucy5wcmV2ZW50U2F2ZSkgIT0gbnVsbCA/IF9hMiA6IGZhbHNlKTtcbiAgfSwgW3VzZXJDaG9pY2VzLCBvcHRpb25zLnByZXZlbnRTYXZlXSk7XG4gIHJldHVybiB7XG4gICAgdXNlckNob2ljZXMsXG4gICAgc2F2ZUF1ZGlvSW5wdXRFbmFibGVkLFxuICAgIHNhdmVWaWRlb0lucHV0RW5hYmxlZCxcbiAgICBzYXZlQXVkaW9JbnB1dERldmljZUlkLFxuICAgIHNhdmVWaWRlb0lucHV0RGV2aWNlSWQsXG4gICAgc2F2ZVVzZXJuYW1lXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VJc0VuY3J5cHRlZC50c1xuaW1wb3J0ICogYXMgUmVhY3Q0OCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IExvY2FsUGFydGljaXBhbnQgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7IGVuY3J5cHRpb25TdGF0dXNPYnNlcnZhYmxlIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gdXNlSXNFbmNyeXB0ZWQocGFydGljaXBhbnQsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBwID0gdXNlRW5zdXJlUGFydGljaXBhbnQocGFydGljaXBhbnQpO1xuICBjb25zdCByb29tID0gdXNlRW5zdXJlUm9vbShvcHRpb25zLnJvb20pO1xuICBjb25zdCBvYnNlcnZlciA9IFJlYWN0NDgudXNlTWVtbygoKSA9PiBlbmNyeXB0aW9uU3RhdHVzT2JzZXJ2YWJsZShyb29tLCBwKSwgW3Jvb20sIHBdKTtcbiAgY29uc3QgaXNFbmNyeXB0ZWQgPSB1c2VPYnNlcnZhYmxlU3RhdGUoXG4gICAgb2JzZXJ2ZXIsXG4gICAgcCBpbnN0YW5jZW9mIExvY2FsUGFydGljaXBhbnQgPyBwLmlzRTJFRUVuYWJsZWQgOiAhIShwID09IG51bGwgPyB2b2lkIDAgOiBwLmlzRW5jcnlwdGVkKVxuICApO1xuICByZXR1cm4gaXNFbmNyeXB0ZWQ7XG59XG5cbi8vIHNyYy9ob29rcy91c2VUcmFja1ZvbHVtZS50c1xuaW1wb3J0ICogYXMgUmVhY3Q0OSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRyYWNrIGFzIFRyYWNrNCwgY3JlYXRlQXVkaW9BbmFseXNlciB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0IHtcbiAgaXNUcmFja1JlZmVyZW5jZVxufSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5mdW5jdGlvbiB1c2VUcmFja1ZvbHVtZSh0cmFja09yVHJhY2tSZWZlcmVuY2UsIG9wdGlvbnMgPSB7IGZmdFNpemU6IDMyLCBzbW9vdGhpbmdUaW1lQ29uc3RhbnQ6IDAgfSkge1xuICBjb25zdCB0cmFjayA9IGlzVHJhY2tSZWZlcmVuY2UodHJhY2tPclRyYWNrUmVmZXJlbmNlKSA/IHRyYWNrT3JUcmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFjayA6IHRyYWNrT3JUcmFja1JlZmVyZW5jZTtcbiAgY29uc3QgW3ZvbHVtZSwgc2V0Vm9sdW1lXSA9IFJlYWN0NDkudXNlU3RhdGUoMCk7XG4gIFJlYWN0NDkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXRyYWNrIHx8ICF0cmFjay5tZWRpYVN0cmVhbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGNsZWFudXAsIGFuYWx5c2VyIH0gPSBjcmVhdGVBdWRpb0FuYWx5c2VyKHRyYWNrLCBvcHRpb25zKTtcbiAgICBjb25zdCBidWZmZXJMZW5ndGggPSBhbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudDtcbiAgICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpO1xuICAgIGNvbnN0IHVwZGF0ZVZvbHVtZSA9ICgpID0+IHtcbiAgICAgIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKGRhdGFBcnJheSk7XG4gICAgICBsZXQgc3VtID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBkYXRhQXJyYXlbaV07XG4gICAgICAgIHN1bSArPSBhICogYTtcbiAgICAgIH1cbiAgICAgIHNldFZvbHVtZShNYXRoLnNxcnQoc3VtIC8gZGF0YUFycmF5Lmxlbmd0aCkgLyAyNTUpO1xuICAgIH07XG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVWb2x1bWUsIDFlMyAvIDMwKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfTtcbiAgfSwgW3RyYWNrLCB0cmFjayA9PSBudWxsID8gdm9pZCAwIDogdHJhY2subWVkaWFTdHJlYW0sIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXSk7XG4gIHJldHVybiB2b2x1bWU7XG59XG52YXIgbm9ybWFsaXplRnJlcXVlbmNpZXMgPSAoZnJlcXVlbmNpZXMpID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplRGIgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBtaW5EYiA9IC0xMDA7XG4gICAgY29uc3QgbWF4RGIgPSAtMTA7XG4gICAgbGV0IGRiID0gMSAtIE1hdGgubWF4KG1pbkRiLCBNYXRoLm1pbihtYXhEYiwgdmFsdWUpKSAqIC0xIC8gMTAwO1xuICAgIGRiID0gTWF0aC5zcXJ0KGRiKTtcbiAgICByZXR1cm4gZGI7XG4gIH07XG4gIHJldHVybiBmcmVxdWVuY2llcy5tYXAoKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlID09PSAtSW5maW5pdHkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplRGIodmFsdWUpO1xuICB9KTtcbn07XG52YXIgbXVsdGliYW5kRGVmYXVsdHMgPSB7XG4gIGJhbmRzOiA1LFxuICBsb1Bhc3M6IDEwMCxcbiAgaGlQYXNzOiA2MDAsXG4gIHVwZGF0ZUludGVydmFsOiAzMixcbiAgYW5hbHlzZXJPcHRpb25zOiB7IGZmdFNpemU6IDIwNDggfVxufTtcbmZ1bmN0aW9uIHVzZU11bHRpYmFuZFRyYWNrVm9sdW1lKHRyYWNrT3JUcmFja1JlZmVyZW5jZSwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgdHJhY2sgPSB0cmFja09yVHJhY2tSZWZlcmVuY2UgaW5zdGFuY2VvZiBUcmFjazQgPyB0cmFja09yVHJhY2tSZWZlcmVuY2UgOiAoX2EgPSB0cmFja09yVHJhY2tSZWZlcmVuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrT3JUcmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyYWNrO1xuICBjb25zdCBvcHRzID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIG11bHRpYmFuZERlZmF1bHRzKSwgb3B0aW9ucyk7XG4gIGNvbnN0IFtmcmVxdWVuY3lCYW5kcywgc2V0RnJlcXVlbmN5QmFuZHNdID0gUmVhY3Q0OS51c2VTdGF0ZShcbiAgICBuZXcgQXJyYXkob3B0cy5iYW5kcykuZmlsbCgwKVxuICApO1xuICBSZWFjdDQ5LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF0cmFjayB8fCAhKHRyYWNrID09IG51bGwgPyB2b2lkIDAgOiB0cmFjay5tZWRpYVN0cmVhbSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBhbmFseXNlciwgY2xlYW51cCB9ID0gY3JlYXRlQXVkaW9BbmFseXNlcih0cmFjaywgb3B0cy5hbmFseXNlck9wdGlvbnMpO1xuICAgIGNvbnN0IGJ1ZmZlckxlbmd0aCA9IGFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50O1xuICAgIGNvbnN0IGRhdGFBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyTGVuZ3RoKTtcbiAgICBjb25zdCB1cGRhdGVWb2x1bWUgPSAoKSA9PiB7XG4gICAgICBhbmFseXNlci5nZXRGbG9hdEZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTtcbiAgICAgIGxldCBmcmVxdWVuY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YUFycmF5Lmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmcmVxdWVuY2llc1tpXSA9IGRhdGFBcnJheVtpXTtcbiAgICAgIH1cbiAgICAgIGZyZXF1ZW5jaWVzID0gZnJlcXVlbmNpZXMuc2xpY2Uob3B0aW9ucy5sb1Bhc3MsIG9wdGlvbnMuaGlQYXNzKTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGcmVxdWVuY2llcyA9IG5vcm1hbGl6ZUZyZXF1ZW5jaWVzKGZyZXF1ZW5jaWVzKTtcbiAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGguY2VpbChub3JtYWxpemVkRnJlcXVlbmNpZXMubGVuZ3RoIC8gb3B0cy5iYW5kcyk7XG4gICAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0cy5iYW5kczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN1bW1lZFZvbHVtZXMgPSBub3JtYWxpemVkRnJlcXVlbmNpZXMuc2xpY2UoaSAqIGNodW5rU2l6ZSwgKGkgKyAxKSAqIGNodW5rU2l6ZSkucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICs9IHZhbCwgMCk7XG4gICAgICAgIGNodW5rcy5wdXNoKHN1bW1lZFZvbHVtZXMgLyBjaHVua1NpemUpO1xuICAgICAgfVxuICAgICAgc2V0RnJlcXVlbmN5QmFuZHMoY2h1bmtzKTtcbiAgICB9O1xuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwodXBkYXRlVm9sdW1lLCBvcHRzLnVwZGF0ZUludGVydmFsKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfTtcbiAgfSwgW3RyYWNrLCB0cmFjayA9PSBudWxsID8gdm9pZCAwIDogdHJhY2subWVkaWFTdHJlYW0sIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXSk7XG4gIHJldHVybiBmcmVxdWVuY3lCYW5kcztcbn1cbnZhciB3YXZlZm9ybURlZmF1bHRzID0ge1xuICBiYXJDb3VudDogMTIwLFxuICB2b2xNdWx0aXBsaWVyOiA1LFxuICB1cGRhdGVJbnRlcnZhbDogMjBcbn07XG5mdW5jdGlvbiB1c2VBdWRpb1dhdmVmb3JtKHRyYWNrT3JUcmFja1JlZmVyZW5jZSwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgdHJhY2sgPSB0cmFja09yVHJhY2tSZWZlcmVuY2UgaW5zdGFuY2VvZiBUcmFjazQgPyB0cmFja09yVHJhY2tSZWZlcmVuY2UgOiAoX2EgPSB0cmFja09yVHJhY2tSZWZlcmVuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrT3JUcmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyYWNrO1xuICBjb25zdCBvcHRzID0gX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sIHdhdmVmb3JtRGVmYXVsdHMpLCBvcHRpb25zKTtcbiAgY29uc3QgYWdncmVnYXRlV2F2ZSA9IFJlYWN0NDkudXNlUmVmKG5ldyBGbG9hdDMyQXJyYXkoKSk7XG4gIGNvbnN0IHRpbWVSZWYgPSBSZWFjdDQ5LnVzZVJlZihwZXJmb3JtYW5jZS5ub3coKSk7XG4gIGNvbnN0IHVwZGF0ZXMgPSBSZWFjdDQ5LnVzZVJlZigwKTtcbiAgY29uc3QgW2JhcnMsIHNldEJhcnNdID0gUmVhY3Q0OS51c2VTdGF0ZShbXSk7XG4gIGNvbnN0IG9uVXBkYXRlID0gUmVhY3Q0OS51c2VDYWxsYmFjaygod2F2ZSkgPT4ge1xuICAgIHNldEJhcnMoXG4gICAgICBBcnJheS5mcm9tKFxuICAgICAgICBmaWx0ZXJEYXRhKHdhdmUsIG9wdHMuYmFyQ291bnQpLm1hcCgodikgPT4gTWF0aC5zcXJ0KHYpICogb3B0cy52b2xNdWx0aXBsaWVyKVxuICAgICAgICAvLyB3YXZlLnNsaWNlKDAsIG9wdHMuYmFyQ291bnQpLm1hcCgodikgPT4gc2lnbW9pZCh2ICogb3B0cy52b2xNdWx0aXBsaWVyLCAwLjA4LCAwLjIpKSxcbiAgICAgIClcbiAgICApO1xuICB9LCBbXSk7XG4gIFJlYWN0NDkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXRyYWNrIHx8ICEodHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrLm1lZGlhU3RyZWFtKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGFuYWx5c2VyLCBjbGVhbnVwIH0gPSBjcmVhdGVBdWRpb0FuYWx5c2VyKHRyYWNrLCB7XG4gICAgICBmZnRTaXplOiBnZXRGRlRTaXplVmFsdWUob3B0cy5iYXJDb3VudClcbiAgICB9KTtcbiAgICBjb25zdCBidWZmZXJMZW5ndGggPSBnZXRGRlRTaXplVmFsdWUob3B0cy5iYXJDb3VudCk7XG4gICAgY29uc3QgZGF0YUFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXJMZW5ndGgpO1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHVwZGF0ZVdhdmVmb3JtID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XG4gICAgICBhbmFseXNlci5nZXRGbG9hdFRpbWVEb21haW5EYXRhKGRhdGFBcnJheSk7XG4gICAgICBhZ2dyZWdhdGVXYXZlLmN1cnJlbnQubWFwKCh2LCBpKSA9PiB2ICsgZGF0YUFycmF5W2ldKTtcbiAgICAgIHVwZGF0ZXMuY3VycmVudCArPSAxO1xuICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gdGltZVJlZi5jdXJyZW50ID49IG9wdHMudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IGRhdGFBcnJheS5tYXAoKHYpID0+IHYgLyB1cGRhdGVzLmN1cnJlbnQpO1xuICAgICAgICBvblVwZGF0ZShuZXdEYXRhKTtcbiAgICAgICAgdGltZVJlZi5jdXJyZW50ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIHVwZGF0ZXMuY3VycmVudCA9IDA7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgdXBkYXRlV2F2ZWZvcm0gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodXBkYXRlV2F2ZWZvcm0pO1xuICAgIH07XG4gIH0sIFt0cmFjaywgdHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrLm1lZGlhU3RyZWFtLCBKU09OLnN0cmluZ2lmeShvcHRpb25zKSwgb25VcGRhdGVdKTtcbiAgcmV0dXJuIHtcbiAgICBiYXJzXG4gIH07XG59XG5mdW5jdGlvbiBnZXRGRlRTaXplVmFsdWUoeCkge1xuICBpZiAoeCA8IDMyKSByZXR1cm4gMzI7XG4gIGVsc2UgcmV0dXJuIHBvdzJjZWlsKHgpO1xufVxuZnVuY3Rpb24gcG93MmNlaWwodikge1xuICBsZXQgcCA9IDI7XG4gIHdoaWxlICh2ID4+PSAxKSB7XG4gICAgcCA8PD0gMTtcbiAgfVxuICByZXR1cm4gcDtcbn1cbmZ1bmN0aW9uIGZpbHRlckRhdGEoYXVkaW9EYXRhLCBudW1TYW1wbGVzKSB7XG4gIGNvbnN0IGJsb2NrU2l6ZSA9IE1hdGguZmxvb3IoYXVkaW9EYXRhLmxlbmd0aCAvIG51bVNhbXBsZXMpO1xuICBjb25zdCBmaWx0ZXJlZERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KG51bVNhbXBsZXMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVNhbXBsZXM7IGkrKykge1xuICAgIGNvbnN0IGJsb2NrU3RhcnQgPSBibG9ja1NpemUgKiBpO1xuICAgIGxldCBzdW0gPSAwO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmxvY2tTaXplOyBqKyspIHtcbiAgICAgIHN1bSA9IHN1bSArIE1hdGguYWJzKGF1ZGlvRGF0YVtibG9ja1N0YXJ0ICsgal0pO1xuICAgIH1cbiAgICBmaWx0ZXJlZERhdGFbaV0gPSBzdW0gLyBibG9ja1NpemU7XG4gIH1cbiAgcmV0dXJuIGZpbHRlcmVkRGF0YTtcbn1cblxuLy8gc3JjL2hvb2tzL3VzZVBhcnRpY2lwYW50VHJhY2tzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDUwIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcGFydGljaXBhbnRUcmFja3NPYnNlcnZhYmxlIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gdXNlUGFydGljaXBhbnRUcmFja3Moc291cmNlcywgcGFydGljaXBhbnRJZGVudGl0eSkge1xuICBjb25zdCByb29tID0gdXNlUm9vbUNvbnRleHQoKTtcbiAgY29uc3QgcGFydGljaXBhbnRDb250ZXh0ID0gdXNlTWF5YmVQYXJ0aWNpcGFudENvbnRleHQoKTtcbiAgY29uc3QgcCA9IHBhcnRpY2lwYW50SWRlbnRpdHkgPyByb29tLmdldFBhcnRpY2lwYW50QnlJZGVudGl0eShwYXJ0aWNpcGFudElkZW50aXR5KSA6IHBhcnRpY2lwYW50Q29udGV4dDtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IFJlYWN0NTAudXNlTWVtbyhcbiAgICAoKSA9PiBwID8gcGFydGljaXBhbnRUcmFja3NPYnNlcnZhYmxlKHAsIHsgc291cmNlcyB9KSA6IHZvaWQgMCxcbiAgICBbcCA9PSBudWxsID8gdm9pZCAwIDogcC5zaWQsIHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAuaWRlbnRpdHksIEpTT04uc3RyaW5naWZ5KHNvdXJjZXMpXVxuICApO1xuICBjb25zdCB0cmFja1JlZnMgPSB1c2VPYnNlcnZhYmxlU3RhdGUob2JzZXJ2YWJsZSwgW10pO1xuICByZXR1cm4gdHJhY2tSZWZzO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlVHJhY2tUcmFuc2NyaXB0aW9uLnRzXG5pbXBvcnQge1xuICBhZGRNZWRpYVRpbWVzdGFtcFRvVHJhbnNjcmlwdGlvbiBhcyBhZGRUaW1lc3RhbXBzVG9UcmFuc2NyaXB0aW9uLFxuICBkZWR1cGVTZWdtZW50cyxcbiAgZ2V0VHJhY2tSZWZlcmVuY2VJZCBhcyBnZXRUcmFja1JlZmVyZW5jZUlkMyxcbiAgdHJhY2tUcmFuc2NyaXB0aW9uT2JzZXJ2ZXJcbn0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q1MiBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVRyYWNrU3luY1RpbWUudHNcbmltcG9ydCAqIGFzIFJlYWN0NTEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0cmFja1N5bmNUaW1lT2JzZXJ2ZXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5mdW5jdGlvbiB1c2VUcmFja1N5bmNUaW1lKHJlZikge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IFJlYWN0NTEudXNlTWVtbyhcbiAgICAoKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgcmV0dXJuICgoX2EyID0gcmVmID09IG51bGwgPyB2b2lkIDAgOiByZWYucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYTIudHJhY2spID8gdHJhY2tTeW5jVGltZU9ic2VydmVyKHJlZiA9PSBudWxsID8gdm9pZCAwIDogcmVmLnB1YmxpY2F0aW9uLnRyYWNrKSA6IHZvaWQgMDtcbiAgICB9LFxuICAgIFsoX2EgPSByZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHJlZi5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyYWNrXVxuICApO1xuICByZXR1cm4gdXNlT2JzZXJ2YWJsZVN0YXRlKG9ic2VydmFibGUsIHtcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgcnRwVGltZXN0YW1wOiAoX2MgPSAoX2IgPSByZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHJlZi5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRyYWNrKSA9PSBudWxsID8gdm9pZCAwIDogX2MucnRwVGltZXN0YW1wXG4gIH0pO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlVHJhY2tUcmFuc2NyaXB0aW9uLnRzXG52YXIgVFJBQ0tfVFJBTlNDUklQVElPTl9ERUZBVUxUUyA9IHtcbiAgYnVmZmVyU2l6ZTogMTAwXG4gIC8vIG1heEFnZTogMl8wMDAsXG59O1xuZnVuY3Rpb24gdXNlVHJhY2tUcmFuc2NyaXB0aW9uKHRyYWNrUmVmLCBvcHRpb25zKSB7XG4gIGNvbnN0IG9wdHMgPSBfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgVFJBQ0tfVFJBTlNDUklQVElPTl9ERUZBVUxUUyksIG9wdGlvbnMpO1xuICBjb25zdCBbc2VnbWVudHMsIHNldFNlZ21lbnRzXSA9IFJlYWN0NTIudXNlU3RhdGUoW10pO1xuICBjb25zdCBzeW5jVGltZXN0YW1wcyA9IHVzZVRyYWNrU3luY1RpbWUodHJhY2tSZWYpO1xuICBjb25zdCBoYW5kbGVTZWdtZW50TWVzc2FnZSA9IChuZXdTZWdtZW50cykgPT4ge1xuICAgIHZhciBfYTtcbiAgICAoX2EgPSBvcHRzLm9uVHJhbnNjcmlwdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwob3B0cywgbmV3U2VnbWVudHMpO1xuICAgIHNldFNlZ21lbnRzKFxuICAgICAgKHByZXZTZWdtZW50cykgPT4gZGVkdXBlU2VnbWVudHMoXG4gICAgICAgIHByZXZTZWdtZW50cyxcbiAgICAgICAgLy8gd2hlbiBmaXJzdCByZWNlaXZpbmcgYSBzZWdtZW50LCBhZGQgdGhlIGN1cnJlbnQgbWVkaWEgdGltZXN0YW1wIHRvIGl0XG4gICAgICAgIG5ld1NlZ21lbnRzLm1hcCgocykgPT4gYWRkVGltZXN0YW1wc1RvVHJhbnNjcmlwdGlvbihzLCBzeW5jVGltZXN0YW1wcykpLFxuICAgICAgICBvcHRzLmJ1ZmZlclNpemVcbiAgICAgIClcbiAgICApO1xuICB9O1xuICBSZWFjdDUyLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCEodHJhY2tSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmLnB1YmxpY2F0aW9uKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0cmFja1RyYW5zY3JpcHRpb25PYnNlcnZlcih0cmFja1JlZi5wdWJsaWNhdGlvbikuc3Vic2NyaWJlKChldnQpID0+IHtcbiAgICAgIGhhbmRsZVNlZ21lbnRNZXNzYWdlKC4uLmV2dCk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFt0cmFja1JlZiAmJiBnZXRUcmFja1JlZmVyZW5jZUlkMyh0cmFja1JlZiksIGhhbmRsZVNlZ21lbnRNZXNzYWdlXSk7XG4gIHJldHVybiB7IHNlZ21lbnRzIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VWb2ljZUFzc2lzdGFudC50c1xuaW1wb3J0ICogYXMgUmVhY3Q1NCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25TdGF0ZSBhcyBDb25uZWN0aW9uU3RhdGU0LCBQYXJ0aWNpcGFudEtpbmQsIFRyYWNrIGFzIFRyYWNrNSB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuXG4vLyBzcmMvaG9va3MvdXNlUGFydGljaXBhbnRBdHRyaWJ1dGVzLnRzXG5pbXBvcnQgeyBwYXJ0aWNpcGFudEF0dHJpYnV0ZXNPYnNlcnZlciB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NTMgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VQYXJ0aWNpcGFudEF0dHJpYnV0ZXMocHJvcHMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IHBhcnRpY2lwYW50Q29udGV4dCA9IHVzZU1heWJlUGFydGljaXBhbnRDb250ZXh0KCk7XG4gIGNvbnN0IHAgPSAoX2EgPSBwcm9wcy5wYXJ0aWNpcGFudCkgIT0gbnVsbCA/IF9hIDogcGFydGljaXBhbnRDb250ZXh0O1xuICBjb25zdCBhdHRyaWJ1dGVPYnNlcnZlciA9IFJlYWN0NTMudXNlTWVtbyhcbiAgICAvLyB3ZWlyZCB0eXBlc2NyaXB0IGNvbnN0cmFpbnRcbiAgICAoKSA9PiBwID8gcGFydGljaXBhbnRBdHRyaWJ1dGVzT2JzZXJ2ZXIocCkgOiBwYXJ0aWNpcGFudEF0dHJpYnV0ZXNPYnNlcnZlcihwKSxcbiAgICBbcF1cbiAgKTtcbiAgY29uc3QgYXR0cmlidXRlU3RhdGUgPSB1c2VPYnNlcnZhYmxlU3RhdGUoYXR0cmlidXRlT2JzZXJ2ZXIsIHtcbiAgICBhdHRyaWJ1dGVzOiBwID09IG51bGwgPyB2b2lkIDAgOiBwLmF0dHJpYnV0ZXNcbiAgfSk7XG4gIHJldHVybiBhdHRyaWJ1dGVTdGF0ZTtcbn1cbmZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50QXR0cmlidXRlKGF0dHJpYnV0ZUtleSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChvcHRpb25zLnBhcnRpY2lwYW50KTtcbiAgY29uc3QgW2F0dHJpYnV0ZSwgc2V0QXR0cmlidXRlXSA9IFJlYWN0NTMudXNlU3RhdGUocC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZUtleV0pO1xuICBSZWFjdDUzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHBhcnRpY2lwYW50QXR0cmlidXRlc09ic2VydmVyKHApLnN1YnNjcmliZSgodmFsKSA9PiB7XG4gICAgICBpZiAodmFsLmNoYW5nZWRbYXR0cmlidXRlS2V5XSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHNldEF0dHJpYnV0ZSh2YWwuY2hhbmdlZFthdHRyaWJ1dGVLZXldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW3AsIGF0dHJpYnV0ZUtleV0pO1xuICByZXR1cm4gYXR0cmlidXRlO1xufVxuXG4vLyBzcmMvaG9va3MvdXNlVm9pY2VBc3Npc3RhbnQudHNcbnZhciBzdGF0ZV9hdHRyaWJ1dGUgPSBcInZvaWNlX2Fzc2lzdGFudC5zdGF0ZVwiO1xuZnVuY3Rpb24gdXNlVm9pY2VBc3Npc3RhbnQoKSB7XG4gIGNvbnN0IGFnZW50ID0gdXNlUmVtb3RlUGFydGljaXBhbnRzKCkuZmluZCgocCkgPT4gcC5raW5kID09PSBQYXJ0aWNpcGFudEtpbmQuQUdFTlQpO1xuICBjb25zdCBhdWRpb1RyYWNrID0gdXNlUGFydGljaXBhbnRUcmFja3MoW1RyYWNrNS5Tb3VyY2UuTWljcm9waG9uZV0sIGFnZW50ID09IG51bGwgPyB2b2lkIDAgOiBhZ2VudC5pZGVudGl0eSlbMF07XG4gIGNvbnN0IHsgc2VnbWVudHM6IGFnZW50VHJhbnNjcmlwdGlvbnMgfSA9IHVzZVRyYWNrVHJhbnNjcmlwdGlvbihhdWRpb1RyYWNrKTtcbiAgY29uc3QgY29ubmVjdGlvblN0YXRlID0gdXNlQ29ubmVjdGlvblN0YXRlKCk7XG4gIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gdXNlUGFydGljaXBhbnRBdHRyaWJ1dGVzKHsgcGFydGljaXBhbnQ6IGFnZW50IH0pO1xuICBjb25zdCBzdGF0ZSA9IFJlYWN0NTQudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlNC5EaXNjb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybiBcImRpc2Nvbm5lY3RlZFwiO1xuICAgIH0gZWxzZSBpZiAoY29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGU0LkNvbm5lY3RpbmcgfHwgIWFnZW50IHx8ICEoYXR0cmlidXRlcyA9PSBudWxsID8gdm9pZCAwIDogYXR0cmlidXRlc1tzdGF0ZV9hdHRyaWJ1dGVdKSkge1xuICAgICAgcmV0dXJuIFwiY29ubmVjdGluZ1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXR0cmlidXRlc1tzdGF0ZV9hdHRyaWJ1dGVdO1xuICAgIH1cbiAgfSwgW2F0dHJpYnV0ZXMsIGFnZW50LCBjb25uZWN0aW9uU3RhdGVdKTtcbiAgcmV0dXJuIHtcbiAgICBhZ2VudCxcbiAgICBzdGF0ZSxcbiAgICBhdWRpb1RyYWNrLFxuICAgIGFnZW50VHJhbnNjcmlwdGlvbnMsXG4gICAgYWdlbnRBdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzXG4gIH07XG59XG5cbi8vIHNyYy9ob29rcy91c2VJc1JlY29yZGluZy50c1xuaW1wb3J0IHsgcmVjb3JkaW5nU3RhdHVzT2JzZXJ2YWJsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0NTUgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VJc1JlY29yZGluZyhyb29tKSB7XG4gIGNvbnN0IHIgPSB1c2VFbnN1cmVSb29tKHJvb20pO1xuICBjb25zdCBjb25uZWN0aW9uU3RhdGUgPSB1c2VDb25uZWN0aW9uU3RhdGUocik7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBSZWFjdDU1LnVzZU1lbW8oKCkgPT4gcmVjb3JkaW5nU3RhdHVzT2JzZXJ2YWJsZShyKSwgW3IsIGNvbm5lY3Rpb25TdGF0ZV0pO1xuICBjb25zdCBpc1JlY29yZGluZyA9IHVzZU9ic2VydmFibGVTdGF0ZShvYnNlcnZhYmxlLCByLmlzUmVjb3JkaW5nKTtcbiAgcmV0dXJuIGlzUmVjb3JkaW5nO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9DbGVhclBpbkJ1dHRvbi50c3hcbnZhciBDbGVhclBpbkJ1dHRvbiA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDU2LmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIENsZWFyUGluQnV0dG9uMihwcm9wcywgcmVmKSB7XG4gICAgY29uc3QgeyBidXR0b25Qcm9wcyB9ID0gdXNlQ2xlYXJQaW5CdXR0b24ocHJvcHMpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1Ni5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIGJ1dHRvblByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xuICB9XG4pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9Db25uZWN0aW9uU3RhdGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDU3IGZyb20gXCJyZWFjdFwiO1xudmFyIENvbm5lY3Rpb25TdGF0ZTUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q1Ny5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbiBDb25uZWN0aW9uU3RhdGU2KF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwgeyByb29tIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInJvb21cIl0pO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25TdGF0ZSA9IHVzZUNvbm5lY3Rpb25TdGF0ZShyb29tKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0NTcuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7IHJlZiB9LCBwcm9wcyksIGNvbm5lY3Rpb25TdGF0ZSk7XG4gIH1cbik7XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL0NoYXRUb2dnbGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDU4IGZyb20gXCJyZWFjdFwiO1xudmFyIENoYXRUb2dnbGUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q1OC5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbiBDaGF0VG9nZ2xlMihwcm9wcywgcmVmKSB7XG4gICAgY29uc3QgeyBtZXJnZWRQcm9wcyB9ID0gdXNlQ2hhdFRvZ2dsZSh7IHByb3BzIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1OC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIG1lcmdlZFByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xuICB9XG4pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9EaXNjb25uZWN0QnV0dG9uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q1OSBmcm9tIFwicmVhY3RcIjtcbnZhciBEaXNjb25uZWN0QnV0dG9uID0gLyogQF9fUFVSRV9fICovIFJlYWN0NTkuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gRGlzY29ubmVjdEJ1dHRvbjIocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgYnV0dG9uUHJvcHMgfSA9IHVzZURpc2Nvbm5lY3RCdXR0b24ocHJvcHMpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q1OS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIGJ1dHRvblByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xuICB9XG4pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9Gb2N1c1RvZ2dsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzkgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvQ2FtZXJhRGlzYWJsZWRJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2MCBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdDYW1lcmFEaXNhYmxlZEljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYwLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2MC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEuMzU0LjY0NmEuNS41IDAgMSAwLS43MDguNzA4bDE0IDE0YS41LjUgMCAwIDAgLjcwOC0uNzA4TDExIDEwLjI5M1Y0LjVBMS41IDEuNSAwIDAgMCA5LjUgM0gzLjcwN3pNMCA0LjVhMS41IDEuNSAwIDAgMSAuOTQzLTEuMzkzbDkuNTMyIDkuNTMzYy0uMjYyLjIyNC0uNjAzLjM2LS45NzUuMzZoLThBMS41IDEuNSAwIDAgMSAwIDExLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYwLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJtMTUuMiAzLjYtMi44IDIuMWExIDEgMCAwIDAtLjQuOHYzYTEgMSAwIDAgMCAuNC44bDIuOCAyLjFhLjUuNSAwIDAgMCAuOC0uNFY0YS41LjUgMCAwIDAtLjgtLjR6XCIgfSkpO1xudmFyIENhbWVyYURpc2FibGVkSWNvbl9kZWZhdWx0ID0gU3ZnQ2FtZXJhRGlzYWJsZWRJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL0NhbWVyYUljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDYxIGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z0NhbWVyYUljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYxLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2MS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgNC41QTEuNSAxLjUgMCAwIDEgMS41IDNoOEExLjUgMS41IDAgMCAxIDExIDQuNXY3QTEuNSAxLjUgMCAwIDEgOS41IDEzaC04QTEuNSAxLjUgMCAwIDEgMCAxMS41ek0xNS4yIDMuNmwtMi44IDIuMWExIDEgMCAwIDAtLjQuOHYzYTEgMSAwIDAgMCAuNC44bDIuOCAyLjFhLjUuNSAwIDAgMCAuOC0uNFY0YS41LjUgMCAwIDAtLjgtLjR6XCIgfSkpO1xudmFyIENhbWVyYUljb25fZGVmYXVsdCA9IFN2Z0NhbWVyYUljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvQ2hhdENsb3NlSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NjIgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnQ2hhdENsb3NlSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NjIuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDYyLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCIjRkZGXCIsXG4gICAgZDogXCJNNC45OSAzLjk5YTEgMSAwIDAgMC0uNjk3IDEuNzE3TDEwLjU4NiAxMmwtNi4yOTMgNi4yOTNhMSAxIDAgMSAwIDEuNDE0IDEuNDE0TDEyIDEzLjQxNGw2LjI5MyA2LjI5M2ExIDEgMCAxIDAgMS40MTQtMS40MTRMMTMuNDE0IDEybDYuMjkzLTYuMjkzYTEgMSAwIDAgMC0uNzI3LTEuNzE3IDEgMSAwIDAgMC0uNjg3LjMwM0wxMiAxMC41ODYgNS43MDcgNC4yOTNhMSAxIDAgMCAwLS43MTctLjMwM3pcIlxuICB9XG4pKTtcbnZhciBDaGF0Q2xvc2VJY29uX2RlZmF1bHQgPSBTdmdDaGF0Q2xvc2VJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL0NoYXRJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2MyBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdDaGF0SWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NjMuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxOCwgZmlsbDogXCJub25lXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2My5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTAgMi43NUEyLjc1IDIuNzUgMCAwIDEgMi43NSAwaDEwLjVBMi43NSAyLjc1IDAgMCAxIDE2IDIuNzV2MTMuNTk0YS43NS43NSAwIDAgMS0xLjIzNC41NzJsLTMuNjkxLTMuMTJhMS4yNSAxLjI1IDAgMCAwLS44MDctLjI5NkgyLjc1QTIuNzUgMi43NSAwIDAgMSAwIDEwLjc1di04Wk0yLjc1IDEuNWMtLjY5IDAtMS4yNS41Ni0xLjI1IDEuMjV2OGMwIC42OS41NiAxLjI1IDEuMjUgMS4yNWg3LjUxOGMuNjUgMCAxLjI3OS4yMyAxLjc3NS42NWwyLjQ1NyAyLjA3N1YyLjc1YzAtLjY5LS41Ni0xLjI1LTEuMjUtMS4yNUgyLjc1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2My5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTMgNC41YS41LjUgMCAwIDEgLjUtLjVoOWEuNS41IDAgMCAxIDAgMWgtOWEuNS41IDAgMCAxLS41LS41Wm0wIDJhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05YS41LjUgMCAwIDEtLjUtLjVabTAgMmEuNS41IDAgMCAxIC41LS41aDVhLjUuNSAwIDAgMSAwIDFoLTVhLjUuNSAwIDAgMS0uNS0uNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSk7XG52YXIgQ2hhdEljb25fZGVmYXVsdCA9IFN2Z0NoYXRJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL0NoZXZyb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDY0IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z0NoZXZyb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjQuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRjb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk01LjI5MyAyLjI5M2ExIDEgMCAwIDEgMS40MTQgMGw0LjgyMyA0LjgyM2ExLjI1IDEuMjUgMCAwIDEgMCAxLjc2OGwtNC44MjMgNC44MjNhMSAxIDAgMCAxLTEuNDE0LTEuNDE0TDkuNTg2IDggNS4yOTMgMy43MDdhMSAxIDAgMCAxIDAtMS40MTR6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpO1xudmFyIENoZXZyb25fZGVmYXVsdCA9IFN2Z0NoZXZyb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvRm9jdXNUb2dnbGVJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2NSBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdGb2N1c1RvZ2dsZUljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY1LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjUuY3JlYXRlRWxlbWVudChcImdcIiwgeyBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiwgc3Ryb2tlV2lkdGg6IDEuNSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2NS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEwIDEuNzVoNC4yNW0wIDBWNm0wLTQuMjVMOSA3TTYgMTQuMjVIMS43NW0wIDBWMTBtMCA0LjI1TDcgOVwiIH0pKSk7XG52YXIgRm9jdXNUb2dnbGVJY29uX2RlZmF1bHQgPSBTdmdGb2N1c1RvZ2dsZUljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvR2Vhckljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDY2IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z0dlYXJJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q2Ni5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY2LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Y29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOC45NjEuODk0QzguODc1LS4yOTggNy4xMjUtLjI5OCA3LjA0Ljg5NGMtLjA2Ni45MTItMS4yNDYgMS4yMjgtMS43Ni40NzItLjY3LS45OS0yLjE4Ni0uMTE1LTEuNjY0Ljk2LjM5OS44MjQtLjQ2NSAxLjY4OC0xLjI4OCAxLjI4OS0xLjA3Ni0uNTIyLTEuOTUuOTk0LS45NjEgMS42NjUuNzU2LjUxMy40NCAxLjY5My0uNDcyIDEuNzU5LTEuMTkyLjA4Ni0xLjE5MiAxLjgzNiAwIDEuOTIyLjkxMi4wNjYgMS4yMjggMS4yNDYuNDcyIDEuNzYtLjk5LjY3LS4xMTUgMi4xODYuOTYgMS42NjQuODI0LS4zOTkgMS42ODguNDY1IDEuMjg5IDEuMjg4LS41MjIgMS4wNzYuOTk0IDEuOTUgMS42NjUuOTYxLjUxMy0uNzU2IDEuNjkzLS40NCAxLjc1OS40NzIuMDg2IDEuMTkyIDEuODM2IDEuMTkyIDEuOTIyIDAgLjA2Ni0uOTEyIDEuMjQ2LTEuMjI4IDEuNzYtLjQ3Mi42Ny45OSAyLjE4Ni4xMTUgMS42NjQtLjk2LS4zOTktLjgyNC40NjUtMS42ODggMS4yODgtMS4yODkgMS4wNzYuNTIyIDEuOTUtLjk5NC45NjEtMS42NjUtLjc1Ni0uNTEzLS40NC0xLjY5My40NzItMS43NTkgMS4xOTItLjA4NiAxLjE5Mi0xLjgzNiAwLTEuOTIyLS45MTItLjA2Ni0xLjIyOC0xLjI0Ni0uNDcyLTEuNzYuOTktLjY3LjExNS0yLjE4Ni0uOTYtMS42NjQtLjgyNC4zOTktMS42ODgtLjQ2NS0xLjI4OS0xLjI4OC41MjItMS4wNzYtLjk5NC0xLjk1LTEuNjY1LS45NjEtLjUxMy43NTYtMS42OTMuNDQtMS43NTktLjQ3MlpNOCAxM0E1IDUgMCAxIDAgOCAzYTUgNSAwIDAgMCAwIDEwWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBHZWFySWNvbl9kZWZhdWx0ID0gU3ZnR2Vhckljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvTGVhdmVJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2NyBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdMZWF2ZUljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY3LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0yIDIuNzVBMi43NSAyLjc1IDAgMCAxIDQuNzUgMGg2LjVBMi43NSAyLjc1IDAgMCAxIDE0IDIuNzV2MTAuNUEyLjc1IDIuNzUgMCAwIDEgMTEuMjUgMTZoLTYuNUEyLjc1IDIuNzUgMCAwIDEgMiAxMy4yNXYtLjVhLjc1Ljc1IDAgMCAxIDEuNSAwdi41YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDYuNWMuNjkgMCAxLjI1LS41NiAxLjI1LTEuMjVWMi43NWMwLS42OS0uNTYtMS4yNS0xLjI1LTEuMjVoLTYuNWMtLjY5IDAtMS4yNS41Ni0xLjI1IDEuMjV2LjVhLjc1Ljc1IDAgMCAxLTEuNSAwdi0uNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04Ljc4IDcuNDdhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtMi4yNSAyLjI1YS43NS43NSAwIDEgMS0xLjA2LTEuMDZsLjk3LS45N0gxLjc1YS43NS43NSAwIDAgMSAwLTEuNWg0LjY5bC0uOTctLjk3YS43NS43NSAwIDAgMSAxLjA2LTEuMDZsMi4yNSAyLjI1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBMZWF2ZUljb25fZGVmYXVsdCA9IFN2Z0xlYXZlSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9Mb2NrTG9ja2VkSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NjggZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnTG9ja0xvY2tlZEljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY4LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjguY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRjb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00IDYuMTA0VjRhNCA0IDAgMSAxIDggMHYyLjEwNGMxLjE1NC4zMjYgMiAxLjM4NyAyIDIuNjQ2djQuNUEyLjc1IDIuNzUgMCAwIDEgMTEuMjUgMTZoLTYuNUEyLjc1IDIuNzUgMCAwIDEgMiAxMy4yNXYtNC41YzAtMS4yNTkuODQ2LTIuMzIgMi0yLjY0NlpNNS41IDRhMi41IDIuNSAwIDAgMSA1IDB2MmgtNVY0WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBMb2NrTG9ja2VkSWNvbl9kZWZhdWx0ID0gU3ZnTG9ja0xvY2tlZEljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvTWljRGlzYWJsZWRJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q2OSBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdNaWNEaXNhYmxlZEljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDY5LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q2OS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyLjIyNyAxMS41MmE1LjQ3NyA1LjQ3NyAwIDAgMCAxLjI0Ni0yLjk3LjUuNSAwIDAgMC0uOTk1LS4xIDQuNDc4IDQuNDc4IDAgMCAxLS45NjIgMi4zNTlsLTEuMDctMS4wN0MxMC43OTQgOS4yNDcgMTEgOC42NDcgMTEgOFYzYTMgMyAwIDAgMC02IDB2MS4yOTNMMS4zNTQuNjQ2YS41LjUgMCAxIDAtLjcwOC43MDhsMTQgMTRhLjUuNSAwIDAgMCAuNzA4LS43MDh6TTggMTIuNWMuNjgzIDAgMS4zMy0uMTUyIDEuOTExLS40MjVsLjc0My43NDNjLS42NDkuMzU5LTEuMzc4LjU5LTIuMTU0LjY2VjE1aDJhLjUuNSAwIDAgMSAwIDFoLTVhLjUuNSAwIDAgMSAwLTFoMnYtMS41MjJhNS41MDIgNS41MDIgMCAwIDEtNC45NzMtNC45MjkuNS41IDAgMCAxIC45OTUtLjA5OEE0LjUgNC41IDAgMCAwIDggMTIuNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NjkuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk04Ljc0MyAxMC45MDcgNSA3LjE2NFY4YTMgMyAwIDAgMCAzLjc0MyAyLjkwN3pcIiB9KSk7XG52YXIgTWljRGlzYWJsZWRJY29uX2RlZmF1bHQgPSBTdmdNaWNEaXNhYmxlZEljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvTWljSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzAgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnTWljSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NzAuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcwLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuOTc1IDguMDAyYS41LjUgMCAwIDEgLjU0Ny40NDkgNC41IDQuNSAwIDAgMCA4Ljk1NiAwIC41LjUgMCAxIDEgLjk5NS4wOThBNS41MDIgNS41MDIgMCAwIDEgOC41IDEzLjQ3OFYxNWgyYS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEgMC0xaDJ2LTEuNTIyYTUuNTAyIDUuNTAyIDAgMCAxLTQuOTczLTQuOTI5LjUuNSAwIDAgMSAuNDQ4LS41NDd6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcwLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNSAzYTMgMyAwIDEgMSA2IDB2NWEzIDMgMCAwIDEtNiAwelwiIH0pKTtcbnZhciBNaWNJY29uX2RlZmF1bHQgPSBTdmdNaWNJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL1F1YWxpdHlFeGNlbGxlbnRJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3MSBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdRdWFsaXR5RXhjZWxsZW50SWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NzEuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcxLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi02YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcxLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi02YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSkpO1xudmFyIFF1YWxpdHlFeGNlbGxlbnRJY29uX2RlZmF1bHQgPSBTdmdRdWFsaXR5RXhjZWxsZW50SWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9RdWFsaXR5R29vZEljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDcyIGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z1F1YWxpdHlHb29kSWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NzIuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDcyLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzIuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Mi5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzIuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Mi5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyIC41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSkpKTtcbnZhciBRdWFsaXR5R29vZEljb25fZGVmYXVsdCA9IFN2Z1F1YWxpdHlHb29kSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9RdWFsaXR5UG9vckljb24udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDczIGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z1F1YWxpdHlQb29ySWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NzMuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDczLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzMuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3My5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzMuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk02IDYuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDczLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNiA2LjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzMuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSk7XG52YXIgUXVhbGl0eVBvb3JJY29uX2RlZmF1bHQgPSBTdmdRdWFsaXR5UG9vckljb247XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvUXVhbGl0eVVua25vd25JY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3NCBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdRdWFsaXR5VW5rbm93bkljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3NC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzQuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzQuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSkpO1xudmFyIFF1YWxpdHlVbmtub3duSWNvbl9kZWZhdWx0ID0gU3ZnUXVhbGl0eVVua25vd25JY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL1NjcmVlblNoYXJlSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzUgZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnU2NyZWVuU2hhcmVJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3NS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc1LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMCAyLjc1QTIuNzUgMi43NSAwIDAgMSAyLjc1IDBoMTQuNUEyLjc1IDIuNzUgMCAwIDEgMjAgMi43NXYxMC41QTIuNzUgMi43NSAwIDAgMSAxNy4yNSAxNkgyLjc1QTIuNzUgMi43NSAwIDAgMSAwIDEzLjI1VjIuNzVaTTIuNzUgMS41Yy0uNjkgMC0xLjI1LjU2LTEuMjUgMS4yNXYxMC41YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDE0LjVjLjY5IDAgMS4yNS0uNTYgMS4yNS0xLjI1VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1SDIuNzVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc1LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOS40NyA0LjIyYS43NS43NSAwIDAgMSAxLjA2IDBsMi4yNSAyLjI1YS43NS43NSAwIDAgMS0xLjA2IDEuMDZsLS45Ny0uOTd2NC42OWEuNzUuNzUgMCAwIDEtMS41IDBWNi41NmwtLjk3Ljk3YS43NS43NSAwIDAgMS0xLjA2LTEuMDZsMi4yNS0yLjI1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKTtcbnZhciBTY3JlZW5TaGFyZUljb25fZGVmYXVsdCA9IFN2Z1NjcmVlblNoYXJlSWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9TY3JlZW5TaGFyZVN0b3BJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3NiBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdTY3JlZW5TaGFyZVN0b3BJY29uID0gKHByb3BzKSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Ni5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9fc3ByZWFkVmFsdWVzKHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiB9LCBwcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc2LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Ni5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTcuMjggNC4yMmEuNzUuNzUgMCAwIDAtMS4wNiAxLjA2TDguOTQgOGwtMi43MiAyLjcyYS43NS43NSAwIDEgMCAxLjA2IDEuMDZMMTAgOS4wNmwyLjcyIDIuNzJhLjc1Ljc1IDAgMSAwIDEuMDYtMS4wNkwxMS4wNiA4bDIuNzItMi43MmEuNzUuNzUgMCAwIDAtMS4wNi0xLjA2TDEwIDYuOTR6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc2LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuNzUgMEEyLjc1IDIuNzUgMCAwIDAgMCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAwIDIuNzUgMTZoMTQuNUEyLjc1IDIuNzUgMCAwIDAgMjAgMTMuMjVWMi43NUEyLjc1IDIuNzUgMCAwIDAgMTcuMjUgMHpNMS41IDIuNzVjMC0uNjkuNTYtMS4yNSAxLjI1LTEuMjVoMTQuNWMuNjkgMCAxLjI1LjU2IDEuMjUgMS4yNXYxMC41YzAgLjY5LS41NiAxLjI1LTEuMjUgMS4yNUgyLjc1Yy0uNjkgMC0xLjI1LS41Ni0xLjI1LTEuMjV6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpKTtcbnZhciBTY3JlZW5TaGFyZVN0b3BJY29uX2RlZmF1bHQgPSBTdmdTY3JlZW5TaGFyZVN0b3BJY29uO1xuXG4vLyBzcmMvYXNzZXRzL2ljb25zL1NwaW5uZXJJY29uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q3NyBmcm9tIFwicmVhY3RcIjtcbnZhciBTdmdTcGlubmVySWNvbiA9IChwcm9wcykgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfX3NwcmVhZFZhbHVlcyh7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIgfSwgcHJvcHMpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Ny5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTggMGEuNzUuNzUgMCAwIDEgLjc1Ljc1djIuNWEuNzUuNzUgMCAwIDEtMS41IDBWLjc1QS43NS43NSAwIDAgMSA4IDBaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc3LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOCAxMmEuNzUuNzUgMCAwIDEgLjc1Ljc1djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNUEuNzUuNzUgMCAwIDEgOCAxMlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC43XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc3LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTIgMS4wNzJhLjc1Ljc1IDAgMCAxIC4yNzQgMS4wMjRsLTEuMjUgMi4xNjVhLjc1Ljc1IDAgMCAxLTEuMjk5LS43NWwxLjI1LTIuMTY1QS43NS43NSAwIDAgMSAxMiAxLjA3MlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk02IDExLjQ2NGEuNzUuNzUgMCAwIDEgLjI3NCAxLjAyNWwtMS4yNSAyLjE2NWEuNzUuNzUgMCAwIDEtMS4yOTktLjc1bDEuMjUtMi4xNjVBLjc1Ljc1IDAgMCAxIDYgMTEuNDY0WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjZcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNC45MjggNGEuNzUuNzUgMCAwIDEtLjI3NCAxLjAyNWwtMi4xNjUgMS4yNWEuNzUuNzUgMCAxIDEtLjc1LTEuM2wyLjE2NS0xLjI1QS43NS43NSAwIDAgMSAxNC45MjggNFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00LjUzNiAxMGEuNzUuNzUgMCAwIDEtLjI3NSAxLjAyNGwtMi4xNjUgMS4yNWEuNzUuNzUgMCAwIDEtLjc1LTEuMjk4bDIuMTY1LTEuMjVBLjc1Ljc1IDAgMCAxIDQuNTM2IDEwWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjVcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNiA4YS43NS43NSAwIDAgMS0uNzUuNzVoLTIuNWEuNzUuNzUgMCAwIDEgMC0xLjVoMi41QS43NS43NSAwIDAgMSAxNiA4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Ny5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTQgOGEuNzUuNzUgMCAwIDEtLjc1Ljc1SC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoMi41QS43NS43NSAwIDAgMSA0IDhaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuNFxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3Ny5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTE0LjkyOCAxMmEuNzUuNzUgMCAwIDEtMS4wMjQuMjc0bC0yLjE2NS0xLjI1YS43NS43NSAwIDAgMSAuNzUtMS4yOTlsMi4xNjUgMS4yNUEuNzUuNzUgMCAwIDEgMTQuOTI4IDEyWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjlcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00LjUzNiA2YS43NS43NSAwIDAgMS0xLjAyNS4yNzVsLTIuMTY1LTEuMjVhLjc1Ljc1IDAgMSAxIC43NS0xLjNsMi4xNjUgMS4yNUEuNzUuNzUgMCAwIDEgNC41MzYgNlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC4zXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc3LmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTIgMTQuOTI4YS43NS43NSAwIDAgMS0xLjAyNC0uMjc0bC0xLjI1LTIuMTY1YS43NS43NSAwIDAgMSAxLjI5OC0uNzVsMS4yNSAyLjE2NUEuNzUuNzUgMCAwIDEgMTIgMTQuOTI4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjhcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzcuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk02IDQuNTM2YS43NS43NSAwIDAgMS0xLjAyNC0uMjc1bC0xLjI1LTIuMTY1YS43NS43NSAwIDEgMSAxLjI5OS0uNzVsMS4yNSAyLjE2NUEuNzUuNzUgMCAwIDEgNiA0LjUzNlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC4yXG4gIH1cbikpO1xudmFyIFNwaW5uZXJJY29uX2RlZmF1bHQgPSBTdmdTcGlubmVySWNvbjtcblxuLy8gc3JjL2Fzc2V0cy9pY29ucy9VbmZvY3VzVG9nZ2xlSWNvbi50c3hcbmltcG9ydCAqIGFzIFJlYWN0NzggZnJvbSBcInJlYWN0XCI7XG52YXIgU3ZnVW5mb2N1c1RvZ2dsZUljb24gPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc4LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX19zcHJlYWRWYWx1ZXMoeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0NzguY3JlYXRlRWxlbWVudChcImdcIiwgeyBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiwgc3Ryb2tlV2lkdGg6IDEuNSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q3OC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEzLjI1IDdIOW0wIDBWMi43NU05IDdsNS4yNS01LjI1TTIuNzUgOUg3bTAgMHY0LjI1TTcgOWwtNS4yNSA1LjI1XCIgfSkpKTtcbnZhciBVbmZvY3VzVG9nZ2xlSWNvbl9kZWZhdWx0ID0gU3ZnVW5mb2N1c1RvZ2dsZUljb247XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL0ZvY3VzVG9nZ2xlLnRzeFxudmFyIEZvY3VzVG9nZ2xlID0gLyogQF9fUFVSRV9fICovIFJlYWN0NzkuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gRm9jdXNUb2dnbGUyKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwgeyB0cmFja1JlZiB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja1JlZlwiXSk7XG4gICAgY29uc3QgdHJhY2tSZWZGcm9tQ29udGV4dCA9IHVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCk7XG4gICAgY29uc3QgeyBtZXJnZWRQcm9wcywgaW5Gb2N1cyB9ID0gdXNlRm9jdXNUb2dnbGUoe1xuICAgICAgdHJhY2tSZWY6IHRyYWNrUmVmICE9IG51bGwgPyB0cmFja1JlZiA6IHRyYWNrUmVmRnJvbUNvbnRleHQsXG4gICAgICBwcm9wc1xuICAgIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q3OS5jcmVhdGVFbGVtZW50KExheW91dENvbnRleHQuQ29uc3VtZXIsIG51bGwsIChsYXlvdXRDb250ZXh0KSA9PiBsYXlvdXRDb250ZXh0ICE9PSB2b2lkIDAgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0NzkuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBfX3NwcmVhZFZhbHVlcyh7IHJlZiB9LCBtZXJnZWRQcm9wcyksIHByb3BzLmNoaWxkcmVuID8gcHJvcHMuY2hpbGRyZW4gOiBpbkZvY3VzID8gLyogQF9fUFVSRV9fICovIFJlYWN0NzkuY3JlYXRlRWxlbWVudChVbmZvY3VzVG9nZ2xlSWNvbl9kZWZhdWx0LCBudWxsKSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDc5LmNyZWF0ZUVsZW1lbnQoRm9jdXNUb2dnbGVJY29uX2RlZmF1bHQsIG51bGwpKSk7XG4gIH1cbik7XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL01lZGlhRGV2aWNlU2VsZWN0LnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q4MSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3V0aWxzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdDgwIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbG9nIGFzIGxvZzcgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5mdW5jdGlvbiBpc1Byb3AocHJvcCkge1xuICByZXR1cm4gcHJvcCAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gbWVyZ2VQcm9wczIoLi4ucHJvcHMpIHtcbiAgcmV0dXJuIG1lcmdlUHJvcHMoLi4ucHJvcHMuZmlsdGVyKGlzUHJvcCkpO1xufVxuZnVuY3Rpb24gY2xvbmVTaW5nbGVDaGlsZChjaGlsZHJlbiwgcHJvcHMsIGtleSkge1xuICByZXR1cm4gUmVhY3Q4MC5DaGlsZHJlbi5tYXAoY2hpbGRyZW4sIChjaGlsZCkgPT4ge1xuICAgIGlmIChSZWFjdDgwLmlzVmFsaWRFbGVtZW50KGNoaWxkKSAmJiBSZWFjdDgwLkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pKSB7XG4gICAgICByZXR1cm4gUmVhY3Q4MC5jbG9uZUVsZW1lbnQoY2hpbGQsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSwgeyBrZXkgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH0pO1xufVxuZnVuY3Rpb24gd2FybkFib3V0TWlzc2luZ1N0eWxlcyhlbCkge1xuICB2YXIgX2EsIF9iO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdHVyYm8vbm8tdW5kZWNsYXJlZC1lbnYtdmFyc1xuICAoKChfYSA9IHByb2Nlc3MgPT0gbnVsbCA/IHZvaWQgMCA6IHByb2Nlc3MuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2EuTk9ERV9FTlYpID09PSBcImRldlwiIHx8IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB0dXJiby9uby11bmRlY2xhcmVkLWVudi12YXJzXG4gICgoX2IgPSBwcm9jZXNzID09IG51bGwgPyB2b2lkIDAgOiBwcm9jZXNzLmVudikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLk5PREVfRU5WKSA9PT0gXCJkZXZlbG9wbWVudFwiKSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGVsICE9IG51bGwgPyBlbCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGstcm9vbS1jb250YWluZXJcIik7XG4gICAgaWYgKHRhcmdldCAmJiAhZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmdldFByb3BlcnR5VmFsdWUoXCItLWxrLWhhcy1pbXBvcnRlZC1zdHlsZXNcIikpIHtcbiAgICAgIGxvZzcud2FybihcbiAgICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBub3QgdXNpbmcgdGhlIGBAbGl2ZWtpdC9jb21wb25lbnRzLXN0eWxlcyBwYWNrYWdlYC4gVG8gcmVuZGVyIHRoZSBVSSB3aXRoIHRoZSBkZWZhdWx0IHN0eWxpbmcsIHBsZWFzZSBpbXBvcnQgaXQgaW4geW91ciBsYXlvdXQgb3IgcGFnZS5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvTWVkaWFEZXZpY2VTZWxlY3QudHN4XG5pbXBvcnQgeyBSb29tRXZlbnQgYXMgUm9vbUV2ZW50MiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xudmFyIE1lZGlhRGV2aWNlU2VsZWN0ID0gLyogQF9fUFVSRV9fICovIFJlYWN0ODEuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gTWVkaWFEZXZpY2VTZWxlY3QyKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwge1xuICAgICAga2luZCxcbiAgICAgIGluaXRpYWxTZWxlY3Rpb24sXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZSxcbiAgICAgIG9uRGV2aWNlTGlzdENoYW5nZSxcbiAgICAgIG9uRGV2aWNlU2VsZWN0RXJyb3IsXG4gICAgICBleGFjdE1hdGNoLFxuICAgICAgdHJhY2ssXG4gICAgICByZXF1ZXN0UGVybWlzc2lvbnMsXG4gICAgICBvbkVycm9yXG4gICAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgICAgXCJraW5kXCIsXG4gICAgICBcImluaXRpYWxTZWxlY3Rpb25cIixcbiAgICAgIFwib25BY3RpdmVEZXZpY2VDaGFuZ2VcIixcbiAgICAgIFwib25EZXZpY2VMaXN0Q2hhbmdlXCIsXG4gICAgICBcIm9uRGV2aWNlU2VsZWN0RXJyb3JcIixcbiAgICAgIFwiZXhhY3RNYXRjaFwiLFxuICAgICAgXCJ0cmFja1wiLFxuICAgICAgXCJyZXF1ZXN0UGVybWlzc2lvbnNcIixcbiAgICAgIFwib25FcnJvclwiXG4gICAgXSk7XG4gICAgY29uc3Qgcm9vbSA9IHVzZU1heWJlUm9vbUNvbnRleHQoKTtcbiAgICBjb25zdCBoYW5kbGVFcnJvciA9IFJlYWN0ODEudXNlQ2FsbGJhY2soXG4gICAgICAoZSkgPT4ge1xuICAgICAgICBpZiAocm9vbSkge1xuICAgICAgICAgIHJvb20uZW1pdChSb29tRXZlbnQyLk1lZGlhRGV2aWNlc0Vycm9yLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBvbkVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkVycm9yKGUpO1xuICAgICAgfSxcbiAgICAgIFtyb29tLCBvbkVycm9yXVxuICAgICk7XG4gICAgY29uc3QgeyBkZXZpY2VzLCBhY3RpdmVEZXZpY2VJZCwgc2V0QWN0aXZlTWVkaWFEZXZpY2UsIGNsYXNzTmFtZSB9ID0gdXNlTWVkaWFEZXZpY2VTZWxlY3Qoe1xuICAgICAga2luZCxcbiAgICAgIHJvb20sXG4gICAgICB0cmFjayxcbiAgICAgIHJlcXVlc3RQZXJtaXNzaW9ucyxcbiAgICAgIG9uRXJyb3I6IGhhbmRsZUVycm9yXG4gICAgfSk7XG4gICAgUmVhY3Q4MS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGluaXRpYWxTZWxlY3Rpb24gIT09IHZvaWQgMCkge1xuICAgICAgICBzZXRBY3RpdmVNZWRpYURldmljZShpbml0aWFsU2VsZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9LCBbc2V0QWN0aXZlTWVkaWFEZXZpY2VdKTtcbiAgICBSZWFjdDgxLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIG9uRGV2aWNlTGlzdENoYW5nZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG9uRGV2aWNlTGlzdENoYW5nZShkZXZpY2VzKTtcbiAgICAgIH1cbiAgICB9LCBbb25EZXZpY2VMaXN0Q2hhbmdlLCBkZXZpY2VzXSk7XG4gICAgUmVhY3Q4MS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGFjdGl2ZURldmljZUlkICYmIGFjdGl2ZURldmljZUlkICE9PSBcIlwiKSB7XG4gICAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlID09IG51bGwgPyB2b2lkIDAgOiBvbkFjdGl2ZURldmljZUNoYW5nZShhY3RpdmVEZXZpY2VJZCk7XG4gICAgICB9XG4gICAgfSwgW2FjdGl2ZURldmljZUlkXSk7XG4gICAgY29uc3QgaGFuZGxlQWN0aXZlRGV2aWNlQ2hhbmdlID0gKGRldmljZUlkKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICB5aWVsZCBzZXRBY3RpdmVNZWRpYURldmljZShkZXZpY2VJZCwgeyBleGFjdDogZXhhY3RNYXRjaCB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIG9uRGV2aWNlU2VsZWN0RXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IG9uRGV2aWNlU2VsZWN0RXJyb3IoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IG1lcmdlZFByb3BzID0gUmVhY3Q4MS51c2VNZW1vKFxuICAgICAgKCkgPT4gbWVyZ2VQcm9wczIocHJvcHMsIHsgY2xhc3NOYW1lIH0sIHsgY2xhc3NOYW1lOiBcImxrLWxpc3RcIiB9KSxcbiAgICAgIFtjbGFzc05hbWUsIHByb3BzXVxuICAgICk7XG4gICAgZnVuY3Rpb24gaXNBY3RpdmUoZGV2aWNlSWQsIGFjdGl2ZURldmljZUlkMiwgaW5kZXgpIHtcbiAgICAgIHJldHVybiBkZXZpY2VJZCA9PT0gYWN0aXZlRGV2aWNlSWQyIHx8IGluZGV4ID09PSAwICYmIGFjdGl2ZURldmljZUlkMiA9PT0gXCJkZWZhdWx0XCI7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4MS5jcmVhdGVFbGVtZW50KFwidWxcIiwgX19zcHJlYWRWYWx1ZXMoeyByZWYgfSwgbWVyZ2VkUHJvcHMpLCBkZXZpY2VzLm1hcCgoZGV2aWNlLCBpbmRleCkgPT4gLyogQF9fUFVSRV9fICovIFJlYWN0ODEuY3JlYXRlRWxlbWVudChcbiAgICAgIFwibGlcIixcbiAgICAgIHtcbiAgICAgICAga2V5OiBkZXZpY2UuZGV2aWNlSWQsXG4gICAgICAgIGlkOiBkZXZpY2UuZGV2aWNlSWQsXG4gICAgICAgIFwiZGF0YS1say1hY3RpdmVcIjogaXNBY3RpdmUoZGV2aWNlLmRldmljZUlkLCBhY3RpdmVEZXZpY2VJZCwgaW5kZXgpLFxuICAgICAgICBcImFyaWEtc2VsZWN0ZWRcIjogaXNBY3RpdmUoZGV2aWNlLmRldmljZUlkLCBhY3RpdmVEZXZpY2VJZCwgaW5kZXgpLFxuICAgICAgICByb2xlOiBcIm9wdGlvblwiXG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIFJlYWN0ODEuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b25cIiwgb25DbGljazogKCkgPT4gaGFuZGxlQWN0aXZlRGV2aWNlQ2hhbmdlKGRldmljZS5kZXZpY2VJZCkgfSwgZGV2aWNlLmxhYmVsKVxuICAgICkpKTtcbiAgfVxuKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvU3RhcnRBdWRpby50c3hcbmltcG9ydCAqIGFzIFJlYWN0ODIgZnJvbSBcInJlYWN0XCI7XG52YXIgU3RhcnRBdWRpbyA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgyLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIFN0YXJ0QXVkaW8yKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwgeyBsYWJlbCA9IFwiQWxsb3cgQXVkaW9cIiB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJsYWJlbFwiXSk7XG4gICAgY29uc3Qgcm9vbSA9IHVzZVJvb21Db250ZXh0KCk7XG4gICAgY29uc3QgeyBtZXJnZWRQcm9wcyB9ID0gdXNlU3RhcnRBdWRpbyh7IHJvb20sIHByb3BzIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Mi5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIG1lcmdlZFByb3BzKSwgbGFiZWwpO1xuICB9XG4pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9UcmFja1RvZ2dsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0ODQgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9hc3NldHMvaWNvbnMvdXRpbC50c3hcbmltcG9ydCAqIGFzIFJlYWN0ODMgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uUXVhbGl0eSBhcyBDb25uZWN0aW9uUXVhbGl0eTIsIFRyYWNrIGFzIFRyYWNrNiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gZ2V0U291cmNlSWNvbihzb3VyY2UsIGVuYWJsZWQpIHtcbiAgc3dpdGNoIChzb3VyY2UpIHtcbiAgICBjYXNlIFRyYWNrNi5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgIHJldHVybiBlbmFibGVkID8gLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChNaWNJY29uX2RlZmF1bHQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChNaWNEaXNhYmxlZEljb25fZGVmYXVsdCwgbnVsbCk7XG4gICAgY2FzZSBUcmFjazYuU291cmNlLkNhbWVyYTpcbiAgICAgIHJldHVybiBlbmFibGVkID8gLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChDYW1lcmFJY29uX2RlZmF1bHQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChDYW1lcmFEaXNhYmxlZEljb25fZGVmYXVsdCwgbnVsbCk7XG4gICAgY2FzZSBUcmFjazYuU291cmNlLlNjcmVlblNoYXJlOlxuICAgICAgcmV0dXJuIGVuYWJsZWQgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFNjcmVlblNoYXJlU3RvcEljb25fZGVmYXVsdCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFNjcmVlblNoYXJlSWNvbl9kZWZhdWx0LCBudWxsKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Q29ubmVjdGlvblF1YWxpdHlJY29uKHF1YWxpdHkpIHtcbiAgc3dpdGNoIChxdWFsaXR5KSB7XG4gICAgY2FzZSBDb25uZWN0aW9uUXVhbGl0eTIuRXhjZWxsZW50OlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgzLmNyZWF0ZUVsZW1lbnQoUXVhbGl0eUV4Y2VsbGVudEljb25fZGVmYXVsdCwgbnVsbCk7XG4gICAgY2FzZSBDb25uZWN0aW9uUXVhbGl0eTIuR29vZDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4My5jcmVhdGVFbGVtZW50KFF1YWxpdHlHb29kSWNvbl9kZWZhdWx0LCBudWxsKTtcbiAgICBjYXNlIENvbm5lY3Rpb25RdWFsaXR5Mi5Qb29yOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDgzLmNyZWF0ZUVsZW1lbnQoUXVhbGl0eVBvb3JJY29uX2RlZmF1bHQsIG51bGwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODMuY3JlYXRlRWxlbWVudChRdWFsaXR5VW5rbm93bkljb25fZGVmYXVsdCwgbnVsbCk7XG4gIH1cbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvVHJhY2tUb2dnbGUudHN4XG52YXIgVHJhY2tUb2dnbGUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q4NC5mb3J3YXJkUmVmKGZ1bmN0aW9uIFRyYWNrVG9nZ2xlMihfYSwgcmVmKSB7XG4gIHZhciBfYiA9IF9hLCB7IHNob3dJY29uIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInNob3dJY29uXCJdKTtcbiAgY29uc3QgeyBidXR0b25Qcm9wcywgZW5hYmxlZCB9ID0gdXNlVHJhY2tUb2dnbGUocHJvcHMpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBfX3NwcmVhZFZhbHVlcyh7IHJlZiB9LCBidXR0b25Qcm9wcyksIChzaG93SWNvbiAhPSBudWxsID8gc2hvd0ljb24gOiB0cnVlKSAmJiBnZXRTb3VyY2VJY29uKHByb3BzLnNvdXJjZSwgZW5hYmxlZCksIHByb3BzLmNoaWxkcmVuKTtcbn0pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvRm9jdXNMYXlvdXQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDkzIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudFRpbGUudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDkyIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2s3IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBpc1RyYWNrUmVmZXJlbmNlIGFzIGlzVHJhY2tSZWZlcmVuY2UzLCBpc1RyYWNrUmVmZXJlbmNlUGlubmVkIGFzIGlzVHJhY2tSZWZlcmVuY2VQaW5uZWQyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9Db25uZWN0aW9uUXVhbGl0eUluZGljYXRvci50c3hcbmltcG9ydCAqIGFzIFJlYWN0ODUgZnJvbSBcInJlYWN0XCI7XG52YXIgQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q4NS5mb3J3YXJkUmVmKGZ1bmN0aW9uIENvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yMihwcm9wcywgcmVmKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgeyBjbGFzc05hbWUsIHF1YWxpdHkgfSA9IHVzZUNvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yKHByb3BzKTtcbiAgY29uc3QgZWxlbWVudFByb3BzID0gUmVhY3Q4NS51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgbWVyZ2VQcm9wczIocHJvcHMsIHsgY2xhc3NOYW1lIH0pKSwgeyBcImRhdGEtbGstcXVhbGl0eVwiOiBxdWFsaXR5IH0pO1xuICB9LCBbcXVhbGl0eSwgcHJvcHMsIGNsYXNzTmFtZV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0ODUuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7IHJlZiB9LCBlbGVtZW50UHJvcHMpLCAoX2EgPSBwcm9wcy5jaGlsZHJlbikgIT0gbnVsbCA/IF9hIDogZ2V0Q29ubmVjdGlvblF1YWxpdHlJY29uKHF1YWxpdHkpKTtcbn0pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudE5hbWUudHN4XG5pbXBvcnQgeyBzZXR1cFBhcnRpY2lwYW50TmFtZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0ODYgZnJvbSBcInJlYWN0XCI7XG52YXIgUGFydGljaXBhbnROYW1lID0gLyogQF9fUFVSRV9fICovIFJlYWN0ODYuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gUGFydGljaXBhbnROYW1lMihfYSwgcmVmKSB7XG4gICAgdmFyIF9iID0gX2EsIHsgcGFydGljaXBhbnQgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1wicGFydGljaXBhbnRcIl0pO1xuICAgIGNvbnN0IHAgPSB1c2VFbnN1cmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIGluZm9PYnNlcnZlciB9ID0gUmVhY3Q4Ni51c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBzZXR1cFBhcnRpY2lwYW50TmFtZShwKTtcbiAgICB9LCBbcF0pO1xuICAgIGNvbnN0IHsgaWRlbnRpdHksIG5hbWUgfSA9IHVzZU9ic2VydmFibGVTdGF0ZShpbmZvT2JzZXJ2ZXIsIHtcbiAgICAgIG5hbWU6IHAubmFtZSxcbiAgICAgIGlkZW50aXR5OiBwLmlkZW50aXR5LFxuICAgICAgbWV0YWRhdGE6IHAubWV0YWRhdGFcbiAgICB9KTtcbiAgICBjb25zdCBtZXJnZWRQcm9wcyA9IFJlYWN0ODYudXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gbWVyZ2VQcm9wczIocHJvcHMsIHsgY2xhc3NOYW1lLCBcImRhdGEtbGstcGFydGljaXBhbnQtbmFtZVwiOiBuYW1lIH0pO1xuICAgIH0sIFtwcm9wcywgY2xhc3NOYW1lLCBuYW1lXSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg2LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIG1lcmdlZFByb3BzKSwgbmFtZSAhPT0gXCJcIiA/IG5hbWUgOiBpZGVudGl0eSwgcHJvcHMuY2hpbGRyZW4pO1xuICB9XG4pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9UcmFja011dGVkSW5kaWNhdG9yLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q4NyBmcm9tIFwicmVhY3RcIjtcbnZhciBUcmFja011dGVkSW5kaWNhdG9yID0gLyogQF9fUFVSRV9fICovIFJlYWN0ODcuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gVHJhY2tNdXRlZEluZGljYXRvcjIoX2EsIHJlZikge1xuICAgIHZhciBfYiA9IF9hLCB7IHRyYWNrUmVmLCBzaG93ID0gXCJhbHdheXNcIiB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja1JlZlwiLCBcInNob3dcIl0pO1xuICAgIHZhciBfYTI7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIGlzTXV0ZWQgfSA9IHVzZVRyYWNrTXV0ZWRJbmRpY2F0b3IodHJhY2tSZWYpO1xuICAgIGNvbnN0IHNob3dJbmRpY2F0b3IgPSBzaG93ID09PSBcImFsd2F5c1wiIHx8IHNob3cgPT09IFwibXV0ZWRcIiAmJiBpc011dGVkIHx8IHNob3cgPT09IFwidW5tdXRlZFwiICYmICFpc011dGVkO1xuICAgIGNvbnN0IGh0bWxQcm9wcyA9IFJlYWN0ODcudXNlTWVtbyhcbiAgICAgICgpID0+IG1lcmdlUHJvcHMyKHByb3BzLCB7XG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgfSksXG4gICAgICBbY2xhc3NOYW1lLCBwcm9wc11cbiAgICApO1xuICAgIGlmICghc2hvd0luZGljYXRvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q4Ny5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoeyByZWYgfSwgaHRtbFByb3BzKSwgeyBcImRhdGEtbGstbXV0ZWRcIjogaXNNdXRlZCB9KSwgKF9hMiA9IHByb3BzLmNoaWxkcmVuKSAhPSBudWxsID8gX2EyIDogZ2V0U291cmNlSWNvbih0cmFja1JlZi5zb3VyY2UsICFpc011dGVkKSk7XG4gIH1cbik7XG5cbi8vIHNyYy9hc3NldHMvaW1hZ2VzL1BhcnRpY2lwYW50UGxhY2Vob2xkZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDg4IGZyb20gXCJyZWFjdFwiO1xudmFyIFN2Z1BhcnRpY2lwYW50UGxhY2Vob2xkZXIgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDg4LmNyZWF0ZUVsZW1lbnQoXG4gIFwic3ZnXCIsXG4gIF9fc3ByZWFkVmFsdWVzKHtcbiAgICB3aWR0aDogMzIwLFxuICAgIGhlaWdodDogMzIwLFxuICAgIHZpZXdCb3g6IFwiMCAwIDMyMCAzMjBcIixcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiBcInhNaWRZTWlkIG1lZXRcIixcbiAgICBmaWxsOiBcIm5vbmVcIixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH0sIHByb3BzKSxcbiAgLyogQF9fUFVSRV9fICovIFJlYWN0ODguY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk0xNjAgMTgwQzIwNC4xODIgMTgwIDI0MCAxNDQuMTgzIDI0MCAxMDBDMjQwIDU1LjgxNzIgMjA0LjE4MiAyMCAxNjAgMjBDMTE1LjgxNyAyMCA3OS45OTk3IDU1LjgxNzIgNzkuOTk5NyAxMDBDNzkuOTk5NyAxNDQuMTgzIDExNS44MTcgMTgwIDE2MCAxODBaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKSxcbiAgLyogQF9fUFVSRV9fICovIFJlYWN0ODguY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk05Ny42NTQyIDE5NC42MTRDMTAzLjI2NyAxOTEuODE4IDEwOS44NDEgMTkyLjQ4MSAxMTUuNTE5IDE5NS4xNDFDMTI5LjAyNSAyMDEuNDY2IDE0NC4xIDIwNSAxNTkuOTk5IDIwNUMxNzUuODk5IDIwNSAxOTAuOTczIDIwMS40NjYgMjA0LjQ4IDE5NS4xNDFDMjEwLjE1OCAxOTIuNDgxIDIxNi43MzIgMTkxLjgxOCAyMjIuMzQ1IDE5NC42MTRDMjYyLjcwMyAyMTQuNzE5IDI5MS45ODUgMjUzLjczNiAyOTguNTkxIDMwMC4wNjJDMzAwLjE1IDMxMC45OTcgMjkxLjA0NSAzMjAgMjgwIDMyMEgzOS45OTk3QzI4Ljk1NCAzMjAgMTkuODQ5NSAzMTAuOTk3IDIxLjQwODcgMzAwLjA2MkMyOC4wMTQgMjUzLjczNiA1Ny4yOTY2IDIxNC43MiA5Ny42NTQyIDE5NC42MTRaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKVxuKTtcbnZhciBQYXJ0aWNpcGFudFBsYWNlaG9sZGVyX2RlZmF1bHQgPSBTdmdQYXJ0aWNpcGFudFBsYWNlaG9sZGVyO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9WaWRlb1RyYWNrLnRzeFxuaW1wb3J0IHsgUmVtb3RlVHJhY2tQdWJsaWNhdGlvbiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3Q5MCBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2hvb2tzL3VzZU1lZGlhVHJhY2tCeVNvdXJjZU9yTmFtZS50c1xuaW1wb3J0IHsgaXNUcmFja1JlZmVyZW5jZSBhcyBpc1RyYWNrUmVmZXJlbmNlMiB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IHNldHVwTWVkaWFUcmFjayBhcyBzZXR1cE1lZGlhVHJhY2syLCBsb2cgYXMgbG9nOCwgaXNMb2NhbCwgZ2V0VHJhY2tCeUlkZW50aWZpZXIgYXMgZ2V0VHJhY2tCeUlkZW50aWZpZXIyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q4OSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZU1lZGlhVHJhY2tCeVNvdXJjZU9yTmFtZShvYnNlcnZlck9wdGlvbnMsIG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IFtwdWJsaWNhdGlvbiwgc2V0UHVibGljYXRpb25dID0gUmVhY3Q4OS51c2VTdGF0ZShnZXRUcmFja0J5SWRlbnRpZmllcjIob2JzZXJ2ZXJPcHRpb25zKSk7XG4gIGNvbnN0IFtpc011dGVkLCBzZXRNdXRlZF0gPSBSZWFjdDg5LnVzZVN0YXRlKHB1YmxpY2F0aW9uID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbi5pc011dGVkKTtcbiAgY29uc3QgW2lzU3Vic2NyaWJlZCwgc2V0U3Vic2NyaWJlZF0gPSBSZWFjdDg5LnVzZVN0YXRlKHB1YmxpY2F0aW9uID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbi5pc1N1YnNjcmliZWQpO1xuICBjb25zdCBbdHJhY2ssIHNldFRyYWNrXSA9IFJlYWN0ODkudXNlU3RhdGUocHVibGljYXRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uLnRyYWNrKTtcbiAgY29uc3QgW29yaWVudGF0aW9uLCBzZXRPcmllbnRhdGlvbl0gPSBSZWFjdDg5LnVzZVN0YXRlKFwibGFuZHNjYXBlXCIpO1xuICBjb25zdCBwcmV2aW91c0VsZW1lbnQgPSBSZWFjdDg5LnVzZVJlZigpO1xuICBjb25zdCB7IGNsYXNzTmFtZSwgdHJhY2tPYnNlcnZlciB9ID0gUmVhY3Q4OS51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc2V0dXBNZWRpYVRyYWNrMihvYnNlcnZlck9wdGlvbnMpO1xuICB9LCBbXG4gICAgKF9hID0gb2JzZXJ2ZXJPcHRpb25zLnBhcnRpY2lwYW50LnNpZCkgIT0gbnVsbCA/IF9hIDogb2JzZXJ2ZXJPcHRpb25zLnBhcnRpY2lwYW50LmlkZW50aXR5LFxuICAgIG9ic2VydmVyT3B0aW9ucy5zb3VyY2UsXG4gICAgaXNUcmFja1JlZmVyZW5jZTIob2JzZXJ2ZXJPcHRpb25zKSAmJiBvYnNlcnZlck9wdGlvbnMucHVibGljYXRpb24udHJhY2tTaWRcbiAgXSk7XG4gIFJlYWN0ODkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0cmFja09ic2VydmVyLnN1YnNjcmliZSgocHVibGljYXRpb24yKSA9PiB7XG4gICAgICBsb2c4LmRlYnVnKFwidXBkYXRlIHRyYWNrXCIsIHB1YmxpY2F0aW9uMik7XG4gICAgICBzZXRQdWJsaWNhdGlvbihwdWJsaWNhdGlvbjIpO1xuICAgICAgc2V0TXV0ZWQocHVibGljYXRpb24yID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbjIuaXNNdXRlZCk7XG4gICAgICBzZXRTdWJzY3JpYmVkKHB1YmxpY2F0aW9uMiA9PSBudWxsID8gdm9pZCAwIDogcHVibGljYXRpb24yLmlzU3Vic2NyaWJlZCk7XG4gICAgICBzZXRUcmFjayhwdWJsaWNhdGlvbjIgPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uMi50cmFjayk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbiA9PSBudWxsID8gdm9pZCAwIDogc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFt0cmFja09ic2VydmVyXSk7XG4gIFJlYWN0ODkudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX2EyLCBfYjtcbiAgICBpZiAodHJhY2spIHtcbiAgICAgIGlmIChwcmV2aW91c0VsZW1lbnQuY3VycmVudCkge1xuICAgICAgICB0cmFjay5kZXRhY2gocHJldmlvdXNFbGVtZW50LmN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgaWYgKCgoX2EyID0gb3B0aW9ucy5lbGVtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmN1cnJlbnQpICYmICEoaXNMb2NhbChvYnNlcnZlck9wdGlvbnMucGFydGljaXBhbnQpICYmICh0cmFjayA9PSBudWxsID8gdm9pZCAwIDogdHJhY2sua2luZCkgPT09IFwiYXVkaW9cIikpIHtcbiAgICAgICAgdHJhY2suYXR0YWNoKG9wdGlvbnMuZWxlbWVudC5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJldmlvdXNFbGVtZW50LmN1cnJlbnQgPSAoX2IgPSBvcHRpb25zLmVsZW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jdXJyZW50O1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocHJldmlvdXNFbGVtZW50LmN1cnJlbnQpIHtcbiAgICAgICAgdHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrLmRldGFjaChwcmV2aW91c0VsZW1lbnQuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3RyYWNrLCBvcHRpb25zLmVsZW1lbnRdKTtcbiAgUmVhY3Q4OS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfYTIsIF9iO1xuICAgIGlmICh0eXBlb2YgKChfYTIgPSBwdWJsaWNhdGlvbiA9PSBudWxsID8gdm9pZCAwIDogcHVibGljYXRpb24uZGltZW5zaW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi53aWR0aCkgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mICgoX2IgPSBwdWJsaWNhdGlvbiA9PSBudWxsID8gdm9pZCAwIDogcHVibGljYXRpb24uZGltZW5zaW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmhlaWdodCkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IG9yaWVudGF0aW9uXyA9IHB1YmxpY2F0aW9uLmRpbWVuc2lvbnMud2lkdGggPiBwdWJsaWNhdGlvbi5kaW1lbnNpb25zLmhlaWdodCA/IFwibGFuZHNjYXBlXCIgOiBcInBvcnRyYWl0XCI7XG4gICAgICBzZXRPcmllbnRhdGlvbihvcmllbnRhdGlvbl8pO1xuICAgIH1cbiAgfSwgW3B1YmxpY2F0aW9uXSk7XG4gIHJldHVybiB7XG4gICAgcHVibGljYXRpb24sXG4gICAgaXNNdXRlZCxcbiAgICBpc1N1YnNjcmliZWQsXG4gICAgdHJhY2ssXG4gICAgZWxlbWVudFByb3BzOiBtZXJnZVByb3BzMihvcHRpb25zLnByb3BzLCBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBcImRhdGEtbGstbG9jYWwtcGFydGljaXBhbnRcIjogb2JzZXJ2ZXJPcHRpb25zLnBhcnRpY2lwYW50LmlzTG9jYWwsXG4gICAgICBcImRhdGEtbGstc291cmNlXCI6IHB1YmxpY2F0aW9uID09IG51bGwgPyB2b2lkIDAgOiBwdWJsaWNhdGlvbi5zb3VyY2VcbiAgICB9LCAocHVibGljYXRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IHB1YmxpY2F0aW9uLmtpbmQpID09PSBcInZpZGVvXCIgJiYgeyBcImRhdGEtbGstb3JpZW50YXRpb25cIjogb3JpZW50YXRpb24gfSkpXG4gIH07XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L1ZpZGVvVHJhY2sudHN4XG5pbXBvcnQgKiBhcyB1c2VIb29rcyBmcm9tIFwidXNlaG9va3MtdHNcIjtcbnZhciBWaWRlb1RyYWNrID0gLyogQF9fUFVSRV9fICovIFJlYWN0OTAuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gVmlkZW9UcmFjazIoX2EsIHJlZikge1xuICAgIHZhciBfYiA9IF9hLCB7XG4gICAgICBvblRyYWNrQ2xpY2ssXG4gICAgICBvbkNsaWNrLFxuICAgICAgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkLFxuICAgICAgdHJhY2tSZWYsXG4gICAgICBtYW5hZ2VTdWJzY3JpcHRpb25cbiAgICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgICBcIm9uVHJhY2tDbGlja1wiLFxuICAgICAgXCJvbkNsaWNrXCIsXG4gICAgICBcIm9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFwiLFxuICAgICAgXCJ0cmFja1JlZlwiLFxuICAgICAgXCJtYW5hZ2VTdWJzY3JpcHRpb25cIlxuICAgIF0pO1xuICAgIGNvbnN0IHRyYWNrUmVmZXJlbmNlID0gdXNlRW5zdXJlVHJhY2tSZWYodHJhY2tSZWYpO1xuICAgIGNvbnN0IG1lZGlhRWwgPSBSZWFjdDkwLnVzZVJlZihudWxsKTtcbiAgICBSZWFjdDkwLnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiBtZWRpYUVsLmN1cnJlbnQpO1xuICAgIGNvbnN0IGludGVyc2VjdGlvbkVudHJ5ID0gdXNlSG9va3MudXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoeyByb290OiBtZWRpYUVsLmN1cnJlbnQgfSk7XG4gICAgY29uc3QgW2RlYm91bmNlZEludGVyc2VjdGlvbkVudHJ5XSA9IHVzZUhvb2tzLnVzZURlYm91bmNlVmFsdWUoaW50ZXJzZWN0aW9uRW50cnksIDNlMyk7XG4gICAgUmVhY3Q5MC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKG1hbmFnZVN1YnNjcmlwdGlvbiAmJiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbiBpbnN0YW5jZW9mIFJlbW90ZVRyYWNrUHVibGljYXRpb24gJiYgKGRlYm91bmNlZEludGVyc2VjdGlvbkVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBkZWJvdW5jZWRJbnRlcnNlY3Rpb25FbnRyeS5pc0ludGVyc2VjdGluZykgPT09IGZhbHNlICYmIChpbnRlcnNlY3Rpb25FbnRyeSA9PSBudWxsID8gdm9pZCAwIDogaW50ZXJzZWN0aW9uRW50cnkuaXNJbnRlcnNlY3RpbmcpID09PSBmYWxzZSkge1xuICAgICAgICB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi5zZXRTdWJzY3JpYmVkKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCBbZGVib3VuY2VkSW50ZXJzZWN0aW9uRW50cnksIHRyYWNrUmVmZXJlbmNlLCBtYW5hZ2VTdWJzY3JpcHRpb25dKTtcbiAgICBSZWFjdDkwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAobWFuYWdlU3Vic2NyaXB0aW9uICYmIHRyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uIGluc3RhbmNlb2YgUmVtb3RlVHJhY2tQdWJsaWNhdGlvbiAmJiAoaW50ZXJzZWN0aW9uRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IGludGVyc2VjdGlvbkVudHJ5LmlzSW50ZXJzZWN0aW5nKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi5zZXRTdWJzY3JpYmVkKHRydWUpO1xuICAgICAgfVxuICAgIH0sIFtpbnRlcnNlY3Rpb25FbnRyeSwgdHJhY2tSZWZlcmVuY2UsIG1hbmFnZVN1YnNjcmlwdGlvbl0pO1xuICAgIGNvbnN0IHtcbiAgICAgIGVsZW1lbnRQcm9wcyxcbiAgICAgIHB1YmxpY2F0aW9uOiBwdWIsXG4gICAgICBpc1N1YnNjcmliZWRcbiAgICB9ID0gdXNlTWVkaWFUcmFja0J5U291cmNlT3JOYW1lKHRyYWNrUmVmZXJlbmNlLCB7XG4gICAgICBlbGVtZW50OiBtZWRpYUVsLFxuICAgICAgcHJvcHNcbiAgICB9KTtcbiAgICBSZWFjdDkwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCghIWlzU3Vic2NyaWJlZCk7XG4gICAgfSwgW2lzU3Vic2NyaWJlZCwgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXSk7XG4gICAgY29uc3QgY2xpY2tIYW5kbGVyID0gKGV2dCkgPT4ge1xuICAgICAgb25DbGljayA9PSBudWxsID8gdm9pZCAwIDogb25DbGljayhldnQpO1xuICAgICAgb25UcmFja0NsaWNrID09IG51bGwgPyB2b2lkIDAgOiBvblRyYWNrQ2xpY2soeyBwYXJ0aWNpcGFudDogdHJhY2tSZWZlcmVuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LCB0cmFjazogcHViIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkwLmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHsgcmVmOiBtZWRpYUVsIH0sIGVsZW1lbnRQcm9wcyksIHsgbXV0ZWQ6IHRydWUsIG9uQ2xpY2s6IGNsaWNrSGFuZGxlciB9KSk7XG4gIH1cbik7XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L0F1ZGlvVHJhY2sudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDkxIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbG9nIGFzIGxvZzkgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBSZW1vdGVBdWRpb1RyYWNrLCBSZW1vdGVUcmFja1B1YmxpY2F0aW9uIGFzIFJlbW90ZVRyYWNrUHVibGljYXRpb24yIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG52YXIgQXVkaW9UcmFjayA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkxLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIEF1ZGlvVHJhY2syKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwgeyB0cmFja1JlZiwgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkLCB2b2x1bWUsIG11dGVkIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInRyYWNrUmVmXCIsIFwib25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXCIsIFwidm9sdW1lXCIsIFwibXV0ZWRcIl0pO1xuICAgIGNvbnN0IHRyYWNrUmVmZXJlbmNlID0gdXNlRW5zdXJlVHJhY2tSZWYodHJhY2tSZWYpO1xuICAgIGNvbnN0IG1lZGlhRWwgPSBSZWFjdDkxLnVzZVJlZihudWxsKTtcbiAgICBSZWFjdDkxLnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiBtZWRpYUVsLmN1cnJlbnQpO1xuICAgIGNvbnN0IHtcbiAgICAgIGVsZW1lbnRQcm9wcyxcbiAgICAgIGlzU3Vic2NyaWJlZCxcbiAgICAgIHRyYWNrLFxuICAgICAgcHVibGljYXRpb246IHB1YlxuICAgIH0gPSB1c2VNZWRpYVRyYWNrQnlTb3VyY2VPck5hbWUodHJhY2tSZWZlcmVuY2UsIHtcbiAgICAgIGVsZW1lbnQ6IG1lZGlhRWwsXG4gICAgICBwcm9wc1xuICAgIH0pO1xuICAgIFJlYWN0OTEudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCA9PSBudWxsID8gdm9pZCAwIDogb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkKCEhaXNTdWJzY3JpYmVkKTtcbiAgICB9LCBbaXNTdWJzY3JpYmVkLCBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWRdKTtcbiAgICBSZWFjdDkxLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAodHJhY2sgPT09IHZvaWQgMCB8fCB2b2x1bWUgPT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVBdWRpb1RyYWNrKSB7XG4gICAgICAgIHRyYWNrLnNldFZvbHVtZSh2b2x1bWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nOS53YXJuKFwiVm9sdW1lIGNhbiBvbmx5IGJlIHNldCBvbiByZW1vdGUgYXVkaW8gdHJhY2tzLlwiKTtcbiAgICAgIH1cbiAgICB9LCBbdm9sdW1lLCB0cmFja10pO1xuICAgIFJlYWN0OTEudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChwdWIgPT09IHZvaWQgMCB8fCBtdXRlZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwdWIgaW5zdGFuY2VvZiBSZW1vdGVUcmFja1B1YmxpY2F0aW9uMikge1xuICAgICAgICBwdWIuc2V0RW5hYmxlZCghbXV0ZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nOS53YXJuKFwiQ2FuIG9ubHkgY2FsbCBzZXRFbmFibGVkIG9uIHJlbW90ZSB0cmFjayBwdWJsaWNhdGlvbnMuXCIpO1xuICAgICAgfVxuICAgIH0sIFttdXRlZCwgcHViLCB0cmFja10pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5MS5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIiwgX19zcHJlYWRWYWx1ZXMoeyByZWY6IG1lZGlhRWwgfSwgZWxlbWVudFByb3BzKSk7XG4gIH1cbik7XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L1BhcnRpY2lwYW50VGlsZS50c3hcbmZ1bmN0aW9uIFBhcnRpY2lwYW50Q29udGV4dElmTmVlZGVkKHByb3BzKSB7XG4gIGNvbnN0IGhhc0NvbnRleHQgPSAhIXVzZU1heWJlUGFydGljaXBhbnRDb250ZXh0KCk7XG4gIHJldHVybiBwcm9wcy5wYXJ0aWNpcGFudCAmJiAhaGFzQ29udGV4dCA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoUGFydGljaXBhbnRDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBwcm9wcy5wYXJ0aWNpcGFudCB9LCBwcm9wcy5jaGlsZHJlbikgOiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFJlYWN0OTIuRnJhZ21lbnQsIG51bGwsIHByb3BzLmNoaWxkcmVuKTtcbn1cbmZ1bmN0aW9uIFRyYWNrUmVmQ29udGV4dElmTmVlZGVkKHByb3BzKSB7XG4gIGNvbnN0IGhhc0NvbnRleHQgPSAhIXVzZU1heWJlVHJhY2tSZWZDb250ZXh0KCk7XG4gIHJldHVybiBwcm9wcy50cmFja1JlZiAmJiAhaGFzQ29udGV4dCA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoVHJhY2tSZWZDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBwcm9wcy50cmFja1JlZiB9LCBwcm9wcy5jaGlsZHJlbikgOiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFJlYWN0OTIuRnJhZ21lbnQsIG51bGwsIHByb3BzLmNoaWxkcmVuKTtcbn1cbnZhciBQYXJ0aWNpcGFudFRpbGUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbiBQYXJ0aWNpcGFudFRpbGUyKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwge1xuICAgICAgdHJhY2tSZWYsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIG9uUGFydGljaXBhbnRDbGljayxcbiAgICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvclxuICAgIH0gPSBfYiwgaHRtbFByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgICBcInRyYWNrUmVmXCIsXG4gICAgICBcImNoaWxkcmVuXCIsXG4gICAgICBcIm9uUGFydGljaXBhbnRDbGlja1wiLFxuICAgICAgXCJkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3JcIlxuICAgIF0pO1xuICAgIHZhciBfYTIsIF9iMjtcbiAgICBjb25zdCB0cmFja1JlZmVyZW5jZSA9IHVzZUVuc3VyZVRyYWNrUmVmKHRyYWNrUmVmKTtcbiAgICBjb25zdCB7IGVsZW1lbnRQcm9wcyB9ID0gdXNlUGFydGljaXBhbnRUaWxlKHtcbiAgICAgIGh0bWxQcm9wcyxcbiAgICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcixcbiAgICAgIG9uUGFydGljaXBhbnRDbGljayxcbiAgICAgIHRyYWNrUmVmOiB0cmFja1JlZmVyZW5jZVxuICAgIH0pO1xuICAgIGNvbnN0IGlzRW5jcnlwdGVkID0gdXNlSXNFbmNyeXB0ZWQodHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQpO1xuICAgIGNvbnN0IGxheW91dENvbnRleHQgPSB1c2VNYXliZUxheW91dENvbnRleHQoKTtcbiAgICBjb25zdCBhdXRvTWFuYWdlU3Vic2NyaXB0aW9uID0gKF9hMiA9IHVzZUZlYXR1cmVDb250ZXh0KCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuYXV0b1N1YnNjcmlwdGlvbjtcbiAgICBjb25zdCBoYW5kbGVTdWJzY3JpYmUgPSBSZWFjdDkyLnVzZUNhbGxiYWNrKFxuICAgICAgKHN1YnNjcmliZWQpID0+IHtcbiAgICAgICAgaWYgKHRyYWNrUmVmZXJlbmNlLnNvdXJjZSAmJiAhc3Vic2NyaWJlZCAmJiBsYXlvdXRDb250ZXh0ICYmIGxheW91dENvbnRleHQucGluLmRpc3BhdGNoICYmIGlzVHJhY2tSZWZlcmVuY2VQaW5uZWQyKHRyYWNrUmVmZXJlbmNlLCBsYXlvdXRDb250ZXh0LnBpbi5zdGF0ZSkpIHtcbiAgICAgICAgICBsYXlvdXRDb250ZXh0LnBpbi5kaXNwYXRjaCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFt0cmFja1JlZmVyZW5jZSwgbGF5b3V0Q29udGV4dF1cbiAgICApO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmLCBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH0gfSwgZWxlbWVudFByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChUcmFja1JlZkNvbnRleHRJZk5lZWRlZCwgeyB0cmFja1JlZjogdHJhY2tSZWZlcmVuY2UgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudENvbnRleHRJZk5lZWRlZCwgeyBwYXJ0aWNpcGFudDogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQgfSwgY2hpbGRyZW4gIT0gbnVsbCA/IGNoaWxkcmVuIDogLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChSZWFjdDkyLkZyYWdtZW50LCBudWxsLCBpc1RyYWNrUmVmZXJlbmNlMyh0cmFja1JlZmVyZW5jZSkgJiYgKCgoX2IyID0gdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjIua2luZCkgPT09IFwidmlkZW9cIiB8fCB0cmFja1JlZmVyZW5jZS5zb3VyY2UgPT09IFRyYWNrNy5Tb3VyY2UuQ2FtZXJhIHx8IHRyYWNrUmVmZXJlbmNlLnNvdXJjZSA9PT0gVHJhY2s3LlNvdXJjZS5TY3JlZW5TaGFyZSkgPyAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFxuICAgICAgVmlkZW9UcmFjayxcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IHRyYWNrUmVmZXJlbmNlLFxuICAgICAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQ6IGhhbmRsZVN1YnNjcmliZSxcbiAgICAgICAgbWFuYWdlU3Vic2NyaXB0aW9uOiBhdXRvTWFuYWdlU3Vic2NyaXB0aW9uXG4gICAgICB9XG4gICAgKSA6IGlzVHJhY2tSZWZlcmVuY2UzKHRyYWNrUmVmZXJlbmNlKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFxuICAgICAgQXVkaW9UcmFjayxcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IHRyYWNrUmVmZXJlbmNlLFxuICAgICAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQ6IGhhbmRsZVN1YnNjcmliZVxuICAgICAgfVxuICAgICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtcGxhY2Vob2xkZXJcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50UGxhY2Vob2xkZXJfZGVmYXVsdCwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YS1pdGVtXCIgfSwgdHJhY2tSZWZlcmVuY2Uuc291cmNlID09PSBUcmFjazcuU291cmNlLkNhbWVyYSA/IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoUmVhY3Q5Mi5GcmFnbWVudCwgbnVsbCwgaXNFbmNyeXB0ZWQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChMb2NrTG9ja2VkSWNvbl9kZWZhdWx0LCB7IHN0eWxlOiB7IG1hcmdpblJpZ2h0OiBcIjAuMjVyZW1cIiB9IH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KFxuICAgICAgVHJhY2tNdXRlZEluZGljYXRvcixcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IHtcbiAgICAgICAgICBwYXJ0aWNpcGFudDogdHJhY2tSZWZlcmVuY2UucGFydGljaXBhbnQsXG4gICAgICAgICAgc291cmNlOiBUcmFjazcuU291cmNlLk1pY3JvcGhvbmVcbiAgICAgICAgfSxcbiAgICAgICAgc2hvdzogXCJtdXRlZFwiXG4gICAgICB9XG4gICAgKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudE5hbWUsIG51bGwpKSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoUmVhY3Q5Mi5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChTY3JlZW5TaGFyZUljb25fZGVmYXVsdCwgeyBzdHlsZTogeyBtYXJnaW5SaWdodDogXCIwLjI1cmVtXCIgfSB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTIuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudE5hbWUsIG51bGwsIFwiJ3Mgc2NyZWVuXCIpKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkyLmNyZWF0ZUVsZW1lbnQoQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhLWl0ZW1cIiB9KSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Mi5jcmVhdGVFbGVtZW50KEZvY3VzVG9nZ2xlLCB7IHRyYWNrUmVmOiB0cmFja1JlZmVyZW5jZSB9KSkpKTtcbiAgfVxuKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvbGF5b3V0L0ZvY3VzTGF5b3V0LnRzeFxuZnVuY3Rpb24gRm9jdXNMYXlvdXRDb250YWluZXIocHJvcHMpIHtcbiAgY29uc3QgZWxlbWVudFByb3BzID0gbWVyZ2VQcm9wczIocHJvcHMsIHsgY2xhc3NOYW1lOiBcImxrLWZvY3VzLWxheW91dFwiIH0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgZWxlbWVudFByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gRm9jdXNMYXlvdXQoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHsgdHJhY2tSZWYgfSA9IF9iLCBodG1sUHJvcHMgPSBfX29ialJlc3QoX2IsIFtcInRyYWNrUmVmXCJdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDkzLmNyZWF0ZUVsZW1lbnQoUGFydGljaXBhbnRUaWxlLCBfX3NwcmVhZFZhbHVlcyh7IHRyYWNrUmVmIH0sIGh0bWxQcm9wcykpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvR3JpZExheW91dC50c3hcbmltcG9ydCAqIGFzIFJlYWN0OTcgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL1RyYWNrTG9vcC50c3hcbmltcG9ydCAqIGFzIFJlYWN0OTQgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBnZXRUcmFja1JlZmVyZW5jZUlkIGFzIGdldFRyYWNrUmVmZXJlbmNlSWQ0IH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gVHJhY2tMb29wKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IHRyYWNrcyB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja3NcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTQuY3JlYXRlRWxlbWVudChSZWFjdDk0LkZyYWdtZW50LCBudWxsLCB0cmFja3MubWFwKCh0cmFja1JlZmVyZW5jZSkgPT4ge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5NC5jcmVhdGVFbGVtZW50KFxuICAgICAgVHJhY2tSZWZDb250ZXh0LlByb3ZpZGVyLFxuICAgICAge1xuICAgICAgICB2YWx1ZTogdHJhY2tSZWZlcmVuY2UsXG4gICAgICAgIGtleTogZ2V0VHJhY2tSZWZlcmVuY2VJZDQodHJhY2tSZWZlcmVuY2UpXG4gICAgICB9LFxuICAgICAgY2xvbmVTaW5nbGVDaGlsZChwcm9wcy5jaGlsZHJlbilcbiAgICApO1xuICB9KSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2NvbnRyb2xzL1BhZ2luYXRpb25Db250cm9sLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q5NSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZUludGVyYWN0aW5nT2JzZXJ2YWJsZSB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmZ1bmN0aW9uIFBhZ2luYXRpb25Db250cm9sKHtcbiAgdG90YWxQYWdlQ291bnQsXG4gIG5leHRQYWdlLFxuICBwcmV2UGFnZSxcbiAgY3VycmVudFBhZ2UsXG4gIHBhZ2VzQ29udGFpbmVyOiBjb25uZWN0ZWRFbGVtZW50XG59KSB7XG4gIGNvbnN0IFtpbnRlcmFjdGl2ZSwgc2V0SW50ZXJhY3RpdmVdID0gUmVhY3Q5NS51c2VTdGF0ZShmYWxzZSk7XG4gIFJlYWN0OTUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgc3Vic2NyaXB0aW9uO1xuICAgIGlmIChjb25uZWN0ZWRFbGVtZW50KSB7XG4gICAgICBzdWJzY3JpcHRpb24gPSBjcmVhdGVJbnRlcmFjdGluZ09ic2VydmFibGUoY29ubmVjdGVkRWxlbWVudC5jdXJyZW50LCAyZTMpLnN1YnNjcmliZShcbiAgICAgICAgc2V0SW50ZXJhY3RpdmVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtjb25uZWN0ZWRFbGVtZW50XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5NS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhZ2luYXRpb24tY29udHJvbFwiLCBcImRhdGEtbGstdXNlci1pbnRlcmFjdGlvblwiOiBpbnRlcmFjdGl2ZSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5NS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvblwiLCBvbkNsaWNrOiBwcmV2UGFnZSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5NS5jcmVhdGVFbGVtZW50KENoZXZyb25fZGVmYXVsdCwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5NS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1wYWdpbmF0aW9uLWNvdW50XCIgfSwgYCR7Y3VycmVudFBhZ2V9IG9mICR7dG90YWxQYWdlQ291bnR9YCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk1LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uXCIsIG9uQ2xpY2s6IG5leHRQYWdlIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk1LmNyZWF0ZUVsZW1lbnQoQ2hldnJvbl9kZWZhdWx0LCBudWxsKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9QYWdpbmF0aW9uSW5kaWNhdG9yLnRzeFxuaW1wb3J0ICogYXMgUmVhY3Q5NiBmcm9tIFwicmVhY3RcIjtcbnZhciBQYWdpbmF0aW9uSW5kaWNhdG9yID0gLyogQF9fUFVSRV9fICovIFJlYWN0OTYuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gUGFnaW5hdGlvbkluZGljYXRvcjIoeyB0b3RhbFBhZ2VDb3VudCwgY3VycmVudFBhZ2UgfSwgcmVmKSB7XG4gICAgY29uc3QgYnViYmxlcyA9IG5ldyBBcnJheSh0b3RhbFBhZ2VDb3VudCkuZmlsbChcIlwiKS5tYXAoKF8sIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggKyAxID09PSBjdXJyZW50UGFnZSkge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTYuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBcImRhdGEtbGstYWN0aXZlXCI6IHRydWUsIGtleTogaW5kZXggfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTYuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBrZXk6IGluZGV4IH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Ni5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmLCBjbGFzc05hbWU6IFwibGstcGFnaW5hdGlvbi1pbmRpY2F0b3JcIiB9LCBidWJibGVzKTtcbiAgfVxuKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvbGF5b3V0L0dyaWRMYXlvdXQudHN4XG5mdW5jdGlvbiBHcmlkTGF5b3V0KF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IHRyYWNrcyB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja3NcIl0pO1xuICBjb25zdCBncmlkRWwgPSBSZWFjdDk3LmNyZWF0ZVJlZigpO1xuICBjb25zdCBlbGVtZW50UHJvcHMgPSBSZWFjdDk3LnVzZU1lbW8oXG4gICAgKCkgPT4gbWVyZ2VQcm9wczIocHJvcHMsIHsgY2xhc3NOYW1lOiBcImxrLWdyaWQtbGF5b3V0XCIgfSksXG4gICAgW3Byb3BzXVxuICApO1xuICBjb25zdCB7IGxheW91dCB9ID0gdXNlR3JpZExheW91dChncmlkRWwsIHRyYWNrcy5sZW5ndGgpO1xuICBjb25zdCBwYWdpbmF0aW9uID0gdXNlUGFnaW5hdGlvbihsYXlvdXQubWF4VGlsZXMsIHRyYWNrcyk7XG4gIHVzZVN3aXBlKGdyaWRFbCwge1xuICAgIG9uTGVmdFN3aXBlOiBwYWdpbmF0aW9uLm5leHRQYWdlLFxuICAgIG9uUmlnaHRTd2lwZTogcGFnaW5hdGlvbi5wcmV2UGFnZVxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoeyByZWY6IGdyaWRFbCwgXCJkYXRhLWxrLXBhZ2luYXRpb25cIjogcGFnaW5hdGlvbi50b3RhbFBhZ2VDb3VudCA+IDEgfSwgZWxlbWVudFByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChUcmFja0xvb3AsIHsgdHJhY2tzOiBwYWdpbmF0aW9uLnRyYWNrcyB9LCBwcm9wcy5jaGlsZHJlbiksIHRyYWNrcy5sZW5ndGggPiBsYXlvdXQubWF4VGlsZXMgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChSZWFjdDk3LkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3Q5Ny5jcmVhdGVFbGVtZW50KFxuICAgIFBhZ2luYXRpb25JbmRpY2F0b3IsXG4gICAge1xuICAgICAgdG90YWxQYWdlQ291bnQ6IHBhZ2luYXRpb24udG90YWxQYWdlQ291bnQsXG4gICAgICBjdXJyZW50UGFnZTogcGFnaW5hdGlvbi5jdXJyZW50UGFnZVxuICAgIH1cbiAgKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTcuY3JlYXRlRWxlbWVudChQYWdpbmF0aW9uQ29udHJvbCwgX19zcHJlYWRWYWx1ZXMoeyBwYWdlc0NvbnRhaW5lcjogZ3JpZEVsIH0sIHBhZ2luYXRpb24pKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvQ2Fyb3VzZWxMYXlvdXQudHN4XG5pbXBvcnQgeyBnZXRTY3JvbGxCYXJXaWR0aCB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCAqIGFzIFJlYWN0OTggZnJvbSBcInJlYWN0XCI7XG52YXIgTUlOX0hFSUdIVCA9IDEzMDtcbnZhciBNSU5fV0lEVEggPSAxNDA7XG52YXIgTUlOX1ZJU0lCTEVfVElMRVMgPSAxO1xudmFyIEFTUEVDVF9SQVRJTyA9IDE2IC8gMTA7XG52YXIgQVNQRUNUX1JBVElPX0lOVkVSVCA9ICgxIC0gQVNQRUNUX1JBVElPKSAqIC0xO1xuZnVuY3Rpb24gQ2Fyb3VzZWxMYXlvdXQoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHsgdHJhY2tzLCBvcmllbnRhdGlvbiB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJ0cmFja3NcIiwgXCJvcmllbnRhdGlvblwiXSk7XG4gIGNvbnN0IGFzaWRlRWwgPSBSZWFjdDk4LnVzZVJlZihudWxsKTtcbiAgY29uc3QgW3ByZXZUaWxlcywgc2V0UHJldlRpbGVzXSA9IFJlYWN0OTgudXNlU3RhdGUoMCk7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdXNlU2l6ZShhc2lkZUVsKTtcbiAgY29uc3QgY2Fyb3VzZWxPcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uID8gb3JpZW50YXRpb24gOiBoZWlnaHQgPj0gd2lkdGggPyBcInZlcnRpY2FsXCIgOiBcImhvcml6b250YWxcIjtcbiAgY29uc3QgdGlsZVNwYW4gPSBjYXJvdXNlbE9yaWVudGF0aW9uID09PSBcInZlcnRpY2FsXCIgPyBNYXRoLm1heCh3aWR0aCAqIEFTUEVDVF9SQVRJT19JTlZFUlQsIE1JTl9IRUlHSFQpIDogTWF0aC5tYXgoaGVpZ2h0ICogQVNQRUNUX1JBVElPLCBNSU5fV0lEVEgpO1xuICBjb25zdCBzY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoKCk7XG4gIGNvbnN0IHRpbGVzVGhhdEZpdCA9IGNhcm91c2VsT3JpZW50YXRpb24gPT09IFwidmVydGljYWxcIiA/IE1hdGgubWF4KChoZWlnaHQgLSBzY3JvbGxCYXJXaWR0aCkgLyB0aWxlU3BhbiwgTUlOX1ZJU0lCTEVfVElMRVMpIDogTWF0aC5tYXgoKHdpZHRoIC0gc2Nyb2xsQmFyV2lkdGgpIC8gdGlsZVNwYW4sIE1JTl9WSVNJQkxFX1RJTEVTKTtcbiAgbGV0IG1heFZpc2libGVUaWxlcyA9IE1hdGgucm91bmQodGlsZXNUaGF0Rml0KTtcbiAgaWYgKE1hdGguYWJzKHRpbGVzVGhhdEZpdCAtIHByZXZUaWxlcykgPCAwLjUpIHtcbiAgICBtYXhWaXNpYmxlVGlsZXMgPSBNYXRoLnJvdW5kKHByZXZUaWxlcyk7XG4gIH0gZWxzZSBpZiAocHJldlRpbGVzICE9PSB0aWxlc1RoYXRGaXQpIHtcbiAgICBzZXRQcmV2VGlsZXModGlsZXNUaGF0Rml0KTtcbiAgfVxuICBjb25zdCBzb3J0ZWRUaWxlcyA9IHVzZVZpc3VhbFN0YWJsZVVwZGF0ZSh0cmFja3MsIG1heFZpc2libGVUaWxlcyk7XG4gIFJlYWN0OTgudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYXNpZGVFbC5jdXJyZW50KSB7XG4gICAgICBhc2lkZUVsLmN1cnJlbnQuZGF0YXNldC5sa09yaWVudGF0aW9uID0gY2Fyb3VzZWxPcmllbnRhdGlvbjtcbiAgICAgIGFzaWRlRWwuY3VycmVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tbGstbWF4LXZpc2libGUtdGlsZXNcIiwgbWF4VmlzaWJsZVRpbGVzLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfSwgW21heFZpc2libGVUaWxlcywgY2Fyb3VzZWxPcmllbnRhdGlvbl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0OTguY3JlYXRlRWxlbWVudChcImFzaWRlXCIsIF9fc3ByZWFkVmFsdWVzKHsga2V5OiBjYXJvdXNlbE9yaWVudGF0aW9uLCBjbGFzc05hbWU6IFwibGstY2Fyb3VzZWxcIiwgcmVmOiBhc2lkZUVsIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0OTguY3JlYXRlRWxlbWVudChUcmFja0xvb3AsIHsgdHJhY2tzOiBzb3J0ZWRUaWxlcyB9LCBwcm9wcy5jaGlsZHJlbikpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9sYXlvdXQvTGF5b3V0Q29udGV4dFByb3ZpZGVyLnRzeFxuaW1wb3J0IHsgbG9nIGFzIGxvZzEwIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3Q5OSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIExheW91dENvbnRleHRQcm92aWRlcih7XG4gIHZhbHVlLFxuICBvblBpbkNoYW5nZSxcbiAgb25XaWRnZXRDaGFuZ2UsXG4gIGNoaWxkcmVuXG59KSB7XG4gIGNvbnN0IGxheW91dENvbnRleHRWYWx1ZSA9IHVzZUVuc3VyZUNyZWF0ZUxheW91dENvbnRleHQodmFsdWUpO1xuICBSZWFjdDk5LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9nMTAuZGVidWcoXCJQaW5TdGF0ZSBVcGRhdGVkXCIsIHsgc3RhdGU6IGxheW91dENvbnRleHRWYWx1ZS5waW4uc3RhdGUgfSk7XG4gICAgaWYgKG9uUGluQ2hhbmdlICYmIGxheW91dENvbnRleHRWYWx1ZS5waW4uc3RhdGUpIG9uUGluQ2hhbmdlKGxheW91dENvbnRleHRWYWx1ZS5waW4uc3RhdGUpO1xuICB9LCBbbGF5b3V0Q29udGV4dFZhbHVlLnBpbi5zdGF0ZSwgb25QaW5DaGFuZ2VdKTtcbiAgUmVhY3Q5OS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvZzEwLmRlYnVnKFwiV2lkZ2V0IFVwZGF0ZWRcIiwgeyB3aWRnZXRTdGF0ZTogbGF5b3V0Q29udGV4dFZhbHVlLndpZGdldC5zdGF0ZSB9KTtcbiAgICBpZiAob25XaWRnZXRDaGFuZ2UgJiYgbGF5b3V0Q29udGV4dFZhbHVlLndpZGdldC5zdGF0ZSkge1xuICAgICAgb25XaWRnZXRDaGFuZ2UobGF5b3V0Q29udGV4dFZhbHVlLndpZGdldC5zdGF0ZSk7XG4gICAgfVxuICB9LCBbb25XaWRnZXRDaGFuZ2UsIGxheW91dENvbnRleHRWYWx1ZS53aWRnZXQuc3RhdGVdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDk5LmNyZWF0ZUVsZW1lbnQoTGF5b3V0Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogbGF5b3V0Q29udGV4dFZhbHVlIH0sIGNoaWxkcmVuKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvTGl2ZUtpdFJvb20udHN4XG5pbXBvcnQgKiBhcyBSZWFjdDEwMCBmcm9tIFwicmVhY3RcIjtcbnZhciBMaXZlS2l0Um9vbSA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5mb3J3YXJkUmVmKGZ1bmN0aW9uIExpdmVLaXRSb29tMihwcm9wcywgcmVmKSB7XG4gIGNvbnN0IHsgcm9vbSwgaHRtbFByb3BzIH0gPSB1c2VMaXZlS2l0Um9vbShwcm9wcyk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDAuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7IHJlZiB9LCBodG1sUHJvcHMpLCByb29tICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5jcmVhdGVFbGVtZW50KFJvb21Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiByb29tIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMC5jcmVhdGVFbGVtZW50KExLRmVhdHVyZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHByb3BzLmZlYXR1cmVGbGFncyB9LCBwcm9wcy5jaGlsZHJlbikpKTtcbn0pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9BdWRpb1Zpc3VhbGl6ZXIudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDEwMSBmcm9tIFwicmVhY3RcIjtcbnZhciBBdWRpb1Zpc3VhbGl6ZXIgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDEuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gQXVkaW9WaXN1YWxpemVyMihfYSwgcmVmKSB7XG4gICAgdmFyIF9iID0gX2EsIHsgdHJhY2tSZWYgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1widHJhY2tSZWZcIl0pO1xuICAgIGNvbnN0IHN2Z1dpZHRoID0gMjAwO1xuICAgIGNvbnN0IHN2Z0hlaWdodCA9IDkwO1xuICAgIGNvbnN0IGJhcldpZHRoID0gNjtcbiAgICBjb25zdCBiYXJTcGFjaW5nID0gNDtcbiAgICBjb25zdCB2b2xNdWx0aXBsaWVyID0gNTA7XG4gICAgY29uc3QgYmFyQ291bnQgPSA3O1xuICAgIGNvbnN0IHRyYWNrUmVmZXJlbmNlID0gdXNlRW5zdXJlVHJhY2tSZWYodHJhY2tSZWYpO1xuICAgIGNvbnN0IHZvbHVtZXMgPSB1c2VNdWx0aWJhbmRUcmFja1ZvbHVtZSh0cmFja1JlZmVyZW5jZSwgeyBiYW5kczogNywgbG9QYXNzOiAzMDAgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJzdmdcIixcbiAgICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICByZWYsXG4gICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgdmlld0JveDogYDAgMCAke3N2Z1dpZHRofSAke3N2Z0hlaWdodH1gXG4gICAgICB9LCBwcm9wcyksIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxrLWF1ZGlvLXZpc3VhbGl6ZXJcIlxuICAgICAgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDEuY3JlYXRlRWxlbWVudChcInJlY3RcIiwgeyB4OiBcIjBcIiwgeTogXCIwXCIsIHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMS5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcImdcIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHsoc3ZnV2lkdGggLSBiYXJDb3VudCAqIChiYXJXaWR0aCArIGJhclNwYWNpbmcpKSAvIDJ9cHgsIDApYFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdm9sdW1lcy5tYXAoKHZvbCwgaWR4KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDEuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBcInJlY3RcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBrZXk6IGlkeCxcbiAgICAgICAgICAgIHg6IGlkeCAqIChiYXJXaWR0aCArIGJhclNwYWNpbmcpLFxuICAgICAgICAgICAgeTogc3ZnSGVpZ2h0IC8gMiAtIHZvbCAqIHZvbE11bHRpcGxpZXIgLyAyLFxuICAgICAgICAgICAgd2lkdGg6IGJhcldpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB2b2wgKiB2b2xNdWx0aXBsaWVyXG4gICAgICAgICAgfVxuICAgICAgICApKVxuICAgICAgKVxuICAgICk7XG4gIH1cbik7XG5cbi8vIHNyYy9jb21wb25lbnRzL1BhcnRpY2lwYW50TG9vcC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTAyIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gUGFydGljaXBhbnRMb29wKF9hKSB7XG4gIHZhciBfYiA9IF9hLCB7IHBhcnRpY2lwYW50cyB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJwYXJ0aWNpcGFudHNcIl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTAyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMDIuRnJhZ21lbnQsIG51bGwsIHBhcnRpY2lwYW50cy5tYXAoKHBhcnRpY2lwYW50KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDIuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHBhcnRpY2lwYW50LCBrZXk6IHBhcnRpY2lwYW50LmlkZW50aXR5IH0sIGNsb25lU2luZ2xlQ2hpbGQocHJvcHMuY2hpbGRyZW4pKSkpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9Sb29tQXVkaW9SZW5kZXJlci50c3hcbmltcG9ydCB7IGdldFRyYWNrUmVmZXJlbmNlSWQgYXMgZ2V0VHJhY2tSZWZlcmVuY2VJZDUsIGlzTG9jYWwgYXMgaXNMb2NhbDIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazggfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTAzIGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gUm9vbUF1ZGlvUmVuZGVyZXIoeyB2b2x1bWUsIG11dGVkIH0pIHtcbiAgY29uc3QgdHJhY2tzID0gdXNlVHJhY2tzKFxuICAgIFtUcmFjazguU291cmNlLk1pY3JvcGhvbmUsIFRyYWNrOC5Tb3VyY2UuU2NyZWVuU2hhcmVBdWRpbywgVHJhY2s4LlNvdXJjZS5Vbmtub3duXSxcbiAgICB7XG4gICAgICB1cGRhdGVPbmx5T246IFtdLFxuICAgICAgb25seVN1YnNjcmliZWQ6IHRydWVcbiAgICB9XG4gICkuZmlsdGVyKChyZWYpID0+ICFpc0xvY2FsMihyZWYucGFydGljaXBhbnQpICYmIHJlZi5wdWJsaWNhdGlvbi5raW5kID09PSBUcmFjazguS2luZC5BdWRpbyk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGRpc3BsYXk6IFwibm9uZVwiIH0gfSwgdHJhY2tzLm1hcCgodHJhY2tSZWYpID0+IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwMy5jcmVhdGVFbGVtZW50KFxuICAgIEF1ZGlvVHJhY2ssXG4gICAge1xuICAgICAga2V5OiBnZXRUcmFja1JlZmVyZW5jZUlkNSh0cmFja1JlZiksXG4gICAgICB0cmFja1JlZixcbiAgICAgIHZvbHVtZSxcbiAgICAgIG11dGVkXG4gICAgfVxuICApKSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL1Jvb21OYW1lLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMDQgZnJvbSBcInJlYWN0XCI7XG52YXIgUm9vbU5hbWUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDQuZm9yd2FyZFJlZihmdW5jdGlvbiBSb29tTmFtZTIoX2EsIHJlZikge1xuICB2YXIgX2IgPSBfYSwgeyBjaGlsZHJlblBvc2l0aW9uID0gXCJiZWZvcmVcIiwgY2hpbGRyZW4gfSA9IF9iLCBodG1sQXR0cmlidXRlcyA9IF9fb2JqUmVzdChfYiwgW1wiY2hpbGRyZW5Qb3NpdGlvblwiLCBcImNoaWxkcmVuXCJdKTtcbiAgY29uc3QgeyBuYW1lIH0gPSB1c2VSb29tSW5mbygpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTA0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIGh0bWxBdHRyaWJ1dGVzKSwgY2hpbGRyZW5Qb3NpdGlvbiA9PT0gXCJiZWZvcmVcIiAmJiBjaGlsZHJlbiwgbmFtZSwgY2hpbGRyZW5Qb3NpdGlvbiA9PT0gXCJhZnRlclwiICYmIGNoaWxkcmVuKTtcbn0pO1xuXG4vLyBzcmMvY29tcG9uZW50cy9Ub2FzdC50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTA1IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gVG9hc3QocHJvcHMpIHtcbiAgY29uc3QgaHRtbFByb3BzID0gUmVhY3QxMDUudXNlTWVtbygoKSA9PiBtZXJnZVByb3BzMihwcm9wcywgeyBjbGFzc05hbWU6IFwibGstdG9hc3RcIiB9KSwgW3Byb3BzXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDUuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgaHRtbFByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudEF1ZGlvVGlsZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTA3IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgaXNUcmFja1JlZmVyZW5jZSBhcyBpc1RyYWNrUmVmZXJlbmNlNCB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFydGljaXBhbnQvQmFyVmlzdWFsaXplci50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTA2IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudC9hbmltYXRvcnMvdXNlQmFyQW5pbWF0b3IudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyNywgdXNlUmVmIGFzIHVzZVJlZjEwLCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTIyIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L2FuaW1hdGlvblNlcXVlbmNlcy9jb25uZWN0aW5nU2VxdWVuY2UudHNcbnZhciBnZW5lcmF0ZUNvbm5lY3RpbmdTZXF1ZW5jZUJhciA9IChjb2x1bW5zKSA9PiB7XG4gIGNvbnN0IHNlcSA9IFtdO1xuICBmb3IgKGxldCB4ID0gMDsgeCA8PSBjb2x1bW5zOyB4KyspIHtcbiAgICBzZXEucHVzaChbeCwgY29sdW1ucyAtIDEgLSB4XSk7XG4gIH1cbiAgcmV0dXJuIHNlcTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50L2FuaW1hdGlvblNlcXVlbmNlcy9saXN0ZW5pbmdTZXF1ZW5jZS50c1xudmFyIGdlbmVyYXRlTGlzdGVuaW5nU2VxdWVuY2VCYXIgPSAoY29sdW1ucykgPT4ge1xuICBjb25zdCBjZW50ZXIgPSBNYXRoLmZsb29yKGNvbHVtbnMgLyAyKTtcbiAgY29uc3Qgbm9JbmRleCA9IC0xO1xuICByZXR1cm4gW1tjZW50ZXJdLCBbbm9JbmRleF1dO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFydGljaXBhbnQvYW5pbWF0b3JzL3VzZUJhckFuaW1hdG9yLnRzXG52YXIgdXNlQmFyQW5pbWF0b3IgPSAoc3RhdGUsIGNvbHVtbnMsIGludGVydmFsKSA9PiB7XG4gIGNvbnN0IFtpbmRleCwgc2V0SW5kZXhdID0gdXNlU3RhdGUyMigwKTtcbiAgY29uc3QgW3NlcXVlbmNlLCBzZXRTZXF1ZW5jZV0gPSB1c2VTdGF0ZTIyKFtbXV0pO1xuICB1c2VFZmZlY3QyNygoKSA9PiB7XG4gICAgaWYgKHN0YXRlID09PSBcInRoaW5raW5nXCIpIHtcbiAgICAgIHNldFNlcXVlbmNlKGdlbmVyYXRlTGlzdGVuaW5nU2VxdWVuY2VCYXIoY29sdW1ucykpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09IFwiY29ubmVjdGluZ1wiIHx8IHN0YXRlID09PSBcImluaXRpYWxpemluZ1wiKSB7XG4gICAgICBjb25zdCBzZXF1ZW5jZTIgPSBbLi4uZ2VuZXJhdGVDb25uZWN0aW5nU2VxdWVuY2VCYXIoY29sdW1ucyldO1xuICAgICAgc2V0U2VxdWVuY2Uoc2VxdWVuY2UyKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSBcImxpc3RlbmluZ1wiKSB7XG4gICAgICBzZXRTZXF1ZW5jZShnZW5lcmF0ZUxpc3RlbmluZ1NlcXVlbmNlQmFyKGNvbHVtbnMpKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIHNldFNlcXVlbmNlKFtuZXcgQXJyYXkoY29sdW1ucykuZmlsbCgwKS5tYXAoKF8sIGlkeCkgPT4gaWR4KV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTZXF1ZW5jZShbW11dKTtcbiAgICB9XG4gICAgc2V0SW5kZXgoMCk7XG4gIH0sIFtzdGF0ZSwgY29sdW1uc10pO1xuICBjb25zdCBhbmltYXRpb25GcmFtZUlkID0gdXNlUmVmMTAobnVsbCk7XG4gIHVzZUVmZmVjdDI3KCgpID0+IHtcbiAgICBsZXQgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgYW5pbWF0ZSA9ICh0aW1lKSA9PiB7XG4gICAgICBjb25zdCB0aW1lRWxhcHNlZCA9IHRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBpZiAodGltZUVsYXBzZWQgPj0gaW50ZXJ2YWwpIHtcbiAgICAgICAgc2V0SW5kZXgoKHByZXYpID0+IHByZXYgKyAxKTtcbiAgICAgICAgc3RhcnRUaW1lID0gdGltZTtcbiAgICAgIH1cbiAgICAgIGFuaW1hdGlvbkZyYW1lSWQuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICB9O1xuICAgIGFuaW1hdGlvbkZyYW1lSWQuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGFuaW1hdGlvbkZyYW1lSWQuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZUlkLmN1cnJlbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtpbnRlcnZhbCwgY29sdW1ucywgc3RhdGUsIHNlcXVlbmNlLmxlbmd0aF0pO1xuICByZXR1cm4gc2VxdWVuY2VbaW5kZXggJSBzZXF1ZW5jZS5sZW5ndGhdO1xufTtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFydGljaXBhbnQvQmFyVmlzdWFsaXplci50c3hcbnZhciBzZXF1ZW5jZXJJbnRlcnZhbHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gIFtcImNvbm5lY3RpbmdcIiwgMjUgKiAxNV0sXG4gIFtcImxpc3RlbmluZ1wiLCA1MDBdLFxuICBbXCJ0aGlua2luZ1wiLCAxNTBdXG5dKTtcbnZhciBnZXRTZXF1ZW5jZXJJbnRlcnZhbCA9IChzdGF0ZSwgYmFyQ291bnQpID0+IHtcbiAgaWYgKHN0YXRlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gMWUzO1xuICB9XG4gIGxldCBpbnRlcnZhbCA9IHNlcXVlbmNlckludGVydmFscy5nZXQoc3RhdGUpO1xuICBpZiAoaW50ZXJ2YWwpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgICBpbnRlcnZhbCAvPSBiYXJDb3VudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGludGVydmFsO1xufTtcbnZhciBCYXJWaXN1YWxpemVyID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTA2LmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIEJhclZpc3VhbGl6ZXIyKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwgeyBzdGF0ZSwgb3B0aW9ucywgYmFyQ291bnQgPSAxNSwgdHJhY2tSZWYgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1wic3RhdGVcIiwgXCJvcHRpb25zXCIsIFwiYmFyQ291bnRcIiwgXCJ0cmFja1JlZlwiXSk7XG4gICAgdmFyIF9hMiwgX2IyLCBfYztcbiAgICBjb25zdCBlbGVtZW50UHJvcHMgPSBtZXJnZVByb3BzMihwcm9wcywgeyBjbGFzc05hbWU6IFwibGstYXVkaW8tYmFyLXZpc3VhbGl6ZXJcIiB9KTtcbiAgICBsZXQgdHJhY2tSZWZlcmVuY2UgPSB1c2VNYXliZVRyYWNrUmVmQ29udGV4dCgpO1xuICAgIGlmICh0cmFja1JlZikge1xuICAgICAgdHJhY2tSZWZlcmVuY2UgPSB0cmFja1JlZjtcbiAgICB9XG4gICAgY29uc3Qgdm9sdW1lQmFuZHMgPSB1c2VNdWx0aWJhbmRUcmFja1ZvbHVtZSh0cmFja1JlZmVyZW5jZSwge1xuICAgICAgYmFuZHM6IGJhckNvdW50LFxuICAgICAgbG9QYXNzOiAxMDAsXG4gICAgICBoaVBhc3M6IDIwMFxuICAgIH0pO1xuICAgIGNvbnN0IG1pbkhlaWdodCA9IChfYTIgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLm1pbkhlaWdodCkgIT0gbnVsbCA/IF9hMiA6IDIwO1xuICAgIGNvbnN0IG1heEhlaWdodCA9IChfYjIgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLm1heEhlaWdodCkgIT0gbnVsbCA/IF9iMiA6IDEwMDtcbiAgICBjb25zdCBoaWdobGlnaHRlZEluZGljZXMgPSB1c2VCYXJBbmltYXRvcihcbiAgICAgIHN0YXRlLFxuICAgICAgYmFyQ291bnQsXG4gICAgICAoX2MgPSBnZXRTZXF1ZW5jZXJJbnRlcnZhbChzdGF0ZSwgYmFyQ291bnQpKSAhPSBudWxsID8gX2MgOiAxMDBcbiAgICApO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDYuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIGVsZW1lbnRQcm9wcyksIHsgXCJkYXRhLWxrLXZhLXN0YXRlXCI6IHN0YXRlIH0pLCB2b2x1bWVCYW5kcy5tYXAoKHZvbHVtZSwgaWR4KSA9PiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDYuY3JlYXRlRWxlbWVudChcbiAgICAgIFwic3BhblwiLFxuICAgICAge1xuICAgICAgICBrZXk6IGlkeCxcbiAgICAgICAgY2xhc3NOYW1lOiBgbGstYXVkaW8tYmFyICR7aGlnaGxpZ2h0ZWRJbmRpY2VzLmluY2x1ZGVzKGlkeCkgJiYgXCJsay1oaWdobGlnaHRlZFwifWAsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgLy8gVE9ETyB0cmFuc2Zvcm0gYW5pbWF0aW9ucyB3b3VsZCBiZSBtb3JlIHBlcmZvcm1hbnQsIGhvd2V2ZXIgdGhlIGJvcmRlci1yYWRpdXMgZ2V0cyBkaXN0b3J0ZWQgd2hlbiB1c2luZyBzY2FsZSB0cmFuc2Zvcm1zLiBhIDktc2xpY2UgYXBwcm9hY2ggKG9yIDMgaW4gdGhpcyBjYXNlKSBjb3VsZCB3b3JrXG4gICAgICAgICAgLy8gdHJhbnNmb3JtOiBgc2NhbGUoMSwgJHtNYXRoLm1pbihtYXhIZWlnaHQsIE1hdGgubWF4KG1pbkhlaWdodCwgdm9sdW1lKSl9YCxcbiAgICAgICAgICBoZWlnaHQ6IGAke01hdGgubWluKG1heEhlaWdodCwgTWF0aC5tYXgobWluSGVpZ2h0LCB2b2x1bWUgKiAxMDAgKyA1KSl9JWBcbiAgICAgICAgfVxuICAgICAgfVxuICAgICkpKTtcbiAgfVxuKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFydGljaXBhbnQvUGFydGljaXBhbnRBdWRpb1RpbGUudHN4XG52YXIgUGFydGljaXBhbnRBdWRpb1RpbGUgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDcuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gUGFydGljaXBhbnRBdWRpb1RpbGUyKF9hLCByZWYpIHtcbiAgICB2YXIgX2IgPSBfYSwge1xuICAgICAgY2hpbGRyZW4sXG4gICAgICBkaXNhYmxlU3BlYWtpbmdJbmRpY2F0b3IsXG4gICAgICBvblBhcnRpY2lwYW50Q2xpY2ssXG4gICAgICB0cmFja1JlZlxuICAgIH0gPSBfYiwgaHRtbFByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgICBcImNoaWxkcmVuXCIsXG4gICAgICBcImRpc2FibGVTcGVha2luZ0luZGljYXRvclwiLFxuICAgICAgXCJvblBhcnRpY2lwYW50Q2xpY2tcIixcbiAgICAgIFwidHJhY2tSZWZcIlxuICAgIF0pO1xuICAgIGNvbnN0IHRyYWNrUmVmZXJlbmNlID0gdXNlRW5zdXJlVHJhY2tSZWYodHJhY2tSZWYpO1xuICAgIGNvbnN0IHsgZWxlbWVudFByb3BzIH0gPSB1c2VQYXJ0aWNpcGFudFRpbGUoe1xuICAgICAgdHJhY2tSZWY6IHRyYWNrUmVmZXJlbmNlLFxuICAgICAgaHRtbFByb3BzLFxuICAgICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yLFxuICAgICAgb25QYXJ0aWNpcGFudENsaWNrXG4gICAgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmLCBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLCBtaW5IZWlnaHQ6IFwiMTYwcHhcIiB9IH0sIGVsZW1lbnRQcm9wcyksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNy5jcmVhdGVFbGVtZW50KFRyYWNrUmVmQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogdHJhY2tSZWZlcmVuY2UgfSwgY2hpbGRyZW4gIT0gbnVsbCA/IGNoaWxkcmVuIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTA3LmNyZWF0ZUVsZW1lbnQoUmVhY3QxMDcuRnJhZ21lbnQsIG51bGwsIGlzVHJhY2tSZWZlcmVuY2U0KHRyYWNrUmVmZXJlbmNlKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDcuY3JlYXRlRWxlbWVudChBdWRpb1RyYWNrLCB7IHRyYWNrUmVmOiB0cmFja1JlZmVyZW5jZSB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA3LmNyZWF0ZUVsZW1lbnQoQmFyVmlzdWFsaXplciwgeyBiYXJDb3VudDogNywgb3B0aW9uczogeyBtaW5IZWlnaHQ6IDggfSB9KSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGFcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDcuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YS1pdGVtXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTA3LmNyZWF0ZUVsZW1lbnQoVHJhY2tNdXRlZEluZGljYXRvciwgeyB0cmFja1JlZjogdHJhY2tSZWZlcmVuY2UgfSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwNy5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50TmFtZSwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDcuY3JlYXRlRWxlbWVudChDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvciwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0pKSkpKTtcbiAgfVxuKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvQ29ubmVjdGlvblN0YXRlVG9hc3QudHN4XG5pbXBvcnQgeyBDb25uZWN0aW9uU3RhdGUgYXMgQ29ubmVjdGlvblN0YXRlNyB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMDggZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBDb25uZWN0aW9uU3RhdGVUb2FzdChwcm9wcykge1xuICBjb25zdCBbbm90aWZpY2F0aW9uLCBzZXROb3RpZmljYXRpb25dID0gUmVhY3QxMDgudXNlU3RhdGUodm9pZCAwKTtcbiAgY29uc3Qgc3RhdGUgPSB1c2VDb25uZWN0aW9uU3RhdGUocHJvcHMucm9vbSk7XG4gIFJlYWN0MTA4LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSBDb25uZWN0aW9uU3RhdGU3LlJlY29ubmVjdGluZzpcbiAgICAgICAgc2V0Tm90aWZpY2F0aW9uKFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwOC5jcmVhdGVFbGVtZW50KFJlYWN0MTA4LkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDguY3JlYXRlRWxlbWVudChTcGlubmVySWNvbl9kZWZhdWx0LCB7IGNsYXNzTmFtZTogXCJsay1zcGlubmVyXCIgfSksIFwiIFJlY29ubmVjdGluZ1wiKVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29ubmVjdGlvblN0YXRlNy5Db25uZWN0aW5nOlxuICAgICAgICBzZXROb3RpZmljYXRpb24oXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTA4LmNyZWF0ZUVsZW1lbnQoUmVhY3QxMDguRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwOC5jcmVhdGVFbGVtZW50KFNwaW5uZXJJY29uX2RlZmF1bHQsIHsgY2xhc3NOYW1lOiBcImxrLXNwaW5uZXJcIiB9KSwgXCIgQ29ubmVjdGluZ1wiKVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29ubmVjdGlvblN0YXRlNy5EaXNjb25uZWN0ZWQ6XG4gICAgICAgIHNldE5vdGlmaWNhdGlvbigvKiBAX19QVVJFX18gKi8gUmVhY3QxMDguY3JlYXRlRWxlbWVudChSZWFjdDEwOC5GcmFnbWVudCwgbnVsbCwgXCJEaXNjb25uZWN0ZWRcIikpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNldE5vdGlmaWNhdGlvbih2b2lkIDApO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIFtzdGF0ZV0pO1xuICByZXR1cm4gbm90aWZpY2F0aW9uID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTA4LmNyZWF0ZUVsZW1lbnQoVG9hc3QsIHsgY2xhc3NOYW1lOiBcImxrLXRvYXN0LWNvbm5lY3Rpb24tc3RhdGVcIiB9LCBub3RpZmljYXRpb24pIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTA4LmNyZWF0ZUVsZW1lbnQoUmVhY3QxMDguRnJhZ21lbnQsIG51bGwpO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9DaGF0RW50cnkudHN4XG5pbXBvcnQgeyB0b2tlbml6ZSwgY3JlYXRlRGVmYXVsdEdyYW1tYXIgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEwOSBmcm9tIFwicmVhY3RcIjtcbnZhciBDaGF0RW50cnkgPSAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDkuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24gQ2hhdEVudHJ5MihfYSwgcmVmKSB7XG4gICAgdmFyIF9iID0gX2EsIHsgZW50cnksIGhpZGVOYW1lID0gZmFsc2UsIGhpZGVUaW1lc3RhbXAgPSBmYWxzZSwgbWVzc2FnZUZvcm1hdHRlciB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXCJlbnRyeVwiLCBcImhpZGVOYW1lXCIsIFwiaGlkZVRpbWVzdGFtcFwiLCBcIm1lc3NhZ2VGb3JtYXR0ZXJcIl0pO1xuICAgIHZhciBfYTIsIF9iMiwgX2MsIF9kO1xuICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSBSZWFjdDEwOS51c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBtZXNzYWdlRm9ybWF0dGVyID8gbWVzc2FnZUZvcm1hdHRlcihlbnRyeS5tZXNzYWdlKSA6IGVudHJ5Lm1lc3NhZ2U7XG4gICAgfSwgW2VudHJ5Lm1lc3NhZ2UsIG1lc3NhZ2VGb3JtYXR0ZXJdKTtcbiAgICBjb25zdCBoYXNCZWVuRWRpdGVkID0gISFlbnRyeS5lZGl0VGltZXN0YW1wO1xuICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShlbnRyeS50aW1lc3RhbXApO1xuICAgIGNvbnN0IGxvY2FsZSA9IG5hdmlnYXRvciA/IG5hdmlnYXRvci5sYW5ndWFnZSA6IFwiZW4tVVNcIjtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTA5LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImxpXCIsXG4gICAgICBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgIHJlZixcbiAgICAgICAgY2xhc3NOYW1lOiBcImxrLWNoYXQtZW50cnlcIixcbiAgICAgICAgdGl0bGU6IHRpbWUudG9Mb2NhbGVUaW1lU3RyaW5nKGxvY2FsZSwgeyB0aW1lU3R5bGU6IFwiZnVsbFwiIH0pLFxuICAgICAgICBcImRhdGEtbGstbWVzc2FnZS1vcmlnaW5cIjogKChfYTIgPSBlbnRyeS5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmlzTG9jYWwpID8gXCJsb2NhbFwiIDogXCJyZW1vdGVcIlxuICAgICAgfSwgcHJvcHMpLFxuICAgICAgKCFoaWRlVGltZXN0YW1wIHx8ICFoaWRlTmFtZSB8fCBoYXNCZWVuRWRpdGVkKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDkuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGstbWV0YS1kYXRhXCIgfSwgIWhpZGVOYW1lICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEwOS5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW5hbWVcIiB9LCAoX2QgPSAoX2IyID0gZW50cnkuZnJvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5uYW1lKSAhPSBudWxsID8gX2QgOiAoX2MgPSBlbnRyeS5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogX2MuaWRlbnRpdHkpLCAoIWhpZGVUaW1lc3RhbXAgfHwgaGFzQmVlbkVkaXRlZCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTA5LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLXRpbWVzdGFtcFwiIH0sIGhhc0JlZW5FZGl0ZWQgJiYgXCJlZGl0ZWQgXCIsIHRpbWUudG9Mb2NhbGVUaW1lU3RyaW5nKGxvY2FsZSwgeyB0aW1lU3R5bGU6IFwic2hvcnRcIiB9KSkpLFxuICAgICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTA5LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLW1lc3NhZ2UtYm9keVwiIH0sIGZvcm1hdHRlZE1lc3NhZ2UpXG4gICAgKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIGZvcm1hdENoYXRNZXNzYWdlTGlua3MobWVzc2FnZSkge1xuICByZXR1cm4gdG9rZW5pemUobWVzc2FnZSwgY3JlYXRlRGVmYXVsdEdyYW1tYXIoKSkubWFwKCh0b2ssIGkpID0+IHtcbiAgICBpZiAodHlwZW9mIHRvayA9PT0gYHN0cmluZ2ApIHtcbiAgICAgIHJldHVybiB0b2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0b2suY29udGVudC50b1N0cmluZygpO1xuICAgICAgY29uc3QgaHJlZiA9IHRvay50eXBlID09PSBgdXJsYCA/IC9eaHR0cChzPyk6XFwvXFwvLy50ZXN0KGNvbnRlbnQpID8gY29udGVudCA6IGBodHRwczovLyR7Y29udGVudH1gIDogYG1haWx0bzoke2NvbnRlbnR9YDtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMDkuY3JlYXRlRWxlbWVudChcImFcIiwgeyBjbGFzc05hbWU6IFwibGstY2hhdC1saW5rXCIsIGtleTogaSwgaHJlZiwgdGFyZ2V0OiBcIl9ibGFua1wiLCByZWw6IFwibm9yZWZlcnJlclwiIH0sIGNvbnRlbnQpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL0NoYXQudHN4XG5pbXBvcnQgKiBhcyBSZWFjdDExMCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIENoYXQoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBtZXNzYWdlRm9ybWF0dGVyLFxuICAgIG1lc3NhZ2VEZWNvZGVyLFxuICAgIG1lc3NhZ2VFbmNvZGVyLFxuICAgIGNoYW5uZWxUb3BpY1xuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJtZXNzYWdlRm9ybWF0dGVyXCIsXG4gICAgXCJtZXNzYWdlRGVjb2RlclwiLFxuICAgIFwibWVzc2FnZUVuY29kZXJcIixcbiAgICBcImNoYW5uZWxUb3BpY1wiXG4gIF0pO1xuICBjb25zdCBpbnB1dFJlZiA9IFJlYWN0MTEwLnVzZVJlZihudWxsKTtcbiAgY29uc3QgdWxSZWYgPSBSZWFjdDExMC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNoYXRPcHRpb25zID0gUmVhY3QxMTAudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHsgbWVzc2FnZURlY29kZXIsIG1lc3NhZ2VFbmNvZGVyLCBjaGFubmVsVG9waWMgfTtcbiAgfSwgW21lc3NhZ2VEZWNvZGVyLCBtZXNzYWdlRW5jb2RlciwgY2hhbm5lbFRvcGljXSk7XG4gIGNvbnN0IHsgc2VuZCwgY2hhdE1lc3NhZ2VzLCBpc1NlbmRpbmcgfSA9IHVzZUNoYXQoY2hhdE9wdGlvbnMpO1xuICBjb25zdCBsYXlvdXRDb250ZXh0ID0gdXNlTWF5YmVMYXlvdXRDb250ZXh0KCk7XG4gIGNvbnN0IGxhc3RSZWFkTXNnQXQgPSBSZWFjdDExMC51c2VSZWYoMCk7XG4gIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChldmVudCkge1xuICAgIHJldHVybiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGlucHV0UmVmLmN1cnJlbnQgJiYgaW5wdXRSZWYuY3VycmVudC52YWx1ZS50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgaWYgKHNlbmQpIHtcbiAgICAgICAgICB5aWVsZCBzZW5kKGlucHV0UmVmLmN1cnJlbnQudmFsdWUpO1xuICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFJlYWN0MTEwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hMjtcbiAgICBpZiAodWxSZWYpIHtcbiAgICAgIChfYTIgPSB1bFJlZi5jdXJyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnNjcm9sbFRvKHsgdG9wOiB1bFJlZi5jdXJyZW50LnNjcm9sbEhlaWdodCB9KTtcbiAgICB9XG4gIH0sIFt1bFJlZiwgY2hhdE1lc3NhZ2VzXSk7XG4gIFJlYWN0MTEwLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hMiwgX2IyLCBfYywgX2QsIF9lO1xuICAgIGlmICghbGF5b3V0Q29udGV4dCB8fCBjaGF0TWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICgoKF9hMiA9IGxheW91dENvbnRleHQud2lkZ2V0LnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnNob3dDaGF0KSAmJiBjaGF0TWVzc2FnZXMubGVuZ3RoID4gMCAmJiBsYXN0UmVhZE1zZ0F0LmN1cnJlbnQgIT09ICgoX2IyID0gY2hhdE1lc3NhZ2VzW2NoYXRNZXNzYWdlcy5sZW5ndGggLSAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi50aW1lc3RhbXApKSB7XG4gICAgICBsYXN0UmVhZE1zZ0F0LmN1cnJlbnQgPSAoX2MgPSBjaGF0TWVzc2FnZXNbY2hhdE1lc3NhZ2VzLmxlbmd0aCAtIDFdKSA9PSBudWxsID8gdm9pZCAwIDogX2MudGltZXN0YW1wO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1bnJlYWRNZXNzYWdlQ291bnQgPSBjaGF0TWVzc2FnZXMuZmlsdGVyKFxuICAgICAgKG1zZykgPT4gIWxhc3RSZWFkTXNnQXQuY3VycmVudCB8fCBtc2cudGltZXN0YW1wID4gbGFzdFJlYWRNc2dBdC5jdXJyZW50XG4gICAgKS5sZW5ndGg7XG4gICAgY29uc3QgeyB3aWRnZXQgfSA9IGxheW91dENvbnRleHQ7XG4gICAgaWYgKHVucmVhZE1lc3NhZ2VDb3VudCA+IDAgJiYgKChfZCA9IHdpZGdldC5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnVucmVhZE1lc3NhZ2VzKSAhPT0gdW5yZWFkTWVzc2FnZUNvdW50KSB7XG4gICAgICAoX2UgPSB3aWRnZXQuZGlzcGF0Y2gpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jYWxsKHdpZGdldCwgeyBtc2c6IFwidW5yZWFkX21zZ1wiLCBjb3VudDogdW5yZWFkTWVzc2FnZUNvdW50IH0pO1xuICAgIH1cbiAgfSwgW2NoYXRNZXNzYWdlcywgbGF5b3V0Q29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogbGF5b3V0Q29udGV4dC53aWRnZXRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHByb3BzKSwgeyBjbGFzc05hbWU6IFwibGstY2hhdFwiIH0pLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTAuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1jaGF0LWhlYWRlclwiIH0sIFwiTWVzc2FnZXNcIiwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEwLmNyZWF0ZUVsZW1lbnQoQ2hhdFRvZ2dsZSwgeyBjbGFzc05hbWU6IFwibGstY2xvc2UtYnV0dG9uXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEwLmNyZWF0ZUVsZW1lbnQoQ2hhdENsb3NlSWNvbl9kZWZhdWx0LCBudWxsKSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTAuY3JlYXRlRWxlbWVudChcInVsXCIsIHsgY2xhc3NOYW1lOiBcImxrLWxpc3QgbGstY2hhdC1tZXNzYWdlc1wiLCByZWY6IHVsUmVmIH0sIHByb3BzLmNoaWxkcmVuID8gY2hhdE1lc3NhZ2VzLm1hcChcbiAgICAobXNnLCBpZHgpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4gY2xvbmVTaW5nbGVDaGlsZChwcm9wcy5jaGlsZHJlbiwge1xuICAgICAgICBlbnRyeTogbXNnLFxuICAgICAgICBrZXk6IChfYTIgPSBtc2cuaWQpICE9IG51bGwgPyBfYTIgOiBpZHgsXG4gICAgICAgIG1lc3NhZ2VGb3JtYXR0ZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgKSA6IGNoYXRNZXNzYWdlcy5tYXAoKG1zZywgaWR4LCBhbGxNc2cpID0+IHtcbiAgICB2YXIgX2EyO1xuICAgIGNvbnN0IGhpZGVOYW1lID0gaWR4ID49IDEgJiYgYWxsTXNnW2lkeCAtIDFdLmZyb20gPT09IG1zZy5mcm9tO1xuICAgIGNvbnN0IGhpZGVUaW1lc3RhbXAgPSBpZHggPj0gMSAmJiBtc2cudGltZXN0YW1wIC0gYWxsTXNnW2lkeCAtIDFdLnRpbWVzdGFtcCA8IDZlNDtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTEwLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBDaGF0RW50cnksXG4gICAgICB7XG4gICAgICAgIGtleTogKF9hMiA9IG1zZy5pZCkgIT0gbnVsbCA/IF9hMiA6IGlkeCxcbiAgICAgICAgaGlkZU5hbWUsXG4gICAgICAgIGhpZGVUaW1lc3RhbXA6IGhpZGVOYW1lID09PSBmYWxzZSA/IGZhbHNlIDogaGlkZVRpbWVzdGFtcCxcbiAgICAgICAgZW50cnk6IG1zZyxcbiAgICAgICAgbWVzc2FnZUZvcm1hdHRlclxuICAgICAgfVxuICAgICk7XG4gIH0pKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEwLmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHsgY2xhc3NOYW1lOiBcImxrLWNoYXQtZm9ybVwiLCBvblN1Ym1pdDogaGFuZGxlU3VibWl0IH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMC5jcmVhdGVFbGVtZW50KFxuICAgIFwiaW5wdXRcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IFwibGstZm9ybS1jb250cm9sIGxrLWNoYXQtZm9ybS1pbnB1dFwiLFxuICAgICAgZGlzYWJsZWQ6IGlzU2VuZGluZyxcbiAgICAgIHJlZjogaW5wdXRSZWYsXG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIHBsYWNlaG9sZGVyOiBcIkVudGVyIGEgbWVzc2FnZS4uLlwiLFxuICAgICAgb25JbnB1dDogKGV2KSA9PiBldi5zdG9wUHJvcGFnYXRpb24oKSxcbiAgICAgIG9uS2V5RG93bjogKGV2KSA9PiBldi5zdG9wUHJvcGFnYXRpb24oKSxcbiAgICAgIG9uS2V5VXA6IChldikgPT4gZXYuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB9XG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJzdWJtaXRcIiwgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbiBsay1jaGF0LWZvcm0tYnV0dG9uXCIsIGRpc2FibGVkOiBpc1NlbmRpbmcgfSwgXCJTZW5kXCIpKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL1ByZUpvaW4udHN4XG5pbXBvcnQge1xuICBjcmVhdGVMb2NhbEF1ZGlvVHJhY2ssXG4gIGNyZWF0ZUxvY2FsVHJhY2tzLFxuICBjcmVhdGVMb2NhbFZpZGVvVHJhY2ssXG4gIGZhY2luZ01vZGVGcm9tTG9jYWxUcmFjayBhcyBmYWNpbmdNb2RlRnJvbUxvY2FsVHJhY2syLFxuICBUcmFjayBhcyBUcmFjazksXG4gIFZpZGVvUHJlc2V0cyxcbiAgTXV0ZXhcbn0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDExMyBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3ByZWZhYnMvTWVkaWFEZXZpY2VNZW51LnRzeFxuaW1wb3J0IHsgY29tcHV0ZU1lbnVQb3NpdGlvbiwgd2FzQ2xpY2tPdXRzaWRlIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuaW1wb3J0ICogYXMgUmVhY3QxMTEgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBsb2cgYXMgbG9nMTEgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5mdW5jdGlvbiBNZWRpYURldmljZU1lbnUoX2EpIHtcbiAgdmFyIF9iID0gX2EsIHtcbiAgICBraW5kLFxuICAgIGluaXRpYWxTZWxlY3Rpb24sXG4gICAgb25BY3RpdmVEZXZpY2VDaGFuZ2UsXG4gICAgdHJhY2tzLFxuICAgIHJlcXVlc3RQZXJtaXNzaW9ucyA9IGZhbHNlXG4gIH0gPSBfYiwgcHJvcHMgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImtpbmRcIixcbiAgICBcImluaXRpYWxTZWxlY3Rpb25cIixcbiAgICBcIm9uQWN0aXZlRGV2aWNlQ2hhbmdlXCIsXG4gICAgXCJ0cmFja3NcIixcbiAgICBcInJlcXVlc3RQZXJtaXNzaW9uc1wiXG4gIF0pO1xuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gUmVhY3QxMTEudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGV2aWNlcywgc2V0RGV2aWNlc10gPSBSZWFjdDExMS51c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFt1cGRhdGVSZXF1aXJlZCwgc2V0VXBkYXRlUmVxdWlyZWRdID0gUmVhY3QxMTEudXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtuZWVkUGVybWlzc2lvbnMsIHNldE5lZWRQZXJtaXNzaW9uc10gPSBSZWFjdDExMS51c2VTdGF0ZShyZXF1ZXN0UGVybWlzc2lvbnMpO1xuICBjb25zdCBoYW5kbGVBY3RpdmVEZXZpY2VDaGFuZ2UgPSAoa2luZDIsIGRldmljZUlkKSA9PiB7XG4gICAgbG9nMTEuZGVidWcoXCJoYW5kbGUgZGV2aWNlIGNoYW5nZVwiKTtcbiAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlID09IG51bGwgPyB2b2lkIDAgOiBvbkFjdGl2ZURldmljZUNoYW5nZShraW5kMiwgZGV2aWNlSWQpO1xuICB9O1xuICBjb25zdCBidXR0b24gPSBSZWFjdDExMS51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHRvb2x0aXAgPSBSZWFjdDExMS51c2VSZWYobnVsbCk7XG4gIFJlYWN0MTExLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0TmVlZFBlcm1pc3Npb25zKHRydWUpO1xuICAgIH1cbiAgfSwgW2lzT3Blbl0pO1xuICBSZWFjdDExMS51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChidXR0b24uY3VycmVudCAmJiB0b29sdGlwLmN1cnJlbnQgJiYgKGRldmljZXMgfHwgdXBkYXRlUmVxdWlyZWQpKSB7XG4gICAgICBjb21wdXRlTWVudVBvc2l0aW9uKGJ1dHRvbi5jdXJyZW50LCB0b29sdGlwLmN1cnJlbnQpLnRoZW4oKHsgeCwgeSB9KSA9PiB7XG4gICAgICAgIGlmICh0b29sdGlwLmN1cnJlbnQpIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHRvb2x0aXAuY3VycmVudC5zdHlsZSwgeyBsZWZ0OiBgJHt4fXB4YCwgdG9wOiBgJHt5fXB4YCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHNldFVwZGF0ZVJlcXVpcmVkKGZhbHNlKTtcbiAgfSwgW2J1dHRvbiwgdG9vbHRpcCwgZGV2aWNlcywgdXBkYXRlUmVxdWlyZWRdKTtcbiAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gUmVhY3QxMTEudXNlQ2FsbGJhY2soXG4gICAgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXRvb2x0aXAuY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBidXR0b24uY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoaXNPcGVuICYmIHdhc0NsaWNrT3V0c2lkZSh0b29sdGlwLmN1cnJlbnQsIGV2ZW50KSkge1xuICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2lzT3BlbiwgdG9vbHRpcCwgYnV0dG9uXVxuICApO1xuICBSZWFjdDExMS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHNldFVwZGF0ZVJlcXVpcmVkKHRydWUpKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiBzZXRVcGRhdGVSZXF1aXJlZCh0cnVlKSk7XG4gICAgfTtcbiAgfSwgW2hhbmRsZUNsaWNrT3V0c2lkZSwgc2V0VXBkYXRlUmVxdWlyZWRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMS5jcmVhdGVFbGVtZW50KFJlYWN0MTExLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTEuY3JlYXRlRWxlbWVudChcbiAgICBcImJ1dHRvblwiLFxuICAgIF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbiBsay1idXR0b24tbWVudVwiLFxuICAgICAgXCJhcmlhLXByZXNzZWRcIjogaXNPcGVuXG4gICAgfSwgcHJvcHMpLCB7XG4gICAgICBvbkNsaWNrOiAoKSA9PiBzZXRJc09wZW4oIWlzT3BlbiksXG4gICAgICByZWY6IGJ1dHRvblxuICAgIH0pLFxuICAgIHByb3BzLmNoaWxkcmVuXG4gICksICFwcm9wcy5kaXNhYmxlZCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTEuY3JlYXRlRWxlbWVudChcbiAgICBcImRpdlwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogXCJsay1kZXZpY2UtbWVudVwiLFxuICAgICAgcmVmOiB0b29sdGlwLFxuICAgICAgc3R5bGU6IHsgdmlzaWJpbGl0eTogaXNPcGVuID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiIH1cbiAgICB9LFxuICAgIGtpbmQgPyAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTEuY3JlYXRlRWxlbWVudChcbiAgICAgIE1lZGlhRGV2aWNlU2VsZWN0LFxuICAgICAge1xuICAgICAgICBpbml0aWFsU2VsZWN0aW9uLFxuICAgICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKGRldmljZUlkKSA9PiBoYW5kbGVBY3RpdmVEZXZpY2VDaGFuZ2Uoa2luZCwgZGV2aWNlSWQpLFxuICAgICAgICBvbkRldmljZUxpc3RDaGFuZ2U6IHNldERldmljZXMsXG4gICAgICAgIGtpbmQsXG4gICAgICAgIHRyYWNrOiB0cmFja3MgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrc1traW5kXSxcbiAgICAgICAgcmVxdWVzdFBlcm1pc3Npb25zOiBuZWVkUGVybWlzc2lvbnNcbiAgICAgIH1cbiAgICApIDogLyogQF9fUFVSRV9fICovIFJlYWN0MTExLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMTEuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWRldmljZS1tZW51LWhlYWRpbmdcIiB9LCBcIkF1ZGlvIGlucHV0c1wiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTExLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBNZWRpYURldmljZVNlbGVjdCxcbiAgICAgIHtcbiAgICAgICAga2luZDogXCJhdWRpb2lucHV0XCIsXG4gICAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoZGV2aWNlSWQpID0+IGhhbmRsZUFjdGl2ZURldmljZUNoYW5nZShcImF1ZGlvaW5wdXRcIiwgZGV2aWNlSWQpLFxuICAgICAgICBvbkRldmljZUxpc3RDaGFuZ2U6IHNldERldmljZXMsXG4gICAgICAgIHRyYWNrOiB0cmFja3MgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrcy5hdWRpb2lucHV0LFxuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbnM6IG5lZWRQZXJtaXNzaW9uc1xuICAgICAgfVxuICAgICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWRldmljZS1tZW51LWhlYWRpbmdcIiB9LCBcIlZpZGVvIGlucHV0c1wiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTExLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBNZWRpYURldmljZVNlbGVjdCxcbiAgICAgIHtcbiAgICAgICAga2luZDogXCJ2aWRlb2lucHV0XCIsXG4gICAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoZGV2aWNlSWQpID0+IGhhbmRsZUFjdGl2ZURldmljZUNoYW5nZShcInZpZGVvaW5wdXRcIiwgZGV2aWNlSWQpLFxuICAgICAgICBvbkRldmljZUxpc3RDaGFuZ2U6IHNldERldmljZXMsXG4gICAgICAgIHRyYWNrOiB0cmFja3MgPT0gbnVsbCA/IHZvaWQgMCA6IHRyYWNrcy52aWRlb2lucHV0LFxuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbnM6IG5lZWRQZXJtaXNzaW9uc1xuICAgICAgfVxuICAgICkpXG4gICkpO1xufVxuXG4vLyBzcmMvcHJlZmFicy9QcmVKb2luLnRzeFxuaW1wb3J0IHsgbG9nIGFzIGxvZzEyIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuXG4vLyBzcmMvaG9va3MvdXNlV2FybkFib3V0TWlzc2luZ1N0eWxlcy50c1xuaW1wb3J0ICogYXMgUmVhY3QxMTIgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VXYXJuQWJvdXRNaXNzaW5nU3R5bGVzKCkge1xuICBSZWFjdDExMi51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKTtcbiAgfSwgW10pO1xufVxuXG4vLyBzcmMvcHJlZmFicy9QcmVKb2luLnRzeFxuaW1wb3J0IHsgZGVmYXVsdFVzZXJDaG9pY2VzIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuZnVuY3Rpb24gdXNlUHJldmlld1RyYWNrcyhvcHRpb25zLCBvbkVycm9yKSB7XG4gIGNvbnN0IFt0cmFja3MsIHNldFRyYWNrc10gPSBSZWFjdDExMy51c2VTdGF0ZSgpO1xuICBjb25zdCB0cmFja0xvY2sgPSBSZWFjdDExMy51c2VNZW1vKCgpID0+IG5ldyBNdXRleCgpLCBbXSk7XG4gIFJlYWN0MTEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG5lZWRzQ2xlYW51cCA9IGZhbHNlO1xuICAgIGxldCBsb2NhbFRyYWNrcyA9IFtdO1xuICAgIHRyYWNrTG9jay5sb2NrKCkudGhlbigodW5sb2NrKSA9PiBfX2FzeW5jKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAob3B0aW9ucy5hdWRpbyB8fCBvcHRpb25zLnZpZGVvKSB7XG4gICAgICAgICAgbG9jYWxUcmFja3MgPSB5aWVsZCBjcmVhdGVMb2NhbFRyYWNrcyhvcHRpb25zKTtcbiAgICAgICAgICBpZiAobmVlZHNDbGVhbnVwKSB7XG4gICAgICAgICAgICBsb2NhbFRyYWNrcy5mb3JFYWNoKCh0cikgPT4gdHIuc3RvcCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VHJhY2tzKGxvY2FsVHJhY2tzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcihlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2cxMi5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdW5sb2NrKCk7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBuZWVkc0NsZWFudXAgPSB0cnVlO1xuICAgICAgbG9jYWxUcmFja3MuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW0pTT04uc3RyaW5naWZ5KG9wdGlvbnMpLCBvbkVycm9yLCB0cmFja0xvY2tdKTtcbiAgcmV0dXJuIHRyYWNrcztcbn1cbmZ1bmN0aW9uIHVzZVByZXZpZXdEZXZpY2UoZW5hYmxlZCwgZGV2aWNlSWQsIGtpbmQpIHtcbiAgY29uc3QgW2RldmljZUVycm9yLCBzZXREZXZpY2VFcnJvcl0gPSBSZWFjdDExMy51c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2lzQ3JlYXRpbmdUcmFjaywgc2V0SXNDcmVhdGluZ1RyYWNrXSA9IFJlYWN0MTEzLnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgZGV2aWNlcyA9IHVzZU1lZGlhRGV2aWNlcyh7IGtpbmQgfSk7XG4gIGNvbnN0IFtzZWxlY3RlZERldmljZSwgc2V0U2VsZWN0ZWREZXZpY2VdID0gUmVhY3QxMTMudXNlU3RhdGUoXG4gICAgdm9pZCAwXG4gICk7XG4gIGNvbnN0IFtsb2NhbFRyYWNrLCBzZXRMb2NhbFRyYWNrXSA9IFJlYWN0MTEzLnVzZVN0YXRlKCk7XG4gIGNvbnN0IFtsb2NhbERldmljZUlkLCBzZXRMb2NhbERldmljZUlkXSA9IFJlYWN0MTEzLnVzZVN0YXRlKGRldmljZUlkKTtcbiAgUmVhY3QxMTMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRMb2NhbERldmljZUlkKGRldmljZUlkKTtcbiAgfSwgW2RldmljZUlkXSk7XG4gIGNvbnN0IGNyZWF0ZVRyYWNrID0gKGRldmljZUlkMiwga2luZDIpID0+IF9fYXN5bmModGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdHJhY2sgPSBraW5kMiA9PT0gXCJ2aWRlb2lucHV0XCIgPyB5aWVsZCBjcmVhdGVMb2NhbFZpZGVvVHJhY2soe1xuICAgICAgICBkZXZpY2VJZDogZGV2aWNlSWQyLFxuICAgICAgICByZXNvbHV0aW9uOiBWaWRlb1ByZXNldHMuaDcyMC5yZXNvbHV0aW9uXG4gICAgICB9KSA6IHlpZWxkIGNyZWF0ZUxvY2FsQXVkaW9UcmFjayh7IGRldmljZUlkOiBkZXZpY2VJZDIgfSk7XG4gICAgICBjb25zdCBuZXdEZXZpY2VJZCA9IHlpZWxkIHRyYWNrLmdldERldmljZUlkKCk7XG4gICAgICBpZiAobmV3RGV2aWNlSWQgJiYgZGV2aWNlSWQyICE9PSBuZXdEZXZpY2VJZCkge1xuICAgICAgICBwcmV2RGV2aWNlSWQuY3VycmVudCA9IG5ld0RldmljZUlkO1xuICAgICAgICBzZXRMb2NhbERldmljZUlkKG5ld0RldmljZUlkKTtcbiAgICAgIH1cbiAgICAgIHNldExvY2FsVHJhY2sodHJhY2spO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgc2V0RGV2aWNlRXJyb3IoZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgY29uc3Qgc3dpdGNoRGV2aWNlID0gKHRyYWNrLCBpZCkgPT4gX19hc3luYyh0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHlpZWxkIHRyYWNrLnNldERldmljZUlkKGlkKTtcbiAgICBwcmV2RGV2aWNlSWQuY3VycmVudCA9IGlkO1xuICB9KTtcbiAgY29uc3QgcHJldkRldmljZUlkID0gUmVhY3QxMTMudXNlUmVmKGxvY2FsRGV2aWNlSWQpO1xuICBSZWFjdDExMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChlbmFibGVkICYmICFsb2NhbFRyYWNrICYmICFkZXZpY2VFcnJvciAmJiAhaXNDcmVhdGluZ1RyYWNrKSB7XG4gICAgICBsb2cxMi5kZWJ1ZyhcImNyZWF0aW5nIHRyYWNrXCIsIGtpbmQpO1xuICAgICAgc2V0SXNDcmVhdGluZ1RyYWNrKHRydWUpO1xuICAgICAgY3JlYXRlVHJhY2sobG9jYWxEZXZpY2VJZCwga2luZCkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHNldElzQ3JlYXRpbmdUcmFjayhmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtlbmFibGVkLCBsb2NhbFRyYWNrLCBkZXZpY2VFcnJvciwgaXNDcmVhdGluZ1RyYWNrXSk7XG4gIFJlYWN0MTEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFsb2NhbFRyYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgbG9nMTIuZGVidWcoYG11dGluZyAke2tpbmR9IHRyYWNrYCk7XG4gICAgICBsb2NhbFRyYWNrLm11dGUoKS50aGVuKCgpID0+IGxvZzEyLmRlYnVnKGxvY2FsVHJhY2subWVkaWFTdHJlYW1UcmFjaykpO1xuICAgIH0gZWxzZSBpZiAoKHNlbGVjdGVkRGV2aWNlID09IG51bGwgPyB2b2lkIDAgOiBzZWxlY3RlZERldmljZS5kZXZpY2VJZCkgJiYgcHJldkRldmljZUlkLmN1cnJlbnQgIT09IChzZWxlY3RlZERldmljZSA9PSBudWxsID8gdm9pZCAwIDogc2VsZWN0ZWREZXZpY2UuZGV2aWNlSWQpKSB7XG4gICAgICBsb2cxMi5kZWJ1Zyhgc3dpdGNoaW5nICR7a2luZH0gZGV2aWNlIGZyb21gLCBwcmV2RGV2aWNlSWQuY3VycmVudCwgc2VsZWN0ZWREZXZpY2UuZGV2aWNlSWQpO1xuICAgICAgc3dpdGNoRGV2aWNlKGxvY2FsVHJhY2ssIHNlbGVjdGVkRGV2aWNlLmRldmljZUlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nMTIuZGVidWcoYHVubXV0aW5nIGxvY2FsICR7a2luZH0gdHJhY2tgKTtcbiAgICAgIGxvY2FsVHJhY2sudW5tdXRlKCk7XG4gICAgfVxuICB9LCBbbG9jYWxUcmFjaywgc2VsZWN0ZWREZXZpY2UsIGVuYWJsZWQsIGtpbmRdKTtcbiAgUmVhY3QxMTMudXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGxvY2FsVHJhY2spIHtcbiAgICAgICAgbG9nMTIuZGVidWcoYHN0b3BwaW5nIGxvY2FsICR7a2luZH0gdHJhY2tgKTtcbiAgICAgICAgbG9jYWxUcmFjay5zdG9wKCk7XG4gICAgICAgIGxvY2FsVHJhY2subXV0ZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcbiAgUmVhY3QxMTMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRTZWxlY3RlZERldmljZShkZXZpY2VzID09IG51bGwgPyB2b2lkIDAgOiBkZXZpY2VzLmZpbmQoKGRldikgPT4gZGV2LmRldmljZUlkID09PSBsb2NhbERldmljZUlkKSk7XG4gIH0sIFtsb2NhbERldmljZUlkLCBkZXZpY2VzXSk7XG4gIHJldHVybiB7XG4gICAgc2VsZWN0ZWREZXZpY2UsXG4gICAgbG9jYWxUcmFjayxcbiAgICBkZXZpY2VFcnJvclxuICB9O1xufVxuZnVuY3Rpb24gUHJlSm9pbihfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGRlZmF1bHRzID0ge30sXG4gICAgb25WYWxpZGF0ZSxcbiAgICBvblN1Ym1pdCxcbiAgICBvbkVycm9yLFxuICAgIGRlYnVnLFxuICAgIGpvaW5MYWJlbCA9IFwiSm9pbiBSb29tXCIsXG4gICAgbWljTGFiZWwgPSBcIk1pY3JvcGhvbmVcIixcbiAgICBjYW1MYWJlbCA9IFwiQ2FtZXJhXCIsXG4gICAgdXNlckxhYmVsID0gXCJVc2VybmFtZVwiLFxuICAgIHBlcnNpc3RVc2VyQ2hvaWNlcyA9IHRydWVcbiAgfSA9IF9iLCBodG1sUHJvcHMgPSBfX29ialJlc3QoX2IsIFtcbiAgICBcImRlZmF1bHRzXCIsXG4gICAgXCJvblZhbGlkYXRlXCIsXG4gICAgXCJvblN1Ym1pdFwiLFxuICAgIFwib25FcnJvclwiLFxuICAgIFwiZGVidWdcIixcbiAgICBcImpvaW5MYWJlbFwiLFxuICAgIFwibWljTGFiZWxcIixcbiAgICBcImNhbUxhYmVsXCIsXG4gICAgXCJ1c2VyTGFiZWxcIixcbiAgICBcInBlcnNpc3RVc2VyQ2hvaWNlc1wiXG4gIF0pO1xuICBjb25zdCBbdXNlckNob2ljZXMsIHNldFVzZXJDaG9pY2VzXSA9IFJlYWN0MTEzLnVzZVN0YXRlKGRlZmF1bHRVc2VyQ2hvaWNlcyk7XG4gIGNvbnN0IHBhcnRpYWxEZWZhdWx0cyA9IF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LCBkZWZhdWx0cy5hdWRpb0RldmljZUlkICE9PSB2b2lkIDAgJiYgeyBhdWRpb0RldmljZUlkOiBkZWZhdWx0cy5hdWRpb0RldmljZUlkIH0pLCBkZWZhdWx0cy52aWRlb0RldmljZUlkICE9PSB2b2lkIDAgJiYgeyB2aWRlb0RldmljZUlkOiBkZWZhdWx0cy52aWRlb0RldmljZUlkIH0pLCBkZWZhdWx0cy5hdWRpb0VuYWJsZWQgIT09IHZvaWQgMCAmJiB7IGF1ZGlvRW5hYmxlZDogZGVmYXVsdHMuYXVkaW9FbmFibGVkIH0pLCBkZWZhdWx0cy52aWRlb0VuYWJsZWQgIT09IHZvaWQgMCAmJiB7IHZpZGVvRW5hYmxlZDogZGVmYXVsdHMudmlkZW9FbmFibGVkIH0pLCBkZWZhdWx0cy51c2VybmFtZSAhPT0gdm9pZCAwICYmIHsgdXNlcm5hbWU6IGRlZmF1bHRzLnVzZXJuYW1lIH0pO1xuICBjb25zdCB7XG4gICAgdXNlckNob2ljZXM6IGluaXRpYWxVc2VyQ2hvaWNlcyxcbiAgICBzYXZlQXVkaW9JbnB1dERldmljZUlkLFxuICAgIHNhdmVBdWRpb0lucHV0RW5hYmxlZCxcbiAgICBzYXZlVmlkZW9JbnB1dERldmljZUlkLFxuICAgIHNhdmVWaWRlb0lucHV0RW5hYmxlZCxcbiAgICBzYXZlVXNlcm5hbWVcbiAgfSA9IHVzZVBlcnNpc3RlbnRVc2VyQ2hvaWNlcyh7XG4gICAgZGVmYXVsdHM6IHBhcnRpYWxEZWZhdWx0cyxcbiAgICBwcmV2ZW50U2F2ZTogIXBlcnNpc3RVc2VyQ2hvaWNlcyxcbiAgICBwcmV2ZW50TG9hZDogIXBlcnNpc3RVc2VyQ2hvaWNlc1xuICB9KTtcbiAgY29uc3QgW2F1ZGlvRW5hYmxlZCwgc2V0QXVkaW9FbmFibGVkXSA9IFJlYWN0MTEzLnVzZVN0YXRlKGluaXRpYWxVc2VyQ2hvaWNlcy5hdWRpb0VuYWJsZWQpO1xuICBjb25zdCBbdmlkZW9FbmFibGVkLCBzZXRWaWRlb0VuYWJsZWRdID0gUmVhY3QxMTMudXNlU3RhdGUoaW5pdGlhbFVzZXJDaG9pY2VzLnZpZGVvRW5hYmxlZCk7XG4gIGNvbnN0IFthdWRpb0RldmljZUlkLCBzZXRBdWRpb0RldmljZUlkXSA9IFJlYWN0MTEzLnVzZVN0YXRlKFxuICAgIGluaXRpYWxVc2VyQ2hvaWNlcy5hdWRpb0RldmljZUlkXG4gICk7XG4gIGNvbnN0IFt2aWRlb0RldmljZUlkLCBzZXRWaWRlb0RldmljZUlkXSA9IFJlYWN0MTEzLnVzZVN0YXRlKFxuICAgIGluaXRpYWxVc2VyQ2hvaWNlcy52aWRlb0RldmljZUlkXG4gICk7XG4gIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gUmVhY3QxMTMudXNlU3RhdGUoaW5pdGlhbFVzZXJDaG9pY2VzLnVzZXJuYW1lKTtcbiAgUmVhY3QxMTMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzYXZlQXVkaW9JbnB1dEVuYWJsZWQoYXVkaW9FbmFibGVkKTtcbiAgfSwgW2F1ZGlvRW5hYmxlZCwgc2F2ZUF1ZGlvSW5wdXRFbmFibGVkXSk7XG4gIFJlYWN0MTEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2F2ZVZpZGVvSW5wdXRFbmFibGVkKHZpZGVvRW5hYmxlZCk7XG4gIH0sIFt2aWRlb0VuYWJsZWQsIHNhdmVWaWRlb0lucHV0RW5hYmxlZF0pO1xuICBSZWFjdDExMy51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQoYXVkaW9EZXZpY2VJZCk7XG4gIH0sIFthdWRpb0RldmljZUlkLCBzYXZlQXVkaW9JbnB1dERldmljZUlkXSk7XG4gIFJlYWN0MTEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2F2ZVZpZGVvSW5wdXREZXZpY2VJZCh2aWRlb0RldmljZUlkKTtcbiAgfSwgW3ZpZGVvRGV2aWNlSWQsIHNhdmVWaWRlb0lucHV0RGV2aWNlSWRdKTtcbiAgUmVhY3QxMTMudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzYXZlVXNlcm5hbWUodXNlcm5hbWUpO1xuICB9LCBbdXNlcm5hbWUsIHNhdmVVc2VybmFtZV0pO1xuICBjb25zdCB0cmFja3MgPSB1c2VQcmV2aWV3VHJhY2tzKFxuICAgIHtcbiAgICAgIGF1ZGlvOiBhdWRpb0VuYWJsZWQgPyB7IGRldmljZUlkOiBpbml0aWFsVXNlckNob2ljZXMuYXVkaW9EZXZpY2VJZCB9IDogZmFsc2UsXG4gICAgICB2aWRlbzogdmlkZW9FbmFibGVkID8geyBkZXZpY2VJZDogaW5pdGlhbFVzZXJDaG9pY2VzLnZpZGVvRGV2aWNlSWQgfSA6IGZhbHNlXG4gICAgfSxcbiAgICBvbkVycm9yXG4gICk7XG4gIGNvbnN0IHZpZGVvRWwgPSBSZWFjdDExMy51c2VSZWYobnVsbCk7XG4gIGNvbnN0IHZpZGVvVHJhY2sgPSBSZWFjdDExMy51c2VNZW1vKFxuICAgICgpID0+IHRyYWNrcyA9PSBudWxsID8gdm9pZCAwIDogdHJhY2tzLmZpbHRlcigodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IFRyYWNrOS5LaW5kLlZpZGVvKVswXSxcbiAgICBbdHJhY2tzXVxuICApO1xuICBjb25zdCBmYWNpbmdNb2RlID0gUmVhY3QxMTMudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHZpZGVvVHJhY2spIHtcbiAgICAgIGNvbnN0IHsgZmFjaW5nTW9kZTogZmFjaW5nTW9kZTIgfSA9IGZhY2luZ01vZGVGcm9tTG9jYWxUcmFjazIodmlkZW9UcmFjayk7XG4gICAgICByZXR1cm4gZmFjaW5nTW9kZTI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgfSwgW3ZpZGVvVHJhY2tdKTtcbiAgY29uc3QgYXVkaW9UcmFjayA9IFJlYWN0MTEzLnVzZU1lbW8oXG4gICAgKCkgPT4gdHJhY2tzID09IG51bGwgPyB2b2lkIDAgOiB0cmFja3MuZmlsdGVyKCh0cmFjaykgPT4gdHJhY2sua2luZCA9PT0gVHJhY2s5LktpbmQuQXVkaW8pWzBdLFxuICAgIFt0cmFja3NdXG4gICk7XG4gIFJlYWN0MTEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHZpZGVvRWwuY3VycmVudCAmJiB2aWRlb1RyYWNrKSB7XG4gICAgICB2aWRlb1RyYWNrLnVubXV0ZSgpO1xuICAgICAgdmlkZW9UcmFjay5hdHRhY2godmlkZW9FbC5jdXJyZW50KTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHZpZGVvVHJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHZpZGVvVHJhY2suZGV0YWNoKCk7XG4gICAgfTtcbiAgfSwgW3ZpZGVvVHJhY2tdKTtcbiAgY29uc3QgW2lzVmFsaWQsIHNldElzVmFsaWRdID0gUmVhY3QxMTMudXNlU3RhdGUoKTtcbiAgY29uc3QgaGFuZGxlVmFsaWRhdGlvbiA9IFJlYWN0MTEzLnVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZXMpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygb25WYWxpZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBvblZhbGlkYXRlKHZhbHVlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWVzLnVzZXJuYW1lICE9PSBcIlwiO1xuICAgICAgfVxuICAgIH0sXG4gICAgW29uVmFsaWRhdGVdXG4gICk7XG4gIFJlYWN0MTEzLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmV3VXNlckNob2ljZXMgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHZpZGVvRW5hYmxlZCxcbiAgICAgIHZpZGVvRGV2aWNlSWQsXG4gICAgICBhdWRpb0VuYWJsZWQsXG4gICAgICBhdWRpb0RldmljZUlkXG4gICAgfTtcbiAgICBzZXRVc2VyQ2hvaWNlcyhuZXdVc2VyQ2hvaWNlcyk7XG4gICAgc2V0SXNWYWxpZChoYW5kbGVWYWxpZGF0aW9uKG5ld1VzZXJDaG9pY2VzKSk7XG4gIH0sIFt1c2VybmFtZSwgdmlkZW9FbmFibGVkLCBoYW5kbGVWYWxpZGF0aW9uLCBhdWRpb0VuYWJsZWQsIGF1ZGlvRGV2aWNlSWQsIHZpZGVvRGV2aWNlSWRdKTtcbiAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoaGFuZGxlVmFsaWRhdGlvbih1c2VyQ2hvaWNlcykpIHtcbiAgICAgIGlmICh0eXBlb2Ygb25TdWJtaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvblN1Ym1pdCh1c2VyQ2hvaWNlcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZzEyLndhcm4oXCJWYWxpZGF0aW9uIGZhaWxlZCB3aXRoOiBcIiwgdXNlckNob2ljZXMpO1xuICAgIH1cbiAgfVxuICB1c2VXYXJuQWJvdXRNaXNzaW5nU3R5bGVzKCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7IGNsYXNzTmFtZTogXCJsay1wcmVqb2luXCIgfSwgaHRtbFByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstdmlkZW8tY29udGFpbmVyXCIgfSwgdmlkZW9UcmFjayAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcInZpZGVvXCIsIHsgcmVmOiB2aWRlb0VsLCB3aWR0aDogXCIxMjgwXCIsIGhlaWdodDogXCI3MjBcIiwgXCJkYXRhLWxrLWZhY2luZy1tb2RlXCI6IGZhY2luZ01vZGUgfSksICghdmlkZW9UcmFjayB8fCAhdmlkZW9FbmFibGVkKSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1jYW1lcmEtb2ZmLW5vdGVcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChQYXJ0aWNpcGFudFBsYWNlaG9sZGVyX2RlZmF1bHQsIG51bGwpKSksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1jb250YWluZXJcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXAgYXVkaW9cIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcbiAgICBUcmFja1RvZ2dsZSxcbiAgICB7XG4gICAgICBpbml0aWFsU3RhdGU6IGF1ZGlvRW5hYmxlZCxcbiAgICAgIHNvdXJjZTogVHJhY2s5LlNvdXJjZS5NaWNyb3Bob25lLFxuICAgICAgb25DaGFuZ2U6IChlbmFibGVkKSA9PiBzZXRBdWRpb0VuYWJsZWQoZW5hYmxlZClcbiAgICB9LFxuICAgIG1pY0xhYmVsXG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1tZW51XCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXG4gICAgTWVkaWFEZXZpY2VNZW51LFxuICAgIHtcbiAgICAgIGluaXRpYWxTZWxlY3Rpb246IGF1ZGlvRGV2aWNlSWQsXG4gICAgICBraW5kOiBcImF1ZGlvaW5wdXRcIixcbiAgICAgIGRpc2FibGVkOiAhYXVkaW9UcmFjayxcbiAgICAgIHRyYWNrczogeyBhdWRpb2lucHV0OiBhdWRpb1RyYWNrIH0sXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKF8sIGlkKSA9PiBzZXRBdWRpb0RldmljZUlkKGlkKVxuICAgIH1cbiAgKSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXAgdmlkZW9cIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcbiAgICBUcmFja1RvZ2dsZSxcbiAgICB7XG4gICAgICBpbml0aWFsU3RhdGU6IHZpZGVvRW5hYmxlZCxcbiAgICAgIHNvdXJjZTogVHJhY2s5LlNvdXJjZS5DYW1lcmEsXG4gICAgICBvbkNoYW5nZTogKGVuYWJsZWQpID0+IHNldFZpZGVvRW5hYmxlZChlbmFibGVkKVxuICAgIH0sXG4gICAgY2FtTGFiZWxcbiAgKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLW1lbnVcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcbiAgICBNZWRpYURldmljZU1lbnUsXG4gICAge1xuICAgICAgaW5pdGlhbFNlbGVjdGlvbjogdmlkZW9EZXZpY2VJZCxcbiAgICAgIGtpbmQ6IFwidmlkZW9pbnB1dFwiLFxuICAgICAgZGlzYWJsZWQ6ICF2aWRlb1RyYWNrLFxuICAgICAgdHJhY2tzOiB7IHZpZGVvaW5wdXQ6IHZpZGVvVHJhY2sgfSxcbiAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoXywgaWQpID0+IHNldFZpZGVvRGV2aWNlSWQoaWQpXG4gICAgfVxuICApKSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImZvcm1cIiwgeyBjbGFzc05hbWU6IFwibGstdXNlcm5hbWUtY29udGFpbmVyXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJpbnB1dFwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogXCJsay1mb3JtLWNvbnRyb2xcIixcbiAgICAgIGlkOiBcInVzZXJuYW1lXCIsXG4gICAgICBuYW1lOiBcInVzZXJuYW1lXCIsXG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIGRlZmF1bHRWYWx1ZTogdXNlcm5hbWUsXG4gICAgICBwbGFjZWhvbGRlcjogdXNlckxhYmVsLFxuICAgICAgb25DaGFuZ2U6IChpbnB1dEVsKSA9PiBzZXRVc2VybmFtZShpbnB1dEVsLnRhcmdldC52YWx1ZSksXG4gICAgICBhdXRvQ29tcGxldGU6IFwib2ZmXCJcbiAgICB9XG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMy5jcmVhdGVFbGVtZW50KFxuICAgIFwiYnV0dG9uXCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbiBsay1qb2luLWJ1dHRvblwiLFxuICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgIG9uQ2xpY2s6IGhhbmRsZVN1Ym1pdCxcbiAgICAgIGRpc2FibGVkOiAhaXNWYWxpZFxuICAgIH0sXG4gICAgam9pbkxhYmVsXG4gICkpLCBkZWJ1ZyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChSZWFjdDExMy5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIiwgbnVsbCwgXCJVc2VyIENob2ljZXM6XCIpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcInVsXCIsIHsgY2xhc3NOYW1lOiBcImxrLWxpc3RcIiwgc3R5bGU6IHsgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsIG1heFdpZHRoOiBcIjE1cmVtXCIgfSB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIFwiVXNlcm5hbWU6IFwiLCBgJHt1c2VyQ2hvaWNlcy51c2VybmFtZX1gKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCBcIlZpZGVvIEVuYWJsZWQ6IFwiLCBgJHt1c2VyQ2hvaWNlcy52aWRlb0VuYWJsZWR9YCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExMy5jcmVhdGVFbGVtZW50KFwibGlcIiwgbnVsbCwgXCJBdWRpbyBFbmFibGVkOiBcIiwgYCR7dXNlckNob2ljZXMuYXVkaW9FbmFibGVkfWApLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTMuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIFwiVmlkZW8gRGV2aWNlOiBcIiwgYCR7dXNlckNob2ljZXMudmlkZW9EZXZpY2VJZH1gKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTEzLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCBcIkF1ZGlvIERldmljZTogXCIsIGAke3VzZXJDaG9pY2VzLmF1ZGlvRGV2aWNlSWR9YCkpKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL1ZpZGVvQ29uZmVyZW5jZS50c3hcbmltcG9ydCB7IGlzRXF1YWxUcmFja1JlZiwgaXNUcmFja1JlZmVyZW5jZSBhcyBpc1RyYWNrUmVmZXJlbmNlNSwgaXNXZWIsIGxvZyBhcyBsb2cxMyB9IGZyb20gXCJAbGl2ZWtpdC9jb21wb25lbnRzLWNvcmVcIjtcbmltcG9ydCB7IFJvb21FdmVudCBhcyBSb29tRXZlbnQzLCBUcmFjayBhcyBUcmFjazExIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDExOCBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3ByZWZhYnMvQ29udHJvbEJhci50c3hcbmltcG9ydCB7IFRyYWNrIGFzIFRyYWNrMTAgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCAqIGFzIFJlYWN0MTE3IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgc3VwcG9ydHNTY3JlZW5TaGFyaW5nIH0gZnJvbSBcIkBsaXZla2l0L2NvbXBvbmVudHMtY29yZVwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9TdGFydE1lZGlhQnV0dG9uLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMTQgZnJvbSBcInJlYWN0XCI7XG52YXIgU3RhcnRNZWRpYUJ1dHRvbiA9IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNC5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbiBTdGFydE1lZGlhQnV0dG9uMihfYSwgcmVmKSB7XG4gICAgdmFyIF9iID0gX2EsIHsgbGFiZWwgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1wibGFiZWxcIl0pO1xuICAgIGNvbnN0IHJvb20gPSB1c2VSb29tQ29udGV4dCgpO1xuICAgIGNvbnN0IHsgbWVyZ2VkUHJvcHM6IGF1ZGlvUHJvcHMsIGNhblBsYXlBdWRpbyB9ID0gdXNlU3RhcnRBdWRpbyh7IHJvb20sIHByb3BzIH0pO1xuICAgIGNvbnN0IHsgbWVyZ2VkUHJvcHMsIGNhblBsYXlWaWRlbyB9ID0gdXNlU3RhcnRWaWRlbyh7IHJvb20sIHByb3BzOiBhdWRpb1Byb3BzIH0pO1xuICAgIGNvbnN0IF9hMiA9IG1lcmdlZFByb3BzLCB7IHN0eWxlIH0gPSBfYTIsIHJlc3RQcm9wcyA9IF9fb2JqUmVzdChfYTIsIFtcInN0eWxlXCJdKTtcbiAgICBzdHlsZS5kaXNwbGF5ID0gY2FuUGxheUF1ZGlvICYmIGNhblBsYXlWaWRlbyA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBfX3NwcmVhZFZhbHVlcyh7IHJlZiwgc3R5bGUgfSwgcmVzdFByb3BzKSwgbGFiZWwgIT0gbnVsbCA/IGxhYmVsIDogYFN0YXJ0ICR7IWNhblBsYXlBdWRpbyA/IFwiQXVkaW9cIiA6IFwiVmlkZW9cIn1gKTtcbiAgfVxuKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvY29udHJvbHMvU2V0dGluZ3NNZW51VG9nZ2xlLnRzeFxuaW1wb3J0ICogYXMgUmVhY3QxMTYgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9ob29rcy91c2VTZXR0aW5nc1RvZ2dsZS50c1xuaW1wb3J0ICogYXMgUmVhY3QxMTUgZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VTZXR0aW5nc1RvZ2dsZSh7IHByb3BzIH0pIHtcbiAgY29uc3QgeyBkaXNwYXRjaCwgc3RhdGUgfSA9IHVzZUxheW91dENvbnRleHQoKS53aWRnZXQ7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IFwibGstYnV0dG9uIGxrLXNldHRpbmdzLXRvZ2dsZVwiO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IFJlYWN0MTE1LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBtZXJnZVByb3BzKHByb3BzLCB7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGlmIChkaXNwYXRjaCkgZGlzcGF0Y2goeyBtc2c6IFwidG9nZ2xlX3NldHRpbmdzXCIgfSk7XG4gICAgICB9LFxuICAgICAgXCJhcmlhLXByZXNzZWRcIjogKHN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS5zaG93U2V0dGluZ3MpID8gXCJ0cnVlXCIgOiBcImZhbHNlXCJcbiAgICB9KTtcbiAgfSwgW3Byb3BzLCBjbGFzc05hbWUsIGRpc3BhdGNoLCBzdGF0ZV0pO1xuICByZXR1cm4geyBtZXJnZWRQcm9wcyB9O1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9jb250cm9scy9TZXR0aW5nc01lbnVUb2dnbGUudHN4XG52YXIgU2V0dGluZ3NNZW51VG9nZ2xlID0gLyogQF9fUFVSRV9fICovIFJlYWN0MTE2LmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uIFNldHRpbmdzTWVudVRvZ2dsZTIocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgbWVyZ2VkUHJvcHMgfSA9IHVzZVNldHRpbmdzVG9nZ2xlKHsgcHJvcHMgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNi5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fc3ByZWFkVmFsdWVzKHsgcmVmIH0sIG1lcmdlZFByb3BzKSwgcHJvcHMuY2hpbGRyZW4pO1xuICB9XG4pO1xuXG4vLyBzcmMvcHJlZmFicy9Db250cm9sQmFyLnRzeFxuZnVuY3Rpb24gQ29udHJvbEJhcihfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIHZhcmlhdGlvbixcbiAgICBjb250cm9scyxcbiAgICBzYXZlVXNlckNob2ljZXM6IHNhdmVVc2VyQ2hvaWNlczIgPSB0cnVlLFxuICAgIG9uRGV2aWNlRXJyb3JcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwidmFyaWF0aW9uXCIsXG4gICAgXCJjb250cm9sc1wiLFxuICAgIFwic2F2ZVVzZXJDaG9pY2VzXCIsXG4gICAgXCJvbkRldmljZUVycm9yXCJcbiAgXSk7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZTtcbiAgY29uc3QgW2lzQ2hhdE9wZW4sIHNldElzQ2hhdE9wZW5dID0gUmVhY3QxMTcudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBsYXlvdXRDb250ZXh0ID0gdXNlTWF5YmVMYXlvdXRDb250ZXh0KCk7XG4gIFJlYWN0MTE3LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hMywgX2IzO1xuICAgIGlmICgoKF9hMyA9IGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQud2lkZ2V0LnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EzLnNob3dDaGF0KSAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXRJc0NoYXRPcGVuKChfYjMgPSBsYXlvdXRDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiBsYXlvdXRDb250ZXh0LndpZGdldC5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMy5zaG93Q2hhdCk7XG4gICAgfVxuICB9LCBbKF9hMiA9IGxheW91dENvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IGxheW91dENvbnRleHQud2lkZ2V0LnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnNob3dDaGF0XSk7XG4gIGNvbnN0IGlzVG9vTGl0dGxlU3BhY2UgPSB1c2VNZWRpYVF1ZXJ5KGAobWF4LXdpZHRoOiAke2lzQ2hhdE9wZW4gPyAxZTMgOiA3NjB9cHgpYCk7XG4gIGNvbnN0IGRlZmF1bHRWYXJpYXRpb24gPSBpc1Rvb0xpdHRsZVNwYWNlID8gXCJtaW5pbWFsXCIgOiBcInZlcmJvc2VcIjtcbiAgdmFyaWF0aW9uICE9IG51bGwgPyB2YXJpYXRpb24gOiB2YXJpYXRpb24gPSBkZWZhdWx0VmFyaWF0aW9uO1xuICBjb25zdCB2aXNpYmxlQ29udHJvbHMgPSBfX3NwcmVhZFZhbHVlcyh7IGxlYXZlOiB0cnVlIH0sIGNvbnRyb2xzKTtcbiAgY29uc3QgbG9jYWxQZXJtaXNzaW9ucyA9IHVzZUxvY2FsUGFydGljaXBhbnRQZXJtaXNzaW9ucygpO1xuICBpZiAoIWxvY2FsUGVybWlzc2lvbnMpIHtcbiAgICB2aXNpYmxlQ29udHJvbHMuY2FtZXJhID0gZmFsc2U7XG4gICAgdmlzaWJsZUNvbnRyb2xzLmNoYXQgPSBmYWxzZTtcbiAgICB2aXNpYmxlQ29udHJvbHMubWljcm9waG9uZSA9IGZhbHNlO1xuICAgIHZpc2libGVDb250cm9scy5zY3JlZW5TaGFyZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIChfYjIgPSB2aXNpYmxlQ29udHJvbHMuY2FtZXJhKSAhPSBudWxsID8gX2IyIDogdmlzaWJsZUNvbnRyb2xzLmNhbWVyYSA9IGxvY2FsUGVybWlzc2lvbnMuY2FuUHVibGlzaDtcbiAgICAoX2MgPSB2aXNpYmxlQ29udHJvbHMubWljcm9waG9uZSkgIT0gbnVsbCA/IF9jIDogdmlzaWJsZUNvbnRyb2xzLm1pY3JvcGhvbmUgPSBsb2NhbFBlcm1pc3Npb25zLmNhblB1Ymxpc2g7XG4gICAgKF9kID0gdmlzaWJsZUNvbnRyb2xzLnNjcmVlblNoYXJlKSAhPSBudWxsID8gX2QgOiB2aXNpYmxlQ29udHJvbHMuc2NyZWVuU2hhcmUgPSBsb2NhbFBlcm1pc3Npb25zLmNhblB1Ymxpc2g7XG4gICAgKF9lID0gdmlzaWJsZUNvbnRyb2xzLmNoYXQpICE9IG51bGwgPyBfZSA6IHZpc2libGVDb250cm9scy5jaGF0ID0gbG9jYWxQZXJtaXNzaW9ucy5jYW5QdWJsaXNoRGF0YSAmJiAoY29udHJvbHMgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbnRyb2xzLmNoYXQpO1xuICB9XG4gIGNvbnN0IHNob3dJY29uID0gUmVhY3QxMTcudXNlTWVtbyhcbiAgICAoKSA9PiB2YXJpYXRpb24gPT09IFwibWluaW1hbFwiIHx8IHZhcmlhdGlvbiA9PT0gXCJ2ZXJib3NlXCIsXG4gICAgW3ZhcmlhdGlvbl1cbiAgKTtcbiAgY29uc3Qgc2hvd1RleHQgPSBSZWFjdDExNy51c2VNZW1vKFxuICAgICgpID0+IHZhcmlhdGlvbiA9PT0gXCJ0ZXh0T25seVwiIHx8IHZhcmlhdGlvbiA9PT0gXCJ2ZXJib3NlXCIsXG4gICAgW3ZhcmlhdGlvbl1cbiAgKTtcbiAgY29uc3QgYnJvd3NlclN1cHBvcnRzU2NyZWVuU2hhcmluZyA9IHN1cHBvcnRzU2NyZWVuU2hhcmluZygpO1xuICBjb25zdCBbaXNTY3JlZW5TaGFyZUVuYWJsZWQsIHNldElzU2NyZWVuU2hhcmVFbmFibGVkXSA9IFJlYWN0MTE3LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgb25TY3JlZW5TaGFyZUNoYW5nZSA9IFJlYWN0MTE3LnVzZUNhbGxiYWNrKFxuICAgIChlbmFibGVkKSA9PiB7XG4gICAgICBzZXRJc1NjcmVlblNoYXJlRW5hYmxlZChlbmFibGVkKTtcbiAgICB9LFxuICAgIFtzZXRJc1NjcmVlblNoYXJlRW5hYmxlZF1cbiAgKTtcbiAgY29uc3QgaHRtbFByb3BzID0gbWVyZ2VQcm9wczIoeyBjbGFzc05hbWU6IFwibGstY29udHJvbC1iYXJcIiB9LCBwcm9wcyk7XG4gIGNvbnN0IHtcbiAgICBzYXZlQXVkaW9JbnB1dEVuYWJsZWQsXG4gICAgc2F2ZVZpZGVvSW5wdXRFbmFibGVkLFxuICAgIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQsXG4gICAgc2F2ZVZpZGVvSW5wdXREZXZpY2VJZFxuICB9ID0gdXNlUGVyc2lzdGVudFVzZXJDaG9pY2VzKHsgcHJldmVudFNhdmU6ICFzYXZlVXNlckNob2ljZXMyIH0pO1xuICBjb25zdCBtaWNyb3Bob25lT25DaGFuZ2UgPSBSZWFjdDExNy51c2VDYWxsYmFjayhcbiAgICAoZW5hYmxlZCwgaXNVc2VySW5pdGlhdGVkKSA9PiBpc1VzZXJJbml0aWF0ZWQgPyBzYXZlQXVkaW9JbnB1dEVuYWJsZWQoZW5hYmxlZCkgOiBudWxsLFxuICAgIFtzYXZlQXVkaW9JbnB1dEVuYWJsZWRdXG4gICk7XG4gIGNvbnN0IGNhbWVyYU9uQ2hhbmdlID0gUmVhY3QxMTcudXNlQ2FsbGJhY2soXG4gICAgKGVuYWJsZWQsIGlzVXNlckluaXRpYXRlZCkgPT4gaXNVc2VySW5pdGlhdGVkID8gc2F2ZVZpZGVvSW5wdXRFbmFibGVkKGVuYWJsZWQpIDogbnVsbCxcbiAgICBbc2F2ZVZpZGVvSW5wdXRFbmFibGVkXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0MTE3LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoe30sIGh0bWxQcm9wcyksIHZpc2libGVDb250cm9scy5taWNyb3Bob25lICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cFwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KFxuICAgIFRyYWNrVG9nZ2xlLFxuICAgIHtcbiAgICAgIHNvdXJjZTogVHJhY2sxMC5Tb3VyY2UuTWljcm9waG9uZSxcbiAgICAgIHNob3dJY29uLFxuICAgICAgb25DaGFuZ2U6IG1pY3JvcGhvbmVPbkNoYW5nZSxcbiAgICAgIG9uRGV2aWNlRXJyb3I6IChlcnJvcikgPT4gb25EZXZpY2VFcnJvciA9PSBudWxsID8gdm9pZCAwIDogb25EZXZpY2VFcnJvcih7IHNvdXJjZTogVHJhY2sxMC5Tb3VyY2UuTWljcm9waG9uZSwgZXJyb3IgfSlcbiAgICB9LFxuICAgIHNob3dUZXh0ICYmIFwiTWljcm9waG9uZVwiXG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1tZW51XCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE3LmNyZWF0ZUVsZW1lbnQoXG4gICAgTWVkaWFEZXZpY2VNZW51LFxuICAgIHtcbiAgICAgIGtpbmQ6IFwiYXVkaW9pbnB1dFwiLFxuICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChfa2luZCwgZGV2aWNlSWQpID0+IHNhdmVBdWRpb0lucHV0RGV2aWNlSWQoZGV2aWNlSWQgIT0gbnVsbCA/IGRldmljZUlkIDogXCJcIilcbiAgICB9XG4gICkpKSwgdmlzaWJsZUNvbnRyb2xzLmNhbWVyYSAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTcuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXBcIiB9LCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTcuY3JlYXRlRWxlbWVudChcbiAgICBUcmFja1RvZ2dsZSxcbiAgICB7XG4gICAgICBzb3VyY2U6IFRyYWNrMTAuU291cmNlLkNhbWVyYSxcbiAgICAgIHNob3dJY29uLFxuICAgICAgb25DaGFuZ2U6IGNhbWVyYU9uQ2hhbmdlLFxuICAgICAgb25EZXZpY2VFcnJvcjogKGVycm9yKSA9PiBvbkRldmljZUVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkRldmljZUVycm9yKHsgc291cmNlOiBUcmFjazEwLlNvdXJjZS5DYW1lcmEsIGVycm9yIH0pXG4gICAgfSxcbiAgICBzaG93VGV4dCAmJiBcIkNhbWVyYVwiXG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1tZW51XCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE3LmNyZWF0ZUVsZW1lbnQoXG4gICAgTWVkaWFEZXZpY2VNZW51LFxuICAgIHtcbiAgICAgIGtpbmQ6IFwidmlkZW9pbnB1dFwiLFxuICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChfa2luZCwgZGV2aWNlSWQpID0+IHNhdmVWaWRlb0lucHV0RGV2aWNlSWQoZGV2aWNlSWQgIT0gbnVsbCA/IGRldmljZUlkIDogXCJcIilcbiAgICB9XG4gICkpKSwgdmlzaWJsZUNvbnRyb2xzLnNjcmVlblNoYXJlICYmIGJyb3dzZXJTdXBwb3J0c1NjcmVlblNoYXJpbmcgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTE3LmNyZWF0ZUVsZW1lbnQoXG4gICAgVHJhY2tUb2dnbGUsXG4gICAge1xuICAgICAgc291cmNlOiBUcmFjazEwLlNvdXJjZS5TY3JlZW5TaGFyZSxcbiAgICAgIGNhcHR1cmVPcHRpb25zOiB7IGF1ZGlvOiB0cnVlLCBzZWxmQnJvd3NlclN1cmZhY2U6IFwiaW5jbHVkZVwiIH0sXG4gICAgICBzaG93SWNvbixcbiAgICAgIG9uQ2hhbmdlOiBvblNjcmVlblNoYXJlQ2hhbmdlLFxuICAgICAgb25EZXZpY2VFcnJvcjogKGVycm9yKSA9PiBvbkRldmljZUVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkRldmljZUVycm9yKHsgc291cmNlOiBUcmFjazEwLlNvdXJjZS5TY3JlZW5TaGFyZSwgZXJyb3IgfSlcbiAgICB9LFxuICAgIHNob3dUZXh0ICYmIChpc1NjcmVlblNoYXJlRW5hYmxlZCA/IFwiU3RvcCBzY3JlZW4gc2hhcmVcIiA6IFwiU2hhcmUgc2NyZWVuXCIpXG4gICksIHZpc2libGVDb250cm9scy5jaGF0ICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KENoYXRUb2dnbGUsIG51bGwsIHNob3dJY29uICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KENoYXRJY29uX2RlZmF1bHQsIG51bGwpLCBzaG93VGV4dCAmJiBcIkNoYXRcIiksIHZpc2libGVDb250cm9scy5zZXR0aW5ncyAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTcuY3JlYXRlRWxlbWVudChTZXR0aW5nc01lbnVUb2dnbGUsIG51bGwsIHNob3dJY29uICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExNy5jcmVhdGVFbGVtZW50KEdlYXJJY29uX2RlZmF1bHQsIG51bGwpLCBzaG93VGV4dCAmJiBcIlNldHRpbmdzXCIpLCB2aXNpYmxlQ29udHJvbHMubGVhdmUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTE3LmNyZWF0ZUVsZW1lbnQoRGlzY29ubmVjdEJ1dHRvbiwgbnVsbCwgc2hvd0ljb24gJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTE3LmNyZWF0ZUVsZW1lbnQoTGVhdmVJY29uX2RlZmF1bHQsIG51bGwpLCBzaG93VGV4dCAmJiBcIkxlYXZlXCIpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTcuY3JlYXRlRWxlbWVudChTdGFydE1lZGlhQnV0dG9uLCBudWxsKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL1ZpZGVvQ29uZmVyZW5jZS50c3hcbmZ1bmN0aW9uIFZpZGVvQ29uZmVyZW5jZShfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGNoYXRNZXNzYWdlRm9ybWF0dGVyLFxuICAgIGNoYXRNZXNzYWdlRGVjb2RlcixcbiAgICBjaGF0TWVzc2FnZUVuY29kZXIsXG4gICAgU2V0dGluZ3NDb21wb25lbnRcbiAgfSA9IF9iLCBwcm9wcyA9IF9fb2JqUmVzdChfYiwgW1xuICAgIFwiY2hhdE1lc3NhZ2VGb3JtYXR0ZXJcIixcbiAgICBcImNoYXRNZXNzYWdlRGVjb2RlclwiLFxuICAgIFwiY2hhdE1lc3NhZ2VFbmNvZGVyXCIsXG4gICAgXCJTZXR0aW5nc0NvbXBvbmVudFwiXG4gIF0pO1xuICB2YXIgX2EyLCBfYjI7XG4gIGNvbnN0IFt3aWRnZXRTdGF0ZSwgc2V0V2lkZ2V0U3RhdGVdID0gUmVhY3QxMTgudXNlU3RhdGUoe1xuICAgIHNob3dDaGF0OiBmYWxzZSxcbiAgICB1bnJlYWRNZXNzYWdlczogMCxcbiAgICBzaG93U2V0dGluZ3M6IGZhbHNlXG4gIH0pO1xuICBjb25zdCBsYXN0QXV0b0ZvY3VzZWRTY3JlZW5TaGFyZVRyYWNrID0gUmVhY3QxMTgudXNlUmVmKG51bGwpO1xuICBjb25zdCB0cmFja3MgPSB1c2VUcmFja3MoXG4gICAgW1xuICAgICAgeyBzb3VyY2U6IFRyYWNrMTEuU291cmNlLkNhbWVyYSwgd2l0aFBsYWNlaG9sZGVyOiB0cnVlIH0sXG4gICAgICB7IHNvdXJjZTogVHJhY2sxMS5Tb3VyY2UuU2NyZWVuU2hhcmUsIHdpdGhQbGFjZWhvbGRlcjogZmFsc2UgfVxuICAgIF0sXG4gICAgeyB1cGRhdGVPbmx5T246IFtSb29tRXZlbnQzLkFjdGl2ZVNwZWFrZXJzQ2hhbmdlZF0sIG9ubHlTdWJzY3JpYmVkOiBmYWxzZSB9XG4gICk7XG4gIGNvbnN0IHdpZGdldFVwZGF0ZSA9IChzdGF0ZSkgPT4ge1xuICAgIGxvZzEzLmRlYnVnKFwidXBkYXRpbmcgd2lkZ2V0IHN0YXRlXCIsIHN0YXRlKTtcbiAgICBzZXRXaWRnZXRTdGF0ZShzdGF0ZSk7XG4gIH07XG4gIGNvbnN0IGxheW91dENvbnRleHQgPSB1c2VDcmVhdGVMYXlvdXRDb250ZXh0KCk7XG4gIGNvbnN0IHNjcmVlblNoYXJlVHJhY2tzID0gdHJhY2tzLmZpbHRlcihpc1RyYWNrUmVmZXJlbmNlNSkuZmlsdGVyKCh0cmFjaykgPT4gdHJhY2sucHVibGljYXRpb24uc291cmNlID09PSBUcmFjazExLlNvdXJjZS5TY3JlZW5TaGFyZSk7XG4gIGNvbnN0IGZvY3VzVHJhY2sgPSAoX2EyID0gdXNlUGlubmVkVHJhY2tzKGxheW91dENvbnRleHQpKSA9PSBudWxsID8gdm9pZCAwIDogX2EyWzBdO1xuICBjb25zdCBjYXJvdXNlbFRyYWNrcyA9IHRyYWNrcy5maWx0ZXIoKHRyYWNrKSA9PiAhaXNFcXVhbFRyYWNrUmVmKHRyYWNrLCBmb2N1c1RyYWNrKSk7XG4gIFJlYWN0MTE4LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hMywgX2IzLCBfYywgX2QsIF9lLCBfZjtcbiAgICBpZiAoc2NyZWVuU2hhcmVUcmFja3Muc29tZSgodHJhY2spID0+IHRyYWNrLnB1YmxpY2F0aW9uLmlzU3Vic2NyaWJlZCkgJiYgbGFzdEF1dG9Gb2N1c2VkU2NyZWVuU2hhcmVUcmFjay5jdXJyZW50ID09PSBudWxsKSB7XG4gICAgICBsb2cxMy5kZWJ1ZyhcIkF1dG8gc2V0IHNjcmVlbiBzaGFyZSBmb2N1czpcIiwgeyBuZXdTY3JlZW5TaGFyZVRyYWNrOiBzY3JlZW5TaGFyZVRyYWNrc1swXSB9KTtcbiAgICAgIChfYjMgPSAoX2EzID0gbGF5b3V0Q29udGV4dC5waW4pLmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2IzLmNhbGwoX2EzLCB7IG1zZzogXCJzZXRfcGluXCIsIHRyYWNrUmVmZXJlbmNlOiBzY3JlZW5TaGFyZVRyYWNrc1swXSB9KTtcbiAgICAgIGxhc3RBdXRvRm9jdXNlZFNjcmVlblNoYXJlVHJhY2suY3VycmVudCA9IHNjcmVlblNoYXJlVHJhY2tzWzBdO1xuICAgIH0gZWxzZSBpZiAobGFzdEF1dG9Gb2N1c2VkU2NyZWVuU2hhcmVUcmFjay5jdXJyZW50ICYmICFzY3JlZW5TaGFyZVRyYWNrcy5zb21lKFxuICAgICAgKHRyYWNrKSA9PiB7XG4gICAgICAgIHZhciBfYTQsIF9iNDtcbiAgICAgICAgcmV0dXJuIHRyYWNrLnB1YmxpY2F0aW9uLnRyYWNrU2lkID09PSAoKF9iNCA9IChfYTQgPSBsYXN0QXV0b0ZvY3VzZWRTY3JlZW5TaGFyZVRyYWNrLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTQucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYjQudHJhY2tTaWQpO1xuICAgICAgfVxuICAgICkpIHtcbiAgICAgIGxvZzEzLmRlYnVnKFwiQXV0byBjbGVhcmluZyBzY3JlZW4gc2hhcmUgZm9jdXMuXCIpO1xuICAgICAgKF9kID0gKF9jID0gbGF5b3V0Q29udGV4dC5waW4pLmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY2FsbChfYywgeyBtc2c6IFwiY2xlYXJfcGluXCIgfSk7XG4gICAgICBsYXN0QXV0b0ZvY3VzZWRTY3JlZW5TaGFyZVRyYWNrLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZm9jdXNUcmFjayAmJiAhaXNUcmFja1JlZmVyZW5jZTUoZm9jdXNUcmFjaykpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRGb2N1c1RyYWNrID0gdHJhY2tzLmZpbmQoXG4gICAgICAgICh0cikgPT4gdHIucGFydGljaXBhbnQuaWRlbnRpdHkgPT09IGZvY3VzVHJhY2sucGFydGljaXBhbnQuaWRlbnRpdHkgJiYgdHIuc291cmNlID09PSBmb2N1c1RyYWNrLnNvdXJjZVxuICAgICAgKTtcbiAgICAgIGlmICh1cGRhdGVkRm9jdXNUcmFjayAhPT0gZm9jdXNUcmFjayAmJiBpc1RyYWNrUmVmZXJlbmNlNSh1cGRhdGVkRm9jdXNUcmFjaykpIHtcbiAgICAgICAgKF9mID0gKF9lID0gbGF5b3V0Q29udGV4dC5waW4pLmRpc3BhdGNoKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY2FsbChfZSwgeyBtc2c6IFwic2V0X3BpblwiLCB0cmFja1JlZmVyZW5jZTogdXBkYXRlZEZvY3VzVHJhY2sgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXG4gICAgc2NyZWVuU2hhcmVUcmFja3MubWFwKChyZWYpID0+IGAke3JlZi5wdWJsaWNhdGlvbi50cmFja1NpZH1fJHtyZWYucHVibGljYXRpb24uaXNTdWJzY3JpYmVkfWApLmpvaW4oKSxcbiAgICAoX2IyID0gZm9jdXNUcmFjayA9PSBudWxsID8gdm9pZCAwIDogZm9jdXNUcmFjay5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi50cmFja1NpZCxcbiAgICB0cmFja3NcbiAgXSk7XG4gIHVzZVdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fc3ByZWFkVmFsdWVzKHsgY2xhc3NOYW1lOiBcImxrLXZpZGVvLWNvbmZlcmVuY2VcIiB9LCBwcm9wcyksIGlzV2ViKCkgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoXG4gICAgTGF5b3V0Q29udGV4dFByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiBsYXlvdXRDb250ZXh0LFxuICAgICAgb25XaWRnZXRDaGFuZ2U6IHdpZGdldFVwZGF0ZVxuICAgIH0sXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstdmlkZW8tY29uZmVyZW5jZS1pbm5lclwiIH0sICFmb2N1c1RyYWNrID8gLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstZ3JpZC1sYXlvdXQtd3JhcHBlclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOC5jcmVhdGVFbGVtZW50KEdyaWRMYXlvdXQsIHsgdHJhY2tzIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOC5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50VGlsZSwgbnVsbCkpKSA6IC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWZvY3VzLWxheW91dC13cmFwcGVyXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoRm9jdXNMYXlvdXRDb250YWluZXIsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOC5jcmVhdGVFbGVtZW50KENhcm91c2VsTGF5b3V0LCB7IHRyYWNrczogY2Fyb3VzZWxUcmFja3MgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoUGFydGljaXBhbnRUaWxlLCBudWxsKSksIGZvY3VzVHJhY2sgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoRm9jdXNMYXlvdXQsIHsgdHJhY2tSZWY6IGZvY3VzVHJhY2sgfSkpKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoQ29udHJvbEJhciwgeyBjb250cm9sczogeyBjaGF0OiB0cnVlLCBzZXR0aW5nczogISFTZXR0aW5nc0NvbXBvbmVudCB9IH0pKSxcbiAgICAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTguY3JlYXRlRWxlbWVudChcbiAgICAgIENoYXQsXG4gICAgICB7XG4gICAgICAgIHN0eWxlOiB7IGRpc3BsYXk6IHdpZGdldFN0YXRlLnNob3dDaGF0ID8gXCJncmlkXCIgOiBcIm5vbmVcIiB9LFxuICAgICAgICBtZXNzYWdlRm9ybWF0dGVyOiBjaGF0TWVzc2FnZUZvcm1hdHRlcixcbiAgICAgICAgbWVzc2FnZUVuY29kZXI6IGNoYXRNZXNzYWdlRW5jb2RlcixcbiAgICAgICAgbWVzc2FnZURlY29kZXI6IGNoYXRNZXNzYWdlRGVjb2RlclxuICAgICAgfVxuICAgICksXG4gICAgU2V0dGluZ3NDb21wb25lbnQgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImRpdlwiLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFwibGstc2V0dGluZ3MtbWVudS1tb2RhbFwiLFxuICAgICAgICBzdHlsZTogeyBkaXNwbGF5OiB3aWRnZXRTdGF0ZS5zaG93U2V0dGluZ3MgPyBcImJsb2NrXCIgOiBcIm5vbmVcIiB9XG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTE4LmNyZWF0ZUVsZW1lbnQoU2V0dGluZ3NDb21wb25lbnQsIG51bGwpXG4gICAgKVxuICApLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTguY3JlYXRlRWxlbWVudChSb29tQXVkaW9SZW5kZXJlciwgbnVsbCksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOC5jcmVhdGVFbGVtZW50KENvbm5lY3Rpb25TdGF0ZVRvYXN0LCBudWxsKSk7XG59XG5cbi8vIHNyYy9wcmVmYWJzL0F1ZGlvQ29uZmVyZW5jZS50c3hcbmltcG9ydCAqIGFzIFJlYWN0MTE5IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgVHJhY2sgYXMgVHJhY2sxMiB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gQXVkaW9Db25mZXJlbmNlKF9hKSB7XG4gIHZhciBwcm9wcyA9IF9fb2JqUmVzdChfYSwgW10pO1xuICBjb25zdCBbd2lkZ2V0U3RhdGUsIHNldFdpZGdldFN0YXRlXSA9IFJlYWN0MTE5LnVzZVN0YXRlKHtcbiAgICBzaG93Q2hhdDogZmFsc2UsXG4gICAgdW5yZWFkTWVzc2FnZXM6IDBcbiAgfSk7XG4gIGNvbnN0IGF1ZGlvVHJhY2tzID0gdXNlVHJhY2tzKFtUcmFjazEyLlNvdXJjZS5NaWNyb3Bob25lXSk7XG4gIHVzZVdhcm5BYm91dE1pc3NpbmdTdHlsZXMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOS5jcmVhdGVFbGVtZW50KExheW91dENvbnRleHRQcm92aWRlciwgeyBvbldpZGdldENoYW5nZTogc2V0V2lkZ2V0U3RhdGUgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19zcHJlYWRWYWx1ZXMoeyBjbGFzc05hbWU6IFwibGstYXVkaW8tY29uZmVyZW5jZVwiIH0sIHByb3BzKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTE5LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYXVkaW8tY29uZmVyZW5jZS1zdGFnZVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOS5jcmVhdGVFbGVtZW50KFRyYWNrTG9vcCwgeyB0cmFja3M6IGF1ZGlvVHJhY2tzIH0sIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDExOS5jcmVhdGVFbGVtZW50KFBhcnRpY2lwYW50QXVkaW9UaWxlLCBudWxsKSkpLCAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTkuY3JlYXRlRWxlbWVudChcbiAgICBDb250cm9sQmFyLFxuICAgIHtcbiAgICAgIGNvbnRyb2xzOiB7IG1pY3JvcGhvbmU6IHRydWUsIHNjcmVlblNoYXJlOiBmYWxzZSwgY2FtZXJhOiBmYWxzZSwgY2hhdDogdHJ1ZSB9XG4gICAgfVxuICApLCB3aWRnZXRTdGF0ZS5zaG93Q2hhdCAmJiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMTkuY3JlYXRlRWxlbWVudChDaGF0LCBudWxsKSkpO1xufVxuXG4vLyBzcmMvcHJlZmFicy9Wb2ljZUFzc2lzdGFudENvbnRyb2xCYXIudHN4XG5pbXBvcnQgeyBUcmFjayBhcyBUcmFjazEzIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBSZWFjdDEyMCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIFZvaWNlQXNzaXN0YW50Q29udHJvbEJhcihfYSkge1xuICB2YXIgX2IgPSBfYSwge1xuICAgIGNvbnRyb2xzLFxuICAgIHNhdmVVc2VyQ2hvaWNlczogc2F2ZVVzZXJDaG9pY2VzMiA9IHRydWUsXG4gICAgb25EZXZpY2VFcnJvclxuICB9ID0gX2IsIHByb3BzID0gX19vYmpSZXN0KF9iLCBbXG4gICAgXCJjb250cm9sc1wiLFxuICAgIFwic2F2ZVVzZXJDaG9pY2VzXCIsXG4gICAgXCJvbkRldmljZUVycm9yXCJcbiAgXSk7XG4gIHZhciBfYTI7XG4gIGNvbnN0IHZpc2libGVDb250cm9scyA9IF9fc3ByZWFkVmFsdWVzKHsgbGVhdmU6IHRydWUsIG1pY3JvcGhvbmU6IHRydWUgfSwgY29udHJvbHMpO1xuICBjb25zdCBsb2NhbFBlcm1pc3Npb25zID0gdXNlTG9jYWxQYXJ0aWNpcGFudFBlcm1pc3Npb25zKCk7XG4gIGNvbnN0IHsgbWljcm9waG9uZVRyYWNrLCBsb2NhbFBhcnRpY2lwYW50IH0gPSB1c2VMb2NhbFBhcnRpY2lwYW50KCk7XG4gIGNvbnN0IG1pY1RyYWNrUmVmID0gUmVhY3QxMjAudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcnRpY2lwYW50OiBsb2NhbFBhcnRpY2lwYW50LFxuICAgICAgc291cmNlOiBUcmFjazEzLlNvdXJjZS5NaWNyb3Bob25lLFxuICAgICAgcHVibGljYXRpb246IG1pY3JvcGhvbmVUcmFja1xuICAgIH07XG4gIH0sIFtsb2NhbFBhcnRpY2lwYW50LCBtaWNyb3Bob25lVHJhY2tdKTtcbiAgaWYgKCFsb2NhbFBlcm1pc3Npb25zKSB7XG4gICAgdmlzaWJsZUNvbnRyb2xzLm1pY3JvcGhvbmUgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICAoX2EyID0gdmlzaWJsZUNvbnRyb2xzLm1pY3JvcGhvbmUpICE9IG51bGwgPyBfYTIgOiB2aXNpYmxlQ29udHJvbHMubWljcm9waG9uZSA9IGxvY2FsUGVybWlzc2lvbnMuY2FuUHVibGlzaDtcbiAgfVxuICBjb25zdCBodG1sUHJvcHMgPSBtZXJnZVByb3BzMih7IGNsYXNzTmFtZTogXCJsay1hZ2VudC1jb250cm9sLWJhclwiIH0sIHByb3BzKTtcbiAgY29uc3QgeyBzYXZlQXVkaW9JbnB1dEVuYWJsZWQsIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQgfSA9IHVzZVBlcnNpc3RlbnRVc2VyQ2hvaWNlcyh7XG4gICAgcHJldmVudFNhdmU6ICFzYXZlVXNlckNob2ljZXMyXG4gIH0pO1xuICBjb25zdCBtaWNyb3Bob25lT25DaGFuZ2UgPSBSZWFjdDEyMC51c2VDYWxsYmFjayhcbiAgICAoZW5hYmxlZCwgaXNVc2VySW5pdGlhdGVkKSA9PiB7XG4gICAgICBpZiAoaXNVc2VySW5pdGlhdGVkKSB7XG4gICAgICAgIHNhdmVBdWRpb0lucHV0RW5hYmxlZChlbmFibGVkKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtzYXZlQXVkaW9JbnB1dEVuYWJsZWRdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gUmVhY3QxMjAuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX3NwcmVhZFZhbHVlcyh7fSwgaHRtbFByb3BzKSwgdmlzaWJsZUNvbnRyb2xzLm1pY3JvcGhvbmUgJiYgLyogQF9fUFVSRV9fICovIFJlYWN0MTIwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwXCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIwLmNyZWF0ZUVsZW1lbnQoXG4gICAgVHJhY2tUb2dnbGUsXG4gICAge1xuICAgICAgc291cmNlOiBUcmFjazEzLlNvdXJjZS5NaWNyb3Bob25lLFxuICAgICAgc2hvd0ljb246IHRydWUsXG4gICAgICBvbkNoYW5nZTogbWljcm9waG9uZU9uQ2hhbmdlLFxuICAgICAgb25EZXZpY2VFcnJvcjogKGVycm9yKSA9PiBvbkRldmljZUVycm9yID09IG51bGwgPyB2b2lkIDAgOiBvbkRldmljZUVycm9yKHsgc291cmNlOiBUcmFjazEzLlNvdXJjZS5NaWNyb3Bob25lLCBlcnJvciB9KVxuICAgIH0sXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0MTIwLmNyZWF0ZUVsZW1lbnQoQmFyVmlzdWFsaXplciwgeyB0cmFja1JlZjogbWljVHJhY2tSZWYsIGJhckNvdW50OiA3LCBvcHRpb25zOiB7IG1pbkhlaWdodDogNSB9IH0pXG4gICksIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyMC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1tZW51XCIgfSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIwLmNyZWF0ZUVsZW1lbnQoXG4gICAgTWVkaWFEZXZpY2VNZW51LFxuICAgIHtcbiAgICAgIGtpbmQ6IFwiYXVkaW9pbnB1dFwiLFxuICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChfa2luZCwgZGV2aWNlSWQpID0+IHNhdmVBdWRpb0lucHV0RGV2aWNlSWQoZGV2aWNlSWQgIT0gbnVsbCA/IGRldmljZUlkIDogXCJcIilcbiAgICB9XG4gICkpKSwgdmlzaWJsZUNvbnRyb2xzLmxlYXZlICYmIC8qIEBfX1BVUkVfXyAqLyBSZWFjdDEyMC5jcmVhdGVFbGVtZW50KERpc2Nvbm5lY3RCdXR0b24sIG51bGwsIFwiRGlzY29ubmVjdFwiKSwgLyogQF9fUFVSRV9fICovIFJlYWN0MTIwLmNyZWF0ZUVsZW1lbnQoU3RhcnRNZWRpYUJ1dHRvbiwgbnVsbCkpO1xufVxuXG4vLyBzcmMvaW5kZXgudHNcbmltcG9ydCB7IHNldExvZ0xldmVsLCBzZXRMb2dFeHRlbnNpb24sIGlzVHJhY2tSZWZlcmVuY2UgYXMgaXNUcmFja1JlZmVyZW5jZTYgfSBmcm9tIFwiQGxpdmVraXQvY29tcG9uZW50cy1jb3JlXCI7XG5leHBvcnQge1xuICBBdWRpb0NvbmZlcmVuY2UsXG4gIEF1ZGlvVHJhY2ssXG4gIEF1ZGlvVmlzdWFsaXplcixcbiAgQmFyVmlzdWFsaXplcixcbiAgQ2FtZXJhRGlzYWJsZWRJY29uX2RlZmF1bHQgYXMgQ2FtZXJhRGlzYWJsZWRJY29uLFxuICBDYW1lcmFJY29uX2RlZmF1bHQgYXMgQ2FtZXJhSWNvbixcbiAgQ2Fyb3VzZWxMYXlvdXQsXG4gIENoYXQsXG4gIENoYXRDbG9zZUljb25fZGVmYXVsdCBhcyBDaGF0Q2xvc2VJY29uLFxuICBDaGF0RW50cnksXG4gIENoYXRJY29uX2RlZmF1bHQgYXMgQ2hhdEljb24sXG4gIENoYXRUb2dnbGUsXG4gIENoZXZyb25fZGVmYXVsdCBhcyBDaGV2cm9uLFxuICBDbGVhclBpbkJ1dHRvbixcbiAgQ29ubmVjdGlvblF1YWxpdHlJbmRpY2F0b3IsXG4gIENvbm5lY3Rpb25TdGF0ZTUgYXMgQ29ubmVjdGlvblN0YXRlLFxuICBDb25uZWN0aW9uU3RhdGVUb2FzdCxcbiAgQ29udHJvbEJhcixcbiAgRGlzY29ubmVjdEJ1dHRvbixcbiAgRm9jdXNMYXlvdXQsXG4gIEZvY3VzTGF5b3V0Q29udGFpbmVyLFxuICBGb2N1c1RvZ2dsZSxcbiAgRm9jdXNUb2dnbGVJY29uX2RlZmF1bHQgYXMgRm9jdXNUb2dnbGVJY29uLFxuICBHZWFySWNvbl9kZWZhdWx0IGFzIEdlYXJJY29uLFxuICBHcmlkTGF5b3V0LFxuICBMS0ZlYXR1cmVDb250ZXh0LFxuICBMYXlvdXRDb250ZXh0LFxuICBMYXlvdXRDb250ZXh0UHJvdmlkZXIsXG4gIExlYXZlSWNvbl9kZWZhdWx0IGFzIExlYXZlSWNvbixcbiAgTGl2ZUtpdFJvb20sXG4gIExvY2tMb2NrZWRJY29uX2RlZmF1bHQgYXMgTG9ja0xvY2tlZEljb24sXG4gIE1lZGlhRGV2aWNlTWVudSxcbiAgTWVkaWFEZXZpY2VTZWxlY3QsXG4gIE1pY0Rpc2FibGVkSWNvbl9kZWZhdWx0IGFzIE1pY0Rpc2FibGVkSWNvbixcbiAgTWljSWNvbl9kZWZhdWx0IGFzIE1pY0ljb24sXG4gIFBhcnRpY2lwYW50QXVkaW9UaWxlLFxuICBQYXJ0aWNpcGFudENvbnRleHQsXG4gIFBhcnRpY2lwYW50Q29udGV4dElmTmVlZGVkLFxuICBQYXJ0aWNpcGFudExvb3AsXG4gIFBhcnRpY2lwYW50TmFtZSxcbiAgUGFydGljaXBhbnRQbGFjZWhvbGRlcl9kZWZhdWx0IGFzIFBhcnRpY2lwYW50UGxhY2Vob2xkZXIsXG4gIFBhcnRpY2lwYW50VGlsZSxcbiAgUHJlSm9pbixcbiAgUXVhbGl0eUV4Y2VsbGVudEljb25fZGVmYXVsdCBhcyBRdWFsaXR5RXhjZWxsZW50SWNvbixcbiAgUXVhbGl0eUdvb2RJY29uX2RlZmF1bHQgYXMgUXVhbGl0eUdvb2RJY29uLFxuICBRdWFsaXR5UG9vckljb25fZGVmYXVsdCBhcyBRdWFsaXR5UG9vckljb24sXG4gIFF1YWxpdHlVbmtub3duSWNvbl9kZWZhdWx0IGFzIFF1YWxpdHlVbmtub3duSWNvbixcbiAgUm9vbUF1ZGlvUmVuZGVyZXIsXG4gIFJvb21Db250ZXh0LFxuICBSb29tTmFtZSxcbiAgU2NyZWVuU2hhcmVJY29uX2RlZmF1bHQgYXMgU2NyZWVuU2hhcmVJY29uLFxuICBTY3JlZW5TaGFyZVN0b3BJY29uX2RlZmF1bHQgYXMgU2NyZWVuU2hhcmVTdG9wSWNvbixcbiAgU3Bpbm5lckljb25fZGVmYXVsdCBhcyBTcGlubmVySWNvbixcbiAgU3RhcnRBdWRpbyxcbiAgVG9hc3QsXG4gIFRyYWNrTG9vcCxcbiAgVHJhY2tNdXRlZEluZGljYXRvcixcbiAgVHJhY2tSZWZDb250ZXh0LFxuICBUcmFja1JlZkNvbnRleHRJZk5lZWRlZCxcbiAgVHJhY2tUb2dnbGUsXG4gIFVuZm9jdXNUb2dnbGVJY29uX2RlZmF1bHQgYXMgVW5mb2N1c1RvZ2dsZUljb24sXG4gIFZpZGVvQ29uZmVyZW5jZSxcbiAgVmlkZW9UcmFjayxcbiAgVm9pY2VBc3Npc3RhbnRDb250ZXh0LFxuICBWb2ljZUFzc2lzdGFudENvbnRyb2xCYXIsXG4gIGZvcm1hdENoYXRNZXNzYWdlTGlua3MsXG4gIGlzVHJhY2tSZWZlcmVuY2U2IGFzIGlzVHJhY2tSZWZlcmVuY2UsXG4gIHNldExvZ0V4dGVuc2lvbixcbiAgc2V0TG9nTGV2ZWwsXG4gIHVzZUF1ZGlvUGxheWJhY2ssXG4gIHVzZUF1ZGlvV2F2ZWZvcm0sXG4gIHVzZUNoYXQsXG4gIHVzZUNoYXRUb2dnbGUsXG4gIHVzZUNsZWFyUGluQnV0dG9uLFxuICB1c2VDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvcixcbiAgdXNlQ29ubmVjdGlvblN0YXRlLFxuICB1c2VDcmVhdGVMYXlvdXRDb250ZXh0LFxuICB1c2VEYXRhQ2hhbm5lbCxcbiAgdXNlRGlzY29ubmVjdEJ1dHRvbixcbiAgdXNlRW5zdXJlQ3JlYXRlTGF5b3V0Q29udGV4dCxcbiAgdXNlRW5zdXJlTGF5b3V0Q29udGV4dCxcbiAgdXNlRW5zdXJlUGFydGljaXBhbnQsXG4gIHVzZUVuc3VyZVJvb20sXG4gIHVzZUVuc3VyZVRyYWNrUmVmLFxuICB1c2VGYWNpbmdNb2RlLFxuICB1c2VGZWF0dXJlQ29udGV4dCxcbiAgdXNlRm9jdXNUb2dnbGUsXG4gIHVzZUdyaWRMYXlvdXQsXG4gIHVzZUlzRW5jcnlwdGVkLFxuICB1c2VJc011dGVkLFxuICB1c2VJc1JlY29yZGluZyxcbiAgdXNlSXNTcGVha2luZyxcbiAgdXNlTGF5b3V0Q29udGV4dCxcbiAgdXNlTGl2ZUtpdFJvb20sXG4gIHVzZUxvY2FsUGFydGljaXBhbnQsXG4gIHVzZUxvY2FsUGFydGljaXBhbnRQZXJtaXNzaW9ucyxcbiAgdXNlTWF5YmVMYXlvdXRDb250ZXh0LFxuICB1c2VNYXliZVBhcnRpY2lwYW50Q29udGV4dCxcbiAgdXNlTWF5YmVSb29tQ29udGV4dCxcbiAgdXNlTWF5YmVUcmFja1JlZkNvbnRleHQsXG4gIHVzZU1lZGlhRGV2aWNlU2VsZWN0LFxuICB1c2VNZWRpYURldmljZXMsXG4gIHVzZU11bHRpYmFuZFRyYWNrVm9sdW1lLFxuICB1c2VQYWdpbmF0aW9uLFxuICB1c2VQYXJ0aWNpcGFudEF0dHJpYnV0ZSxcbiAgdXNlUGFydGljaXBhbnRBdHRyaWJ1dGVzLFxuICB1c2VQYXJ0aWNpcGFudENvbnRleHQsXG4gIHVzZVBhcnRpY2lwYW50SW5mbyxcbiAgdXNlUGFydGljaXBhbnRQZXJtaXNzaW9ucyxcbiAgdXNlUGFydGljaXBhbnRUaWxlLFxuICB1c2VQYXJ0aWNpcGFudFRyYWNrcyxcbiAgdXNlUGFydGljaXBhbnRzLFxuICB1c2VQZXJzaXN0ZW50VXNlckNob2ljZXMsXG4gIHVzZVBpbm5lZFRyYWNrcyxcbiAgdXNlUHJldmlld0RldmljZSxcbiAgdXNlUHJldmlld1RyYWNrcyxcbiAgdXNlUmVtb3RlUGFydGljaXBhbnQsXG4gIHVzZVJlbW90ZVBhcnRpY2lwYW50cyxcbiAgdXNlUm9vbUNvbnRleHQsXG4gIHVzZVJvb21JbmZvLFxuICB1c2VTb3J0ZWRQYXJ0aWNpcGFudHMsXG4gIHVzZVNwZWFraW5nUGFydGljaXBhbnRzLFxuICB1c2VTdGFydEF1ZGlvLFxuICB1c2VTdGFydFZpZGVvLFxuICB1c2VTd2lwZSxcbiAgdXNlVG9rZW4sXG4gIHVzZVRyYWNrQnlOYW1lLFxuICB1c2VUcmFja011dGVkSW5kaWNhdG9yLFxuICB1c2VUcmFja1JlZkNvbnRleHQsXG4gIHVzZVRyYWNrVG9nZ2xlLFxuICB1c2VUcmFja1RyYW5zY3JpcHRpb24sXG4gIHVzZVRyYWNrVm9sdW1lLFxuICB1c2VUcmFja3MsXG4gIHVzZVZpc3VhbFN0YWJsZVVwZGF0ZSxcbiAgdXNlVm9pY2VBc3Npc3RhbnRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/index.mjs\n");

/***/ })

};
;